(function(){"use strict";const z="qid";function W(l){switch(l){case"ja-Hrkt":case"ja":return"『";case"fr":return" : ";case"zh-Hans":return"：";case"zh-Hant":return"「";default:return": "}}function j(l,e,s){return l.replace(/(.*?)(\[VAR 0114\(([0-9A-F]{4})\)\])(?:$|(?=\u{F0000}))/u,(c,t,o,i)=>{const $=parseInt(i,16),g=e[$];return`${o.replaceAll("[","\\[")}󱄀${g}${W(s)}󱄁${t}`})}function K(l){return l.replaceAll(/^(.+)\u{F1100}(.+?)\u{F1101}/gu,'<a class="speaker" data-var="$1">$2</a>')}function L(l,e,s=""){const c=[];return l.length>0&&c.push(`<span class="branch male">${l}</span>`),e.length>0&&c.push(`<span class="branch female">${e}</span>`),s.length>0&&c.push(`<span class="branch neuter">${s}</span>`),c.join('<span class="gender">/</span>')}function v(l,e,s=""){const c=[];return l.length>0&&c.push(`<span class="branch singular">${l}</span>`),e.length>0&&c.push(`<span class="branch plural">${e}</span>`),s.length>0&&c.push(`<span class="branch zero">${s}</span>`),c.join('<span class="number">/</span>')}function O(l,e,s,c){const t=[];l.length>0&&t.push(`<span class="branch male singular">${l}</span>`),e.length>0&&t.push(`<span class="branch female singular">${e}</span>`);const o=t.join('<span class="gender singular">/</span>'),i=[];s.length>0&&i.push(`<span class="branch male plural">${s}</span>`),c.length>0&&i.push(`<span class="branch female plural">${c}</span>`);const $=i.join('<span class="gender plural">/</span>'),g=["number"];l.length>0&&s.length>0&&g.push("male"),e.length>0&&c.length>0&&g.push("female");const h=g.join(" ");return[o,$].join(`<span class="${h}">/</span>`)}function S(...l){return l.filter(e=>e!=="").map((e,s)=>`<span class="branch form form-${s}">${e}</span>`).join('<span class="grammar">/</span>')}function C(l,e,s,c){const t=[];return l.length>0&&t.push(`<span class="branch version-${s}">${l}</span>`),e.length>0&&t.push(`<span class="branch version-${c}">${e}</span>`),t.join('<span class="version">/</span>')}function Y(l){return l.replaceAll(/\u{F0106}(\/?[bi]) *\u{F0107}/gu,"<$1>").replaceAll(/\u{F0106}size=(\d+)\u{F0107}/gu,'<span style="font-size: calc($1 / 32 * 100%)">').replaceAll(/\u{F0106}color=(.*?)\u{F0107}/gu,'<span class="color" style="color: $1">').replaceAll(/\u{F0106}\/(size|color)\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}a href="\{(\d+)\}"\u{F0107}(.+?)\u{F0106}\/a\u{F0107}/gu,'<span class="link" title="󰄄$1}">$2</span>').replaceAll(/\u{F0106}a href="([0-9A-Za-z_]+)"\u{F0107}/gu,'<a class="link" href="#id=go.$1" title="$1">').replaceAll(/\u{F0106}a href=["“]((?:pokemongolive.com)\/[^"]+?)["”]\u{F0107}/gu,'<a class="link" href="http://$1" title="$1" target="_blank" rel="noopener noreferrer nofollow">').replaceAll(/\u{F0106}a href="+(https?:\/\/[^"]+?)"+\u{F0107}/gu,'<a class="link" href="$1" title="$1" target="_blank" rel="noopener noreferrer nofollow">').replaceAll(/\u{F0106}\/a\u{F0107}/gu,"</a>").replaceAll(/\u{F0106}br\u{F0107}/gu,"<br>").replaceAll(/\u{F0106}(taunt|intimidate)\u{F0107}/gu,'<span class="var">󰄆$1󰄇</span>').replaceAll(/(%BREAK%)/gu,'<span class="c">$1</span><br>').replaceAll(/(%PLAYERNAME%)/gu,'<span class="var">$1</span>').replaceAll(/(%(\d+\$)?s)/gu,'<span class="var">$1</span>').replaceAll(/(\{\d+(?::[^\]]+?)?\})/gu,'<span class="var">$1</span>')}const J={ha:["는","은"],wo:["를","을"],ga:["가","이"],to:["와","과"],ni:["로","으로"],ya:["","이"]},Q=l=>S(...J[l]);function q(l){return l.replaceAll(/\u{F0106}attr font=['"]fallback['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="fallback">$1</span>').replaceAll(/\u{F0106}attr color=['"]([0-9A-Fa-f]{6})['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="color" style="color: #$1">$2</span>').replaceAll(/\u{F0106}attr size=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span style="font-size: $1px">$2</span>').replaceAll(/\u{F0106}attr color=['"]([0-9A-Fa-f]{6})['"] size=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="color" style="color: #$1; font-size: $2px">$3</span>').replaceAll(/\u{F0106}attr size=['"](\d+?)['"] height=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span style="font-size: $1px; line-height: $2px">$3</span>').replaceAll(/(\u{F0106}\/?div\u{F0107})/gu,'<span class="div">$1</span>').replaceAll(/\u{F0106}span class=""?word"?"\u{F0107}/gu,'<span class="word">').replaceAll(/\u{F0106}\/span\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}br\u{F0107}/gu,"<br>").replaceAll(/\u{F0100}\[/gu,"󰄂").replaceAll(/\u{F0100}\]/gu,"]").replaceAll(/(\u{F0100}n)/gu,'<span class="literal n">$1</span><br>').replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" M="([^"]*?)" F="([^"]*?)" \]/gu,(e,s,c)=>L(s,c)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" M="([^"]*?)" \]/gu,(e,s)=>L("",s)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" F="([^"]*?)" \]/gu,(e,s)=>L("",s)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?S="([^"]*?)" P="([^"]*?)" \]/gu,(e,s,c)=>v(s,c)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?S="([^"]*?)" \]/gu,(e,s)=>v(s,"")).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?P="([^"]*?)" \]/gu,(e,s)=>v("",s)).replaceAll(/\[Kor:Particle char="(ha|wo|ga|to|ni|ya)" \]/gu,(e,s)=>Q(s)).replaceAll(/(\[(?:Name:.+?) [^[]*?\])/gu,'<span class="var long">$1</span><span class="var short" title="$1">[Name]</span>').replaceAll(/(\[(?:Digit:.+?) [^[]*?\])/gu,'<span class="var long">$1</span><span class="var short" title="$1">[Digit]</span>')}const B=l=>{switch(l){case"en":return"BLOCK";case"fr":return"BLOC";case"it":return"MELLA";case"de":return"RIEGEL";case"es":return"CUBO";default:return"BLOCK"}},X=(l,e)=>{switch(l){case"en":return"Lv";case"fr":return"N.";case"it":return"L.";case"de":return"Lv.";case"es":return e==="RubySapphire"?"Nv":"Nv.";default:return"Lv"}},Z=l=>{switch(l){case"ja-Hrkt":return"Lv";case"en":return"Lv";case"fr":return"N.";case"it":return"L.";case"de":return"Lv.";case"es":return"Nv.";default:return"Lv"}},ll=l=>{switch(l){case"de":return"Lv.";case"es":return"Nv";default:return"Lv"}},al=l=>l==="de"?"AP":"PP",el=()=>"ID",sl=l=>{switch(l){case"ja-Hrkt":return"No";case"en":return"No";case"fr":return"Nº";case"it":return"Nº";case"de":return"Nr.";case"es":return"N.º";default:return"No"}},nl=()=>"Pco",k=[["the "],["The "],["a ","an ",""],["A ","An ",""]],T=[["le ","l’","la ","les "],["Le ","L’","La ","Les "],["un ","une ","des ",""],["Un ","Une ","Des ",""],["au ","à l’","à la ","aux ","à "],["Au ","À l’","À la ","Aux ","À "],["du ","de l’","de la ","des "],["Du ","De l’","De la ","Des "],["de ","d’"],["De ","D’"],["que ","qu’"],["Que ","Qu’"]],M=[["il ","l’","lo ","la ","i ","gli ","le "],["Il ","L’","Lo ","La ","I ","Gli ","Le "],["un ","uno ","una ","un’","dei ","degli ","delle ","del ","dell’","dello ","della "],["Un ","Uno ","Una ","Un’","Dei ","Degli ","Delle ","Del ","Dell’","Dello ","Della "],["del ","dell’","dello ","della ","dei ","degli ","delle "],["Del ","Dell’","Dello ","Della ","Dei ","Degli ","Delle "],["sul ","sull’","sullo ","sulla ","sui ","sugli ","sulle "],["Sul ","Sull’","Sullo ","Sulla ","Sui ","Sugli ","Sulle "],["al ","all’","allo ","alla ","ai ","agli ","alle "],["Al ","All’","Allo ","Alla ","Ai ","Agli ","Alle "],["nel ","nell’","nello ","nella ","nei ","negli ","nelle "],["Nel ","Nell’","Nello ","Nella ","Nei ","Negli ","Nelle "],["e ","ed "],["E ","Ed "],["a ","ad "],["A ","Ad "]],U=[["der ","die ","das "],["Der ","Die ","Das "],["ein ","eine ",""],["Ein ","Eine ",""],["den ","die ","das "],["Den ","Die ","Das "],["einen ","eine ","ein ",""],["Einen ","Eine ","Ein ",""]],G=[["el ","la ","los ","las "],["El ","La ","Los ","Las "],["un ","una ","unos ","unas ",""],["Un ","Una ","Unos ","Unas ",""],["del ","de la ","de los ","de las "],["Del ","De la ","De los ","De las "],["al ","a la ","a los ","a las "],["Al ","A la ","A los ","A las "],["el ","la ","los ","las ",""],["El ","La ","Los ","Las ",""],["al ","a la ","a los ","a las ","a "],["del ","de la ","de los ","de las ","de "],["y ","e "],["Y ","E "],["o ","u "],["O ","U "]],rl=[["",""],["는","은"],["를","을"],["가","이"],["와","과"],["","으"],["","이"],["야","아"]],I=(l,e=!1)=>l-(l<15?3:e?7:5);function pl(l){return l.split("󰀀")[0]}function y(l){return l.search(/[\u{F1000}\u{F1001}]/u)===-1?l:["<dl>",...l.split("󱀀").map(e=>e.split("󱀁")).map(([e,s])=>`<dt>${e}</dt><dd>${s}</dd>`),"</dl>"].join("")}const R=(l,e)=>S(...e[l]),V=l=>S(...rl[l]),cl=(l,e)=>C(l,e,"ruby","sapphire"),ul=(l,e)=>C(l,e,"scarlet","violet"),f=l=>Number(l).toString(16).padStart(2,"0").toUpperCase(),tl=(l,e,s,c,t,o)=>x(l,`#${e}${s}${c}${t==="FF"?"":t}`,o),x=(l,e,s)=>`<span class="color" style="color: ${e}">${s}</span>`,w=(l,e,s,c,t)=>`<span class="color" style="color: #${f(e)}${f(s)}${f(c)}${t==="255"?"":f(t)}">`,Al=(l,e,s,c,t,o,i,$,g)=>`<span class="color gradient" style="--top: #${f(e)}${f(s)}${f(c)}${t==="255"?"":f(t)}; --bottom: #${f(o)}${f(i)}${f($)}${g==="255"?"":f(g)}">`;function ol(l,e="",s="en",c=!0){const t=["RubySapphire","FireRedLeafGreen","Emerald"].includes(e),o=["DiamondPearl","Platinum","HeartGoldSoulSilver"].includes(e),i=["BlackWhite","Black2White2"].includes(e),$=e==="BrilliantDiamondShiningPearl",g=e==="BattleRevolution",h=e==="Ranch",m=e==="GO",F=e==="Masters",d=e==="HOME",Fl=o||i,P=["XY","OmegaRubyAlphaSapphire","SunMoon","UltraSunUltraMoon","Bank"].includes(e),gl=["LetsGoPikachuLetsGoEevee","SwordShield","BrilliantDiamondShiningPearl","LegendsArceus","ScarletViolet","HOME"].includes(e),D=["Stadium","Stadium2"].includes(e),$l=["Colosseum","XD"].includes(e),E=i||P||gl;if(l=pl(l),!c)return l=l.replaceAll("<","&lt;").replaceAll(">","&gt;"),y(l);switch(l=l.replaceAll("\\\\","󰄀").replaceAll("\\[","󰄂").replaceAll("\\{","󰄄").replaceAll("<","󰄆").replaceAll(">","󰄇"),l=l.replaceAll("\\n","󰈀").replaceAll("\\r","󰈁").replaceAll("\\c","󰈂").replaceAll("	","󰈃"),l=o?l.replaceAll("[VAR 0207]","󰈇").replaceAll("[VAR 0208]","󰈈"):l,l=t?l.replaceAll("\\e","󰋿"):l,l=D?l.replaceAll("󰄀n","󰈀"):l,l=D||t||Fl?l.replaceAll("⒆","<sup>P</sup><sub>K</sub>").replaceAll("⒇","<sup>M</sup><sub>N</sub>"):l,l=P?l.replaceAll("","<sup>P</sup><sub>K</sub>").replaceAll("","<sup>M</sup><sub>N</sub>"):l,l=t?l.replaceAll("[POKE]","<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>").replaceAll("[POKEBLOCK]",`<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>󱄂${B(s)}󱄃`).replaceAll("[BLOCK]",`󱄂${B(s)}󱄃`).replaceAll("[POKEMELLA]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>MELLA󱄃").replaceAll("[MELLA]","󱄂MELLA󱄃").replaceAll("[POKEMELLE]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>MELLE󱄃").replaceAll("[MELLE]","󱄂MELLE󱄃").replaceAll("[Pco]",`󱄂${nl()}󱄃`).replaceAll("[UNK_SPACER]"," ").replaceAll("[LV]",`󱄂<span class="literal-small">${X(s)}</span>󱄃`).replaceAll("[LV_2]",`󱄂<span class="literal-small">${Z(s)}</span>󱄃`).replaceAll("[LV_3]",`󱄂<span class="literal-small">${ll(s)}</span>󱄃`).replaceAll("[PP]",`󱄂<span class="literal-small">${al(s)}</span>󱄃`).replaceAll("[ID]",`󱄂<span class="literal-small">${el()}</span>󱄃`).replaceAll("[NO]",`󱄂<span class="literal-small">${sl(s)}</span>󱄃`):l,l=$?l.replaceAll(/\u{F0106}color=(.*?)\u{F0107}(.*?)\u{F0106}\/color\u{F0107}/gu,x).replaceAll("󰄆/color󰄇","").replaceAll(/\u{F0106}size=(.*?)\u{F0107}(.*?)\u{F0106}\/size\u{F0107}/gu,'<span style="font-size: $1">$2</span>').replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\u{F0106}pos=(.*?)\u{F0107}(.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span style="tab-size: $2">$1	$3</span>').replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\u{F0106}line-indent=(.*?)\u{F0107}(.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span style="tab-size: $2">$1	$3</span>'):l,l=o||E?l.replaceAll(/\[VAR FF00\((?!0000)([0-9A-F]{4})\)\](.+?)(?=\[VAR FF00\([0-9A-F]{4}\)\]|$)/gu,(n,a,r)=>`<span class="color" style="color: var(--color-${parseInt(a,16)})">${r}</span>`).replaceAll(/\[VAR FF00\(0000\)\]/gu,""):l,l=i||P?l.replaceAll(/\[VAR BD00\(([0-9A-F]{4}),([0-9A-F]{4}),([0-9A-F]{4})\)\](.+?)(?:\[VAR BD00\(0001,0002,0000\)\]|\[VAR BD01\]|$)/gu,(n,a,r,p,u)=>`<span class="color" style="color: var(--color-${parseInt(a,16)}-${parseInt(r,16)}-${parseInt(p,16)})">${u}</span>`).replaceAll("[VAR BD01]",""):l,l=o?l.replaceAll(/\[VAR FF01\(00C8\)\]\[VAR FF01\(0064\)\]/gu,"").replaceAll(/\[VAR FF01\(00C8\)\](.+?)(?:\[VAR FF01\(0064\)\]|[\u{F0201}\u{F0202}\u{F0200}]|$)/gu,'<span class="line-font-size-200"><span class="text-font-size-200">$1</span></span>').replaceAll("[VAR FF01(0064)]","").replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\[VAR 0203\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r,p)=>`<span style="tab-size: ${parseInt(r,16)}pt">${a}	${p}</span>`).replaceAll(/\[VAR 0203\(([0-9A-F]{4})\)\]/gu,"	").replaceAll(/\[VAR 0204\(([0-9A-F]{4})\)\]/gu,(n,a)=>`<div style="height: ${parseInt(a,16)}pt"></div>`).replaceAll(/\[VAR 0205\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[VAR 0206\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-right">$1</span>'):l,l=E?l.replaceAll(/\[VAR BD02\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[VAR BD03\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r)=>`<span class="line-align-right" style="padding-right: ${parseInt(a,16)}pt">${r}</span>`).replaceAll(/\[VAR BD04\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r)=>`<span class="line-align-left" style="padding-left: ${parseInt(a,16)}pt">${r}</span>`).replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\[VAR BD05\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r,p)=>`<span style="tab-size: ${parseInt(r,16)}pt">${a}	${p}</span>`).replaceAll(/\[VAR BD05\(([0-9A-F]{4})\)\]/gu,"	"):l,l=g?l.replaceAll(/\[ALIGN 1\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-left">$1</span>').replaceAll(/\[ALIGN 2\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[ALIGN 3\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-right">$1</span>'):l,l=d?l.replaceAll(/\u{F0106}(\/?[bu]) *\u{F0107}/giu,"<$1>"):l,e){case"SunMoon":case"UltraSunUltraMoon":l=l.replaceAll(/^\[VAR BD06\([0-9A-F]{4}\)\]([^\u{F0201}\u{F0202}\u{F0200}]*?)\u{F0200}(?=[^\u{F0201}\u{F0202}\u{F0200}]*?[\u{F0201}\u{F0202}]?$)/gu,(n,a)=>`${a}󰈀󱌀`);break;case"LetsGoPikachuLetsGoEevee":case"SwordShield":l=l.replaceAll(/\[VAR BD06\([0-9A-F]{4}\)\]([^\u{F0201}\u{F0202}\u{F0200}]*?)\u{F0200}/gu,(n,a)=>`${a}󰈀󱌀`);break;default:l=l.replaceAll(/\[VAR BD06\([0-9A-F]{4}\)\](.*)$/gu,(n,a)=>a.replaceAll(/(?<!\u{F0202})\u{F0200}/gu,"󰈀󱌀"))}l=o?l.replaceAll("󰈇󰈀",'<span class="c">[VAR 0207]</span><span class="n">\\n</span><br>').replaceAll("󰈈󰈀",'<span class="r">[VAR 0208]</span><span class="n">\\n</span><br>'):l,l=l.replaceAll("󰈁󰈀",'<span class="r">\\r</span><span class="n">\\n</span><br>').replaceAll("󰈂󰈀",'<span class="c">\\c</span><span class="n">\\n</span><br>').replaceAll("󰈀󰈂",'<span class="n">\\n</span><span class="c">\\c</span><br>'),l=o?l.replaceAll("󰈇",'<span class="c">[VAR 0207]</span><br>').replaceAll("󰈈",'<span class="r">[VAR 0208]</span><br>'):l,l=l.replaceAll("󰈁",'<span class="r">\\r</span><br>').replaceAll("󰈂",'<span class="c">\\c</span><br>').replaceAll("󰈀",'<span class="n">\\n</span><br>').replaceAll("󰋿",'<span class="e">\\e</span>').replaceAll("󰈃",'<span class="tab">	</span>');const dl=["ja","ko","zh"].some(n=>s.startsWith(n))?"　":" ";if(l=l.replaceAll("<br>󱌀",`<wbr class="soft"><span class="soft">${dl}</span>`),D){l=l.replaceAll("#71",'<span class="color color-animation">').replaceAll(/(#\d{2})/gu,'<span class="var">$1</span>').replaceAll(/\u{F0106}COL1,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}\u{F0106}COL2,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,Al).replaceAll(/\u{F0106}COL1,LOAD,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,w).replaceAll(/\u{F0106}COL1,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,w).replaceAll(/\u{F0106}COL1,POP\u{F0107}\u{F0106}COL2,POP\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}COL1,POP\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}DIST,([\d.]+)\u{F0107}/gu,'<span class="spacing-$1">').replaceAll(/(\u{F0106}[0-9A-Z, ]+\u{F0107})/gu,'<span class="var">$1</span>').replaceAll(/%%/gu,'<span class="literal">%</span>').replaceAll(/(\u{F0100}(?:CU|CR|B|R))/gu,'<span class="var">$1</span>');const n=l.match(/<span\b/gu)?.length??0,a=l.match(/<\/span>/gu)?.length??0;a<n?l=l.concat("</span>".repeat(n-a)):n<a&&(l="<span>".repeat(a-n).concat(l))}return l=$l?l.replaceAll(/\[unknown5_08_([0-9a-f]{2})_([0-9a-f]{2})_([0-9a-f]{2})_([0-9a-f]{2})\](.*?)(?:\[unknown5_08_ff_ff_ff_ff\]|$|(?=\u{F1000}))/gu,tl).replaceAll("[Player]",'<span class="var">[Player]</span>').replaceAll("[Player_alt]",'<span class="var">[Player_alt]</span>').replaceAll("[Rui]",'<span class="var">[Rui]</span>').replaceAll("[opp_trainer_class]",'<span class="var">[opp_trainer_class]</span>').replaceAll("[opp_trainer_name]",'<span class="var">[opp_trainer_name]</span>').replaceAll("[sent_out_pokemon_1]",'<span class="var">[sent_out_pokemon_1]</span>').replaceAll("[sent_out_pokemon_2]",'<span class="var">[sent_out_pokemon_2]</span>').replaceAll("[speechbubble]",'<span class="var">[speechbubble]</span>').replaceAll("[bubble_or_speaker]",'<span class="var">[bubble_or_speaker]</span>').replaceAll("[maybe_speaker_ID_toggle]",'<span class="var">[maybe_speaker_ID_toggle]</span>').replaceAll("[maybe_location]",'<span class="var">[maybe_location]</span>').replaceAll("[dialogue_end]",'<span class="func">[dialogue_end]</span>').replaceAll("[large_e]",'<span class="var">[large_e]</span>').replaceAll("[large_e+]",'<span class="var">[large_e+]</span>').replaceAll("[furi_kanji]",'<span class="var">[furi_kanji]</span>').replaceAll("[furi_kana]",'<span class="var">[furi_kana]</span>').replaceAll("[furi_close]",'<span class="var">[furi_close]</span>').replaceAll(/(\[some_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[unknown[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[var_[^\]]\])/gu,'<span class="var">$1</span>').replaceAll("󰄆SCOL=0x0d0e0f󰄇",'<span class="func">󰄆SCOL=0x0d0e0f󰄇</span>'):l,l=g?l.replaceAll(/\[COLOR (\d+)\](.*?)(?:\[COLOR \d+\]|[\u{F0201}\u{F0202}\u{F0200}]|$)/gu,'<span class="color" style="color: var(--color-$1)">$2</span>').replaceAll(/(\[VERTOFFSET -?[\d.]+\])/gu,'<span class="vertoffset">$1</span>').replaceAll(/\[FONT ([0126])\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[FONT \d+\]|$)/gu,'<span class="font-pbr-$1">$2</span>').replaceAll(/(\[FONT [\d.]+\])/gu,'<span class="func">$1</span>').replaceAll(/\[SPACING (-?[\d.]+)\](.*?$)/gu,'<span class="spacing-$1">$2</span>'):l,l=h?l.replaceAll(/(%((\d+\$)?(\d*d|\d*\.\d+[fs]m?|ls)|(\(\d+\)%|\d+\$)?\{\}|\(\d+\)))/gu,'<span class="var">$1</span>').replaceAll(/(\$\d+\$)/gu,'<span class="var">$1</span>'):l,l=m?Y(l):l,l=F?q(l):l,l=E?$?l.replaceAll(/\[VAR 13(0[3-6])[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16)),k)).replaceAll(/\[VAR 14(0[3-9A-CF]|10)[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16)),T)).replaceAll(/\[VAR 15(0[3-9A-CF]|1[0-5])[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16)),M)).replaceAll(/\[VAR 16(0[3-9A])[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16)),U)).replaceAll(/\[VAR 17(0[3-9A-E]|1[3-6])[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16),!0),G)):l.replaceAll(/\[VAR 13(0[0-3])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),k)).replaceAll(/\[VAR 14(0[0-9A-B])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),T)).replaceAll(/\[VAR 15(0[0-9A-F])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),M)).replaceAll(/\[VAR 16(0[0-7])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),U)).replaceAll(/\[VAR 17(0[0-9A-F])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),G)):l,s==="ko"&&o?l=l.replaceAll(/\[VAR ((?:0[1346]|34)[0-9A-F]{2})\(([0-9A-F]{4}),([0-9A-F]{4})\)\]/gu,(n,a,r,p)=>`[VAR ${a}(${r})]${V(parseInt(p,16)%8)}`):s==="ko"&&e==="BlackWhite"?l=l.replaceAll(/\[VAR (0[12][0-9A-F]{2})\(([0-9A-F]{4}),([0-9A-F]{4})\)\]/gu,(n,a,r,p)=>`[VAR ${a}(${r})]${V(parseInt(p,16)%8)}`):e==="Black2White2"?l=l.replaceAll(/\[VAR 3400\(([0-9A-F]{4})\)\]/gu,(n,a)=>V(parseInt(a,16)%8)):$?l=l.replaceAll(/\[VAR 1900\(tagParameter=(\d+)\)\]/gu,(n,a)=>V(a)):E&&(l=l.replaceAll(/\[VAR 1900\(([0-9A-F]{4})\)\]/gu,(n,a)=>V(parseInt(a,16)))),l=t?l.replaceAll(/\u{F1102}\u{F1200}(.*?)\u{F1104}(.*?)\u{F1103}/gu,(n,a,r)=>L(a,r)).replaceAll(/\u{F1102}\u{F1207}(.*?)\u{F1104}(.*?)\u{F1103}/gu,(n,a,r)=>cl(a,r)):l,l=E?l.replaceAll(/\[VAR 1100\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,p)=>{const u=parseInt(r,16),A=u+parseInt(a,16);return`${L(p.substring(0,u),p.substring(u,A))}${p.substring(A)}`}).replaceAll(/\[VAR 1100\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),00([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,p,u)=>{const A=parseInt(r,16),_=A+parseInt(a,16),b=_+parseInt(p,16);return`${L(u.substring(0,A),u.substring(A,_),u.substring(_,b))}${u.substring(b)}`}).replaceAll(/\[VAR 1101\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,p)=>{const u=parseInt(r,16),A=u+parseInt(a,16);return`${v(p.substring(0,u),p.substring(u,A))}${p.substring(A)}`}).replaceAll(/\[VAR 1102\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,p,u,A)=>{const _=parseInt(r,16),b=_+parseInt(a,16),N=b+parseInt(u,16),H=N+parseInt(p,16);return`${O(A.substring(0,_),A.substring(_,b),A.substring(b,N),A.substring(N,H))}${A.substring(H)}`}).replaceAll(/\[VAR (?:1104|1106)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,p)=>{const u=parseInt(r,16),A=u+parseInt(a,16);return`${S(p.substring(0,u),p.substring(u,A))}${p.substring(A)}`}).replaceAll(/\[VAR 1105\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),00([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,p,u)=>{const A=parseInt(r,16),_=A+parseInt(a,16),b=_+parseInt(p,16);return`${v(u.substring(0,A),u.substring(A,_),u.substring(_,b))}${u.substring(b)}`}).replaceAll(/\[VAR 1107\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,p)=>{const u=parseInt(r,16),A=u+parseInt(a,16);return`${ul(p.substring(0,u),p.substring(u,A))}${p.substring(A)}`}):l,l=$?l.replaceAll(/\[VAR (?:1[3-7A]00|1901)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?\)\]/gu,(n,a,r)=>L(a,r??"")).replaceAll(/\[VAR (?:1[3-7]01|1902)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?\)\]/gu,(n,a,r)=>v(a,r??"")).replaceAll(/\[VAR (?:1[3-7]02|1903)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)\|([^[<{]*?)\|([^[<{]*?)\|([^[<{]*?)\)\]/gu,(n,a,r,p,u)=>O(a,r,p,u)).replaceAll(/\[VAR (?:130A|1413|1517|160E|1712|1904)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?(?:\|([^[<{]*?))?\)\]/gu,(n,a,r,p)=>v(a,r??"",p??"")).replaceAll(/\[VAR (?:1411|1518)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?(?:,forceGrmID=\d+)?\)\]/gu,(n,a,r)=>S(a,r??"")):l,l=t?l.replaceAll(/(\[DYNAMIC \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[(?:(?:[ABLR]|START|SELECT)_BUTTON|DPAD_(?:UP|DOWN|LEFT|RIGHT|UPDOWN|LEFTRIGHT|NONE))\])/gu,'<span class="var">$1</span>').replaceAll(/(\[EMOJI_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll("[NOP]",'<span class="var">[NOP]</span>').replaceAll(/(\[COLOR [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll("[COLOR]",'<span class="func">[COLOR]</span>').replaceAll(/(\[HIGHLIGHT [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[SHADOW [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[COLOR_HIGHLIGHT_SHADOW [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[PALETTE [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[(?:FONT [^\]]+?|FONT_[^\]]+?)\])/gu,'<span class="func">$1</span>').replaceAll(/(\[PAUSE \d+\])/gu,'<span class="func">$1</span>').replaceAll("[PAUSE_UNTIL_PRESS]",'<span class="func">[PAUSE_UNTIL_PRESS]</span>').replaceAll("[WAIT_SE]",'<span class="func">[WAIT_SE]</span>').replaceAll(/(\[PLAY_BGM [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[ESCAPE \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[PLAY_SE [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[CLEAR \d+\])/gu,'<span class="func">$1</span>').replaceAll(/(\[CLEAR_TO \d+\])/gu,'<span class="func">$1</span>').replaceAll(/(\[MIN_LETTER_SPACING \d+\])/gu,'<span class="func">$1</span>').replaceAll("[PAUSE_MUSIC]",'<span class="func">[PAUSE_MUSIC]</span>').replaceAll("[RESUME_MUSIC]",'<span class="func">[RESUME_MUSIC]</span>').replaceAll("[PLAYER]",'<span class="var">[PLAYER]</span>').replaceAll("[STR_VAR_1]",'<span class="var">[STR_VAR_1]</span>').replaceAll("[STR_VAR_2]",'<span class="var">[STR_VAR_2]</span>').replaceAll("[STR_VAR_3]",'<span class="var">[STR_VAR_3]</span>').replaceAll("[RIVAL]",'<span class="var">[RIVAL]</span>').replaceAll(/(\[B_[^\]]+?\])/gu,'<span class="var">$1</span>'):l,l=o?l.replaceAll(/\[(VAR 013[2-9A-B][^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Digit]</span>').replaceAll(/\[(VAR (?:0[1346]|34)[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Name]</span>').replaceAll(/\[(VAR 02[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl1]</span>').replaceAll(/\[(VAR FF[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl2]</span>'):l,l=E?l.replaceAll(/\[(VAR 01[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Name]</span>').replaceAll(/\[(VAR 02[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Digit]</span>').replaceAll(/\[(VAR 1[0-9A][^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Grm]</span>').replaceAll(/\[(VAR BD[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl1]</span>').replaceAll(/\[(VAR BE[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl2]</span>'):l,l=l.replaceAll("[NULL]",'<span class="null">[NULL]</span>').replaceAll("[COMP]",'<span class="func compressed">[COMP]</span>').replaceAll(/(\[VAR [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[WAIT [\d.]+\])/gu,'<span class="func wait">$1</span>').replaceAll(/(\[SFX [\d.]+\])/gu,'<span class="func sfx">$1</span>').replaceAll(/(\[~ \d+\])/gu,'<span class="unused">$1</span>').replaceAll(/\{([^|}]+)\|([^|}]+)\}/gu,"<ruby>$1<rp>(</rp><rt>$2</rt><rp>)</rp></ruby>").replaceAll(/(\s+$)/gu,'<span class="whitespace-trailing">$1</span>').replaceAll(/(^\s+)/gu,'<span class="whitespace-leading">$1</span>'),l=E?K(l):l,l=l.replaceAll(/\u{F1102}(.+?)\u{F1103}/gu,'<span class="literal">$1</span>'),l=l.replaceAll("󰄀","\\").replaceAll("󰄂","[").replaceAll("󰄄","{").replaceAll("󰄆","&lt;").replaceAll("󰄇","&gt;"),y(l)}const il=(l,e,s,c,t)=>(o,i)=>{if(t===void 0||i===e)return o;for(const[$,{branch:g,line:h}]of Object.entries(t)){const m=`[${$}]`;let F;switch(g){case void 0:F=l[i].get(h);break;case"gender":F=`󱈀${h.map(d=>l[i].get(d)).join("󱄄")}`;break;case"version":F=`󱈇${h.map(d=>l[i].get(d)).join("󱄄")}`;break;case"language":{const d=h[c[i]];d!==void 0&&(F=l[i].get(d));break}}if(F===void 0)return o;s==="BattleRevolution"&&(F=F.substring(19).trim()),o=o.replaceAll(m,`󱄂${F}󱄃`)}return o};self.onmessage=l=>{try{const{collection:e,languages:s,richText:c,speakers:t,literals:o,lines:i,corpusLiterals:$}=l.data,g=il(o,s.indexOf(z),e,s,$),h={...l.data,lines:i.map(m=>m.map((F,d)=>(c&&(t.length>0&&(F=j(F,t[d],s[d])),F=g(F,d)),F=ol(F,e,s[d],c),F)))};postMessage(h)}catch(e){console.error(e);const s={...l.data,richText:!1,error:!0};postMessage(s)}}})();
