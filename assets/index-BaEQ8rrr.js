import{r as h,t as De,c as J,j as o,a as Fe,i as re,B as Ve,b as Be,d as qe,T as ze,u as Ee,E as pe,R as Ue}from"./vendor-ukweU-MP.js";import{R as We}from"./react-dom-Bs0UPXy3.js";import{t as He,a as Ge,i as Ke,f as Je,l as Ze,c as Qe,b as Xe}from"./i18n-en-lF9vSKHI.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();const Ye="modulepreload",et=function(s){return"/poke-corpus/"+s},je={},$=function(e,t,a){let r=Promise.resolve();if(t&&t.length>0){let u=function(i){return Promise.all(i.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),c=n?.nonce||n?.getAttribute("nonce");r=u(t.map(i=>{if(i=et(i),i in je)return;je[i]=!0;const f=i.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":Ye,f||(p.as="script"),p.crossOrigin="",p.href=i,c&&p.setAttribute("nonce",c),document.head.appendChild(p),f)return new Promise((y,v)=>{p.addEventListener("load",y),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(n){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=n,window.dispatchEvent(c),!c.defaultPrevented)throw n}return r.then(n=>{for(const c of n||[])c.status==="rejected"&&l(c.reason);return e().catch(l)})};function tt(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:a,onRegistered:r,onRegisteredSW:l,onRegisterError:n}=s;let c,u;const i=async(m=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(c=await $(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/poke-corpus/sw.js",{scope:"/poke-corpus/",type:"classic"})).catch(m=>{n?.(m)}),!c)return;c.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),c.addEventListener("installed",m=>{m.isUpdate||a?.()}),c.register({immediate:e}).then(m=>{l?l("/poke-corpus/sw.js",m):r?.(m)}).catch(m=>{n?.(m)})}}return u=f(),i}const ve=s=>s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");function Y(s){try{return localStorage.getItem(s)}catch{return null}}function te(s,e){try{localStorage.setItem(s,e)}catch{return}}function st(s){try{localStorage.removeItem(s)}catch{return}}const Le=["system","light","dark"],Ae=s=>Le.some(e=>s===e),nt=s=>typeof s=="string"&&Ae(s)?s:"system",Pe=()=>nt(Y("mode")),fe=500,ot=s=>!Number.isNaN(s)&&Number.isInteger(s)&&s>0,at=()=>{const s=+(Y("corpus-limit")??fe);return Number.isNaN(s)?fe:s},lt=()=>Y("corpus-richText")!=="false",we=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"];function ae(s){const e=Math.min(Math.floor((s.toString().length-1)/3),we.length-1),t={style:"unit",unit:we[e],unitDisplay:e===0?"long":"short",minimumFractionDigits:e===0?0:1,maximumFractionDigits:1,maximumSignificantDigits:3,roundingPriority:"lessPrecision"};return{amount:s/Math.pow(1e3,e),formatParams:{amount:t}}}function rt(s,e=1){return{amount:s,formatParams:{amount:{style:"percent",minimumFractionDigits:e,maximumFractionDigits:e}}}}function Re(s){try{return JSON.parse(s)}catch(e){return console.error(e),null}}function ee(s){console.error(s)}const ct=[{code:"en",name:"English (United States)"},{code:"en-GB",name:"English (United Kingdom)"},{code:"ja",name:"日本語"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français (France)"},{code:"fr-CA",name:"Français (Canada)"},{code:"es",name:"Español (España)"},{code:"it",name:"Italiano"},{code:"ko",name:"한국어"},{code:"zh-Hans",name:"简体中文"},{code:"zh-Hant",name:"繁体中文"}],G=h.createContext(De);function it(s){const e=J.c(60),{showModal:t,language:a,setLanguage:r,richText:l,richTextRef:n,limit:c,limitRef:u}=s,i=h.useContext(G),[f,m]=h.useState(Pe);let p;e[0]!==r||e[1]!==t?(p=d=>{Fe(d.target.value,b=>{b?.some(ht)?(console.error(b),t({message:"options.network",buttons:[{message:"options.close",autoFocus:!0}]})):r(d.target.value)}).catch(ee)},e[0]=r,e[1]=t,e[2]=p):p=e[2];const y=p;let v;e[3]!==f?(v=d=>{const b=d.target.value;Ae(b)&&(m(b),te("mode",b),document.body.classList.replace(`mode-${f}`,`mode-${b}`))},e[3]=f,e[4]=v):v=e[4];const w=v,E=dt;let T;e[5]!==i?(T=i("options.language"),e[5]=i,e[6]=T):T=e[6];let L;e[7]!==T?(L=o.jsx("label",{htmlFor:"language",children:T}),e[7]=T,e[8]=L):L=e[8];let P;e[9]===Symbol.for("react.memo_cache_sentinel")?(P=ct.map(ut),e[9]=P):P=e[9];let g;e[10]!==a||e[11]!==y?(g=o.jsx("select",{name:"language",id:"language",onChange:y,defaultValue:a,autoFocus:!0,translate:"no",children:P}),e[10]=a,e[11]=y,e[12]=g):g=e[12];let _;e[13]!==i?(_=i("options.mode"),e[13]=i,e[14]=_):_=e[14];let j;e[15]!==_?(j=o.jsx("label",{htmlFor:"mode",children:_}),e[15]=_,e[16]=j):j=e[16];let C;e[17]!==i?(C=Le.map(d=>o.jsx("option",{value:d,children:i(`options.modes.${d}`)},d)),e[17]=i,e[18]=C):C=e[18];let S;e[19]!==f||e[20]!==w||e[21]!==C?(S=o.jsx("select",{name:"mode",id:"mode",onChange:w,defaultValue:f,children:C}),e[19]=f,e[20]=w,e[21]=C,e[22]=S):S=e[22];let A;e[23]!==i?(A=i("options.longURL"),e[23]=i,e[24]=A):A=e[24];let R;e[25]!==A?(R=o.jsx("label",{htmlFor:"longURL",children:A}),e[25]=A,e[26]=R):R=e[26];let D,M;e[27]===Symbol.for("react.memo_cache_sentinel")?(D=Y("corpus-longURL")??"false",M=["true","false"],e[27]=D,e[28]=M):(D=e[27],M=e[28]);let O;e[29]!==i?(O=o.jsx("select",{name:"longURL",id:"longURL",onChange:E,defaultValue:D,children:M.map(d=>o.jsx("option",{value:d,children:i(`options.longURLSelect.${d}`)},d))}),e[29]=i,e[30]=O):O=e[30];let k;e[31]!==i?(k=i("options.richText"),e[31]=i,e[32]=k):k=e[32];let N;e[33]!==k?(N=o.jsx("label",{htmlFor:"richText",children:k}),e[33]=k,e[34]=N):N=e[34];const q=l?"true":"false";let W;e[35]===Symbol.for("react.memo_cache_sentinel")?(W=["true","false"],e[35]=W):W=e[35];let x;e[36]!==i?(x=W.map(d=>o.jsx("option",{value:d,children:i(`options.richTextSelect.${d}`)},d)),e[36]=i,e[37]=x):x=e[37];let F;e[38]!==n||e[39]!==q||e[40]!==x?(F=o.jsx("select",{ref:n,name:"richText",id:"richText",defaultValue:q,children:x}),e[38]=n,e[39]=q,e[40]=x,e[41]=F):F=e[41];let B;e[42]!==i?(B=i("options.limit"),e[42]=i,e[43]=B):B=e[43];let H;e[44]!==B?(H=o.jsx("label",{htmlFor:"limit",children:B}),e[44]=B,e[45]=H):H=e[45];let V;e[46]!==c||e[47]!==u?(V=o.jsx("input",{ref:u,type:"number",name:"limit",id:"limit",min:1,defaultValue:c}),e[46]=c,e[47]=u,e[48]=V):V=e[48];let Z;return e[49]!==S||e[50]!==R||e[51]!==O||e[52]!==N||e[53]!==F||e[54]!==H||e[55]!==V||e[56]!==L||e[57]!==g||e[58]!==j?(Z=o.jsx("div",{className:"options",children:o.jsxs("div",{className:"options-grid",children:[L,g,j,S,R,O,N,F,H,V]})}),e[49]=S,e[50]=R,e[51]=O,e[52]=N,e[53]=F,e[54]=H,e[55]=V,e[56]=L,e[57]=g,e[58]=j,e[59]=Z):Z=e[59],Z}function ut(s){return o.jsx("option",{value:s.code,lang:s.code,children:s.name},s.code)}function dt(s){const e=s.target.value;(e==="true"||e==="false")&&te("corpus-longURL",e)}function ht(s){return!s.message.includes("Unknown variable dynamic import")}function ft(s){const e=J.c(21),t=h.useContext(G),{showModal:a,setRichText:r,setLimit:l}=s,n=h.useRef(null),c=h.useRef(null);let u;e[0]!==l||e[1]!==r?(u=()=>{if(n.current!==null){const P=n.current.value;(P==="true"||P==="false")&&(te("corpus-richText",P),r(P!=="false"))}if(c.current!==null){const P=c.current.valueAsNumber;ot(P)&&(te("corpus-limit",P.toString()),l(P))}},e[0]=l,e[1]=r,e[2]=u):u=e[2];const i=u;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=["modal-options"],e[3]=f):f=e[3];let m;e[4]!==s?(m=o.jsx(it,{...s,richTextRef:n,limitRef:c}),e[4]=s,e[5]=m):m=e[5];let p;e[6]!==i?(p=[{message:"options.close",callback:i}],e[6]=i,e[7]=p):p=e[7];let y;e[8]!==i||e[9]!==m||e[10]!==p?(y={classes:f,messageElement:m,buttons:p,cancelCallback:i},e[8]=i,e[9]=m,e[10]=p,e[11]=y):y=e[11];const v=y;let w;e[12]!==v||e[13]!==a?(w=()=>{a(v)},e[12]=v,e[13]=a,e[14]=w):w=e[14];let E;e[15]===Symbol.for("react.memo_cache_sentinel")?(E=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#gear"})}),e[15]=E):E=e[15];let T;e[16]!==t?(T=t("options.options"),e[16]=t,e[17]=T):T=e[17];let L;return e[18]!==w||e[19]!==T?(L=o.jsxs("button",{className:"header-options",onClick:w,children:[E,T]}),e[18]=w,e[19]=T,e[20]=L):L=e[20],L}function mt(s){return new Worker("/poke-corpus/assets/searchWorkerManager-B9NKkSIu.js",{name:s?.name})}function gt(s){return new Worker("/poke-corpus/assets/textWorker-WCP-M7BK.js",{name:s?.name})}const pt=["error","regex","noMatch","network","boolean.parentheses","boolean.regex","boolean.slash","boolean.quote","boolean.operand","boolean.empty","boolean.where"],xt=s=>pt.some(e=>s===e),bt=["waiting","loading","processing","collecting"],Te=s=>bt.some(e=>s===e),se=["exact","regex","boolean","all"],xe=s=>se.some(e=>s===e),Me={id:"",file:"",query:"",type:"all",caseInsensitive:!0,common:!0,script:!0,showAllLanguages:!0,run:!1},jt=s=>({...Me,collections:s.collections.filter(e=>s.getCollection(e).structured),languages:s.languages}),vt=s=>{function e(d){const b={};return d.id!==void 0&&(b.id=d.id),d.file!==void 0&&(b.file=d.file),d.run!==void 0&&(b.run=d.run.toString()),new URLSearchParams({query:d.query,type:d.type,caseInsensitive:d.caseInsensitive.toString(),common:d.common.toString(),script:d.script.toString(),showAllLanguages:d.showAllLanguages.toString(),collections:d.collections.join(","),languages:d.languages.join(","),...b}).toString()}function t(d){const b=new URLSearchParams(d);return{id:a(b.get("id")),file:a(b.get("file")),query:a(b.get("query")),type:l(b.get("type")??(b.get("regex")==="true"?"regex":null),xe),caseInsensitive:r(b.get("caseInsensitive")),common:r(b.get("common")),script:r(b.get("script")),showAllLanguages:r(b.get("showAllLanguages")),collections:n(b.get("collections"),s.isCollectionKey),languages:n(b.get("languages"),s.isLanguageKey,c),run:r(b.get("run"))}}function a(d){return d??void 0}function r(d){switch(d){case"true":return!0;case"false":return!1}}function l(d,b){if(d!==null&&b(d))return d}function n(d,b,I=z=>z){if(d!==null)return d.split(",").map(I).filter(b)}function c(d){switch(d){case"qid-ZZ":case"ja-JP":case"en-US":case"fr-FR":case"it-IT":case"de-DE":case"es-ES":case"ko-KR":return d.split("-",1)[0];case"ja-Hrkt-JP":return"ja-Hrkt";case"zh-CN":return"zh-Hans";case"zh-TW":return"zh-Hant";default:return d}}const u=s.languages.filter(d=>d!=="en-AU"),i=s.collections,f=i.length^u.length<<4,m=2,p=Math.ceil(u.length/8),y=Math.ceil(i.length/8),v=p+y,w=64,E=Math.ceil(Math.log2(u.length+i.length)),T=m+v,L=d=>btoa(String.fromCodePoint(...d)).replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),P=d=>Uint8Array.from(atob(d.replaceAll("_","/").replaceAll("-","+")),b=>b.charCodeAt(0));function g(d){const b={};d.id!==void 0&&(b.id=d.id),d.file!==void 0&&(b.file=d.file);const I=j(d);return q(I),new URLSearchParams({...b,q:d.query,s:L(I)}).toString()}function _(d){const b=new URLSearchParams(d),I={id:a(b.get("id")),file:a(b.get("file")),query:a(b.get("q"))},z=a(b.get("s"));if(!z)return I;try{const U=P(z).subarray(0,T);return W(U),{...I,...C(U)}}catch{return I}}function j(d){d={...d,languages:d.languages.map(U=>U==="en-AU"?"en-GB":U)};const b=new Uint8Array(T);b[1]=+(d.run??Me.run)<<0|+d.caseInsensitive<<1|+d.common<<2|+d.script<<3|se.indexOf(d.type)<<4|+!d.showAllLanguages<<7;const I=b.subarray(m);S(d,I),R(I,b.subarray(1,2));let z=b.length;for(;b[z-1]===0&&z>1;)z--;return b.subarray(0,z)}function C(d){const b=new Uint8Array(v);d[1]&w?A(d.subarray(m),b):b.set(d.subarray(m));const I=u.filter((K,Q)=>N(b,Q)),z=i.filter((K,Q)=>N(b,8*p+Q)),U=I.indexOf("en-GB");return U!==-1&&I.splice(U+1,0,"en-AU"),{run:(d[1]&1)!==0,caseInsensitive:(d[1]&2)!==0,common:(d[1]&4)!==0,script:(d[1]&8)!==0,type:se[(d[1]&48)>>4],showAllLanguages:(d[1]&128)===0,languages:I,collections:z}}function S(d,b){u.forEach((I,z)=>{d.languages.includes(I)&&O(b,z)}),i.forEach((I,z)=>{d.collections.includes(I)&&O(b,8*p+z)})}function A(d,b){const I=M(d);u.forEach((z,U)=>{I.next().value&&O(b,U)}),i.forEach((z,U)=>{I.next().value&&O(b,8*p+U)})}function R(d,b){const I=N(d,0),z=D(d,I);let U=d.length;for(;d[U-1]===0;)U--;if(1+z.length*E<8*U){b[0]|=w,d.fill(0),I||O(d,0);let K=1;z.forEach(([Q])=>{for(let X=0;X<E;K++,X++)O(d,K,Q>>X&1)})}}function D(d,b){const I=[[0,b]];return u.forEach((z,U)=>{const K=N(d,U);I[I.length-1][1]===K?I[I.length-1][0]++:I.push([1,K])}),i.forEach((z,U)=>{const K=N(d,8*p+U);I[I.length-1][1]===K?I[I.length-1][0]++:I.push([1,K])}),I.pop(),I}function*M(d){const b=new Uint8Array(v);b.set(d);let I=!N(b,0);for(let z=1;z+E<=b.length*8;){let U=0;for(let K=0;K<E;z++,K++)U|=k(b,z)<<K;if(U===0)break;for(;U>0;)yield I,U--;I=!I}for(;;)yield I}function O(d,b,I=1){d[b>>3]|=I<<(b&7)}function k(d,b){return d[b>>3]>>(b&7)&1}function N(d,b){return k(d,b)===1}function q(d){const b=d[0]=x(d);F(b,d)}function W(d){const b=d[0];if(F(b,d),b!==x(d))throw Error("invalid checksum")}function x(d,b=1){return d.subarray(b).reduce((I,z)=>I+z&255,0)^f&255}function F(d,b,I=1){let z=B(d);for(let U=I;U<b.length;U++)b[U]^=z>>24,z=H(z)}const B=d=>2480367069*d&4294967295,H=d=>2438952949*d+2654435769&4294967295;function V(d){return(Y("corpus-longURL")==="true"?e:g)(d)}function Z(d){const b=new URLSearchParams(d);return(b.get("q")||b.get("s")?_:t)(d)}return{_bytesBase64:T,_searchParamsToQueryString:e,_queryStringToSearchParams:t,_searchParamsToBase64:g,_base64ToSearchParams:_,_serializeByteArray:j,_deserializeByteArray:C,_encryptBytes:q,_decryptBytes:W,searchParamsToHash:V,hashToSearchParams:Z}};function Ne(s){return vt(s)}const ne="qid",wt="zxx",_t=s=>s!==null&&typeof s=="object"&&"hash"in s&&typeof s.hash=="string"&&"size"in s&&typeof s.size=="number",yt=s=>{const e=Object.entries(s.corpus.collections);return Object.fromEntries(e.flatMap(([t,a])=>a.languages.flatMap(r=>a.files.map(l=>ce(t,r,l)))).map((t,a)=>[t,{hash:s.hashes[a],size:s.sizes[a]}]))},St=s=>{const e=s.corpus,t=Object.keys(e.collections),a=Object.entries(e.collections),r=yt(s);return{_corpus:e,collections:t,languages:e.languages,entries:a,metadata:r,getCollection:l=>e.collections[l],isCollectionKey:l=>t.some(n=>l===n),isLanguageKey:l=>e.languages.some(n=>l===n)}},ce=(s,e,t)=>`corpus/${s}/${e}_${t}.txt.gz`;function Ie(s){return{corpus:s._corpus,metadata:s.metadata}}const Ct=(s,e,t)=>{const a=s[e];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((r,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})};re.use(Ve).use(Be).use(qe((s,e)=>Ct(Object.assign({"./de/collections.json":()=>$(()=>import("./i18n-de-DRYVnmdY.js").then(t=>t.c),[]),"./de/files.json":()=>$(()=>import("./i18n-de-DRYVnmdY.js").then(t=>t.f),[]),"./de/languages.json":()=>$(()=>import("./i18n-de-DRYVnmdY.js").then(t=>t.l),[]),"./de/translation.json":()=>$(()=>import("./i18n-de-DRYVnmdY.js").then(t=>t.t),[]),"./de/tutorial.json":()=>$(()=>import("./i18n-de-DRYVnmdY.js").then(t=>t.a),[]),"./en-GB/translation.json":()=>$(()=>import("./i18n-en-lF9vSKHI.js").then(t=>t.m),[]),"./en/collections.json":()=>$(()=>import("./i18n-en-lF9vSKHI.js").then(t=>t.e),[]),"./en/files.json":()=>$(()=>import("./i18n-en-lF9vSKHI.js").then(t=>t.h),[]),"./en/icons.json":()=>$(()=>import("./i18n-en-lF9vSKHI.js").then(t=>t.j),[]),"./en/languages.json":()=>$(()=>import("./i18n-en-lF9vSKHI.js").then(t=>t.g),[]),"./en/translation.json":()=>$(()=>import("./i18n-en-lF9vSKHI.js").then(t=>t.d),[]),"./en/tutorial.json":()=>$(()=>import("./i18n-en-lF9vSKHI.js").then(t=>t.k),[]),"./es/collections.json":()=>$(()=>import("./i18n-es-CfRjMuHJ.js").then(t=>t.c),[]),"./es/files.json":()=>$(()=>import("./i18n-es-CfRjMuHJ.js").then(t=>t.f),[]),"./es/languages.json":()=>$(()=>import("./i18n-es-CfRjMuHJ.js").then(t=>t.l),[]),"./es/translation.json":()=>$(()=>import("./i18n-es-CfRjMuHJ.js").then(t=>t.t),[]),"./es/tutorial.json":()=>$(()=>import("./i18n-es-CfRjMuHJ.js").then(t=>t.a),[]),"./fr-CA/translation.json":()=>$(()=>import("./i18n-fr-nQk2IQO9.js").then(t=>t.t),[]),"./fr-CA/tutorial.json":()=>$(()=>import("./i18n-fr-nQk2IQO9.js").then(t=>t.a),[]),"./fr/collections.json":()=>$(()=>import("./i18n-fr-nQk2IQO9.js").then(t=>t.c),[]),"./fr/files.json":()=>$(()=>import("./i18n-fr-nQk2IQO9.js").then(t=>t.f),[]),"./fr/languages.json":()=>$(()=>import("./i18n-fr-nQk2IQO9.js").then(t=>t.l),[]),"./fr/translation.json":()=>$(()=>import("./i18n-fr-nQk2IQO9.js").then(t=>t.b),[]),"./fr/tutorial.json":()=>$(()=>import("./i18n-fr-nQk2IQO9.js").then(t=>t.d),[]),"./it/collections.json":()=>$(()=>import("./i18n-it-xvyH-bOh.js").then(t=>t.c),[]),"./it/files.json":()=>$(()=>import("./i18n-it-xvyH-bOh.js").then(t=>t.f),[]),"./it/languages.json":()=>$(()=>import("./i18n-it-xvyH-bOh.js").then(t=>t.l),[]),"./it/translation.json":()=>$(()=>import("./i18n-it-xvyH-bOh.js").then(t=>t.t),[]),"./it/tutorial.json":()=>$(()=>import("./i18n-it-xvyH-bOh.js").then(t=>t.a),[]),"./ja/collections.json":()=>$(()=>import("./i18n-ja-g7NjteIq.js").then(t=>t.c),[]),"./ja/files.json":()=>$(()=>import("./i18n-ja-g7NjteIq.js").then(t=>t.f),[]),"./ja/icons.json":()=>$(()=>import("./i18n-ja-g7NjteIq.js").then(t=>t.i),[]),"./ja/languages.json":()=>$(()=>import("./i18n-ja-g7NjteIq.js").then(t=>t.l),[]),"./ja/translation.json":()=>$(()=>import("./i18n-ja-g7NjteIq.js").then(t=>t.t),[]),"./ja/tutorial.json":()=>$(()=>import("./i18n-ja-g7NjteIq.js").then(t=>t.a),[]),"./ko/collections.json":()=>$(()=>import("./i18n-ko-BdfvBmpS.js").then(t=>t.c),[]),"./ko/files.json":()=>$(()=>import("./i18n-ko-BdfvBmpS.js").then(t=>t.f),[]),"./ko/languages.json":()=>$(()=>import("./i18n-ko-BdfvBmpS.js").then(t=>t.l),[]),"./ko/translation.json":()=>$(()=>import("./i18n-ko-BdfvBmpS.js").then(t=>t.t),[]),"./ko/tutorial.json":()=>$(()=>import("./i18n-ko-BdfvBmpS.js").then(t=>t.a),[]),"./zh-Hans/collections.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.c),[]),"./zh-Hans/files.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.f),[]),"./zh-Hans/languages.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.l),[]),"./zh-Hans/translation.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.t),[]),"./zh-Hans/tutorial.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.a),[]),"./zh-Hant/collections.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.b),[]),"./zh-Hant/files.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.d),[]),"./zh-Hant/languages.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.e),[]),"./zh-Hant/translation.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.g),[]),"./zh-Hant/tutorial.json":()=>$(()=>import("./i18n-zh-D0KTTWuw.js").then(t=>t.h),[])}),`./${s}/${e}.json`,3))).init({keySeparator:".",nsSeparator:":",fallbackLng:"en",ns:["translation","collections","languages","files","icons","tutorial"],resources:{en:{translation:Xe,collections:Qe,languages:Ze,files:Je,icons:Ke,tutorial:Ge},"en-GB":{translation:He}},partialBundledLanguages:!0,detection:{order:["querystring","localStorage","navigator"]},react:{hashTransKey:()=>!1}}).catch(ee);function me(s,e=4){let t=0;for(let a=0;a<s.length;a++)t+=s.charCodeAt(a)>255?1:.5;return t<=e?void 0:{fontSize:`${e*100/t}%`,scale:`1 ${t/e}`,whiteSpace:"nowrap"}}function kt(s,e){if(e.length===0)return new Set(s.collections);const t=new Set,a=new Set(e);for(const[r,l]of s.entries)l.languages.some(n=>a.has(n))&&t.add(r);return t}function Et(s,e){if(e.length===0)return new Set(s.languages);const t=new Set;for(const a of e)for(const r of s.getCollection(a).languages)t.add(r);return t}function Lt(s){const e=J.c(38),{corpus:t,language:a,collections:r,languages:l,setCollections:n}=s,c=h.useContext(G);let u;e[0]!==a?(u=["ja","ko","zh"].some(C=>a.startsWith(C)),e[0]=a,e[1]=u):u=e[1];const i=u;let f,m;if(e[2]!==r||e[3]!==t||e[4]!==i||e[5]!==l||e[6]!==n||e[7]!==c){const C=kt(t,l);f="search-collections";let S;e[10]!==c?(S=A=>[A,c(`collections:${A}.name`),c(`collections:${A}.short`)],e[10]=c,e[11]=S):S=e[11],m=t.collections.map(S).map(A=>{const[R,D,M]=A;return o.jsxs("div",{className:`search-collection search-${C.has(R)?"valid":"invalid"}`,children:[o.jsx("input",{type:"checkbox",name:`collection-${R}`,id:`collection-${R}`,checked:r.includes(R),onChange:O=>{n(k=>O.target.checked?k.concat([R]):k.filter(N=>N!==R))}}),o.jsx("label",{htmlFor:`collection-${R}`,style:i?me(M):void 0,children:D===M?D:o.jsx("abbr",{title:D,children:o.jsx("span",{translate:"no",children:M})})})]},R)}),e[2]=r,e[3]=t,e[4]=i,e[5]=l,e[6]=n,e[7]=c,e[8]=f,e[9]=m}else f=e[8],m=e[9];let p;e[12]!==f||e[13]!==m?(p=o.jsx("div",{className:f,children:m}),e[12]=f,e[13]=m,e[14]=p):p=e[14];const y=r.length===t.collections.length;let v;e[15]!==t.collections||e[16]!==n?(v=()=>{n(t.collections)},e[15]=t.collections,e[16]=n,e[17]=v):v=e[17];let w;e[18]!==c?(w=c("selectAll"),e[18]=c,e[19]=w):w=e[19];let E;e[20]!==y||e[21]!==v||e[22]!==w?(E=o.jsx("button",{disabled:y,onClick:v,children:w}),e[20]=y,e[21]=v,e[22]=w,e[23]=E):E=e[23];const T=r.length===0;let L;e[24]!==n?(L=()=>{n([])},e[24]=n,e[25]=L):L=e[25];let P;e[26]!==c?(P=c("deselectAll"),e[26]=c,e[27]=P):P=e[27];let g;e[28]!==L||e[29]!==P||e[30]!==T?(g=o.jsx("button",{disabled:T,onClick:L,children:P}),e[28]=L,e[29]=P,e[30]=T,e[31]=g):g=e[31];let _;e[32]!==g||e[33]!==E?(_=o.jsxs("div",{className:"item-group",children:[E,g]}),e[32]=g,e[33]=E,e[34]=_):_=e[34];let j;return e[35]!==_||e[36]!==p?(j=o.jsxs(o.Fragment,{children:[p,_]}),e[35]=_,e[36]=p,e[37]=j):j=e[37],j}function At(s){const e=J.c(38),{corpus:t,language:a,collections:r,languages:l,setLanguages:n}=s,c=h.useContext(G);let u;e[0]!==a?(u=["ja","ko","zh"].some(C=>a.startsWith(C)),e[0]=a,e[1]=u):u=e[1];const i=u;let f,m;if(e[2]!==r||e[3]!==t||e[4]!==i||e[5]!==l||e[6]!==n||e[7]!==c){const C=Et(t,r);f="search-languages";let S;e[10]!==c?(S=A=>{let R=A,D=[A];return A==="en-GB"&&(R="en-ZZ",D=["en-GB","en-AU"]),[R,D,c(`languages:${R}.name`),c(`languages:${R}.code`)]},e[10]=c,e[11]=S):S=e[11],m=t.languages.filter(Pt).map(S).map(A=>{const[R,D,M,O]=A;return o.jsxs("div",{className:`search-language search-${D.some(k=>C.has(k))?"valid":"invalid"}`,children:[o.jsx("input",{type:"checkbox",name:`language-${R}`,id:`language-${R}`,checked:D.some(k=>l.includes(k)),onChange:k=>{n(N=>k.target.checked?N.concat(D):N.filter(q=>!D.includes(q)))}}),o.jsxs("label",{htmlFor:`language-${R}`,children:[o.jsx("span",{className:"search-language-code",children:o.jsx("abbr",{title:M,children:o.jsx("span",{translate:"no",children:O})})}),o.jsx("span",{className:"search-language-name",style:i?me(M,12):me(M,15),children:M})]})]},R)}),e[2]=r,e[3]=t,e[4]=i,e[5]=l,e[6]=n,e[7]=c,e[8]=f,e[9]=m}else f=e[8],m=e[9];let p;e[12]!==f||e[13]!==m?(p=o.jsx("div",{className:f,children:m}),e[12]=f,e[13]=m,e[14]=p):p=e[14];const y=l.length===t.languages.length;let v;e[15]!==t.languages||e[16]!==n?(v=()=>{n(t.languages)},e[15]=t.languages,e[16]=n,e[17]=v):v=e[17];let w;e[18]!==c?(w=c("selectAll"),e[18]=c,e[19]=w):w=e[19];let E;e[20]!==y||e[21]!==v||e[22]!==w?(E=o.jsx("button",{disabled:y,onClick:v,children:w}),e[20]=y,e[21]=v,e[22]=w,e[23]=E):E=e[23];const T=l.length===0;let L;e[24]!==n?(L=()=>{n([])},e[24]=n,e[25]=L):L=e[25];let P;e[26]!==c?(P=c("deselectAll"),e[26]=c,e[27]=P):P=e[27];let g;e[28]!==L||e[29]!==P||e[30]!==T?(g=o.jsx("button",{disabled:T,onClick:L,children:P}),e[28]=L,e[29]=P,e[30]=T,e[31]=g):g=e[31];let _;e[32]!==g||e[33]!==E?(_=o.jsxs("div",{className:"item-group",children:[E,g]}),e[32]=g,e[33]=E,e[34]=_):_=e[34];let j;return e[35]!==_||e[36]!==p?(j=o.jsxs(o.Fragment,{children:[p,_]}),e[35]=_,e[36]=p,e[37]=j):j=e[37],j}function Pt(s){return s!=="en-AU"}function Rt(s){const e=J.c(13),{corpus:t,language:a,filtersVisible:r,collections:l,setCollections:n,languages:c,setLanguages:u}=s,i=h.useRef(null);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>i.current?.style.setProperty("--search-filters-height",`${i.current.scrollHeight}px`),e[0]=f):f=e[0];const m=f;let p,y;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{if(!CSS.supports("interpolate-size","allow-keywords"))return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},y=[],e[1]=p,e[2]=y):(p=e[1],y=e[2]),h.useEffect(p,y);const v=`search-filters search-filters-${r?"show":"hide"}`;let w;e[3]!==l||e[4]!==t||e[5]!==a||e[6]!==c||e[7]!==n||e[8]!==u?(w=o.jsxs(o.Fragment,{children:[o.jsx(Lt,{corpus:t,language:a,collections:l,languages:c,setCollections:n}),o.jsx("div",{className:"search-filters-divider"}),o.jsx(At,{corpus:t,language:a,collections:l,languages:c,setLanguages:u})]}),e[3]=l,e[4]=t,e[5]=a,e[6]=c,e[7]=n,e[8]=u,e[9]=w):w=e[9];let E;return e[10]!==v||e[11]!==w?(E=o.jsx("div",{ref:i,className:v,children:w}),e[10]=v,e[11]=w,e[12]=E):E=e[12],E}const _e=s=>Array.isArray(s)&&s.every(e=>typeof e=="string"),Tt=(s,e)=>{const t=s.languages.filter(n=>n.startsWith(e.split("-")[0])),a={...jt(s),languages:t.length===0?s.languages.filter(n=>n.startsWith("en")):t},r=Y("corpus-params");if(r===null)return a;const l=Re(r);return typeof l=="object"&&l!==null&&("query"in l&&typeof l.query=="string"&&(a.query=l.query),"type"in l&&xe(l.type)&&(a.type=l.type),"caseInsensitive"in l&&typeof l.caseInsensitive=="boolean"&&(a.caseInsensitive=l.caseInsensitive),"common"in l&&typeof l.common=="boolean"&&(a.common=l.common),"script"in l&&typeof l.script=="boolean"&&(a.script=l.script),"showAllLanguages"in l&&typeof l.showAllLanguages=="boolean"&&(a.showAllLanguages=l.showAllLanguages),"collections"in l&&_e(l.collections)&&l.collections.every(n=>s.isCollectionKey(n))&&(a.collections=l.collections),"languages"in l&&_e(l.languages)&&l.languages.every(n=>s.isLanguageKey(n))&&(a.languages=l.languages)),a},Mt=[se[3],se[0],se[1],se[2]];function Nt({corpus:s,language:e,waiting:t,inProgress:a,postToWorker:r,terminateWorker:l}){const n=h.useContext(G),c=h.useMemo(()=>Tt(s,e),[s,e]),[u,i]=h.useState(c.query),[f,m]=h.useState(c.type),[p,y]=h.useState(c.caseInsensitive),[v,w]=h.useState(c.common),[E,T]=h.useState(c.script),[L,P]=h.useState(c.showAllLanguages),[g,_]=h.useState(c.collections),[j,C]=h.useState(c.languages),[S,A]=h.useState((Y("corpus-filtersVisible")??(window.location.hash?"false":"true"))!=="false"),R=h.useMemo(()=>Ne(s),[s]),D=h.useCallback(()=>{const x=R.hashToSearchParams(window.location.hash.substring(1));if(x.query!==void 0&&i(x.query),x.type!==void 0&&m(x.type),x.caseInsensitive!==void 0&&y(x.caseInsensitive),x.common!==void 0&&w(x.common),x.script!==void 0&&T(x.script),x.showAllLanguages!==void 0&&P(x.showAllLanguages),x.collections!==void 0&&_(x.collections),x.languages!==void 0&&C(x.languages),x.id!==void 0&&x.id!==""){const F=x.id.split(".")[0];r({query:`^${ve(x.id)}$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(B=>s.getCollection(B).id===F),languages:[ne]});return}if(x.file!==void 0&&x.file!==""){const F=x.file.split(".")[0];r({query:`^${ve(x.file)}\\..*$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(B=>s.getCollection(B).id===F),languages:[ne]});return}if(x.run!==void 0&&x.run){const F={query:x.query??c.query,type:x.type??c.type,caseInsensitive:x.caseInsensitive??c.caseInsensitive,common:x.common??c.common,script:x.script??c.script,showAllLanguages:x.showAllLanguages??c.showAllLanguages,collections:x.collections??c.collections,languages:x.languages??c.languages};window.location.hash=R.searchParamsToHash(F),r(F);return}Y("corpus-filtersVisible")===null&&A(!x.query||!x.collections||!x.languages)},[r,c]);h.useEffect(()=>{window.location.hash&&D()},[]),h.useEffect(()=>(window.addEventListener("hashchange",D),()=>{window.removeEventListener("hashchange",D)}),[D]),h.useEffect(()=>{te("corpus-params",JSON.stringify({query:u,type:f,caseInsensitive:p,common:v,script:E,showAllLanguages:L,collections:g,languages:j}))},[u,f,p,v,E,L,g,j]);const M=x=>{x.preventDefault(),Y("corpus-filtersVisible")||te("corpus-filtersVisible",S.toString());const F=document.getElementsByClassName("view-search").item(0);F&&F.scrollHeight>document.body.clientHeight&&A(!1);const B={query:u,type:f,caseInsensitive:p,common:v,script:E,showAllLanguages:L,collections:g,languages:j};window.location.hash=R.searchParamsToHash(B),r(B)},O=()=>{l()},k=()=>{const x=!S;A(x),te("corpus-filtersVisible",x.toString())},N=x=>{const F=x.target.value;xe(F)&&m(F)},q=t||a||u.length===0||g.length===0||j.length===0,W=h.useMemo(()=>o.jsx(Rt,{corpus:s,language:e,filtersVisible:S,collections:g,setCollections:_,languages:j,setLanguages:C}),[e,S,g,j]);return o.jsxs("form",{className:"search-form",role:"search",onSubmit:M,children:[o.jsxs("div",{className:"search-bar",children:[o.jsxs("div",{className:"item-group",children:[o.jsx("label",{htmlFor:"query",children:n("query")}),o.jsx("input",{type:"search",name:"query",id:"query",value:u,onChange:x=>{i(x.target.value)}}),o.jsxs("div",{className:"btn-alternate-container",children:[o.jsx("input",{id:"submit",type:"submit",className:a?"invisible":"visible",value:n("search"),disabled:q}),o.jsx("button",{type:"button",className:a?"visible":"invisible",onClick:O,disabled:!a,children:n("cancel")})]}),o.jsx("button",{id:"filters",type:"button",className:S?"active":void 0,onClick:k,children:n("filters")}),o.jsx("select",{name:"type",id:"type",onChange:N,value:f,title:n("searchType.searchType"),"aria-label":n("searchType.searchType"),children:Mt.map(x=>o.jsx("option",{value:x,children:n(`searchType.${x}`)},x))})]}),o.jsxs("div",{className:"item-group search-option-group",children:[o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"caseInsensitive",id:"caseInsensitive",checked:p,onChange:x=>{y(x.target.checked)}}),o.jsx("label",{htmlFor:"caseInsensitive",children:n("caseInsensitive")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"common",id:"common",checked:v,onChange:x=>{w(x.target.checked)}}),o.jsx("label",{htmlFor:"common",children:n("common")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"script",id:"script",checked:E,onChange:x=>{T(x.target.checked)}}),o.jsx("label",{htmlFor:"script",children:n("script")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"showAllLanguages",id:"showAllLanguages",checked:L,onChange:x=>{P(x.target.checked)}}),o.jsx("label",{htmlFor:"showAllLanguages",children:n("showAllLanguages")})]})]})]}),W]})}function It(s){const e=J.c(10),{src:t,active:a}=s,r=a===void 0?!0:a,l=h.useRef(null);let n,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{l.current?.classList.add("spinner-stopped")},c=[],e[0]=n,e[1]=c):(n=e[0],c=e[1]),h.useEffect(n,c);let u,i;e[2]!==r?(u=()=>{const v=l.current;if(v!==null){const w=()=>{r||v.classList.add("spinner-stopped")};return v.addEventListener("animationiteration",w),()=>{v.removeEventListener("animationiteration",w)}}},i=[r],e[2]=r,e[3]=u,e[4]=i):(u=e[3],i=e[4]),h.useEffect(u,i);const f=r?"spinner-active":"spinner-inactive";let m;e[5]!==f?(m=["spinner",f],e[5]=f,e[6]=m):m=e[6];const p=m.join(" ");let y;return e[7]!==t||e[8]!==p?(y=o.jsx("img",{ref:l,className:p,src:t,alt:""}),e[7]=t,e[8]=p,e[9]=y):y=e[9],y}function $e(s){const e=J.c(16),{progress:t}=s,a=h.useContext(G),r=Math.min(Math.max(0,t*100),100);let l;e[0]!==a?(l=a("progressBar.title"),e[0]=a,e[1]=l):l=e[1];const n=`${r}%`,c=r===0?0:void 0,u=r===0?"hidden":void 0;let i;e[2]!==n||e[3]!==c||e[4]!==u?(i=o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-bar-complete",style:{width:n,maxWidth:c,visibility:u}})}),e[2]=n,e[3]=c,e[4]=u,e[5]=i):i=e[5];let f;e[6]!==t||e[7]!==a?(f=a("progressBar.value",rt(t)),e[6]=t,e[7]=a,e[8]=f):f=e[8];let m;e[9]!==f?(m=o.jsx("div",{className:"progress-bar-text",children:f}),e[9]=f,e[10]=m):m=e[10];let p;return e[11]!==r||e[12]!==l||e[13]!==i||e[14]!==m?(p=o.jsxs("div",{className:"progress-bar-container",role:"progressbar","aria-label":l,"aria-valuenow":r,children:[i,m]}),e[11]=r,e[12]=l,e[13]=i,e[14]=m,e[15]=p):p=e[15],p}const $t=s=>{if("share"in navigator){const e=s.currentTarget.href;s.preventDefault(),navigator.share({url:e}).catch(t=>{t instanceof Error&&t.name!=="AbortError"||(console.error(t),window.open(e,"_blank"))})}};function Ot(s){const e=J.c(6),{hash:t}=s,a=h.useContext(G);let r;e[0]!==a?(r=a("share"),e[0]=a,e[1]=r):r=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#share"})}),e[2]=l):l=e[2];let n;return e[3]!==t||e[4]!==r?(n=o.jsx("a",{href:t,rel:"noreferrer",target:"_blank",title:r,onClick:$t,children:l}),e[3]=t,e[4]=r,e[5]=n):n=e[5],n}function Dt(s){const e=J.c(7),{hash:t,callback:a}=s,r=h.useContext(G);let l;e[0]!==r?(l=r("viewNearby"),e[0]=r,e[1]=l):l=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#file-lines"})}),e[2]=n):n=e[2];let c;return e[3]!==a||e[4]!==t||e[5]!==l?(c=o.jsx("a",{href:t,title:l,onClick:a,children:n}),e[3]=a,e[4]=t,e[5]=l,e[6]=c):c=e[6],c}function Ft(s){const e=J.c(6),{callback:t}=s,a=h.useContext(G);let r;e[0]!==a?(r=a("copy"),e[0]=a,e[1]=r):r=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#copy"})}),e[2]=l):l=e[2];let n;return e[3]!==t||e[4]!==r?(n=o.jsx("button",{className:"link",title:r,onClick:t,children:l}),e[3]=t,e[4]=r,e[5]=n):n=e[5],n}function Vt(s,e,t,a,r){return s.replaceAll(/<a class="speaker" data-var="(.+?)">(.+?)<\/a>/gu,(l,n,c)=>`<a class="speaker" href="#${e.searchParamsToHash({query:n,type:"exact",caseInsensitive:!1,common:!1,script:!0,showAllLanguages:!1,collections:[t],languages:[a],run:!0})}" title="${r}" translate="yes"><span translate="no">${c}</span></a>`)}const Bt=(s,e)=>e===ne?s.replaceAll(/([._/]|([a-z])(?=[A-Z])|([A-Za-z])(?=[0-9]))/gu,"$1<wbr>"):s;function qt(){const s=J.c(4),e=h.useContext(G);let t;s[0]!==e?(t=e("status.rendering"),s[0]=e,s[1]=t):t=s[1];let a;return s[2]!==t?(a=o.jsx("div",{className:"results-rendering",children:t}),s[2]=t,s[3]=a):a=s[3],a}function zt(s){const e=J.c(7),{id:t}=s,a=`#id=${t}`;let r;e[0]!==a?(r=o.jsx(Ot,{hash:a}),e[0]=a,e[1]=r):r=e[1];const l=`#file=${t.split(".").slice(0,-1).join(".")}`;let n;e[2]!==l?(n=o.jsx(Dt,{hash:l}),e[2]=l,e[3]=n):n=e[3];let c;return e[4]!==r||e[5]!==n?(c=o.jsx("td",{className:"results-table-actions-cell",translate:"yes",children:o.jsxs("div",{className:"results-table-actions",children:[r,n]})},"actions"),e[4]=r,e[5]=n,e[6]=c):c=e[6],c}function Ut(s){const e=J.c(49),{corpus:t,index:a,collection:r,file:l,languages:n,lines:c,start:u,end:i,showId:f,richText:m,sectionOffset:p,onShowSection:y,searchParamsFactory:v}=s,w=h.useContext(G);let E;e[0]!==n?(E=n.indexOf(ne),e[0]=n,e[1]=E):E=e[1];const T=E,L=n.map(Ht),P=w("viewSpeaker"),g=t.getCollection(r).speaker!==void 0,_=L.map(Wt),j=_.every(K=>K===_[0]),C=h.useRef(null);let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{const K=C.current,Q=window.getSelection();Q!==null&&K!==null&&(Q.removeAllRanges(),Q.selectAllChildren(K),document.execCommand("copy"),Q.removeAllRanges())},e[2]=S):S=e[2];const A=S,R=`collection-${t.getCollection(r).id??r.toLowerCase()}`,D=`file-${l}`,M=`rich-text-${m?"enabled":"disabled"}`;let O;e[3]!==r||e[4]!==t||e[5]!==R||e[6]!==D||e[7]!==M?(O=["results-table",R,D,M],t.getCollection(r).softWrap===!0&&O.push("soft"),e[3]=r,e[4]=t,e[5]=R,e[6]=D,e[7]=M,e[8]=O):O=e[8];const k="results-table-container",N=O.join(" ");let q;e[9]!==T?(q=T!==-1&&o.jsx("th",{className:"results-table-actions-cell",children:o.jsx(Ft,{callback:A})}),e[9]=T,e[10]=q):q=e[10];let W;if(e[11]!==n||e[12]!==f||e[13]!==w){let K;e[15]!==f?(K=X=>f||X!==ne,e[15]=f,e[16]=K):K=e[16];let Q;e[17]!==w?(Q=X=>o.jsx("th",{children:o.jsx("abbr",{title:w(`languages:${X}.name`),children:o.jsx("span",{translate:"no",children:w(`languages:${X}.code`)})})},X),e[17]=w,e[18]=Q):Q=e[18],W=n.filter(K).map(Q),e[11]=n,e[12]=f,e[13]=w,e[14]=W}else W=e[14];let x;e[19]!==q||e[20]!==W?(x=o.jsx("thead",{children:o.jsxs("tr",{children:[q,W]})}),e[19]=q,e[20]=W,e[21]=x):x=e[21];let F;e[22]!==_||e[23]!==j?(F=j&&_[0]!==re.dir()?_[0]:void 0,e[22]=_,e[23]=j,e[24]=F):F=e[24];const B="no",H=c.map((K,Q)=>u<=Q&&Q<i&&o.jsxs("tr",{"data-id":T!==-1?K[T]:void 0,children:[T!==-1&&o.jsx(zt,{id:K[T]}),K.map((X,oe)=>{if(f||n[oe]!==ne)return o.jsx("td",{lang:L[oe],dir:j?void 0:_[oe],dangerouslySetInnerHTML:{__html:Bt(g?Vt(X,v,r,n[oe],P):X,n[oe])}},oe)})]},Q));let V;e[25]!==F||e[26]!==H?(V=o.jsx("tbody",{dir:F,translate:B,children:H}),e[25]=F,e[26]=H,e[27]=V):V=e[27];let Z;e[28]!==x||e[29]!==V||e[30]!==N?(Z=o.jsx("div",{className:k,children:o.jsxs("table",{ref:C,className:N,children:[x,V]})}),e[28]=x,e[29]=V,e[30]=N,e[31]=Z):Z=e[31];const d=Z;let b;e[32]!==a||e[33]!==y||e[34]!==p||e[35]!==u||e[36]!==w?(b=u!==0&&o.jsx("button",{className:"results-notice",onClick:y(p,a),children:w("tablePartial",{count:u})}),e[32]=a,e[33]=y,e[34]=p,e[35]=u,e[36]=w,e[37]=b):b=e[37];const I=u!==i&&d;let z;e[38]!==i||e[39]!==a||e[40]!==c.length||e[41]!==y||e[42]!==p||e[43]!==w?(z=i<c.length&&o.jsx("button",{className:"results-notice",onClick:y(p+i,a),children:w("tablePartial",{count:c.length-i})}),e[38]=i,e[39]=a,e[40]=c.length,e[41]=y,e[42]=p,e[43]=w,e[44]=z):z=e[44];let U;return e[45]!==b||e[46]!==I||e[47]!==z?(U=o.jsxs(o.Fragment,{children:[b,I,z]}),e[45]=b,e[46]=I,e[47]=z,e[48]=U):U=e[48],U}function Wt(s){return re.dir(s)}function Ht(s){return s===ne?wt:s}function Gt(s){const{index:e,status:t,header:a,offset:r,limit:l,lines:n,sectionOffset:c,richText:u}=s,i=Math.max(0,Math.min(n.length,r-c)),f=Math.max(0,Math.min(n.length,r+l-c)),m=h.useMemo(()=>{switch(t){case"noLines":return;case"worker":return o.jsx(qt,{});case"done":return o.jsx(Ut,{...s,start:i,end:f})}},[t,i,f,u]);return m&&o.jsxs("section",{id:`results-section${e}`,className:"results-section",children:[a&&o.jsx("h2",{children:a}),m]})}function Kt({results:s,headers:e,jumpTo:t,...a}){const r=h.useMemo(()=>Ne(a.corpus),[a.corpus]),l=h.useMemo(()=>{let n=0;const c=[];for(const[u,i]of s.entries()){if(i.status==="initial")break;const f=i.status==="done"&&i.richText;c.push({...a,...i.params,index:u,sectionOffset:n,richText:f,status:i.status,header:e[u],searchParamsFactory:r}),n+=i.params.lines.length}return c},[s,a]);return h.useEffect(()=>{let n=0;for(const[c,u]of s.entries())if(u.status!=="initial"){if(a.offset>=n&&a.offset<n+u.params.lines.length){t(c);break}n+=u.params.lines.length}},[a.offset]),o.jsx("div",{className:"app-window-inner",children:l.map(n=>o.jsx(Gt,{...n},n.index))})}function ie(s){const e=document.getElementById("results"),t=document.getElementById(`results-section${s}`),a=e?.firstElementChild;e&&t&&a instanceof HTMLElement&&(e.scrollTop=t.offsetTop-a.offsetTop)}function Jt(s){const e=J.c(9),{headers:t}=s,a=h.useContext(G);let r;e[0]!==a?(r=a("jumpTo"),e[0]=a,e[1]=r):r=e[1];let l;e[2]!==r?(l=o.jsx("option",{value:"",disabled:!0,children:r}),e[2]=r,e[3]=l):l=e[3];let n;e[4]!==t?(n=t.map((u,i)=>u!==void 0&&(i===0||t[i-1]!==u)&&o.jsx("option",{value:i,children:u},i)),e[4]=t,e[5]=n):n=e[5];let c;return e[6]!==l||e[7]!==n?(c=o.jsx("nav",{className:"results-jump",children:o.jsxs("select",{name:"jump",id:"jump",onChange:Zt,value:"",children:[l,n]})}),e[6]=l,e[7]=n,e[8]=c):c=e[8],c}function Zt(s){ie(Number(s.target.value))}function Qt(s){const e=J.c(50),{count:t,offset:a,limit:r,setOffset:l}=s,n=h.useContext(G),c=a+1,u=Math.min(t,a+r);let i;e[0]!==t||e[1]!==n||e[2]!==c||e[3]!==u?(i=n("displayedRange.long",{count:t,start:c,end:u}),e[0]=t,e[1]=n,e[2]=c,e[3]=u,e[4]=i):i=e[4];let f;e[5]!==i?(f=o.jsx("span",{className:"results-nav-range-long",children:i}),e[5]=i,e[6]=f):f=e[6];const m=a+1,p=Math.min(t,a+r);let y;e[7]!==t||e[8]!==n||e[9]!==m||e[10]!==p?(y=n("displayedRange.short",{count:t,start:m,end:p}),e[7]=t,e[8]=n,e[9]=m,e[10]=p,e[11]=y):y=e[11];let v;e[12]!==y?(v=o.jsx("span",{className:"results-nav-range-short",children:y}),e[12]=y,e[13]=v):v=e[13];let w;e[14]!==f||e[15]!==v?(w=o.jsxs("div",{children:[f,v]}),e[14]=f,e[15]=v,e[16]=w):w=e[16];const E=a===0;let T;e[17]!==r||e[18]!==a||e[19]!==l?(T=()=>{l(Math.max(0,a-r))},e[17]=r,e[18]=a,e[19]=l,e[20]=T):T=e[20];let L;e[21]!==n?(L=n("loadPrev"),e[21]=n,e[22]=L):L=e[22];let P;e[23]!==r||e[24]!==n?(P=n("icons:loadPrev",{limit:r}),e[23]=r,e[24]=n,e[25]=P):P=e[25];let g;e[26]!==E||e[27]!==T||e[28]!==L||e[29]!==P?(g=o.jsx("button",{className:"button-square",disabled:E,onClick:T,title:L,children:P}),e[26]=E,e[27]=T,e[28]=L,e[29]=P,e[30]=g):g=e[30];const _=a+r>=t;let j;e[31]!==t||e[32]!==r||e[33]!==a||e[34]!==l?(j=()=>{l(Math.min(Math.floor(t/r)*r,a+r))},e[31]=t,e[32]=r,e[33]=a,e[34]=l,e[35]=j):j=e[35];let C;e[36]!==n?(C=n("loadNext"),e[36]=n,e[37]=C):C=e[37];let S;e[38]!==r||e[39]!==n?(S=n("icons:loadNext",{limit:r}),e[38]=r,e[39]=n,e[40]=S):S=e[40];let A;e[41]!==_||e[42]!==j||e[43]!==C||e[44]!==S?(A=o.jsx("button",{className:"button-square",disabled:_,onClick:j,title:C,children:S}),e[41]=_,e[42]=j,e[43]=C,e[44]=S,e[45]=A):A=e[45];let R;return e[46]!==g||e[47]!==A||e[48]!==w?(R=o.jsxs("div",{className:"results-nav",children:[w,g,A]}),e[46]=g,e[47]=A,e[48]=w,e[49]=R):R=e[49],R}const ye={showVariables:0,showAllCharacters:!1,showGender:2,showPlural:0,showGrammar:!0,showFurigana:!0},Xt=()=>{const s=Y("corpus-toggle");if(s===null)return ye;const e={...ye},t=Re(s);return typeof t=="object"&&t!==null&&("showVariables"in t&&typeof t.showVariables=="number"&&[0,1,2].includes(t.showVariables)&&(e.showVariables=t.showVariables),"showAllCharacters"in t&&typeof t.showAllCharacters=="boolean"&&(e.showAllCharacters=t.showAllCharacters),"showGender"in t&&typeof t.showGender=="number"&&[0,1,2].includes(t.showGender)&&(e.showGender=t.showGender),"showPlural"in t&&typeof t.showPlural=="number"&&[0,1,2].includes(t.showPlural)&&(e.showPlural=t.showPlural),"showGrammar"in t&&typeof t.showGrammar=="boolean"&&(e.showGrammar=t.showGrammar),"showFurigana"in t&&typeof t.showFurigana=="boolean"&&(e.showFurigana=t.showFurigana)),e};function Yt({corpus:s,language:e,status:t,progress:a,results:r,showId:l=!0,richText:n=!0,limit:c=fe}){const u=h.useContext(G),i=h.useMemo(Xt,[]),[f,m]=h.useState(i.showVariables),[p,y]=h.useState(i.showAllCharacters),[v,w]=h.useState(i.showGender),[E,T]=h.useState(i.showPlural),[L,P]=h.useState(i.showGrammar),[g,_]=h.useState(i.showFurigana),[j,C]=h.useState(null),[S,A]=h.useState(0);h.useEffect(()=>{te("corpus-toggle",JSON.stringify({showVariables:f,showAllCharacters:p,showGender:v,showPlural:E,showGrammar:L,showFurigana:g}))},[f,p,v,E,L,g]);const R=h.useCallback((x,F)=>()=>{A(x),ie(F)},[]),D=h.useMemo(()=>{const x=[];let F="";for(const B of r){if(B.status==="initial"||B.status==="noLines"){x.push(void 0);continue}const{collection:H,file:V}=B.params,Z=u("tableHeader",{collection:u(`collections:${H}.name`),file:u(`files:${V}`),interpolation:{escapeValue:!1}});x.push(Z===F?void 0:Z),F=Z}return x},[r,e]),M=h.useMemo(()=>r.reduce((x,F)=>x+(F.status==="initial"?0:F.params.lines.length),0),[r]);M<S&&A(x=>Math.min(x,M));const O=o.jsxs("div",{className:"results-toggle",children:[o.jsx("button",{className:f!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{m((f+1)%3)},title:u("showVariables"),children:o.jsx("span",{translate:"no",children:u("icons:showVariables",{context:f})})}),o.jsx("button",{className:p?"button-square active":"button-square",disabled:!n,onClick:()=>{y(!p)},title:u("showAllCharacters"),children:o.jsx("span",{translate:"no",children:u("icons:showAllCharacters")})}),o.jsx("button",{className:v!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{w((v+1)%3)},title:u("showGender"),children:o.jsx("span",{translate:"no",children:u("icons:showGender",{context:v})})}),o.jsx("button",{className:E!==0?"button-square active":"button-square",disabled:!n,onClick:()=>{T((E+1)%3)},title:u("showPlural"),children:o.jsx("span",{translate:"no",children:u("icons:showPlural",{context:E})})}),o.jsx("button",{className:L?"button-square active":"button-square",disabled:!n,onClick:()=>{P(!L)},title:u("showGrammar"),children:o.jsx("span",{translate:"no",children:u("icons:showGrammar")})}),o.jsx("button",{className:g?"button-square active":"button-square",disabled:!n,onClick:()=>{_(!g)},title:u("showFurigana"),children:o.jsx("span",{className:"results-toggle-furigana",translate:"no",children:u("icons:showFurigana")})})]});h.useEffect(()=>{h.startTransition(()=>{C(o.jsx(Kt,{corpus:s,results:r,headers:D,showId:l,offset:S,limit:c,onShowSection:R,jumpTo:ie}))})},[s,r,D,l,S,c,R,ie]);const k=Te(t),N=u(`status.${t.split(".",1)[0]}`),q=h.useMemo(()=>!k&&D.filter(x=>x!==void 0).length>1?o.jsx(Jt,{headers:D}):o.jsx("div",{className:"results-status-text",children:N}),[k,D,N]),W=`app-window variables-${["short","show","hide"][f]} control-${p?"show":"hide"} gender-${v} number-${E} grammar-${L?"show":"hide"} furigana-${g?"show":"hide"}`;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"results-status",children:[q,o.jsx(It,{src:"logo.svg",active:k}),!k&&M>c?o.jsx(Qt,{count:M,offset:S,limit:c,setOffset:A}):o.jsx($e,{progress:a}),O]}),o.jsx("main",{id:"results",className:W,children:j})]})}const es={status:"initial"},Se="corpus-warn",ts=2e7;function ss({loader:s,showModal:e,language:t,richText:a,limit:r}){const l=h.useContext(G),n=h.useRef(null),c=h.useRef(null),u=h.useRef([]),i=h.useRef(a),f=h.useRef(Y(Se)!=="false"),[m,p]=h.useState("initial"),[y,v]=h.useState(0),[w,E]=h.useState(!0),[T,L]=h.useState([]);h.useEffect(()=>{i.current=a;for(const{index:k,params:N}of u.current)_(k,N)},[a]);const P=(k,N)=>{L(q=>{const W=Array().concat(q);for(let x=W.length;x<k;x++)W[x]=es;return W[k]=N,W})},g=k=>{P(k.data.index,{status:"done",params:k.data,richText:k.data.richText}),k.data.error&&e({message:"statusModal.error",buttons:[{message:"statusModal.buttons.ok",autoFocus:!0}]})},_=(k,N)=>{c.current===null&&(console.log("Creating new TextWorker..."),c.current=new gt,c.current.addEventListener("message",g)),c.current.postMessage({...N,index:k,richText:i.current,corpusLiterals:s.corpus.getCollection(N.collection).literals})},j=k=>{if(p(k.data.status),v(k.data.progress),E(k.data.showId),"index"in k.data&&"result"in k.data){const{index:N,result:q}=k.data;k.data.result.lines.length===0?P(N,{status:"noLines",params:q}):(u.current.push({index:N,params:q}),P(N,{status:"worker",params:q}),_(N,q))}k.data.complete&&xt(k.data.status)&&e({message:`statusModal.${k.data.status}`,buttons:[{message:"statusModal.buttons.ok",autoFocus:!0}]})},C=h.useCallback(()=>{console.log("Terminating workers!"),n.current!==null&&(n.current.removeEventListener("message",j),n.current.terminate(),n.current=null),c.current!==null&&(c.current.removeEventListener("message",j),c.current.terminate(),c.current=null),p("initial"),v(0),L([]),u.current=[]},[]),S=k=>{L([]),u.current=[],k.query.length>0&&k.collections.length>0&&k.languages.length>0&&(n.current===null&&(console.log("Creating new SearchWorkerManager..."),n.current=new mt,n.current.addEventListener("message",j)),p("waiting"),v(0),n.current.postMessage({...k,serializedCorpus:Ie(s.corpus)}))},A=h.useCallback(k=>{if(!f.current){S(k);return}s.getDownloadSizeTotal(k.collections,k.showAllLanguages?void 0:k.languages).then(N=>{if(N<=ts){S(k);return}e({message:"searchModal.message",messageOptions:ae(N),checkbox:{message:l("searchModal.checkboxDoNotShowAgain"),checked:!1},buttons:[{message:"searchModal.buttons.yes",callback:()=>{S(k)},checkboxCallback:q=>{f.current=!q,te(Se,(!q).toString())}},{message:"searchModal.buttons.no",callback:()=>{p("initial")},autoFocus:!0}],cancelCallback:()=>{p("initial")}})}).catch(ee)},[s.getDownloadSizeTotal]),R=Te(m),D=m==="waiting",M=h.useMemo(()=>o.jsx(Nt,{corpus:s.corpus,language:t,inProgress:R,waiting:D,postToWorker:A,terminateWorker:C}),[s.corpus,t,R,D,A,C]),O=h.useMemo(()=>o.jsx(Yt,{corpus:s.corpus,language:t,status:m,progress:y,showId:w,richText:a,results:T,limit:r}),[s.corpus,t,m,y,w,a,T,r]);return o.jsxs("div",{className:"search",children:[M,O]})}function ns(s){return new Worker("/poke-corpus/assets/cacheManagerWorker-CLSMdnkw.js",{name:s?.name})}function os(s){const e=J.c(6),{callback:t}=s,a=h.useContext(G);let r;e[0]!==a?(r=a("delete"),e[0]=a,e[1]=r):r=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#trash-can"})}),e[2]=l):l=e[2];let n;return e[3]!==t||e[4]!==r?(n=o.jsx("button",{className:"link",title:r,onClick:t,children:l}),e[3]=t,e[4]=r,e[5]=n):n=e[5],n}function as(s){const e=J.c(6),{callback:t}=s,a=h.useContext(G);let r;e[0]!==a?(r=a("refresh"),e[0]=a,e[1]=r):r=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#arrows-rotate"})}),e[2]=l):l=e[2];let n;return e[3]!==t||e[4]!==r?(n=o.jsx("button",{className:"link",title:r,onClick:t,children:l}),e[3]=t,e[4]=r,e[5]=n):n=e[5],n}function ls({cacheStorageEnabled:s,cachedMetadata:e}){const t=h.useContext(G),a=h.useMemo(()=>ae(e.reduce((r,[,l])=>r+l,0)),[e]);return o.jsxs("ul",{children:[o.jsx("li",{children:t("cache.storageStatus",{val:t(s?"cache.storageEnabled":"cache.storageDisabled")})}),s&&o.jsx("li",{children:t("cache.filesStored",{count:e.length})}),s&&o.jsx("li",{children:t("cache.storageUsed",a)})]})}function rs(s){const e=J.c(9),{loadedBytes:t,totalBytes:a,progress:r}=s,l=h.useContext(G);let n;e[0]!==t||e[1]!==l||e[2]!==a?(n=l("cache.loading",{message:l("cache.inProgress"),loaded:l("cache.size",ae(t)),total:l("cache.size",ae(a))}),e[0]=t,e[1]=l,e[2]=a,e[3]=n):n=e[3];let c;e[4]!==r?(c=o.jsx($e,{progress:r}),e[4]=r,e[5]=c):c=e[5];let u;return e[6]!==n||e[7]!==c?(u=o.jsxs("div",{className:"cache-entry-notice",children:[n,c]}),e[6]=n,e[7]=c,e[8]=u):u=e[8],u}function cs({corpus:s,cachedMetadata:e,cacheCollections:t,clearCachedFile:a}){const r=h.useContext(G),l=h.useMemo(()=>s.collections.map(c=>{const u=e.filter(([[i]])=>c===i);return[c,u.reduce((i,[,f])=>i+f,0),u.every(([,,i])=>i)]}).filter(([,c])=>c>0),[e]);return o.jsx("div",{className:"cache-entry-list",children:e.length>0&&l.map(([n,c,u],i)=>o.jsxs("div",{className:`cache-entry cache-entry-${u?"current":"outdated"}`,children:[o.jsxs("div",{className:"cache-entry-text",children:[o.jsx("div",{children:o.jsx("abbr",{title:r(`collections:${n}.name`),children:o.jsx("span",{translate:"no",children:r(`collections:${n}.short`)})})}),o.jsx("div",{translate:"no",children:r("cache.size",ae(c))})]}),o.jsxs("div",{className:"cache-entry-actions",children:[!u&&o.jsx(as,{callback:()=>{t(n)}}),o.jsx(os,{callback:()=>{a(n)}})]})]},i))})}function is({active:s,loader:e,showModal:t}){const a=h.useContext(G),[r,l]=h.useState(!1),[n,c]=h.useState([]),[u,i]=h.useState(!1),[f,m]=h.useState(0),[p,y]=h.useState(0),[v,w]=h.useState(0),E=h.useRef(null),T=()=>{"caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB?Promise.all([e.getCache(),e.getIndexedDB()]).then(()=>{l(!0)}).catch(()=>{l(!1),c([])}):(l(!1),c([]))},L=M=>{const{status:O,loadedBytes:k,totalBytes:N,requestedCollection:q}=M.data;switch(m(k/N),y(k),w(N),O){case"loading":return;case"done":console.log("Caching complete");break;case"error":console.log("Caching error");break}E.current?.terminate(),E.current=null,i(!1),_(q)},P=h.useCallback(M=>{"caches"in window&&(i(!0),m(0),y(0),E.current===null&&(console.log("Creating new CacheManagerWorker..."),E.current=new ns,E.current.addEventListener("message",L),E.current.postMessage({serializedCorpus:Ie(e.corpus),requestedCollection:M})))},[e]),g=async(M="background")=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[O,k]=await Promise.all([e.getCache(),e.getIndexedDB()]),N=e.corpus.entries.flatMap(([B,H])=>H.files.flatMap(V=>H.languages.map(Z=>[B,Z,V]))),q=N.map(([B,H,V])=>e.getFilePath(B,H,V)),W=await Promise.all(q.map(B=>e.getFileCacheOnly(O,k,B).then(async([H,V])=>[H!==void 0?(await H.blob()).size:-1,V])));c(W.map(([B,H],V)=>[N[V],B,H]).filter(([,B])=>B!==-1));const x=new Set(q),F=(await e.getAllLocalFilePaths(k)).filter(B=>!x.has(B));await Promise.all(F.map(B=>Promise.all([e.deleteLocalMetadata(k,B),O.delete(B)]).then(([H,V])=>{console.debug(H&&V?`Deleted ${B} from cache`:`Failed to delete ${B} from cache`)}))),k.close(),M==="cacheAll"&&W.some(([B,H])=>B===-1||!H)&&R()}},_=M=>{g(M).catch(ee)},j=()=>{const M=[];E.current&&(E.current.terminate(),E.current=null),"serviceWorker"in navigator&&M.push(navigator.serviceWorker.ready.then(O=>O.unregister())),"indexedDB"in window&&"databases"in window.indexedDB&&M.push(e.getIndexedDB().then(O=>e.clearLocalMetadata(O).then(()=>(O.close(),g())))),"caches"in window&&M.push(e.getCache().then(O=>O.keys().then(k=>Promise.all(k.map(N=>O.delete(N)))))),Promise.all(M).then(()=>{console.log("Cache cleared")}).catch(O=>{console.log("Error clearing cache"),console.error(O)})},C=async M=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[O,k]=await Promise.all([e.getCache(),e.getIndexedDB()]),N=e.corpus.getCollection(M);await Promise.all(N.languages.flatMap(q=>N.files.flatMap(W=>{const x=e.getFilePath(M,q,W);return[e.deleteLocalMetadata(k,x),O.delete(x)]}))),k.close(),await g()}},S=h.useCallback(M=>{C(M).catch(ee)},[]);h.useEffect(()=>{T(),g().catch(ee)},[s,e.corpus.entries,e.corpus.metadata]);const A=()=>{e.getDownloadSizeTotal().then(M=>{t({message:"cache.cacheAllModal.message",messageOptions:ae(M),buttons:[{message:"cache.cacheAllModal.buttons.yes",callback:()=>{P("cacheAll")}},{message:"cache.cacheAllModal.buttons.no",callback:()=>{i(!1)},autoFocus:!0}],cancelCallback:()=>{i(!1)}})}).catch(ee)},R=()=>{t({message:"cache.cacheAllFailedModal.message",buttons:[{message:"cache.cacheAllFailedModal.buttons.ok",autoFocus:!0}]})},D=()=>{t({message:"cache.clearCacheModal.message",buttons:[{message:"cache.clearCacheModal.buttons.yes",callback:j},{message:"cache.clearCacheModal.buttons.no",autoFocus:!0}]})};return s&&o.jsxs("div",{className:"cache",children:[o.jsxs("div",{className:"cache-button-group item-group",children:[o.jsx("button",{onClick:A,disabled:u!==!1,children:a("cacheAll")}),o.jsx("button",{onClick:D,children:a("clearCache")})]}),o.jsx("div",{className:"cache-results app-window",children:o.jsxs("div",{className:"app-window-inner",children:[o.jsx(ls,{cacheStorageEnabled:r,cachedMetadata:n}),u?o.jsx(rs,{loadedBytes:p,totalBytes:v,progress:f}):o.jsx(cs,{corpus:e.corpus,cachedMetadata:n,cacheCollections:P,clearCachedFile:S})]})})]})}function us(s){const e=J.c(41),{closeCallback:t,classes:a,message:r,messageOptions:l,messageElement:n,buttons:c,checkbox:u,cancelCallback:i,isModal:f}=s,m=r===void 0?"":r,p=f===void 0?!0:f,y=h.useContext(G),v=(n??m)!=="",[w,E]=h.useState(u?.checked??!1),T=h.useRef(null),L=h.useRef(null);let P,g;e[0]!==p||e[1]!==v?(P=()=>{const V=T.current;V!==null&&(V.open&&V.close(),v&&(p?V.showModal():V.show()))},g=[v,p],e[0]=p,e[1]=v,e[2]=P,e[3]=g):(P=e[2],g=e[3]),h.useEffect(P,g);let _;e[4]!==c||e[5]!==v?(_=()=>{const V=L.current;if(v&&c&&V!==null){const Z=c.findIndex(hs);Z!==-1&&Array.from(V.children).filter(ds)[Z].focus()}},e[4]=c,e[5]=v,e[6]=_):_=e[6];let j;e[7]!==n||e[8]!==v?(j=[n,v],e[7]=n,e[8]=v,e[9]=j):j=e[9],h.useEffect(_,j);let C;e[10]!==w||e[11]!==t?(C=(V,Z,d)=>{const b=d===void 0?!0:d;return()=>{b&&t(),V&&V(),Z&&Z(w)}},e[10]=w,e[11]=t,e[12]=C):C=e[12];const S=C;let A;e[13]!==i||e[14]!==t?(A=()=>{i&&i(),t()},e[13]=i,e[14]=t,e[15]=A):A=e[15];const R=A;if(!v)return null;let D;e[16]!==m||e[17]!==n||e[18]!==l||e[19]!==y?(D=n??y(m,l),e[16]=m,e[17]=n,e[18]=l,e[19]=y,e[20]=D):D=e[20];let M;e[21]!==D?(M=o.jsx("div",{className:"modal-message",children:D}),e[21]=D,e[22]=M):M=e[22];const O=M;let k;e[23]!==u||e[24]!==w||e[25]!==y?(k=u&&o.jsx("div",{className:"modal-checkbox",children:o.jsxs("div",{children:[o.jsx("input",{type:"checkbox",id:"modalCheckbox",name:"modalCheckbox",checked:w,onChange:V=>{E(V.target.checked)}}),o.jsx("label",{htmlFor:"modalCheckbox",children:y(u.message)})]})}),e[23]=u,e[24]=w,e[25]=y,e[26]=k):k=e[26];const N=k;let q;e[27]!==c||e[28]!==S||e[29]!==y?(q=c?.map((V,Z)=>{const{message:d,callback:b,checkboxCallback:I,close:z,...U}=V;return o.jsx("button",{type:"button",onClick:S(b,I,z),...U,children:y(d)},Z)}),e[27]=c,e[28]=S,e[29]=y,e[30]=q):q=e[30];let W;e[31]!==q?(W=o.jsx("div",{ref:L,className:"modal-button-group",children:q}),e[31]=q,e[32]=W):W=e[32];const x=W;let F;e[33]!==a?(F=["modal"],a&&a.forEach(V=>F.push(V)),e[33]=a,e[34]=F):F=e[34];const B=F.join(" ");let H;return e[35]!==x||e[36]!==N||e[37]!==O||e[38]!==R||e[39]!==B?(H=o.jsxs("dialog",{ref:T,id:"modal",className:B,onCancel:R,children:[O,N,x]}),e[35]=x,e[36]=N,e[37]=O,e[38]=R,e[39]=B,e[40]=H):H=e[40],H}function ds(s){return s instanceof HTMLButtonElement}function hs(s){return s.autoFocus}function ge(){const s=J.c(11),e=h.useContext(G);let t;s[0]!==e?(t=e("error.title"),s[0]=e,s[1]=t):t=s[1];let a;s[2]!==t?(a=o.jsx("h2",{children:t}),s[2]=t,s[3]=a):a=s[3];let r;s[4]!==e?(r=e("error.message"),s[4]=e,s[5]=r):r=s[5];let l;s[6]!==r?(l=o.jsx("div",{children:r}),s[6]=r,s[7]=l):l=s[7];let n;return s[8]!==a||s[9]!==l?(n=o.jsx("div",{className:"app-window",children:o.jsx("div",{className:"app-window-inner",children:o.jsxs("section",{className:"results-section",children:[a,l]})})}),s[8]=a,s[9]=l,s[10]=n):n=s[10],n}const be="corpus",ue=s=>"/poke-corpus/"+s,fs=ue("data.json"),ms=s=>{const e=g=>f(g).size,t=async(g,_)=>{const[j,C]=await v(g,_);return C?.hash===j.hash?0:j.size},a=async(g=s.collections,_=s.languages)=>{try{const j=await i(),C=(await Promise.all(g.flatMap(S=>s.getCollection(S).languages.filter(A=>_.includes(A)).flatMap(A=>s.getCollection(S).files.map(R=>t(j,ce(S,A,R))))))).reduce((S,A)=>S+A,0);return j.close(),C}catch{return g.flatMap(j=>s.getCollection(j).languages.filter(C=>_.includes(C)).flatMap(C=>s.getCollection(j).files.map(S=>e(ce(j,C,S))))).reduce((j,C)=>j+C,0)}},r=async(g,_,j)=>{const C=ue(j),[S,A]=await v(_,j);if(A?.hash===S.hash||!navigator.onLine&&A?.hash!==void 0){const M=await L(g,C);if(M!==void 0)return M}const R=await fetch(C);return R.ok?(await P(g,C,R).then(async M=>{M&&await p(_,j)}),R):await L(g,C)??null},l=async(g,_,j)=>{const C=ue(j),[S,A]=await v(_,j);return A!==void 0?[await L(g,C),A.hash===S.hash]:[void 0,!1]},n=async g=>{const _=ue(g),j=await fetch(_);return j.ok?j:null},c="corpus",u="files",i=async()=>{const g=indexedDB.open(c);return new Promise((_,j)=>{g.onupgradeneeded=()=>{g.result.createObjectStore(u),g.transaction!==null&&(g.transaction.oncomplete=()=>{console.log("Created object store")})},g.onsuccess=()=>{_(g.result)},g.onerror=()=>{j(g.error)}})},f=g=>s.metadata[g],m=async(g,_)=>{const S=g.transaction([u],"readonly").objectStore(u).get(_);return new Promise((A,R)=>{S.onsuccess=()=>{A(_t(S.result)?S.result:void 0)},S.onerror=()=>{R(S.error)}})},p=async(g,_)=>{const S=g.transaction([u],"readwrite").objectStore(u).put(f(_),_);return new Promise((A,R)=>{S.onsuccess=()=>{A(S.result===_)},S.onerror=()=>{R(S.error)}})},y=async(g,_)=>{const S=g.transaction([u],"readwrite").objectStore(u).delete(_);return new Promise((A,R)=>{S.onsuccess=()=>{A(!0)},S.onerror=()=>{R(S.error)}})},v=async(g,_)=>[f(_),await m(g,_)],w=async g=>{const C=g.transaction(["files"],"readwrite").objectStore("files").clear();return g.close(),new Promise((S,A)=>{C.onsuccess=()=>{S(!0)},C.onerror=()=>{A(C.error)}})},E=async g=>{const C=g.transaction([u],"readonly").objectStore(u).getAllKeys();return new Promise((S,A)=>{C.onsuccess=()=>{S(C.result.filter(R=>typeof R=="string"))},C.onerror=()=>{A(C.error)}})},T=async()=>await caches.open(be),L=async(g,_)=>{try{return await g.match(_)}catch(j){console.error(j);return}},P=async(g,_,j)=>{try{return await g.put(_,j.clone()),!0}catch(C){return console.error(C),!1}};return{corpus:s,getFilePath:ce,getFileSize:e,getDownloadSizeTotal:a,getFile:r,getFileCacheOnly:l,getFileRemote:n,getIndexedDB:i,deleteLocalMetadata:y,clearLocalMetadata:w,getAllLocalFilePaths:E,getCache:T}};function gs(s){return ms(s)}function ps(s,e=fs){const t=()=>{s(a=>a===void 0?null:a)};Promise.all([xs(e).then(a=>{s(r=>r===void 0&&a!==null?a:r)}).catch(ee),bs(e).then(a=>{s(r=>a??r)}).catch(ee)]).then(t,t)}async function xs(s){if("caches"in window){const t=await(await caches.open(be)).match(s);if(t?.ok)return Oe(t)}return null}async function bs(s){const e=await fetch(s);if(!e.ok)return null;if("caches"in window){const t=e.clone();caches.open(be).then(a=>a.put(s,t)).catch(ee)}return Oe(e)}async function Oe(s){const e=await s.json(),t=St(e);return gs(t)}function js(s){const e=J.c(2);let t;return e[0]!==s?(t=o.jsx("a",{className:"link",...s,children:s.children}),e[0]=s,e[1]=t):t=e[1],t}const Ce="corpus-tutorial",le=0,de=1,he=5;function vs(s){const e=J.c(31),{page:t}=s,a=h.useContext(G);let r="";e:switch(t){case 1:{let l;e[0]!==a?(l=a("tutorial:message.welcome"),e[0]=a,e[1]=l):l=e[1];let n;e[2]!==l?(n=o.jsx("div",{children:o.jsx("b",{children:l})}),e[2]=l,e[3]=n):n=e[3];let c;e[4]!==a?(c=a("tutorial:message.intro"),e[4]=a,e[5]=c):c=e[5];let u;e[6]!==c?(u=o.jsx("div",{children:c}),e[6]=c,e[7]=u):u=e[7];let i;e[8]!==n||e[9]!==u?(i=o.jsxs(o.Fragment,{children:[n,u]}),e[8]=n,e[9]=u,e[10]=i):i=e[10],r=i;break e}case 2:{let l;e[11]!==a?(l=a("tutorial:message.filters"),e[11]=a,e[12]=l):l=e[12],r=l;break e}case 3:{let l;e[13]!==a?(l=a("tutorial:message.search"),e[13]=a,e[14]=l):l=e[14],r=l;break e}case 4:{let l;e[15]!==a?(l=a("tutorial:message.results"),e[15]=a,e[16]=l):l=e[16],r=l;break e}case 5:{let l;e[17]!==a?(l=a("tutorial:moreUrl"),e[17]=a,e[18]=l):l=e[18];let n;e[19]!==l?(n={Link:o.jsx(js,{href:l,rel:"noreferrer",target:"_blank"})},e[19]=l,e[20]=n):n=e[20];let c;e[21]!==a||e[22]!==n?(c=o.jsx("div",{children:o.jsx(ze,{t:a,i18nKey:"tutorial:message.more",components:n})}),e[21]=a,e[22]=n,e[23]=c):c=e[23];let u;e[24]!==a?(u=a("tutorial:message.done"),e[24]=a,e[25]=u):u=e[25];let i;e[26]!==u?(i=o.jsx("div",{children:u}),e[26]=u,e[27]=i):i=e[27];let f;e[28]!==c||e[29]!==i?(f=o.jsxs(o.Fragment,{children:[c,i]}),e[28]=c,e[29]=i,e[30]=f):f=e[30],r=f}}return r}function ws(s){const e=J.c(14),{replaceModal:t}=s,a=h.useContext(G),[r,l]=h.useState(Y(Ce)?le:de);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{l(le),document.body.removeAttribute("data-tutorial-page"),te(Ce,"true")},e[0]=n):n=e[0];const c=n;let u;e[1]!==r||e[2]!==t?(u=()=>{r!==le&&(document.body.setAttribute("data-tutorial-page",r.toString()),t({isModal:!1,classes:["tutorial"],messageElement:o.jsx(vs,{page:r}),buttons:[{id:"tutorial-skip",message:"tutorial:button.skip",autoFocus:r===he,callback:c},{id:"tutorial-back",message:"tutorial:button.back",disabled:r===de,callback:()=>{l(ys)},close:!1},{id:"tutorial-next",message:"tutorial:button.next",autoFocus:r<he,disabled:r===he,callback:()=>{l(_s)},close:!1}],cancelCallback:c}))},e[1]=r,e[2]=t,e[3]=u):u=e[3];let i;e[4]!==r?(i=[r],e[4]=r,e[5]=i):i=e[5],h.useEffect(u,i);let f;e[6]!==r?(f=()=>{r===le&&l(de)},e[6]=r,e[7]=f):f=e[7];const m=f,p=r!==le;let y;e[8]!==a?(y=a("tutorial:link"),e[8]=a,e[9]=y):y=e[9];let v;return e[10]!==p||e[11]!==y||e[12]!==m?(v=o.jsx("button",{className:"link",disabled:p,onClick:m,children:y}),e[10]=p,e[11]=y,e[12]=m,e[13]=v):v=e[13],v}function _s(s){return s+1}function ys(s){return s-1}const ke="Search";function Ss(s){const e=J.c(14);let t,a;e[0]!==s?({reset:a,...t}=s,e[0]=s,e[1]=t,e[2]=a):(t=e[1],a=e[2]);const r=h.useContext(G);let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("img",{className:"header-logo",src:"logo.svg",alt:"",height:"40",width:"40"}),e[3]=l):l=e[3];let n;e[4]!==r?(n=r("titleVersion",{title:r("title"),version:r("version")}),e[4]=r,e[5]=n):n=e[5];let c;e[6]!==a||e[7]!==n?(c=o.jsx("h1",{children:o.jsxs("a",{href:"/poke-corpus/",onClick:a,children:[l," ",n]})}),e[6]=a,e[7]=n,e[8]=c):c=e[8];let u;e[9]!==t?(u=o.jsx(pe,{fallback:null,children:o.jsx(ft,{...t})}),e[9]=t,e[10]=u):u=e[10];let i;return e[11]!==c||e[12]!==u?(i=o.jsxs("header",{className:"header",children:[c,u]}),e[11]=c,e[12]=u,e[13]=i):i=e[13],i}function Cs(s){const e=J.c(30),{view:t,switchView:a,replaceModal:r}=s,l=h.useContext(G);let n;e[0]!==l?(n=l("tagline"),e[0]=l,e[1]=n):n=e[1];let c;e[2]!==n?(c=o.jsx("span",{children:n}),e[2]=n,e[3]=c):c=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[4]=u):u=e[4];let i;e[5]!==l?(i=l("footerText"),e[5]=l,e[6]=i):i=e[6];let f;e[7]!==i?(f=o.jsx("span",{children:i}),e[7]=i,e[8]=f):f=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[9]=m):m=e[9];let p;e[10]!==r?(p=o.jsx(ws,{replaceModal:r}),e[10]=r,e[11]=p):p=e[11];let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[12]=y):y=e[12];const v=t!=="Search"?"backToSearch":"manageCache";let w;e[13]!==l||e[14]!==v?(w=l(v),e[13]=l,e[14]=v,e[15]=w):w=e[15];let E;e[16]!==a||e[17]!==w?(E=o.jsx("button",{id:"view-switcher",className:"link",onClick:a,children:w}),e[16]=a,e[17]=w,e[18]=E):E=e[18];let T;e[19]===Symbol.for("react.memo_cache_sentinel")?(T=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[19]=T):T=e[19];let L;e[20]!==l?(L=l("github"),e[20]=l,e[21]=L):L=e[21];let P;e[22]!==L?(P=o.jsx("a",{href:"https://github.com/abcboy101/poke-corpus",children:L}),e[22]=L,e[23]=P):P=e[23];let g;return e[24]!==E||e[25]!==P||e[26]!==c||e[27]!==f||e[28]!==p?(g=o.jsxs("footer",{children:[c,u,f,m,p,y,E,T,P]}),e[24]=E,e[25]=P,e[26]=c,e[27]=f,e[28]=p,e[29]=g):g=e[29],g}function ks(){const[s,e]=h.useState(re.language),[t,a]=h.useState(lt),[r,l]=h.useState(at),[n,c]=h.useState(ke),[u,i]=h.useState(0),[f,m]=h.useState([]),[p,y]=h.useState(!1),[v,w]=h.useState(void 0),{t:E}=Ee();h.useEffect(()=>{window.location.pathname!=="/poke-corpus/"?window.location.replace("/poke-corpus/"+window.location.search+window.location.hash):window.location.search&&window.history.replaceState(null,"",window.location.pathname+window.location.hash);const j=Pe();document.body.classList.add(`mode-${j}`),y(!0),ps(w)},[]),h.useEffect(()=>{document.documentElement.lang=s,document.documentElement.dir=re.dir(s),document.title=E("title"),document.querySelector('meta[name="description"]')?.setAttribute("content",E("tutorial:message.intro"))},[s]);const T=h.useCallback(j=>{window.location.hash="",st("corpus-params"),c(ke),i(C=>C+1&255),m([]),j.preventDefault()},[]),L=h.useCallback(j=>{m(C=>C.concat(j))},[]),P=h.useCallback(j=>{m([j])},[]),g=h.useCallback(()=>{c(j=>{const C=j!=="Search"?"Search":"CacheManager";return p||y(C==="CacheManager"),C})},[]);if(v===void 0)return;const _=["app",`view-${n.toLowerCase()}`];return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&_.push("ua-safari"),o.jsx(G,{value:E,children:o.jsxs("div",{className:_.join(" "),children:[o.jsx(Ss,{showModal:L,language:s,setLanguage:e,richText:t,setRichText:a,limit:r,setLimit:l,reset:T}),v!==null?o.jsxs(pe,{FallbackComponent:ge,children:[o.jsx(ss,{loader:v,showModal:L,language:s,richText:t,limit:r}),o.jsx(is,{active:n==="CacheManager",loader:v,showModal:L})]}):o.jsx(ge,{}),o.jsx(Cs,{view:n,switchView:g,replaceModal:P}),o.jsx(us,{closeCallback:()=>{m(j=>j.slice(0,-1))},...f.at(-1)})]},u)})}function Es(){const s=J.c(3),{t:e}=Ee();let t;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=o.jsx("div",{className:"app",children:o.jsx(ge,{})}),s[0]=t):t=s[0];let a;return s[1]!==e?(a=o.jsx(G,{value:e,children:t}),s[1]=e,s[2]=a):a=s[2],a}const Ls=We.createRoot(document.getElementById("root"));Ls.render(o.jsx(Ue.StrictMode,{children:o.jsx(pe,{FallbackComponent:Es,children:o.jsx(ks,{})})}));tt({onOfflineReady(){console.log("Ready to work offline!")}});
