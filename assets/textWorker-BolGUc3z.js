(function(){"use strict";const W="qid";function j(l){switch(l){case"ja-Hrkt":case"ja":return"『";case"fr":return" : ";case"zh-Hans":return"：";case"zh-Hant":return"「";default:return": "}}function K(l,e,s){return l.replace(/(.*?)(\[VAR 0114\(([0-9A-F]{4})\)\])(?:$|(?=\u{F0000}))/u,(p,u,A,i)=>{const $=parseInt(i,16),F=e[$];return`${A.replaceAll("[","\\[")}󱄀${F}${j(s)}󱄁${u}`})}function Y(l){return l.replaceAll(/^(.+)\u{F1100}(.+?)\u{F1101}/gu,'<a class="speaker" data-var="$1">$2</a>')}function L(l,e,s=""){const p=[];return l.length>0&&p.push(`<span class="branch male">${l}</span>`),e.length>0&&p.push(`<span class="branch female">${e}</span>`),s.length>0&&p.push(`<span class="branch neuter">${s}</span>`),p.join('<span class="gender">/</span>')}function S(l,e,s=""){const p=[];return l.length>0&&p.push(`<span class="branch singular">${l}</span>`),e.length>0&&p.push(`<span class="branch plural">${e}</span>`),s.length>0&&p.push(`<span class="branch zero">${s}</span>`),p.join('<span class="number">/</span>')}function O(l,e,s,p){const u=[];l.length>0&&u.push(`<span class="branch male singular">${l}</span>`),e.length>0&&u.push(`<span class="branch female singular">${e}</span>`);const A=u.join('<span class="gender singular">/</span>'),i=[];s.length>0&&i.push(`<span class="branch male plural">${s}</span>`),p.length>0&&i.push(`<span class="branch female plural">${p}</span>`);const $=i.join('<span class="gender plural">/</span>'),F=["number"];l.length>0&&s.length>0&&F.push("male"),e.length>0&&p.length>0&&F.push("female");const h=F.join(" ");return[A,$].join(`<span class="${h}">/</span>`)}function m(...l){return l.filter(e=>e!=="").map((e,s)=>`<span class="branch form form-${s}">${e}</span>`).join('<span class="grammar">/</span>')}function C(l,e,s,p){const u=[];return l.length>0&&u.push(`<span class="branch version-${s}">${l}</span>`),e.length>0&&u.push(`<span class="branch version-${p}">${e}</span>`),u.join('<span class="version">/</span>')}function Z(l){return l.replaceAll(/\u{F0106}(\/?[bi]) *\u{F0107}/gu,"<$1>").replaceAll(/\u{F0106}size=(\d+)\u{F0107}/gu,'<span style="font-size: calc($1 / 32 * 100%)">').replaceAll(/\u{F0106}color=(.*?)\u{F0107}/gu,'<span class="color" style="color: $1">').replaceAll(/\u{F0106}\/(size|color)\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}a href="\{(\d+)\}"\u{F0107}(.+?)\u{F0106}\/a\u{F0107}/gu,'<span class="link" title="󰄄$1}">$2</span>').replaceAll(/\u{F0106}a href="([0-9A-Za-z_]+)"\u{F0107}/gu,'<a class="link" href="#id=go.$1" title="$1">').replaceAll(/\u{F0106}a href=["“]((?:pokemongolive.com)\/[^"]+?)["”]\u{F0107}/gu,'<a class="link" href="http://$1" title="$1" target="_blank" rel="noopener noreferrer nofollow">').replaceAll(/\u{F0106}a href="+(https?:\/\/[^"]+?)"+\u{F0107}/gu,'<a class="link" href="$1" title="$1" target="_blank" rel="noopener noreferrer nofollow">').replaceAll(/\u{F0106}\/a\u{F0107}/gu,"</a>").replaceAll(/\u{F0106}br\u{F0107}/gu,"<br>").replaceAll(/\u{F0106}(taunt|intimidate)\u{F0107}/gu,'<span class="var">󰄆$1󰄇</span>').replaceAll(/(%BREAK%)/gu,'<span class="c">$1</span><br>').replaceAll(/(%PLAYERNAME%)/gu,'<span class="var">$1</span>').replaceAll(/(%(\d+\$)?s)/gu,'<span class="var">$1</span>').replaceAll(/(\{\d+(?::[^\]]+?)?\})/gu,'<span class="var">$1</span>')}const J={ha:["는","은"],wo:["를","을"],ga:["가","이"],to:["와","과"],ni:["로","으로"],ya:["","이"]},Q=l=>m(...J[l]);function X(l){return l.replaceAll(/\u{F0106}attr font=['"]fallback['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="fallback">$1</span>').replaceAll(/\u{F0106}attr color=['"]([0-9A-Fa-f]{6})['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="color" style="color: #$1">$2</span>').replaceAll(/\u{F0106}attr size=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span style="font-size: $1px">$2</span>').replaceAll(/\u{F0106}attr color=['"]([0-9A-Fa-f]{6})['"] size=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="color" style="color: #$1; font-size: $2px">$3</span>').replaceAll(/\u{F0106}attr size=['"](\d+?)['"] height=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span style="font-size: $1px; line-height: $2px">$3</span>').replaceAll(/(\u{F0106}\/?div\u{F0107})/gu,'<span class="div">$1</span>').replaceAll(/\u{F0106}span class=""?word"?"\u{F0107}/gu,'<span class="word">').replaceAll(/\u{F0106}\/span\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}br\u{F0107}/gu,"<br>").replaceAll(/\u{F0100}\[/gu,"󰄂").replaceAll(/\u{F0100}\]/gu,"]").replaceAll(/(\u{F0100}n)/gu,'<span class="literal n">$1</span><br>').replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" M="([^"]*?)" F="([^"]*?)" \]/gu,(e,s,p)=>L(s,p)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" M="([^"]*?)" \]/gu,(e,s)=>L("",s)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" F="([^"]*?)" \]/gu,(e,s)=>L("",s)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?S="([^"]*?)" P="([^"]*?)" \]/gu,(e,s,p)=>S(s,p)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?S="([^"]*?)" \]/gu,(e,s)=>S(s,"")).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?P="([^"]*?)" \]/gu,(e,s)=>S("",s)).replaceAll(/\[Kor:Particle char="(ha|wo|ga|to|ni|ya)" \]/gu,(e,s)=>Q(s)).replaceAll(/(\[(?:Name:.+?) [^[]*?\])/gu,'<span class="var long">$1</span><span class="var short" title="$1">[Name]</span>').replaceAll(/(\[(?:Digit:.+?) [^[]*?\])/gu,'<span class="var long">$1</span><span class="var short" title="$1">[Digit]</span>')}const k=l=>{switch(l){case"en":return"BLOCK";case"fr":return"BLOC";case"it":return"MELLA";case"de":return"RIEGEL";case"es":return"CUBO";default:return"BLOCK"}},q=(l,e)=>{switch(l){case"en":return"Lv";case"fr":return"N.";case"it":return"L.";case"de":return"Lv.";case"es":return e==="RubySapphire"?"Nv":"Nv.";default:return"Lv"}},ll=l=>{switch(l){case"ja-Hrkt":return"Lv";case"en":return"Lv";case"fr":return"N.";case"it":return"L.";case"de":return"Lv.";case"es":return"Nv.";default:return"Lv"}},al=l=>{switch(l){case"de":return"Lv.";case"es":return"Nv";default:return"Lv"}},el=l=>l==="de"?"AP":"PP",sl=()=>"ID",nl=l=>{switch(l){case"ja-Hrkt":return"No";case"en":return"No";case"fr":return"Nº";case"it":return"Nº";case"de":return"Nr.";case"es":return"N.º";default:return"No"}},rl=()=>"Pco",B=[["the "],["The "],["a ","an ",""],["A ","An ",""]],M=[["le ","l’","la ","les "],["Le ","L’","La ","Les "],["un ","une ","des ",""],["Un ","Une ","Des ",""],["au ","à l’","à la ","aux ","à "],["Au ","À l’","À la ","Aux ","À "],["du ","de l’","de la ","des "],["Du ","De l’","De la ","Des "],["de ","d’"],["De ","D’"],["que ","qu’"],["Que ","Qu’"]],T=[["il ","l’","lo ","la ","i ","gli ","le "],["Il ","L’","Lo ","La ","I ","Gli ","Le "],["un ","uno ","una ","un’","dei ","degli ","delle ","del ","dell’","dello ","della "],["Un ","Uno ","Una ","Un’","Dei ","Degli ","Delle ","Del ","Dell’","Dello ","Della "],["del ","dell’","dello ","della ","dei ","degli ","delle "],["Del ","Dell’","Dello ","Della ","Dei ","Degli ","Delle "],["sul ","sull’","sullo ","sulla ","sui ","sugli ","sulle "],["Sul ","Sull’","Sullo ","Sulla ","Sui ","Sugli ","Sulle "],["al ","all’","allo ","alla ","ai ","agli ","alle "],["Al ","All’","Allo ","Alla ","Ai ","Agli ","Alle "],["nel ","nell’","nello ","nella ","nei ","negli ","nelle "],["Nel ","Nell’","Nello ","Nella ","Nei ","Negli ","Nelle "],["e ","ed "],["E ","Ed "],["a ","ad "],["A ","Ad "]],U=[["der ","die ","das "],["Der ","Die ","Das "],["ein ","eine ",""],["Ein ","Eine ",""],["den ","die ","das "],["Den ","Die ","Das "],["einen ","eine ","ein ",""],["Einen ","Eine ","Ein ",""]],G=[["el ","la ","los ","las "],["El ","La ","Los ","Las "],["un ","una ","unos ","unas ",""],["Un ","Una ","Unos ","Unas ",""],["del ","de la ","de los ","de las "],["Del ","De la ","De los ","De las "],["al ","a la ","a los ","a las "],["Al ","A la ","A los ","A las "],["el ","la ","los ","las ",""],["El ","La ","Los ","Las ",""],["al ","a la ","a los ","a las ","a "],["del ","de la ","de los ","de las ","de "],["y ","e "],["Y ","E "],["o ","u "],["O ","U "]],pl=[["",""],["는","은"],["를","을"],["가","이"],["와","과"],["","으"],["","이"],["야","아"]],I=(l,e=!1)=>l-(l<15?3:e?7:5);function cl(l){return l.split("󰀀")[0]}function y(l){return l.search(/[\u{F1000}\u{F1001}]/u)===-1?l:["<dl>",...l.split("󱀀").map(e=>e.split("󱀁")).map(([e,s])=>`<dt>${e}</dt><dd>${s}</dd>`),"</dl>"].join("")}const R=(l,e)=>m(...e[l]),V=l=>m(...pl[l]),ul=(l,e)=>C(l,e,"ruby","sapphire"),tl=(l,e)=>C(l,e,"scarlet","violet"),Al=new Map([["Decide","A"],["Cancel","B"],["Sp_1","X"],["Sp_2","Y"],["L","L"],["R","R"],["ZL","ZL"],["ZR","ZR"],["Button_Up","▲"],["Button_Down","▼"],["Button_Left","◀"],["Button_Right","▶"],["Plus","+"],["Minus","−"],["Stick_L","Stick_L"],["Stick_R","Stick_R"],["Stick_L_Push","Stick_L_Push"],["Stick_R_Push","Stick_R_Push"]]),ol=(l,e,s,p)=>{const u=parseInt(s,16),A=p.substring(0,u);return`<span class="button" title="${e.replaceAll("[","󰄂")+A}">${Al.get(A)??A}</span>${p.substring(u)}`},_=l=>Number(l).toString(16).padStart(2,"0").toUpperCase(),il=(l,e,s,p,u,A)=>w(l,`#${e}${s}${p}${u==="FF"?"":u}`,A),w=(l,e,s)=>`<span class="color" style="color: ${e}">${s}</span>`,x=(l,e,s,p,u)=>`<span class="color" style="color: #${_(e)}${_(s)}${_(p)}${u==="255"?"":_(u)}">`,gl=(l,e,s,p,u,A,i,$,F)=>`<span class="color gradient" style="--top: #${_(e)}${_(s)}${_(p)}${u==="255"?"":_(u)}; --bottom: #${_(A)}${_(i)}${_($)}${F==="255"?"":_(F)}">`;function Fl(l,e="",s="en",p=!0){const u=["RubySapphire","FireRedLeafGreen","Emerald"].includes(e),A=["DiamondPearl","Platinum","HeartGoldSoulSilver"].includes(e),i=["BlackWhite","Black2White2"].includes(e),$=e==="BrilliantDiamondShiningPearl",F=e==="BattleRevolution",h=e==="Ranch",v=e==="DreamRadar",g=e==="GO",d=e==="Masters",dl=e==="HOME",_l=A||i,P=["XY","OmegaRubyAlphaSapphire","SunMoon","UltraSunUltraMoon","Bank"].includes(e),H=["LetsGoPikachuLetsGoEevee","SwordShield","BrilliantDiamondShiningPearl","LegendsArceus","ScarletViolet","LegendsZA","HOME"].includes(e),D=["Stadium","Stadium2"].includes(e),fl=["Colosseum","XD"].includes(e),E=i||P||H;if(l=cl(l),!p)return l=l.replaceAll("<","&lt;").replaceAll(">","&gt;"),y(l);switch(l=l.replaceAll("\\\\","󰄀").replaceAll("\\[","󰄂").replaceAll("\\{","󰄄").replaceAll("<","󰄆").replaceAll(">","󰄇"),l=l.replaceAll("\\n","󰈀").replaceAll("\\r","󰈁").replaceAll("\\c","󰈂").replaceAll("	","󰈃"),l=A?l.replaceAll("[VAR 0207]","󰈇").replaceAll("[VAR 0208]","󰈈"):l,l=u?l.replaceAll("\\e","󰋿"):l,l=D?l.replaceAll("󰄀n","󰈀"):l,l=D||u||_l?l.replaceAll("⒆","<sup>P</sup><sub>K</sub>").replaceAll("⒇","<sup>M</sup><sub>N</sub>"):l,l=P?l.replaceAll("","<sup>P</sup><sub>K</sub>").replaceAll("","<sup>M</sup><sub>N</sub>"):l,l=H?l.replaceAll("",'󱄂<span class="literal-big">∞</span>󱄃'):l,l=u?l.replaceAll("[POKE]","<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>").replaceAll("[POKEBLOCK]",`<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>󱄂${k(s)}󱄃`).replaceAll("[BLOCK]",`󱄂${k(s)}󱄃`).replaceAll("[POKEMELLA]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>MELLA󱄃").replaceAll("[MELLA]","󱄂MELLA󱄃").replaceAll("[POKEMELLE]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>MELLE󱄃").replaceAll("[MELLE]","󱄂MELLE󱄃").replaceAll("[Pco]",`󱄂${rl()}󱄃`).replaceAll("[UNK_SPACER]"," ").replaceAll("[LV]",`󱄂<span class="literal-small">${q(s)}</span>󱄃`).replaceAll("[LV_2]",`󱄂<span class="literal-small">${ll(s)}</span>󱄃`).replaceAll("[LV_3]",`󱄂<span class="literal-small">${al(s)}</span>󱄃`).replaceAll("[PP]",`󱄂<span class="literal-small">${el(s)}</span>󱄃`).replaceAll("[ID]",`󱄂<span class="literal-small">${sl()}</span>󱄃`).replaceAll("[NO]",`󱄂<span class="literal-small">${nl(s)}</span>󱄃`):l,l=$?l.replaceAll(/\u{F0106}color=(.*?)\u{F0107}(.*?)\u{F0106}\/color\u{F0107}/gu,w).replaceAll("󰄆/color󰄇","").replaceAll(/\u{F0106}size=(.*?)\u{F0107}(.*?)\u{F0106}\/size\u{F0107}/gu,'<span style="font-size: $1">$2</span>').replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\u{F0106}pos=(.*?)\u{F0107}(.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span style="tab-size: $2">$1	$3</span>').replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\u{F0106}line-indent=(.*?)\u{F0107}(.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span style="tab-size: $2">$1	$3</span>'):l,l=A||E?l.replaceAll(/\[VAR FF00\((?!0000)([0-9A-F]{4})\)\](.+?)(?=\[VAR FF00\([0-9A-F]{4}\)\]|$)/gu,(n,a,r)=>`<span class="color" style="color: var(--color-${parseInt(a,16)})">${r}</span>`).replaceAll(/\[VAR FF00\(0000\)\]/gu,""):l,l=i||P?l.replaceAll(/\[VAR BD00\(([0-9A-F]{4}),([0-9A-F]{4}),([0-9A-F]{4})\)\](.+?)(?:\[VAR BD00\(0001,0002,0000\)\]|\[VAR BD01\]|$)/gu,(n,a,r,c,t)=>`<span class="color" style="color: var(--color-${parseInt(a,16)}-${parseInt(r,16)}-${parseInt(c,16)})">${t}</span>`).replaceAll("[VAR BD01]",""):l,l=A?l.replaceAll(/\[VAR FF01\(00C8\)\]\[VAR FF01\(0064\)\]/gu,"").replaceAll(/\[VAR FF01\(00C8\)\](.+?)(?:\[VAR FF01\(0064\)\]|[\u{F0201}\u{F0202}\u{F0200}]|$)/gu,'<span class="line-font-size-200"><span class="text-font-size-200">$1</span></span>').replaceAll("[VAR FF01(0064)]","").replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\[VAR 0203\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r,c)=>`<span style="tab-size: ${parseInt(r,16)}pt">${a}	${c}</span>`).replaceAll(/\[VAR 0203\(([0-9A-F]{4})\)\]/gu,"	").replaceAll(/\[VAR 0204\(([0-9A-F]{4})\)\]/gu,(n,a)=>`<div style="height: ${parseInt(a,16)}pt"></div>`).replaceAll(/\[VAR 0205\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[VAR 0206\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-right">$1</span>'):l,l=E?l.replaceAll(/\[VAR BD02\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[VAR BD03\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r)=>`<span class="line-align-right" style="padding-right: ${parseInt(a,16)}pt">${r}</span>`).replaceAll(/\[VAR BD04\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r)=>`<span class="line-align-left" style="padding-left: ${parseInt(a,16)}pt">${r}</span>`).replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\[VAR BD05\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r,c)=>`<span style="tab-size: ${parseInt(r,16)}pt">${a}	${c}</span>`).replaceAll(/\[VAR BD05\(([0-9A-F]{4})\)\]/gu,"	").replaceAll(/(\[VAR BD0A\(([0-9A-F]{4})\)\])([^[<{]*)/gu,ol):l,l=F?l.replaceAll(/\[ALIGN 1\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-left">$1</span>').replaceAll(/\[ALIGN 2\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[ALIGN 3\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-right">$1</span>'):l,l=dl?l.replaceAll(/\u{F0106}(\/?[bu]) *\u{F0107}/giu,"<$1>"):l,e){case"SunMoon":case"UltraSunUltraMoon":l=l.replaceAll(/^\[VAR BD06\([0-9A-F]{4}\)\]([^\u{F0201}\u{F0202}\u{F0200}]*?)\u{F0200}(?=[^\u{F0201}\u{F0202}\u{F0200}]*?[\u{F0201}\u{F0202}]?$)/gu,(n,a)=>`${a}󰈀󱌀`);break;case"LetsGoPikachuLetsGoEevee":case"SwordShield":l=l.replaceAll(/\[VAR BD06\([0-9A-F]{4}\)\]([^\u{F0201}\u{F0202}\u{F0200}]*?)\u{F0200}/gu,(n,a)=>`${a}󰈀󱌀`);break;default:l=l.replaceAll(/\[VAR BD06\([0-9A-F]{4}\)\](.*)$/gu,(n,a)=>a.replaceAll(/(?<!\u{F0202})\u{F0200}/gu,"󰈀󱌀"))}l=A?l.replaceAll("󰈇󰈀",'<span class="c">[VAR 0207]</span><span class="n">\\n</span><br>').replaceAll("󰈈󰈀",'<span class="r">[VAR 0208]</span><span class="n">\\n</span><br>'):l,l=l.replaceAll("󰈁󰈀",'<span class="r">\\r</span><span class="n">\\n</span><br>').replaceAll("󰈂󰈀",'<span class="c">\\c</span><span class="n">\\n</span><br>').replaceAll("󰈀󰈂",'<span class="n">\\n</span><span class="c">\\c</span><br>'),l=A?l.replaceAll("󰈇",'<span class="c">[VAR 0207]</span><br>').replaceAll("󰈈",'<span class="r">[VAR 0208]</span><br>'):l,l=l.replaceAll("󰈁",'<span class="r">\\r</span><br>').replaceAll("󰈂",'<span class="c">\\c</span><br>').replaceAll("󰈀",'<span class="n">\\n</span><br>').replaceAll("󰋿",'<span class="e">\\e</span>').replaceAll("󰈃",'<span class="tab">	</span>');const Rl=["ja","ko","zh"].some(n=>s.startsWith(n))?"　":" ";if(l=l.replaceAll("<br>󱌀",`<wbr class="soft"><span class="soft">${Rl}</span>`),D){l=l.replaceAll("#71",'<span class="color color-animation">').replaceAll(/(#\d{2})/gu,'<span class="var">$1</span>').replaceAll(/\u{F0106}COL1,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}\u{F0106}COL2,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,gl).replaceAll(/\u{F0106}COL1,LOAD,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,x).replaceAll(/\u{F0106}COL1,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,x).replaceAll(/\u{F0106}COL1,POP\u{F0107}\u{F0106}COL2,POP\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}COL1,POP\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}DIST,([\d.]+)\u{F0107}/gu,'<span class="spacing-$1">').replaceAll(/(\u{F0106}[0-9A-Z, ]+\u{F0107})/gu,'<span class="var">$1</span>').replaceAll(/%%/gu,'<span class="literal">%</span>').replaceAll(/(\u{F0100}(?:CU|CR|B|R))/gu,'<span class="var">$1</span>');const n=l.match(/<span\b/gu)?.length??0,a=l.match(/<\/span>/gu)?.length??0;a<n?l=l.concat("</span>".repeat(n-a)):n<a&&(l="<span>".repeat(a-n).concat(l))}return l=fl?l.replaceAll(/\[unknown5_08_([0-9a-f]{2})_([0-9a-f]{2})_([0-9a-f]{2})_([0-9a-f]{2})\](.*?)(?:\[unknown5_08_ff_ff_ff_ff\]|$|(?=\u{F1000}))/gu,il).replaceAll("[Player]",'<span class="var">[Player]</span>').replaceAll("[Player_alt]",'<span class="var">[Player_alt]</span>').replaceAll("[Rui]",'<span class="var">[Rui]</span>').replaceAll("[opp_trainer_class]",'<span class="var">[opp_trainer_class]</span>').replaceAll("[opp_trainer_name]",'<span class="var">[opp_trainer_name]</span>').replaceAll("[sent_out_pokemon_1]",'<span class="var">[sent_out_pokemon_1]</span>').replaceAll("[sent_out_pokemon_2]",'<span class="var">[sent_out_pokemon_2]</span>').replaceAll("[speechbubble]",'<span class="var">[speechbubble]</span>').replaceAll("[bubble_or_speaker]",'<span class="var">[bubble_or_speaker]</span>').replaceAll("[maybe_speaker_ID_toggle]",'<span class="var">[maybe_speaker_ID_toggle]</span>').replaceAll("[maybe_location]",'<span class="var">[maybe_location]</span>').replaceAll("[dialogue_end]",'<span class="func">[dialogue_end]</span>').replaceAll("[large_e]",'<span class="var">[large_e]</span>').replaceAll("[large_e+]",'<span class="var">[large_e+]</span>').replaceAll("[furi_kanji]",'<span class="var">[furi_kanji]</span>').replaceAll("[furi_kana]",'<span class="var">[furi_kana]</span>').replaceAll("[furi_close]",'<span class="var">[furi_close]</span>').replaceAll(/(\[some_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[unknown[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[var_[^\]]\])/gu,'<span class="var">$1</span>').replaceAll("󰄆SCOL=0x0d0e0f󰄇",'<span class="func">󰄆SCOL=0x0d0e0f󰄇</span>'):l,l=F?l.replaceAll(/\[COLOR (\d+)\](.*?)(?:\[COLOR \d+\]|[\u{F0201}\u{F0202}\u{F0200}]|$)/gu,'<span class="color" style="color: var(--color-$1)">$2</span>').replaceAll(/(\[VERTOFFSET -?[\d.]+\])/gu,'<span class="vertoffset">$1</span>').replaceAll(/\[FONT ([0126])\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[FONT \d+\]|$)/gu,'<span class="font-pbr-$1">$2</span>').replaceAll(/(\[FONT [\d.]+\])/gu,'<span class="func">$1</span>').replaceAll(/\[SPACING (-?[\d.]+)\](.*?$)/gu,'<span class="spacing-$1">$2</span>'):l,l=h?l.replaceAll(/(%((\d+\$)?(\d*d|\d*\.\d+[fs]m?|ls)|(\(\d+\)%|\d+\$)?\{\}|\(\d+\)))/gu,'<span class="var">$1</span>').replaceAll(/(\$\d+\$)/gu,'<span class="var">$1</span>'):l,l=v?l.replaceAll(/\[VAR 0003\(([0-9A-F]{2})[0-9A-F]{2}\)\](.*?)(?=\[VAR 0003\([0-9A-F]{4}\)\]|$)/gu,(n,a,r)=>`<span class="color" style="color: var(--color-${parseInt(a,16)})">${r}</span>`).replaceAll(/\[VAR 0003\(0000\)\]/gu,""):l,l=g?Z(l):l,l=d?X(l):l,l=E?$?l.replaceAll(/\[VAR 13(0[3-6])[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16)),B)).replaceAll(/\[VAR 14(0[3-9A-CF]|10)[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16)),M)).replaceAll(/\[VAR 15(0[3-9A-CF]|1[0-5])[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16)),T)).replaceAll(/\[VAR 16(0[3-9A])[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16)),U)).replaceAll(/\[VAR 17(0[3-9A-E]|1[3-6])[^\]]*?\]/gu,(n,a)=>R(I(parseInt(a,16),!0),G)):l.replaceAll(/\[VAR 13(0[0-3])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),B)).replaceAll(/\[VAR 14(0[0-9A-B])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),M)).replaceAll(/\[VAR 15(0[0-9A-F])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),T)).replaceAll(/\[VAR 16(0[0-7])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),U)).replaceAll(/\[VAR 17(0[0-9A-F])[^\]]*?\]/gu,(n,a)=>R(parseInt(a,16),G)):l,s==="ko"&&A?l=l.replaceAll(/\[VAR ((?:0[1346]|34)[0-9A-F]{2})\(([0-9A-F]{4}),([0-9A-F]{4})\)\]/gu,(n,a,r,c)=>`[VAR ${a}(${r})]${V(parseInt(c,16)%8)}`):s==="ko"&&e==="BlackWhite"?l=l.replaceAll(/\[VAR (0[12][0-9A-F]{2})\(([0-9A-F]{4}),([0-9A-F]{4})\)\]/gu,(n,a,r,c)=>`[VAR ${a}(${r})]${V(parseInt(c,16)%8)}`):e==="Black2White2"?l=l.replaceAll(/\[VAR 3400\(([0-9A-F]{4})\)\]/gu,(n,a)=>V(parseInt(a,16)%8)):$?l=l.replaceAll(/\[VAR 1900\(tagParameter=(\d+)\)\]/gu,(n,a)=>V(a)):E?l=l.replaceAll(/\[VAR 1900\(([0-9A-F]{4})\)\]/gu,(n,a)=>V(parseInt(a,16))):v&&(l=l.replaceAll(/\[VAR 0600\((0[0-9A-F])[0-9A-F]{2}\)\]/gu,(n,a)=>V(parseInt(a,16)))),l=u?l.replaceAll(/\u{F1102}\u{F1200}(.*?)\u{F1104}(.*?)\u{F1103}/gu,(n,a,r)=>L(a,r)).replaceAll(/\u{F1102}\u{F1207}(.*?)\u{F1104}(.*?)\u{F1103}/gu,(n,a,r)=>ul(a,r)):l,l=E?l.replaceAll(/\[VAR 1100\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c)=>{const t=parseInt(r,16),o=t+parseInt(a,16);return`${L(c.substring(0,t),c.substring(t,o))}${c.substring(o)}`}).replaceAll(/\[VAR 1100\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),00([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c,t)=>{const o=parseInt(r,16),f=o+parseInt(a,16),b=f+parseInt(c,16);return`${L(t.substring(0,o),t.substring(o,f),t.substring(f,b))}${t.substring(b)}`}).replaceAll(/\[VAR 1101\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c)=>{const t=parseInt(r,16),o=t+parseInt(a,16);return`${S(c.substring(0,t),c.substring(t,o))}${c.substring(o)}`}).replaceAll(/\[VAR 1102\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c,t,o)=>{const f=parseInt(r,16),b=f+parseInt(a,16),N=b+parseInt(t,16),z=N+parseInt(c,16);return`${O(o.substring(0,f),o.substring(f,b),o.substring(b,N),o.substring(N,z))}${o.substring(z)}`}).replaceAll(/\[VAR (?:1104|1106)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c)=>{const t=parseInt(r,16),o=t+parseInt(a,16);return`${m(c.substring(0,t),c.substring(t,o))}${c.substring(o)}`}).replaceAll(/\[VAR 1105\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),00([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c,t)=>{const o=parseInt(r,16),f=o+parseInt(a,16),b=f+parseInt(c,16);return`${S(t.substring(0,o),t.substring(o,f),t.substring(f,b))}${t.substring(b)}`}).replaceAll(/\[VAR 1107\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c)=>{const t=parseInt(r,16),o=t+parseInt(a,16);return`${tl(c.substring(0,t),c.substring(t,o))}${c.substring(o)}`}):l,l=$?l.replaceAll(/\[VAR (?:1[3-7A]00|1901)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?\)\]/gu,(n,a,r)=>L(a,r??"")).replaceAll(/\[VAR (?:1[3-7]01|1902)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?\)\]/gu,(n,a,r)=>S(a,r??"")).replaceAll(/\[VAR (?:1[3-7]02|1903)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)\|([^[<{]*?)\|([^[<{]*?)\|([^[<{]*?)\)\]/gu,(n,a,r,c,t)=>O(a,r,c,t)).replaceAll(/\[VAR (?:130A|1413|1517|160E|1712|1904)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?(?:\|([^[<{]*?))?\)\]/gu,(n,a,r,c)=>S(a,r??"",c??"")).replaceAll(/\[VAR (?:1411|1518)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?(?:,forceGrmID=\d+)?\)\]/gu,(n,a,r)=>m(a,r??"")):l,l=u?l.replaceAll(/(\[DYNAMIC \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[(?:(?:[ABLR]|START|SELECT)_BUTTON|DPAD_(?:UP|DOWN|LEFT|RIGHT|UPDOWN|LEFTRIGHT|NONE))\])/gu,'<span class="var">$1</span>').replaceAll(/(\[EMOJI_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll("[NOP]",'<span class="var">[NOP]</span>').replaceAll(/(\[COLOR [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll("[COLOR]",'<span class="func">[COLOR]</span>').replaceAll(/(\[HIGHLIGHT [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[SHADOW [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[COLOR_HIGHLIGHT_SHADOW [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[PALETTE [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[(?:FONT [^\]]+?|FONT_[^\]]+?)\])/gu,'<span class="func">$1</span>').replaceAll(/(\[PAUSE \d+\])/gu,'<span class="func">$1</span>').replaceAll("[PAUSE_UNTIL_PRESS]",'<span class="func">[PAUSE_UNTIL_PRESS]</span>').replaceAll("[WAIT_SE]",'<span class="func">[WAIT_SE]</span>').replaceAll(/(\[PLAY_BGM [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[ESCAPE \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[PLAY_SE [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[CLEAR \d+\])/gu,'<span class="func">$1</span>').replaceAll(/(\[CLEAR_TO \d+\])/gu,'<span class="func">$1</span>').replaceAll(/(\[MIN_LETTER_SPACING \d+\])/gu,'<span class="func">$1</span>').replaceAll("[PAUSE_MUSIC]",'<span class="func">[PAUSE_MUSIC]</span>').replaceAll("[RESUME_MUSIC]",'<span class="func">[RESUME_MUSIC]</span>').replaceAll("[PLAYER]",'<span class="var">[PLAYER]</span>').replaceAll("[STR_VAR_1]",'<span class="var">[STR_VAR_1]</span>').replaceAll("[STR_VAR_2]",'<span class="var">[STR_VAR_2]</span>').replaceAll("[STR_VAR_3]",'<span class="var">[STR_VAR_3]</span>').replaceAll("[RIVAL]",'<span class="var">[RIVAL]</span>').replaceAll(/(\[B_[^\]]+?\])/gu,'<span class="var">$1</span>'):l,l=A?l.replaceAll(/\[(VAR 013[2-9A-B][^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Digit]</span>').replaceAll(/\[(VAR (?:0[1346]|34)[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Name]</span>').replaceAll(/\[(VAR 02[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl1]</span>').replaceAll(/\[(VAR FF[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl2]</span>'):l,l=E?l.replaceAll(/\[(VAR 01[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Name]</span>').replaceAll(/\[(VAR 02[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Digit]</span>').replaceAll(/\[(VAR 1[0-9A][^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Grm]</span>').replaceAll(/\[(VAR BD[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl1]</span>').replaceAll(/\[(VAR BE[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl2]</span>'):l,l=v?l.replaceAll(/\[(VAR 02[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Character]</span>').replaceAll(/\[(VAR 03[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Digit]</span>').replaceAll(/\[(VAR 04[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Name]</span>'):l,l=l.replaceAll("[NULL]",'<span class="null">[NULL]</span>').replaceAll("[COMP]",'<span class="func compressed">[COMP]</span>').replaceAll(/(\[VAR [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[WAIT [\d.]+\])/gu,'<span class="func wait">$1</span>').replaceAll(/(\[SFX [\d.]+\])/gu,'<span class="func sfx">$1</span>').replaceAll(/(\[~ \d+\])/gu,'<span class="unused">$1</span>').replaceAll(/\{([^|}]+)\|([^|}]+)\}/gu,"<ruby>$1<rp>(</rp><rt>$2</rt><rp>)</rp></ruby>").replaceAll(/(\s+$)/gu,'<span class="whitespace-trailing">$1</span>').replaceAll(/(^\s+)/gu,'<span class="whitespace-leading">$1</span>'),l=E?Y(l):l,l=l.replaceAll(/\u{F1102}(.+?)\u{F1103}/gu,'<span class="literal">$1</span>'),l=l.replaceAll("󰄀","\\").replaceAll("󰄂","[").replaceAll("󰄄","{").replaceAll("󰄆","&lt;").replaceAll("󰄇","&gt;"),y(l)}const $l=(l,e,s,p,u)=>(A,i)=>{if(u===void 0||i===e)return A;for(const[$,{branch:F,line:h}]of Object.entries(u)){const v=`[${$}]`;let g;switch(F){case void 0:g=l[i].get(h);break;case"gender":g=`󱈀${h.map(d=>l[i].get(d)).join("󱄄")}`;break;case"version":g=`󱈇${h.map(d=>l[i].get(d)).join("󱄄")}`;break;case"language":{const d=h[p[i]];d!==void 0&&(g=l[i].get(d));break}}if(g===void 0)return A;s==="BattleRevolution"&&(g=g.substring(19).trim()),A=A.replaceAll(v,`󱄂${g}󱄃`)}return A};self.onmessage=l=>{try{const{collection:e,languages:s,richText:p,speakers:u,literals:A,lines:i,corpusLiterals:$}=l.data,F=$l(A,s.indexOf(W),e,s,$),h={...l.data,lines:i.map(v=>v.map((g,d)=>(p&&(u.length>0&&(g=K(g,u[d],s[d])),g=F(g,d)),g=Fl(g,e,s[d],p),g)))};postMessage(h)}catch(e){console.error(e);const s={...l.data,richText:!1,error:!0};postMessage(s)}}})();
