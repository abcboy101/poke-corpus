const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/search-Cc_rmbFC.js","assets/vendor-DurYssVT.js","assets/react-dom-0UUlsQmj.js","assets/search-Wz3PsN3N.css","assets/CacheManager-DShn6D61.js","assets/i18n-en-Gm_Ew0Ko.js","assets/CacheManager-DCz-erdP.css"])))=>i.map(i=>d[i]);
import{r as m,j as o,i as y,B as A,a as I,b as w,u as O,R as D}from"./vendor-DurYssVT.js";import{c as V}from"./react-dom-0UUlsQmj.js";import{t as b,c as k,l as S,f as N,a as M}from"./i18n-en-Gm_Ew0Ko.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();const C="modulepreload",B=function(t){return"/poke-corpus/"+t},x={},n=function(s,e,c){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");r=Promise.allSettled(e.map(d=>{if(d=B(d),d in x)return;x[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const i=document.createElement("link");if(i.rel=f?"stylesheet":C,f||(i.as="script"),i.crossOrigin="",i.href=d,u&&i.setAttribute("nonce",u),document.head.appendChild(i),f)return new Promise((j,E)=>{i.addEventListener("load",j),i.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return r.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return s().catch(a)})};function F(t={}){const{immediate:s=!1,onNeedRefresh:e,onOfflineReady:c,onRegistered:r,onRegisteredSW:a,onRegisterError:l}=t;let u,d;const f=async(i=!0)=>{await d};async function p(){if("serviceWorker"in navigator){if(u=await n(async()=>{const{Workbox:i}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:i}},[]).then(({Workbox:i})=>new i("/poke-corpus/sw.js",{scope:"/poke-corpus/",type:"classic"})).catch(i=>{l?.(i)}),!u)return;u.addEventListener("activated",i=>{(i.isUpdate||i.isExternal)&&window.location.reload()}),u.addEventListener("installed",i=>{i.isUpdate||c?.()}),u.register({immediate:s}).then(i=>{a?a("/poke-corpus/sw.js",i):r?.(i)}).catch(i=>{l?.(i)})}}return d=p(),f}const ie=t=>t.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");function P(t){try{return localStorage.getItem(t)}catch{return null}}function ae(t,s){try{localStorage.setItem(t,s)}catch{return}}const z=["system","light","dark"],H=t=>z.includes(t),$=t=>typeof t=="string"&&H(t)?t:"system",U=()=>$(P("mode")),L=500,ce=t=>typeof t=="number"&&!Number.isNaN(t)&&Number.isInteger(t)&&t>0,W=()=>{const t=+(P("corpus-limit")??L);return Number.isNaN(t)?L:t},le=()=>P("corpus-richText")!=="false",R=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"];function q(t){const s=Math.min(Math.floor((t.toString().length-1)/3),R.length-1),e={style:"unit",unit:R[s],unitDisplay:s===0?"long":"short",minimumFractionDigits:s===0?0:1,maximumFractionDigits:1,maximumSignificantDigits:3,roundingPriority:"lessPrecision"};return[t/Math.pow(1e3,s),e]}function ue(t){const[s,e]=q(t);return{amount:s,formatParams:{amount:e}}}function G(t,s=1){return[t,{style:"percent",minimumFractionDigits:s,maximumFractionDigits:s}]}function de(t,s=1){const[e,c]=G(t,s);return{amount:e,formatParams:{amount:c}}}function me(){return"scheduler"in window&&"yield"in scheduler?scheduler.yield():new Promise(t=>{setTimeout(t,0)})}function Z({classes:t,message:s,buttons:e,checkbox:c,cancelCallback:r}){const[a,l]=m.useState(!1),[u,d]=m.useState(c?.checked??!1),f=m.useRef(null),p=m.useRef(null);m.useEffect(()=>{(s||e||c)&&(l(!0),d(c?.checked??!1))},[s,e,c]),m.useEffect(()=>{const _=f.current,g=p.current;if(_!==null)if(a){if(_.showModal(),e){const h=e.findIndex(v=>v.autoFocus);g!==null&&h!==-1&&Array.from(g.children).filter(v=>v instanceof HTMLButtonElement)[h].focus()}}else _.close()},[a]);const i=(_,g)=>()=>{l(!1),_&&_(),g&&g(u)},j=()=>{r&&r(),l(!1)};if(!a)return null;const E=["modal"];return t&&t.forEach(_=>E.push(_)),o.jsxs("dialog",{ref:f,id:"modal",className:E.join(" "),onCancel:j,children:[o.jsx("div",{className:"modal-message",children:s}),c&&o.jsx("div",{className:"modal-checkbox",children:o.jsxs("div",{children:[o.jsx("input",{type:"checkbox",id:"modalCheckbox",name:"modalCheckbox",checked:u,onChange:_=>d(_.target.checked)}),o.jsx("label",{htmlFor:"modalCheckbox",children:c.message})]})}),o.jsx("div",{ref:p,className:"modal-button-group",children:e&&e.map(({message:_,callback:g,checkboxCallback:h,autoFocus:v},T)=>o.jsx("button",{type:"button",onClick:i(g,h),autoFocus:v,children:_},T))})]})}const K="data:image/svg+xml,%3csvg%20version='1.1'%20width='128'%20height='128'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='64'%20cy='64'%20r='62'%20fill='%23fff'%20/%3e%3ccircle%20cx='64'%20cy='64'%20r='60'%20fill='%23000'%20/%3e%3cpath%20d='M%2018%2064%20A%2046%2046%20180%201%201%20110%2064%20Z'%20fill='%23C00'/%3e%3cpath%20d='M%2018%2064%20A%2046%2046%20180%201%200%20110%2064%20Z'%20fill='%23FFF'/%3e%3cpath%20d='M%2013%2064%20H%20115'%20stroke-width='11'%20stroke='%23000'%20fill='%23000'%20/%3e%3ccircle%20cx='64'%20cy='64'%20r='18.5'%20stroke-width='10'%20stroke='%23000'%20fill='%23fff'%20/%3e%3c/svg%3e",J=(t,s,e)=>{const c=t[s];return c?typeof c=="function"?c():Promise.resolve(c):new Promise((r,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+s+(s.split("/").length!==e?". Note that variables only represent file names one level deep.":""))))})};y.use(A).use(I).use(w((t,s)=>J(Object.assign({"./de/collections.json":()=>n(()=>import("./i18n-de-DP7ojUQr.js").then(e=>e.c),[]),"./de/languages.json":()=>n(()=>import("./i18n-de-DP7ojUQr.js").then(e=>e.l),[]),"./de/translation.json":()=>n(()=>import("./i18n-de-DP7ojUQr.js").then(e=>e.t),[]),"./en-GB/translation.json":()=>n(()=>import("./i18n-en-Gm_Ew0Ko.js").then(e=>e.h),[]),"./en/collections.json":()=>n(()=>import("./i18n-en-Gm_Ew0Ko.js").then(e=>e.d),[]),"./en/files.json":()=>n(()=>import("./i18n-en-Gm_Ew0Ko.js").then(e=>e.g),[]),"./en/languages.json":()=>n(()=>import("./i18n-en-Gm_Ew0Ko.js").then(e=>e.e),[]),"./en/translation.json":()=>n(()=>import("./i18n-en-Gm_Ew0Ko.js").then(e=>e.b),[]),"./es/collections.json":()=>n(()=>import("./i18n-es-ckx2TuW4.js").then(e=>e.c),[]),"./es/languages.json":()=>n(()=>import("./i18n-es-ckx2TuW4.js").then(e=>e.l),[]),"./es/translation.json":()=>n(()=>import("./i18n-es-ckx2TuW4.js").then(e=>e.t),[]),"./fr-CA/translation.json":()=>n(()=>import("./i18n-fr-e3SoXec2.js").then(e=>e.t),[]),"./fr/collections.json":()=>n(()=>import("./i18n-fr-e3SoXec2.js").then(e=>e.c),[]),"./fr/languages.json":()=>n(()=>import("./i18n-fr-e3SoXec2.js").then(e=>e.l),[]),"./fr/translation.json":()=>n(()=>import("./i18n-fr-e3SoXec2.js").then(e=>e.a),[]),"./it/collections.json":()=>n(()=>import("./i18n-it-BWhKeG--.js").then(e=>e.c),[]),"./it/languages.json":()=>n(()=>import("./i18n-it-BWhKeG--.js").then(e=>e.l),[]),"./it/translation.json":()=>n(()=>import("./i18n-it-BWhKeG--.js").then(e=>e.t),[]),"./ja/collections.json":()=>n(()=>import("./i18n-ja-ppwA56n6.js").then(e=>e.c),[]),"./ja/files.json":()=>n(()=>import("./i18n-ja-ppwA56n6.js").then(e=>e.f),[]),"./ja/languages.json":()=>n(()=>import("./i18n-ja-ppwA56n6.js").then(e=>e.l),[]),"./ja/translation.json":()=>n(()=>import("./i18n-ja-ppwA56n6.js").then(e=>e.t),[]),"./ko/collections.json":()=>n(()=>import("./i18n-ko-B-lIEEXK.js").then(e=>e.c),[]),"./ko/files.json":()=>n(()=>import("./i18n-ko-B-lIEEXK.js").then(e=>e.f),[]),"./ko/languages.json":()=>n(()=>import("./i18n-ko-B-lIEEXK.js").then(e=>e.l),[]),"./ko/translation.json":()=>n(()=>import("./i18n-ko-B-lIEEXK.js").then(e=>e.t),[]),"./zh-Hans/collections.json":()=>n(()=>import("./i18n-zh-DTb3wzjz.js").then(e=>e.c),[]),"./zh-Hans/languages.json":()=>n(()=>import("./i18n-zh-DTb3wzjz.js").then(e=>e.l),[]),"./zh-Hans/translation.json":()=>n(()=>import("./i18n-zh-DTb3wzjz.js").then(e=>e.t),[]),"./zh-Hant/collections.json":()=>n(()=>import("./i18n-zh-DTb3wzjz.js").then(e=>e.a),[]),"./zh-Hant/languages.json":()=>n(()=>import("./i18n-zh-DTb3wzjz.js").then(e=>e.b),[]),"./zh-Hant/translation.json":()=>n(()=>import("./i18n-zh-DTb3wzjz.js").then(e=>e.d),[])}),`./${t}/${s}.json`,3))).init({partialBundledLanguages:!0,fallbackLng:"en",ns:["translation","collections","languages","files"],resources:{en:{translation:b,collections:k,languages:S,files:N},"en-GB":{translation:M}}});const Q=m.lazy(()=>n(()=>import("./search-Cc_rmbFC.js").then(t=>t.O),__vite__mapDeps([0,1,2,3]))),X=m.lazy(()=>n(()=>import("./search-Cc_rmbFC.js").then(t=>t.S),__vite__mapDeps([0,1,2,3]))),Y=m.lazy(()=>n(()=>import("./CacheManager-DShn6D61.js"),__vite__mapDeps([4,1,2,0,3,5,6])));function ee(){const{t}=O();return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"item-group",children:t("status.loading")}),o.jsx("div",{className:"app-window"})]})}function te(){const{t}=O(),[,s]=m.useTransition(),[e,c]=m.useState(W),[r,a]=m.useState("Search"),[l,u]=m.useState(null),[d,f]=m.useState(!1);m.useEffect(()=>{const h=U();document.body.classList.add(`mode-${h}`)},[]);const p=h=>{u(h)},i=()=>{s(()=>{const h=r!=="Search"?"Search":"CacheManager";a(h),d||f(h==="CacheManager")})},j=d&&o.jsx(Y,{active:r==="CacheManager",showModal:p}),E=o.jsxs("header",{className:"header",children:[o.jsx("h1",{children:o.jsxs("a",{href:"/poke-corpus/",children:[o.jsx("img",{className:"header-logo",src:K,alt:"",height:"40",width:"40"})," ",t("title",{version:t("version")})]})}),o.jsx(m.Suspense,{children:o.jsx(Q,{showModal:p,limit:e,setLimit:c})})]}),_=o.jsxs("footer",{children:[o.jsx("span",{children:t("tagline")}),o.jsx("span",{className:"separator",children:" | "}),o.jsx("span",{children:t("footerText")}),o.jsx("span",{className:"separator",children:" | "}),o.jsx("span",{children:o.jsx("button",{className:"link",onClick:i,children:t(r!=="Search"?"backToSearch":"manageCache")})}),o.jsx("span",{className:"separator",children:" | "}),o.jsx("span",{children:o.jsx("a",{href:"https://github.com/abcboy101/poke-corpus",children:t("github")})})]}),g=["app",`view-${r.toLowerCase()}`];return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&g.push("ua-safari"),o.jsxs("div",{className:g.join(" "),lang:y.language,dir:y.dir(),children:[E,o.jsxs(m.Suspense,{fallback:o.jsx(ee,{}),children:[o.jsx(X,{showModal:p,limit:e}),j]}),_,o.jsx(Z,{...l})]})}const ne=V.createRoot(document.getElementById("root"));ne.render(o.jsx(D.StrictMode,{children:o.jsx(te,{})}));F({onOfflineReady(){console.log("Ready to work offline!")}});export{ae as a,H as b,le as c,K as d,ie as e,de as f,U as g,L as h,ce as i,ue as j,P as l,z as m,me as y};
