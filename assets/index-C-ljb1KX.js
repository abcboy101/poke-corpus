import{c as H,u as W,r as j,j as a,a as Te,i as le,B as Ie,b as $e,d as Fe,E as fe,R as De}from"./vendor-rLEg2iCB.js";import{R as Oe}from"./react-dom-Bw9VYtdV.js";import{t as Ve,i as Be,f as qe,l as ze,c as Ue,a as We}from"./i18n-en-84MEhzKe.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();const He="modulepreload",Ge=function(s){return"/poke-corpus/"+s},pe={},O=function(e,t,l){let o=Promise.resolve();if(t&&t.length>0){let u=function(i){return Promise.all(i.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");o=u(t.map(i=>{if(i=Ge(i),i in pe)return;pe[i]=!0;const f=i.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const b=document.createElement("link");if(b.rel=f?"stylesheet":He,f||(b.as="script"),b.crossOrigin="",b.href=i,r&&b.setAttribute("nonce",r),document.head.appendChild(b),f)return new Promise((L,_)=>{b.addEventListener("load",L),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${i}`)))})}))}function c(n){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n}return o.then(n=>{for(const r of n||[])r.status==="rejected"&&c(r.reason);return e().catch(c)})};function Ke(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:l,onRegistered:o,onRegisteredSW:c,onRegisterError:n}=s;let r,u;const i=async(m=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(r=await O(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/poke-corpus/sw.js",{scope:"/poke-corpus/",type:"classic"})).catch(m=>{n?.(m)}),!r)return;r.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),r.addEventListener("installed",m=>{m.isUpdate||l?.()}),r.register({immediate:e}).then(m=>{c?c("/poke-corpus/sw.js",m):o?.(m)}).catch(m=>{n?.(m)})}}return u=f(),i}const be=s=>s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");function Z(s){try{return localStorage.getItem(s)}catch{return null}}function X(s,e){try{localStorage.setItem(s,e)}catch{return}}function Je(s){try{localStorage.removeItem(s)}catch{return}}const _e=["system","light","dark"],Se=s=>_e.some(e=>s===e),Ze=s=>typeof s=="string"&&Se(s)?s:"system",ke=()=>Ze(Z("mode")),ue=500,Qe=s=>!Number.isNaN(s)&&Number.isInteger(s)&&s>0,Xe=()=>{const s=+(Z("corpus-limit")??ue);return Number.isNaN(s)?ue:s},Ye=()=>Z("corpus-richText")!=="false",xe=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"];function oe(s){const e=Math.min(Math.floor((s.toString().length-1)/3),xe.length-1),t={style:"unit",unit:xe[e],unitDisplay:e===0?"long":"short",minimumFractionDigits:e===0?0:1,maximumFractionDigits:1,maximumSignificantDigits:3,roundingPriority:"lessPrecision"};return{amount:s/Math.pow(1e3,e),formatParams:{amount:t}}}function et(s,e=1){return{amount:s,formatParams:{amount:{style:"percent",minimumFractionDigits:e,maximumFractionDigits:e}}}}function Ce(s){try{return JSON.parse(s)}catch(e){return console.error(e),null}}function Q(s){console.error(s)}const tt=[{code:"en",name:"English (United States)"},{code:"en-GB",name:"English (United Kingdom)"},{code:"ja",name:"日本語"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français (France)"},{code:"fr-CA",name:"Français (Canada)"},{code:"es",name:"Español (España)"},{code:"it",name:"Italiano"},{code:"ko",name:"한국어"},{code:"zh-Hans",name:"简体中文"},{code:"zh-Hant",name:"繁体中文"}];function st(s){const e=H.c(61),{showModal:t,language:l,setLanguage:o,richText:c,richTextRef:n,limit:r,limitRef:u}=s,{t:i}=W(),[f,m]=j.useState(ke);let b;e[0]!==o||e[1]!==t||e[2]!==i?(b=I=>{Te(I.target.value,B=>{B?.some(ot)?(console.error(B),t({message:i("options.network"),buttons:[{message:a.jsx(Le,{}),autoFocus:!0}]})):o(I.target.value)}).catch(Q)},e[0]=o,e[1]=t,e[2]=i,e[3]=b):b=e[3];const L=b;let _;e[4]!==f?(_=I=>{const B=I.target.value;Se(B)&&(m(B),X("mode",B),document.body.classList.replace(`mode-${f}`,`mode-${B}`))},e[4]=f,e[5]=_):_=e[5];const y=_,k=at;let M;e[6]!==i?(M=i("options.language"),e[6]=i,e[7]=M):M=e[7];let A;e[8]!==M?(A=a.jsx("label",{htmlFor:"language",children:M}),e[8]=M,e[9]=A):A=e[9];let T;e[10]===Symbol.for("react.memo_cache_sentinel")?(T=tt.map(nt),e[10]=T):T=e[10];let d;e[11]!==l||e[12]!==L?(d=a.jsx("select",{name:"language",id:"language",onChange:L,defaultValue:l,autoFocus:!0,translate:"no",children:T}),e[11]=l,e[12]=L,e[13]=d):d=e[13];let v;e[14]!==i?(v=i("options.mode"),e[14]=i,e[15]=v):v=e[15];let x;e[16]!==v?(x=a.jsx("label",{htmlFor:"mode",children:v}),e[16]=v,e[17]=x):x=e[17];let S;e[18]!==i?(S=_e.map(I=>a.jsx("option",{value:I,children:i(`options.modes.${I}`)},I)),e[18]=i,e[19]=S):S=e[19];let w;e[20]!==f||e[21]!==y||e[22]!==S?(w=a.jsx("select",{name:"mode",id:"mode",onChange:y,defaultValue:f,children:S}),e[20]=f,e[21]=y,e[22]=S,e[23]=w):w=e[23];let P;e[24]!==i?(P=i("options.longURL"),e[24]=i,e[25]=P):P=e[25];let C;e[26]!==P?(C=a.jsx("label",{htmlFor:"longURL",children:P}),e[26]=P,e[27]=C):C=e[27];let $,N;e[28]===Symbol.for("react.memo_cache_sentinel")?($=Z("corpus-longURL")??"false",N=["true","false"],e[28]=$,e[29]=N):($=e[28],N=e[29]);let D;e[30]!==i?(D=a.jsx("select",{name:"longURL",id:"longURL",onChange:k,defaultValue:$,children:N.map(I=>a.jsx("option",{value:I,children:i(`options.longURLSelect.${I}`)},I))}),e[30]=i,e[31]=D):D=e[31];let E;e[32]!==i?(E=i("options.richText"),e[32]=i,e[33]=E):E=e[33];let F;e[34]!==E?(F=a.jsx("label",{htmlFor:"richText",children:E}),e[34]=E,e[35]=F):F=e[35];const z=c?"true":"false";let U;e[36]===Symbol.for("react.memo_cache_sentinel")?(U=["true","false"],e[36]=U):U=e[36];let p;e[37]!==i?(p=U.map(I=>a.jsx("option",{value:I,children:i(`options.richTextSelect.${I}`)},I)),e[37]=i,e[38]=p):p=e[38];let q;e[39]!==n||e[40]!==z||e[41]!==p?(q=a.jsx("select",{ref:n,name:"richText",id:"richText",defaultValue:z,children:p}),e[39]=n,e[40]=z,e[41]=p,e[42]=q):q=e[42];let V;e[43]!==i?(V=i("options.limit"),e[43]=i,e[44]=V):V=e[44];let h;e[45]!==V?(h=a.jsx("label",{htmlFor:"limit",children:V}),e[45]=V,e[46]=h):h=e[46];let g;e[47]!==r||e[48]!==u?(g=a.jsx("input",{ref:u,type:"number",name:"limit",id:"limit",min:1,defaultValue:r}),e[47]=r,e[48]=u,e[49]=g):g=e[49];let R;return e[50]!==w||e[51]!==C||e[52]!==D||e[53]!==F||e[54]!==q||e[55]!==h||e[56]!==g||e[57]!==A||e[58]!==d||e[59]!==x?(R=a.jsx("div",{className:"options",children:a.jsxs("div",{className:"options-grid",children:[A,d,x,w,C,D,F,q,h,g]})}),e[50]=w,e[51]=C,e[52]=D,e[53]=F,e[54]=q,e[55]=h,e[56]=g,e[57]=A,e[58]=d,e[59]=x,e[60]=R):R=e[60],R}function nt(s){return a.jsx("option",{value:s.code,lang:s.code,children:s.name},s.code)}function at(s){const e=s.target.value;(e==="true"||e==="false")&&X("corpus-longURL",e)}function ot(s){return!s.message.includes("Unknown variable dynamic import")}function Le(){const s=H.c(2),{t:e}=W();let t;return s[0]!==e?(t=e("options.close"),s[0]=e,s[1]=t):t=s[1],t}function lt(s){const e=H.c(22),{t}=W(),{showModal:l,setRichText:o,setLimit:c}=s,n=j.useRef(null),r=j.useRef(null);let u;e[0]!==c||e[1]!==o?(u=()=>{if(n.current!==null){const d=n.current.value;(d==="true"||d==="false")&&(X("corpus-richText",d),o(d!=="false"))}if(r.current!==null){const d=r.current.valueAsNumber;Qe(d)&&(X("corpus-limit",d.toString()),c(d))}},e[0]=c,e[1]=o,e[2]=u):u=e[2];const i=u;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=["modal-options"],e[3]=f):f=e[3];let m;e[4]!==s?(m=a.jsx(st,{...s,richTextRef:n,limitRef:r}),e[4]=s,e[5]=m):m=e[5];let b;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=a.jsx(Le,{}),e[6]=b):b=e[6];let L;e[7]!==i?(L=[{message:b,callback:i}],e[7]=i,e[8]=L):L=e[8];let _;e[9]!==i||e[10]!==m||e[11]!==L?(_={classes:f,message:m,buttons:L,cancelCallback:i},e[9]=i,e[10]=m,e[11]=L,e[12]=_):_=e[12];const y=_;let k;e[13]!==y||e[14]!==l?(k=()=>{l(y)},e[13]=y,e[14]=l,e[15]=k):k=e[15];let M;e[16]===Symbol.for("react.memo_cache_sentinel")?(M=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#gear"})}),e[16]=M):M=e[16];let A;e[17]!==t?(A=t("options.options"),e[17]=t,e[18]=A):A=e[18];let T;return e[19]!==k||e[20]!==A?(T=a.jsxs("button",{className:"header-options",onClick:k,children:[M,A]}),e[19]=k,e[20]=A,e[21]=T):T=e[21],T}function ct(s){return new Worker("/poke-corpus/assets/searchWorkerManager-CfLNjrNT.js",{name:s?.name})}function rt(s){return new Worker("/poke-corpus/assets/textWorker-DJww6e9l.js",{name:s?.name})}const it=["error","regex","noMatch","network","boolean.parentheses","boolean.regex","boolean.slash","boolean.quote","boolean.operand","boolean.empty","boolean.where"],ut=s=>it.some(e=>s===e),ht=["waiting","loading","processing","collecting"],Ee=s=>ht.some(e=>s===e),se=["exact","regex","boolean","all"],ge=s=>se.some(e=>s===e),Pe={id:"",file:"",query:"",type:"all",caseInsensitive:!0,common:!0,script:!0,showAllLanguages:!0,run:!1},dt=s=>({...Pe,collections:s.collections.filter(e=>s.getCollection(e).structured),languages:s.languages}),ft=s=>{function e(h){const g={};return h.id!==void 0&&(g.id=h.id),h.file!==void 0&&(g.file=h.file),h.run!==void 0&&(g.run=h.run.toString()),new URLSearchParams({query:h.query,type:h.type,caseInsensitive:h.caseInsensitive.toString(),common:h.common.toString(),script:h.script.toString(),showAllLanguages:h.showAllLanguages.toString(),collections:h.collections.join(","),languages:h.languages.join(","),...g}).toString()}function t(h){const g=new URLSearchParams(h);return{id:l(g.get("id")),file:l(g.get("file")),query:l(g.get("query")),type:c(g.get("type")??(g.get("regex")==="true"?"regex":null),ge),caseInsensitive:o(g.get("caseInsensitive")),common:o(g.get("common")),script:o(g.get("script")),showAllLanguages:o(g.get("showAllLanguages")),collections:n(g.get("collections"),s.isCollectionKey),languages:n(g.get("languages"),s.isLanguageKey,r),run:o(g.get("run"))}}function l(h){return h??void 0}function o(h){switch(h){case"true":return!0;case"false":return!1}}function c(h,g){if(h!==null&&g(h))return h}function n(h,g,R=I=>I){if(h!==null)return h.split(",").map(R).filter(g)}function r(h){switch(h){case"qid-ZZ":case"ja-JP":case"en-US":case"fr-FR":case"it-IT":case"de-DE":case"es-ES":case"ko-KR":return h.split("-",1)[0];case"ja-Hrkt-JP":return"ja-Hrkt";case"zh-CN":return"zh-Hans";case"zh-TW":return"zh-Hant";default:return h}}const u=s.collections.length^s.languages.length<<4,i=2,f=Math.ceil(s.languages.length/8),m=Math.ceil(s.collections.length/8),b=f+m,L=64,_=Math.ceil(Math.log2(s.languages.length+s.collections.length)),y=i+b,k=h=>btoa(String.fromCodePoint(...h)).replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),M=h=>Uint8Array.from(atob(h.replaceAll("_","/").replaceAll("-","+")),g=>g.charCodeAt(0));function A(h){const g={};h.id!==void 0&&(g.id=h.id),h.file!==void 0&&(g.file=h.file);const R=d(h);return D(R),new URLSearchParams({...g,q:h.query,s:k(R)}).toString()}function T(h){const g=new URLSearchParams(h),R={id:l(g.get("id")),file:l(g.get("file")),query:l(g.get("q"))},I=l(g.get("s"));if(!I)return R;try{const B=M(I).subarray(0,y);return E(B),{...R,...v(B)}}catch{return R}}function d(h){const g=new Uint8Array(y);g[1]=+(h.run??Pe.run)<<0|+h.caseInsensitive<<1|+h.common<<2|+h.script<<3|se.indexOf(h.type)<<4|+!h.showAllLanguages<<7;const R=g.subarray(i);x(h,R),w(R,g.subarray(1,2));let I=g.length;for(;g[I-1]===0&&I>1;)I--;return g.subarray(0,I)}function v(h){const g=new Uint8Array(b);h[1]&L?S(h.subarray(i),g):g.set(h.subarray(i));const R=s.languages.filter((B,G)=>N(g,G)===1),I=s.collections.filter((B,G)=>N(g,8*f+G)===1);return{run:(h[1]&1)!==0,caseInsensitive:(h[1]&2)!==0,common:(h[1]&4)!==0,script:(h[1]&8)!==0,type:se[(h[1]&48)>>4],showAllLanguages:(h[1]&128)===0,languages:R,collections:I}}function x(h,g){s.languages.forEach((R,I)=>{h.languages.includes(R)&&$(g,I)}),s.collections.forEach((R,I)=>{h.collections.includes(R)&&$(g,8*f+I)})}function S(h,g){const R=C(h);s.languages.forEach((I,B)=>{R.next().value&&$(g,B)}),s.collections.forEach((I,B)=>{R.next().value&&$(g,8*f+B)})}function w(h,g){const R=N(h,0)===1,I=P(h,R);let B=h.length;for(;h[B-1]===0;)B--;if(1+I.length*_<8*B){g[0]|=L,h.fill(0),R||$(h,0);let G=1;I.forEach(([Y])=>{for(let ee=0;ee<_;G++,ee++)$(h,G,Y>>ee&1)})}}function P(h,g){const R=[[0,g]];return s.languages.forEach((I,B)=>{const G=N(h,B)===1;R[R.length-1][1]===G?R[R.length-1][0]++:R.push([1,G])}),s.collections.forEach((I,B)=>{const G=N(h,8*f+B)===1;R[R.length-1][1]===G?R[R.length-1][0]++:R.push([1,G])}),R.pop(),R}function*C(h){const g=new Uint8Array(b);g.set(h);let R=N(g,0)!==1;for(let I=1;I+_<=g.length*8;){let B=0;for(let G=0;G<_;I++,G++)B|=N(g,I)<<G;if(B===0)break;for(;B>0;)yield R,B--;R=!R}for(;;)yield R}function $(h,g,R=1){h[g>>3]|=R<<(g&7)}function N(h,g){return h[g>>3]>>(g&7)&1}function D(h){const g=h[0]=F(h);z(g,h)}function E(h){const g=h[0];if(z(g,h),g!==F(h))throw Error("invalid checksum")}function F(h,g=1){return h.subarray(g).reduce((R,I)=>R+I&255,0)^u&255}function z(h,g,R=1){let I=U(h);for(let B=R;B<g.length;B++)g[B]^=I>>24,I=p(I)}const U=h=>2480367069*h&4294967295,p=h=>2438952949*h+2654435769&4294967295;function q(h){return(Z("corpus-longURL")==="true"?e:A)(h)}function V(h){const g=new URLSearchParams(h);return(g.get("q")||g.get("s")?T:t)(h)}return{_bytesBase64:y,_searchParamsToQueryString:e,_queryStringToSearchParams:t,_searchParamsToBase64:A,_base64ToSearchParams:T,_serializeByteArray:d,_deserializeByteArray:v,_encryptBytes:D,_decryptBytes:E,searchParamsToHash:q,hashToSearchParams:V}};function Ae(s){return ft(s)}const ne="qid",gt="zxx",mt=s=>s!==null&&typeof s=="object"&&"hash"in s&&typeof s.hash=="string"&&"size"in s&&typeof s.size=="number",pt=s=>{const e=Object.entries(s.corpus.collections);return Object.fromEntries(e.flatMap(([t,l])=>l.languages.flatMap(o=>l.files.map(c=>ce(t,o,c)))).map((t,l)=>[t,{hash:s.hashes[l],size:s.sizes[l]}]))},bt=s=>{const e=s.corpus,t=Object.keys(e.collections),l=Object.entries(e.collections),o=pt(s);return{_corpus:e,collections:t,languages:e.languages,entries:l,metadata:o,getCollection:c=>e.collections[c],isCollectionKey:c=>t.some(n=>c===n),isLanguageKey:c=>e.languages.some(n=>c===n)}},ce=(s,e,t)=>`corpus/${s}/${e}_${t}.txt.gz`;function Re(s){return{corpus:s._corpus,metadata:s.metadata}}const xt=(s,e,t)=>{const l=s[e];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((o,c)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(c.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})};le.use(Ie).use($e).use(Fe((s,e)=>xt(Object.assign({"./de/collections.json":()=>O(()=>import("./i18n-de-DvTfi3sT.js").then(t=>t.c),[]),"./de/files.json":()=>O(()=>import("./i18n-de-DvTfi3sT.js").then(t=>t.f),[]),"./de/languages.json":()=>O(()=>import("./i18n-de-DvTfi3sT.js").then(t=>t.l),[]),"./de/translation.json":()=>O(()=>import("./i18n-de-DvTfi3sT.js").then(t=>t.t),[]),"./en-GB/translation.json":()=>O(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.j),[]),"./en/collections.json":()=>O(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.d),[]),"./en/files.json":()=>O(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.g),[]),"./en/icons.json":()=>O(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.h),[]),"./en/languages.json":()=>O(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.e),[]),"./en/translation.json":()=>O(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.b),[]),"./es/collections.json":()=>O(()=>import("./i18n-es-DMw6BnNb.js").then(t=>t.c),[]),"./es/files.json":()=>O(()=>import("./i18n-es-DMw6BnNb.js").then(t=>t.f),[]),"./es/languages.json":()=>O(()=>import("./i18n-es-DMw6BnNb.js").then(t=>t.l),[]),"./es/translation.json":()=>O(()=>import("./i18n-es-DMw6BnNb.js").then(t=>t.t),[]),"./fr-CA/translation.json":()=>O(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.t),[]),"./fr/collections.json":()=>O(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.c),[]),"./fr/files.json":()=>O(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.f),[]),"./fr/languages.json":()=>O(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.l),[]),"./fr/translation.json":()=>O(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.a),[]),"./it/collections.json":()=>O(()=>import("./i18n-it-C970Nh-w.js").then(t=>t.c),[]),"./it/files.json":()=>O(()=>import("./i18n-it-C970Nh-w.js").then(t=>t.f),[]),"./it/languages.json":()=>O(()=>import("./i18n-it-C970Nh-w.js").then(t=>t.l),[]),"./it/translation.json":()=>O(()=>import("./i18n-it-C970Nh-w.js").then(t=>t.t),[]),"./ja/collections.json":()=>O(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.c),[]),"./ja/files.json":()=>O(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.f),[]),"./ja/icons.json":()=>O(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.i),[]),"./ja/languages.json":()=>O(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.l),[]),"./ja/translation.json":()=>O(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.t),[]),"./ko/collections.json":()=>O(()=>import("./i18n-ko-Dg8pId4h.js").then(t=>t.c),[]),"./ko/files.json":()=>O(()=>import("./i18n-ko-Dg8pId4h.js").then(t=>t.f),[]),"./ko/languages.json":()=>O(()=>import("./i18n-ko-Dg8pId4h.js").then(t=>t.l),[]),"./ko/translation.json":()=>O(()=>import("./i18n-ko-Dg8pId4h.js").then(t=>t.t),[]),"./zh-Hans/collections.json":()=>O(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.c),[]),"./zh-Hans/files.json":()=>O(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.f),[]),"./zh-Hans/languages.json":()=>O(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.l),[]),"./zh-Hans/translation.json":()=>O(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.t),[]),"./zh-Hant/collections.json":()=>O(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.a),[]),"./zh-Hant/files.json":()=>O(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.b),[]),"./zh-Hant/languages.json":()=>O(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.d),[]),"./zh-Hant/translation.json":()=>O(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.e),[])}),`./${s}/${e}.json`,3))).init({partialBundledLanguages:!0,fallbackLng:"en",ns:["translation","collections","languages","files","icons"],resources:{en:{translation:We,collections:Ue,languages:ze,files:qe,icons:Be},"en-GB":{translation:Ve}}}).catch(Q);function he(s,e=4){let t=0;for(let l=0;l<s.length;l++)t+=s.charCodeAt(l)>255?1:.5;return t<=e?void 0:{fontSize:`${e*100/t}%`,scale:`1 ${t/e}`,whiteSpace:"nowrap"}}function jt(s,e){if(e.length===0)return new Set(s.collections);const t=new Set,l=new Set(e);for(const[o,c]of s.entries)c.languages.some(n=>l.has(n))&&t.add(o);return t}function vt(s,e){if(e.length===0)return new Set(s.languages);const t=new Set;for(const l of e)for(const o of s.getCollection(l).languages)t.add(o);return t}function wt(s){const e=H.c(38),{corpus:t,language:l,collections:o,languages:c,setCollections:n}=s,{t:r}=W();let u;e[0]!==l?(u=["ja","ko","zh"].some(S=>l.startsWith(S)),e[0]=l,e[1]=u):u=e[1];const i=u;let f,m;if(e[2]!==o||e[3]!==t||e[4]!==i||e[5]!==c||e[6]!==n||e[7]!==r){const S=jt(t,c);f="search-collections";let w;e[10]!==r?(w=P=>[P,r(`collections:${P}.name`),r(`collections:${P}.short`)],e[10]=r,e[11]=w):w=e[11],m=t.collections.map(w).map(P=>{const[C,$,N]=P;return a.jsxs("div",{className:`search-collection search-${S.has(C)?"valid":"invalid"}`,children:[a.jsx("input",{type:"checkbox",name:`collection-${C}`,id:`collection-${C}`,checked:o.includes(C),onChange:D=>{D.target.checked&&!o.includes(C)?n(o.concat([C])):!D.target.checked&&o.includes(C)&&n(o.filter(E=>E!==C))}}),a.jsx("label",{htmlFor:`collection-${C}`,style:i?he(N):void 0,children:$===N?$:a.jsx("abbr",{title:$,children:a.jsx("span",{translate:"no",children:N})})})]},C)}),e[2]=o,e[3]=t,e[4]=i,e[5]=c,e[6]=n,e[7]=r,e[8]=f,e[9]=m}else f=e[8],m=e[9];let b;e[12]!==f||e[13]!==m?(b=a.jsx("div",{className:f,children:m}),e[12]=f,e[13]=m,e[14]=b):b=e[14];const L=o.length===t.collections.length;let _;e[15]!==t.collections||e[16]!==n?(_=()=>{n(t.collections)},e[15]=t.collections,e[16]=n,e[17]=_):_=e[17];let y;e[18]!==r?(y=r("selectAll"),e[18]=r,e[19]=y):y=e[19];let k;e[20]!==L||e[21]!==_||e[22]!==y?(k=a.jsx("button",{disabled:L,onClick:_,children:y}),e[20]=L,e[21]=_,e[22]=y,e[23]=k):k=e[23];const M=o.length===0;let A;e[24]!==n?(A=()=>{n([])},e[24]=n,e[25]=A):A=e[25];let T;e[26]!==r?(T=r("deselectAll"),e[26]=r,e[27]=T):T=e[27];let d;e[28]!==A||e[29]!==T||e[30]!==M?(d=a.jsx("button",{disabled:M,onClick:A,children:T}),e[28]=A,e[29]=T,e[30]=M,e[31]=d):d=e[31];let v;e[32]!==d||e[33]!==k?(v=a.jsxs("div",{className:"item-group",children:[k,d]}),e[32]=d,e[33]=k,e[34]=v):v=e[34];let x;return e[35]!==v||e[36]!==b?(x=a.jsxs(a.Fragment,{children:[b,v]}),e[35]=v,e[36]=b,e[37]=x):x=e[37],x}function yt(s){const e=H.c(38),{corpus:t,language:l,collections:o,languages:c,setLanguages:n}=s,{t:r}=W();let u;e[0]!==l?(u=["ja","ko","zh"].some(S=>l.startsWith(S)),e[0]=l,e[1]=u):u=e[1];const i=u;let f,m;if(e[2]!==o||e[3]!==t||e[4]!==i||e[5]!==c||e[6]!==n||e[7]!==r){const S=vt(t,o);f="search-languages";let w;e[10]!==r?(w=P=>[P,r(`languages:${P}.name`),r(`languages:${P}.code`)],e[10]=r,e[11]=w):w=e[11],m=t.languages.map(w).map(P=>{const[C,$,N]=P;return a.jsxs("div",{className:`search-language search-${S.has(C)?"valid":"invalid"}`,children:[a.jsx("input",{type:"checkbox",name:`language-${C}`,id:`language-${C}`,checked:c.includes(C),onChange:D=>{D.target.checked&&!c.includes(C)?n(c.concat([C])):!D.target.checked&&c.includes(C)&&n(c.filter(E=>E!==C))}}),a.jsxs("label",{htmlFor:`language-${C}`,children:[a.jsx("span",{className:"search-language-code",children:a.jsx("abbr",{title:$,children:a.jsx("span",{translate:"no",children:N})})}),a.jsx("span",{className:"search-language-name",style:i?he($,12):he($,15),children:$})]})]},C)}),e[2]=o,e[3]=t,e[4]=i,e[5]=c,e[6]=n,e[7]=r,e[8]=f,e[9]=m}else f=e[8],m=e[9];let b;e[12]!==f||e[13]!==m?(b=a.jsx("div",{className:f,children:m}),e[12]=f,e[13]=m,e[14]=b):b=e[14];const L=c.length===t.languages.length;let _;e[15]!==t.languages||e[16]!==n?(_=()=>{n(t.languages)},e[15]=t.languages,e[16]=n,e[17]=_):_=e[17];let y;e[18]!==r?(y=r("selectAll"),e[18]=r,e[19]=y):y=e[19];let k;e[20]!==L||e[21]!==_||e[22]!==y?(k=a.jsx("button",{disabled:L,onClick:_,children:y}),e[20]=L,e[21]=_,e[22]=y,e[23]=k):k=e[23];const M=c.length===0;let A;e[24]!==n?(A=()=>{n([])},e[24]=n,e[25]=A):A=e[25];let T;e[26]!==r?(T=r("deselectAll"),e[26]=r,e[27]=T):T=e[27];let d;e[28]!==A||e[29]!==T||e[30]!==M?(d=a.jsx("button",{disabled:M,onClick:A,children:T}),e[28]=A,e[29]=T,e[30]=M,e[31]=d):d=e[31];let v;e[32]!==d||e[33]!==k?(v=a.jsxs("div",{className:"item-group",children:[k,d]}),e[32]=d,e[33]=k,e[34]=v):v=e[34];let x;return e[35]!==v||e[36]!==b?(x=a.jsxs(a.Fragment,{children:[b,v]}),e[35]=v,e[36]=b,e[37]=x):x=e[37],x}function _t(s){const e=H.c(13),{corpus:t,language:l,filtersVisible:o,collections:c,setCollections:n,languages:r,setLanguages:u}=s,i=j.useRef(null);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>i.current?.style.setProperty("--search-filters-height",`${i.current.scrollHeight}px`),e[0]=f):f=e[0];const m=f;let b,L;e[1]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{if(!CSS.supports("interpolate-size","allow-keywords"))return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},L=[],e[1]=b,e[2]=L):(b=e[1],L=e[2]),j.useEffect(b,L);const _=`search-filters search-filters-${o?"show":"hide"}`;let y;e[3]!==c||e[4]!==t||e[5]!==l||e[6]!==r||e[7]!==n||e[8]!==u?(y=a.jsxs(a.Fragment,{children:[a.jsx(wt,{corpus:t,language:l,collections:c,languages:r,setCollections:n}),a.jsx("div",{className:"search-filters-divider"}),a.jsx(yt,{corpus:t,language:l,collections:c,languages:r,setLanguages:u})]}),e[3]=c,e[4]=t,e[5]=l,e[6]=r,e[7]=n,e[8]=u,e[9]=y):y=e[9];let k;return e[10]!==_||e[11]!==y?(k=a.jsx("div",{ref:i,className:_,children:y}),e[10]=_,e[11]=y,e[12]=k):k=e[12],k}const je=s=>Array.isArray(s)&&s.every(e=>typeof e=="string"),St=(s,e)=>{const t=s.languages.filter(n=>n.startsWith(e.split("-")[0])),l={...dt(s),languages:t.length===0?s.languages.filter(n=>n.startsWith("en")):t},o=Z("corpus-params");if(o===null)return l;const c=Ce(o);return typeof c=="object"&&c!==null&&("query"in c&&typeof c.query=="string"&&(l.query=c.query),"type"in c&&ge(c.type)&&(l.type=c.type),"caseInsensitive"in c&&typeof c.caseInsensitive=="boolean"&&(l.caseInsensitive=c.caseInsensitive),"common"in c&&typeof c.common=="boolean"&&(l.common=c.common),"script"in c&&typeof c.script=="boolean"&&(l.script=c.script),"showAllLanguages"in c&&typeof c.showAllLanguages=="boolean"&&(l.showAllLanguages=c.showAllLanguages),"collections"in c&&je(c.collections)&&c.collections.every(n=>s.isCollectionKey(n))&&(l.collections=c.collections),"languages"in c&&je(c.languages)&&c.languages.every(n=>s.isLanguageKey(n))&&(l.languages=c.languages)),l},kt=[se[3],se[0],se[1],se[2]];function Ct({corpus:s,language:e,waiting:t,inProgress:l,postToWorker:o,terminateWorker:c}){const{t:n}=W(),r=j.useMemo(()=>St(s,e),[s,e]),[u,i]=j.useState(r.query),[f,m]=j.useState(r.type),[b,L]=j.useState(r.caseInsensitive),[_,y]=j.useState(r.common),[k,M]=j.useState(r.script),[A,T]=j.useState(r.showAllLanguages),[d,v]=j.useState(r.collections),[x,S]=j.useState(r.languages),[w,P]=j.useState((Z("corpus-filtersVisible")??(window.location.hash?"false":"true"))!=="false"),C=j.useMemo(()=>Ae(s),[s]),$=j.useCallback(()=>{const p=C.hashToSearchParams(window.location.hash.substring(1));if(p.query!==void 0&&i(p.query),p.type!==void 0&&m(p.type),p.caseInsensitive!==void 0&&L(p.caseInsensitive),p.common!==void 0&&y(p.common),p.script!==void 0&&M(p.script),p.showAllLanguages!==void 0&&T(p.showAllLanguages),p.collections!==void 0&&v(p.collections),p.languages!==void 0&&S(p.languages),p.id!==void 0&&p.id!==""){const q=p.id.split(".")[0];o({query:`^${be(p.id)}$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(V=>s.getCollection(V).id===q),languages:[ne]});return}if(p.file!==void 0&&p.file!==""){const q=p.file.split(".")[0];o({query:`^${be(p.file)}\\..*$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(V=>s.getCollection(V).id===q),languages:[ne]});return}if(p.run!==void 0&&p.run){const q={query:p.query??r.query,type:p.type??r.type,caseInsensitive:p.caseInsensitive??r.caseInsensitive,common:p.common??r.common,script:p.script??r.script,showAllLanguages:p.showAllLanguages??r.showAllLanguages,collections:p.collections??r.collections,languages:p.languages??r.languages};window.location.hash=C.searchParamsToHash(q),o(q);return}Z("corpus-filtersVisible")===null&&P(!p.query||!p.collections||!p.languages)},[o,r]);j.useEffect(()=>{window.location.hash&&$()},[]),j.useEffect(()=>(window.addEventListener("hashchange",$),()=>{window.removeEventListener("hashchange",$)}),[$]),j.useEffect(()=>{X("corpus-params",JSON.stringify({query:u,type:f,caseInsensitive:b,common:_,script:k,showAllLanguages:A,collections:d,languages:x}))},[u,f,b,_,k,A,d,x]);const N=p=>{p.preventDefault(),Z("corpus-filtersVisible")||X("corpus-filtersVisible",w.toString());const q=document.getElementsByClassName("view-search").item(0);q&&q.scrollHeight>document.body.clientHeight&&P(!1);const V={query:u,type:f,caseInsensitive:b,common:_,script:k,showAllLanguages:A,collections:d,languages:x};window.location.hash=C.searchParamsToHash(V),o(V)},D=()=>{c()},E=()=>{const p=!w;P(p),X("corpus-filtersVisible",p.toString())},F=p=>{const q=p.target.value;ge(q)&&m(q)},z=t||l||u.length===0||d.length===0||x.length===0,U=j.useMemo(()=>a.jsx(_t,{corpus:s,language:e,filtersVisible:w,collections:d,setCollections:v,languages:x,setLanguages:S}),[e,w,d,x]);return a.jsxs("form",{className:"search-form",role:"search",onSubmit:N,children:[a.jsxs("div",{className:"search-bar",children:[a.jsxs("div",{className:"item-group",children:[a.jsx("label",{htmlFor:"query",children:n("query")}),a.jsx("input",{type:"search",name:"query",id:"query",value:u,onChange:p=>{i(p.target.value)}}),a.jsxs("div",{className:"btn-alternate-container",children:[a.jsx("input",{id:"submit",type:"submit",className:l?"invisible":"visible",value:n("search"),disabled:z}),a.jsx("button",{type:"button",className:l?"visible":"invisible",onClick:D,disabled:!l,children:n("cancel")})]}),a.jsx("button",{type:"button",className:w?"active":void 0,onClick:E,children:n("filters")}),a.jsx("select",{name:"type",id:"type",onChange:F,value:f,title:n("searchType.searchType"),"aria-label":n("searchType.searchType"),children:kt.map(p=>a.jsx("option",{value:p,children:n(`searchType.${p}`)},p))})]}),a.jsxs("div",{className:"item-group search-option-group",children:[a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"caseInsensitive",id:"caseInsensitive",checked:b,onChange:p=>{L(p.target.checked)}}),a.jsx("label",{htmlFor:"caseInsensitive",children:n("caseInsensitive")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"common",id:"common",checked:_,onChange:p=>{y(p.target.checked)}}),a.jsx("label",{htmlFor:"common",children:n("common")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"script",id:"script",checked:k,onChange:p=>{M(p.target.checked)}}),a.jsx("label",{htmlFor:"script",children:n("script")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"showAllLanguages",id:"showAllLanguages",checked:A,onChange:p=>{T(p.target.checked)}}),a.jsx("label",{htmlFor:"showAllLanguages",children:n("showAllLanguages")})]})]})]}),U]})}function Lt(s){const e=H.c(10),{src:t,active:l}=s,o=l===void 0?!0:l,c=j.useRef(null);let n,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{c.current?.classList.add("spinner-stopped")},r=[],e[0]=n,e[1]=r):(n=e[0],r=e[1]),j.useEffect(n,r);let u,i;e[2]!==o?(u=()=>{const _=c.current;if(_!==null){const y=()=>{o||_.classList.add("spinner-stopped")};return _.addEventListener("animationiteration",y),()=>{_.removeEventListener("animationiteration",y)}}},i=[o],e[2]=o,e[3]=u,e[4]=i):(u=e[3],i=e[4]),j.useEffect(u,i);const f=o?"spinner-active":"spinner-inactive";let m;e[5]!==f?(m=["spinner",f],e[5]=f,e[6]=m):m=e[6];const b=m.join(" ");let L;return e[7]!==t||e[8]!==b?(L=a.jsx("img",{ref:c,className:b,src:t,alt:""}),e[7]=t,e[8]=b,e[9]=L):L=e[9],L}function Ne(s){const e=H.c(16),{progress:t}=s,{t:l}=W(),o=Math.min(Math.max(0,t*100),100);let c;e[0]!==l?(c=l("progressBar.title"),e[0]=l,e[1]=c):c=e[1];const n=`${o}%`,r=o===0?0:void 0,u=o===0?"hidden":void 0;let i;e[2]!==n||e[3]!==r||e[4]!==u?(i=a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-bar-complete",style:{width:n,maxWidth:r,visibility:u}})}),e[2]=n,e[3]=r,e[4]=u,e[5]=i):i=e[5];let f;e[6]!==t||e[7]!==l?(f=l("progressBar.value",et(t)),e[6]=t,e[7]=l,e[8]=f):f=e[8];let m;e[9]!==f?(m=a.jsx("div",{className:"progress-bar-text",children:f}),e[9]=f,e[10]=m):m=e[10];let b;return e[11]!==o||e[12]!==c||e[13]!==i||e[14]!==m?(b=a.jsxs("div",{className:"progress-bar-container",role:"progressbar","aria-label":c,"aria-valuenow":o,children:[i,m]}),e[11]=o,e[12]=c,e[13]=i,e[14]=m,e[15]=b):b=e[15],b}const Et=s=>{if("share"in navigator){const e=s.currentTarget.href;s.preventDefault(),navigator.share({url:e}).catch(t=>{t instanceof Error&&t.name!=="AbortError"||(console.error(t),window.open(e,"_blank"))})}};function Pt(s){const e=H.c(6),{hash:t}=s,{t:l}=W();let o;e[0]!==l?(o=l("share"),e[0]=l,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#share"})}),e[2]=c):c=e[2];let n;return e[3]!==t||e[4]!==o?(n=a.jsx("a",{href:t,rel:"bookmark noreferrer",target:"_blank",title:o,onClick:Et,children:c}),e[3]=t,e[4]=o,e[5]=n):n=e[5],n}function At(s){const e=H.c(7),{hash:t,callback:l}=s,{t:o}=W();let c;e[0]!==o?(c=o("viewNearby"),e[0]=o,e[1]=c):c=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#file-lines"})}),e[2]=n):n=e[2];let r;return e[3]!==l||e[4]!==t||e[5]!==c?(r=a.jsx("a",{href:t,rel:"bookmark noreferrer",title:c,onClick:l,children:n}),e[3]=l,e[4]=t,e[5]=c,e[6]=r):r=e[6],r}function Rt(s){const e=H.c(6),{callback:t}=s,{t:l}=W();let o;e[0]!==l?(o=l("copy"),e[0]=l,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#copy"})}),e[2]=c):c=e[2];let n;return e[3]!==t||e[4]!==o?(n=a.jsx("button",{className:"link",title:o,onClick:t,children:c}),e[3]=t,e[4]=o,e[5]=n):n=e[5],n}function Nt(s,e,t,l,o){return s.replaceAll(/<a class="speaker" data-var="(.+?)">(.+?)<\/a>/gu,(c,n,r)=>`<a class="speaker" href="#${e.searchParamsToHash({query:n,type:"exact",caseInsensitive:!1,common:!1,script:!0,showAllLanguages:!1,collections:[t],languages:[l],run:!0})}" title="${o}" translate="yes"><span translate="no">${r}</span></a>`)}const Mt=(s,e)=>e===ne?s.replaceAll(/([._/]|([a-z])(?=[A-Z])|([A-Za-z])(?=[0-9]))/gu,"$1<wbr>"):s;function Tt(){const s=H.c(4),{t:e}=W();let t;s[0]!==e?(t=e("status.rendering"),s[0]=e,s[1]=t):t=s[1];let l;return s[2]!==t?(l=a.jsx("div",{className:"results-rendering",children:t}),s[2]=t,s[3]=l):l=s[3],l}function It(s){const e=H.c(7),{id:t}=s,l=`#id=${t}`;let o;e[0]!==l?(o=a.jsx(Pt,{hash:l}),e[0]=l,e[1]=o):o=e[1];const c=`#file=${t.split(".").slice(0,-1).join(".")}`;let n;e[2]!==c?(n=a.jsx(At,{hash:c}),e[2]=c,e[3]=n):n=e[3];let r;return e[4]!==o||e[5]!==n?(r=a.jsx("td",{className:"results-table-actions-cell",translate:"yes",children:a.jsxs("div",{className:"results-table-actions",children:[o,n]})},"actions"),e[4]=o,e[5]=n,e[6]=r):r=e[6],r}function $t(s){const e=H.c(49),{corpus:t,index:l,collection:o,file:c,languages:n,lines:r,start:u,end:i,showId:f,richText:m,sectionOffset:b,onShowSection:L,searchParamsFactory:_}=s,{t:y}=W();let k;e[0]!==n?(k=n.indexOf(ne),e[0]=n,e[1]=k):k=e[1];const M=k,A=n.map(Dt),T=y("viewSpeaker"),d=t.getCollection(o).speaker!==void 0,v=A.map(Ft),x=v.every(K=>K===v[0]),S=j.useRef(null);let w;e[2]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{const K=S.current,J=window.getSelection();J!==null&&K!==null&&(J.removeAllRanges(),J.selectAllChildren(K),document.execCommand("copy"),J.removeAllRanges())},e[2]=w):w=e[2];const P=w,C=`collection-${t.getCollection(o).id??o.toLowerCase()}`,$=`file-${c}`,N=`rich-text-${m?"enabled":"disabled"}`;let D;e[3]!==o||e[4]!==t||e[5]!==C||e[6]!==$||e[7]!==N?(D=["results-table",C,$,N],t.getCollection(o).softWrap===!0&&D.push("soft"),e[3]=o,e[4]=t,e[5]=C,e[6]=$,e[7]=N,e[8]=D):D=e[8];const E="results-table-container",F=D.join(" ");let z;e[9]!==M?(z=M!==-1&&a.jsx("th",{className:"results-table-actions-cell",children:a.jsx(Rt,{callback:P})}),e[9]=M,e[10]=z):z=e[10];let U;if(e[11]!==n||e[12]!==f||e[13]!==y){let K;e[15]!==f?(K=te=>f||te!==ne,e[15]=f,e[16]=K):K=e[16];let J;e[17]!==y?(J=te=>a.jsx("th",{children:a.jsx("abbr",{title:y(`languages:${te}.name`),children:a.jsx("span",{translate:"no",children:y(`languages:${te}.code`)})})},te),e[17]=y,e[18]=J):J=e[18],U=n.filter(K).map(J),e[11]=n,e[12]=f,e[13]=y,e[14]=U}else U=e[14];let p;e[19]!==z||e[20]!==U?(p=a.jsx("thead",{children:a.jsxs("tr",{children:[z,U]})}),e[19]=z,e[20]=U,e[21]=p):p=e[21];let q;e[22]!==v||e[23]!==x?(q=x&&v[0]!==le.dir()?v[0]:void 0,e[22]=v,e[23]=x,e[24]=q):q=e[24];const V="no",h=r.map((K,J)=>u<=J&&J<i&&a.jsxs("tr",{"data-id":M!==-1?K[M]:void 0,children:[M!==-1&&a.jsx(It,{id:K[M]}),K.map((te,ae)=>{if(f||n[ae]!==ne)return a.jsx("td",{lang:A[ae],dir:x?void 0:v[ae],dangerouslySetInnerHTML:{__html:Mt(d?Nt(te,_,o,n[ae],T):te,n[ae])}},ae)})]},J));let g;e[25]!==q||e[26]!==h?(g=a.jsx("tbody",{dir:q,translate:V,children:h}),e[25]=q,e[26]=h,e[27]=g):g=e[27];let R;e[28]!==p||e[29]!==g||e[30]!==F?(R=a.jsx("div",{className:E,children:a.jsxs("table",{ref:S,className:F,children:[p,g]})}),e[28]=p,e[29]=g,e[30]=F,e[31]=R):R=e[31];const I=R;let B;e[32]!==l||e[33]!==L||e[34]!==b||e[35]!==u||e[36]!==y?(B=u!==0&&a.jsx("button",{className:"results-notice",onClick:L(b,l),children:y("tablePartial",{count:u})}),e[32]=l,e[33]=L,e[34]=b,e[35]=u,e[36]=y,e[37]=B):B=e[37];const G=u!==i&&I;let Y;e[38]!==i||e[39]!==l||e[40]!==r.length||e[41]!==L||e[42]!==b||e[43]!==y?(Y=i<r.length&&a.jsx("button",{className:"results-notice",onClick:L(b+i,l),children:y("tablePartial",{count:r.length-i})}),e[38]=i,e[39]=l,e[40]=r.length,e[41]=L,e[42]=b,e[43]=y,e[44]=Y):Y=e[44];let ee;return e[45]!==B||e[46]!==G||e[47]!==Y?(ee=a.jsxs(a.Fragment,{children:[B,G,Y]}),e[45]=B,e[46]=G,e[47]=Y,e[48]=ee):ee=e[48],ee}function Ft(s){return le.dir(s)}function Dt(s){return s===ne?gt:s}function Ot(s){const{index:e,status:t,header:l,offset:o,limit:c,lines:n,sectionOffset:r,richText:u}=s,i=Math.max(0,Math.min(n.length,o-r)),f=Math.max(0,Math.min(n.length,o+c-r)),m=j.useMemo(()=>{switch(t){case"noLines":return;case"worker":return a.jsx(Tt,{});case"done":return a.jsx($t,{...s,start:i,end:f})}},[t,i,f,u]);return m&&a.jsxs("section",{id:`results-section${e}`,className:"results-section",children:[l&&a.jsx("h2",{children:l}),m]})}function Vt({results:s,headers:e,jumpTo:t,...l}){const o=j.useMemo(()=>Ae(l.corpus),[l.corpus]),c=j.useMemo(()=>{let n=0;const r=[];for(const[u,i]of s.entries()){if(i.status==="initial")break;const f=i.status==="done"&&i.richText;r.push({...l,...i.params,index:u,sectionOffset:n,richText:f,status:i.status,header:e[u],searchParamsFactory:o}),n+=i.params.lines.length}return r},[s,l]);return j.useEffect(()=>{let n=0;for(const[r,u]of s.entries())if(u.status!=="initial"){if(l.offset>=n&&l.offset<n+u.params.lines.length){t(r);break}n+=u.params.lines.length}},[l.offset]),a.jsx("div",{className:"app-window-inner",children:c.map(n=>a.jsx(Ot,{...n},n.index))})}function re(s){const e=document.getElementById("results"),t=document.getElementById(`results-section${s}`),l=e?.firstElementChild;e&&t&&l instanceof HTMLElement&&(e.scrollTop=t.offsetTop-l.offsetTop)}function Bt(s){const e=H.c(9),{headers:t}=s,{t:l}=W();let o;e[0]!==l?(o=l("jumpTo"),e[0]=l,e[1]=o):o=e[1];let c;e[2]!==o?(c=a.jsx("option",{value:"",disabled:!0,children:o}),e[2]=o,e[3]=c):c=e[3];let n;e[4]!==t?(n=t.map((u,i)=>u!==void 0&&(i===0||t[i-1]!==u)&&a.jsx("option",{value:i,children:u},i)),e[4]=t,e[5]=n):n=e[5];let r;return e[6]!==c||e[7]!==n?(r=a.jsx("nav",{className:"results-jump",children:a.jsxs("select",{name:"jump",id:"jump",onChange:qt,value:"",children:[c,n]})}),e[6]=c,e[7]=n,e[8]=r):r=e[8],r}function qt(s){re(Number(s.target.value))}function zt(s){const e=H.c(50),{count:t,offset:l,limit:o,setOffset:c}=s,{t:n}=W(),r=l+1,u=Math.min(t,l+o);let i;e[0]!==t||e[1]!==n||e[2]!==r||e[3]!==u?(i=n("displayedRange.long",{count:t,start:r,end:u}),e[0]=t,e[1]=n,e[2]=r,e[3]=u,e[4]=i):i=e[4];let f;e[5]!==i?(f=a.jsx("span",{className:"results-nav-range-long",children:i}),e[5]=i,e[6]=f):f=e[6];const m=l+1,b=Math.min(t,l+o);let L;e[7]!==t||e[8]!==n||e[9]!==m||e[10]!==b?(L=n("displayedRange.short",{count:t,start:m,end:b}),e[7]=t,e[8]=n,e[9]=m,e[10]=b,e[11]=L):L=e[11];let _;e[12]!==L?(_=a.jsx("span",{className:"results-nav-range-short",children:L}),e[12]=L,e[13]=_):_=e[13];let y;e[14]!==f||e[15]!==_?(y=a.jsxs("div",{children:[f,_]}),e[14]=f,e[15]=_,e[16]=y):y=e[16];const k=l===0;let M;e[17]!==o||e[18]!==l||e[19]!==c?(M=()=>{c(Math.max(0,l-o))},e[17]=o,e[18]=l,e[19]=c,e[20]=M):M=e[20];let A;e[21]!==n?(A=n("loadPrev"),e[21]=n,e[22]=A):A=e[22];let T;e[23]!==o||e[24]!==n?(T=n("icons:loadPrev",{limit:o}),e[23]=o,e[24]=n,e[25]=T):T=e[25];let d;e[26]!==k||e[27]!==M||e[28]!==A||e[29]!==T?(d=a.jsx("button",{className:"button-square",disabled:k,onClick:M,title:A,children:T}),e[26]=k,e[27]=M,e[28]=A,e[29]=T,e[30]=d):d=e[30];const v=l+o>=t;let x;e[31]!==t||e[32]!==o||e[33]!==l||e[34]!==c?(x=()=>{c(Math.min(Math.floor(t/o)*o,l+o))},e[31]=t,e[32]=o,e[33]=l,e[34]=c,e[35]=x):x=e[35];let S;e[36]!==n?(S=n("loadNext"),e[36]=n,e[37]=S):S=e[37];let w;e[38]!==o||e[39]!==n?(w=n("icons:loadNext",{limit:o}),e[38]=o,e[39]=n,e[40]=w):w=e[40];let P;e[41]!==v||e[42]!==x||e[43]!==S||e[44]!==w?(P=a.jsx("button",{className:"button-square",disabled:v,onClick:x,title:S,children:w}),e[41]=v,e[42]=x,e[43]=S,e[44]=w,e[45]=P):P=e[45];let C;return e[46]!==d||e[47]!==P||e[48]!==y?(C=a.jsxs("div",{className:"results-nav",children:[y,d,P]}),e[46]=d,e[47]=P,e[48]=y,e[49]=C):C=e[49],C}const ve={showVariables:0,showAllCharacters:!1,showGender:2,showPlural:0,showGrammar:!0,showFurigana:!0},Ut=()=>{const s=Z("corpus-toggle");if(s===null)return ve;const e={...ve},t=Ce(s);return typeof t=="object"&&t!==null&&("showVariables"in t&&typeof t.showVariables=="number"&&[0,1,2].includes(t.showVariables)&&(e.showVariables=t.showVariables),"showAllCharacters"in t&&typeof t.showAllCharacters=="boolean"&&(e.showAllCharacters=t.showAllCharacters),"showGender"in t&&typeof t.showGender=="number"&&[0,1,2].includes(t.showGender)&&(e.showGender=t.showGender),"showPlural"in t&&typeof t.showPlural=="number"&&[0,1,2].includes(t.showPlural)&&(e.showPlural=t.showPlural),"showGrammar"in t&&typeof t.showGrammar=="boolean"&&(e.showGrammar=t.showGrammar),"showFurigana"in t&&typeof t.showFurigana=="boolean"&&(e.showFurigana=t.showFurigana)),e};function Wt({corpus:s,language:e,status:t,progress:l,results:o,showId:c=!0,richText:n=!0,limit:r=ue}){const{t:u}=W(),i=j.useMemo(Ut,[]),[f,m]=j.useState(i.showVariables),[b,L]=j.useState(i.showAllCharacters),[_,y]=j.useState(i.showGender),[k,M]=j.useState(i.showPlural),[A,T]=j.useState(i.showGrammar),[d,v]=j.useState(i.showFurigana),[x,S]=j.useState(null),[w,P]=j.useState(0);j.useEffect(()=>{X("corpus-toggle",JSON.stringify({showVariables:f,showAllCharacters:b,showGender:_,showPlural:k,showGrammar:A,showFurigana:d}))},[f,b,_,k,A,d]);const C=j.useCallback((p,q)=>()=>{P(p),re(q)},[]),$=j.useMemo(()=>{const p=[];let q="";for(const V of o){if(V.status==="initial"||V.status==="noLines"){p.push(void 0);continue}const{collection:h,file:g}=V.params,R=u("tableHeader",{collection:u(`collections:${h}.name`),file:u(`files:${g}`),interpolation:{escapeValue:!1}});p.push(R===q?void 0:R),q=R}return p},[o,e]),N=j.useMemo(()=>o.reduce((p,q)=>p+(q.status==="initial"?0:q.params.lines.length),0),[o]);N<w&&P(p=>Math.min(p,N));const D=a.jsxs("div",{className:"results-toggle",children:[a.jsx("button",{className:f!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{m((f+1)%3)},title:u("showVariables"),children:a.jsx("span",{translate:"no",children:u("icons:showVariables",{context:f})})}),a.jsx("button",{className:b?"button-square active":"button-square",disabled:!n,onClick:()=>{L(!b)},title:u("showAllCharacters"),children:a.jsx("span",{translate:"no",children:u("icons:showAllCharacters")})}),a.jsx("button",{className:_!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{y((_+1)%3)},title:u("showGender"),children:a.jsx("span",{translate:"no",children:u("icons:showGender",{context:_})})}),a.jsx("button",{className:k!==0?"button-square active":"button-square",disabled:!n,onClick:()=>{M((k+1)%3)},title:u("showPlural"),children:a.jsx("span",{translate:"no",children:u("icons:showPlural",{context:k})})}),a.jsx("button",{className:A?"button-square active":"button-square",disabled:!n,onClick:()=>{T(!A)},title:u("showGrammar"),children:a.jsx("span",{translate:"no",children:u("icons:showGrammar")})}),a.jsx("button",{className:d?"button-square active":"button-square",disabled:!n,onClick:()=>{v(!d)},title:u("showFurigana"),children:a.jsx("span",{className:"results-toggle-furigana",translate:"no",children:u("icons:showFurigana")})})]});j.useEffect(()=>{j.startTransition(()=>{S(a.jsx(Vt,{corpus:s,results:o,headers:$,showId:c,offset:w,limit:r,onShowSection:C,jumpTo:re}))})},[s,o,$,c,w,r,C,re]);const E=Ee(t),F=u(`status.${t.split(".",1)[0]}`),z=j.useMemo(()=>!E&&$.filter(p=>p!==void 0).length>1?a.jsx(Bt,{headers:$}):a.jsx("div",{className:"results-status-text",children:F}),[E,$,F]),U=`app-window variables-${["short","show","hide"][f]} control-${b?"show":"hide"} gender-${_} number-${k} grammar-${A?"show":"hide"} furigana-${d?"show":"hide"}`;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"results-status",children:[z,a.jsx(Lt,{src:"logo.svg",active:E}),!E&&N>r?a.jsx(zt,{count:N,offset:w,limit:r,setOffset:P}):a.jsx(Ne,{progress:l}),D]}),a.jsx("main",{id:"results",className:U,children:x})]})}const Ht={status:"initial"},we="corpus-warn",Gt=2e7;function Kt({loader:s,showModal:e,language:t,richText:l,limit:o}){const{t:c}=W(),n=j.useRef(null),r=j.useRef(null),u=j.useRef([]),i=j.useRef(l),f=j.useRef(Z(we)!=="false"),[m,b]=j.useState("initial"),[L,_]=j.useState(0),[y,k]=j.useState(!0),[M,A]=j.useState([]);j.useEffect(()=>{i.current=l;for(const{index:E,params:F}of u.current)v(E,F)},[l]);const T=(E,F)=>{A(z=>{const U=Array().concat(z);for(let p=U.length;p<E;p++)U[p]=Ht;return U[E]=F,U})},d=E=>{T(E.data.index,{status:"done",params:E.data,richText:E.data.richText}),E.data.error&&e({message:c("statusModal.error"),buttons:[{message:c("statusModal.buttons.ok"),autoFocus:!0}]})},v=(E,F)=>{r.current===null&&(console.log("Creating new TextWorker..."),r.current=new rt,r.current.addEventListener("message",d)),r.current.postMessage({...F,index:E,richText:i.current,corpusLiterals:s.corpus.getCollection(F.collection).literals})},x=E=>{if(b(E.data.status),_(E.data.progress),k(E.data.showId),"index"in E.data&&"result"in E.data){const{index:F,result:z}=E.data;E.data.result.lines.length===0?T(F,{status:"noLines",params:z}):(u.current.push({index:F,params:z}),T(F,{status:"worker",params:z}),v(F,z))}E.data.complete&&ut(E.data.status)&&e({message:c(`statusModal.${E.data.status}`),buttons:[{message:c("statusModal.buttons.ok"),autoFocus:!0}]})},S=j.useCallback(()=>{console.log("Terminating workers!"),n.current!==null&&(n.current.removeEventListener("message",x),n.current.terminate(),n.current=null),r.current!==null&&(r.current.removeEventListener("message",x),r.current.terminate(),r.current=null),b("initial"),_(0),A([]),u.current=[]},[]),w=E=>{A([]),u.current=[],E.query.length>0&&E.collections.length>0&&E.languages.length>0&&(n.current===null&&(console.log("Creating new SearchWorkerManager..."),n.current=new ct,n.current.addEventListener("message",x)),b("waiting"),_(0),n.current.postMessage({...E,serializedCorpus:Re(s.corpus)}))},P=j.useCallback(E=>{if(!f.current){w(E);return}s.getDownloadSizeTotal(E.collections,E.showAllLanguages?void 0:E.languages).then(F=>{if(F<=Gt){w(E);return}e({message:c("searchModal.message",oe(F)),checkbox:{message:c("searchModal.checkboxDoNotShowAgain"),checked:!1},buttons:[{message:c("searchModal.buttons.yes"),callback:()=>{w(E)},checkboxCallback:z=>{f.current=!z,X(we,(!z).toString())}},{message:c("searchModal.buttons.no"),callback:()=>{b("initial")},autoFocus:!0}],cancelCallback:()=>{b("initial")}})}).catch(Q)},[s.getDownloadSizeTotal]),C=Ee(m),$=m==="waiting",N=j.useMemo(()=>a.jsx(Ct,{corpus:s.corpus,language:t,inProgress:C,waiting:$,postToWorker:P,terminateWorker:S}),[s.corpus,t,C,$,P,S]),D=j.useMemo(()=>a.jsx(Wt,{corpus:s.corpus,language:t,status:m,progress:L,showId:y,richText:l,results:M,limit:o}),[s.corpus,t,m,L,y,l,M,o]);return a.jsxs("div",{className:"search",children:[N,D]})}function Jt(s){return new Worker("/poke-corpus/assets/cacheManagerWorker-C6FDjb1p.js",{name:s?.name})}function Zt(s){const e=H.c(6),{callback:t}=s,{t:l}=W();let o;e[0]!==l?(o=l("delete"),e[0]=l,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#trash-can"})}),e[2]=c):c=e[2];let n;return e[3]!==t||e[4]!==o?(n=a.jsx("button",{className:"link",title:o,onClick:t,children:c}),e[3]=t,e[4]=o,e[5]=n):n=e[5],n}function Qt(s){const e=H.c(6),{callback:t}=s,{t:l}=W();let o;e[0]!==l?(o=l("refresh"),e[0]=l,e[1]=o):o=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#arrows-rotate"})}),e[2]=c):c=e[2];let n;return e[3]!==t||e[4]!==o?(n=a.jsx("button",{className:"link",title:o,onClick:t,children:c}),e[3]=t,e[4]=o,e[5]=n):n=e[5],n}function Xt({cacheStorageEnabled:s,cachedMetadata:e}){const{t}=W(),l=j.useMemo(()=>oe(e.reduce((o,[,c])=>o+c,0)),[e]);return a.jsxs("ul",{children:[a.jsx("li",{children:t("cache.storageStatus",{val:t(s?"cache.storageEnabled":"cache.storageDisabled")})}),s&&a.jsx("li",{children:t("cache.filesStored",{count:e.length})}),s&&a.jsx("li",{children:t("cache.storageUsed",l)})]})}function Yt(s){const e=H.c(9),{loadedBytes:t,totalBytes:l,progress:o}=s,{t:c}=W();let n;e[0]!==t||e[1]!==c||e[2]!==l?(n=c("cache.loading",{message:c("cache.inProgress"),loaded:c("cache.size",oe(t)),total:c("cache.size",oe(l))}),e[0]=t,e[1]=c,e[2]=l,e[3]=n):n=e[3];let r;e[4]!==o?(r=a.jsx(Ne,{progress:o}),e[4]=o,e[5]=r):r=e[5];let u;return e[6]!==n||e[7]!==r?(u=a.jsxs("div",{className:"cache-entry-notice",children:[n,r]}),e[6]=n,e[7]=r,e[8]=u):u=e[8],u}function es({corpus:s,cachedMetadata:e,cacheCollections:t,clearCachedFile:l}){const{t:o}=W(),c=j.useMemo(()=>s.collections.map(r=>{const u=e.filter(([[i]])=>r===i);return[r,u.reduce((i,[,f])=>i+f,0),u.every(([,,i])=>i)]}).filter(([,r])=>r>0),[e]);return a.jsx("div",{className:"cache-entry-list",children:e.length>0&&c.map(([n,r,u],i)=>a.jsxs("div",{className:`cache-entry cache-entry-${u?"current":"outdated"}`,children:[a.jsxs("div",{className:"cache-entry-text",children:[a.jsx("div",{children:a.jsx("abbr",{title:o(`collections:${n}.name`),children:a.jsx("span",{translate:"no",children:o(`collections:${n}.short`)})})}),a.jsx("div",{translate:"no",children:o("cache.size",oe(r))})]}),a.jsxs("div",{className:"cache-entry-actions",children:[!u&&a.jsx(Qt,{callback:()=>{t(n)}}),a.jsx(Zt,{callback:()=>{l(n)}})]})]},i))})}function ts({active:s,loader:e,showModal:t}){const{t:l}=W(),[o,c]=j.useState(!1),[n,r]=j.useState([]),[u,i]=j.useState(!1),[f,m]=j.useState(0),[b,L]=j.useState(0),[_,y]=j.useState(0),k=j.useRef(null),M=()=>{"caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB?Promise.all([e.getCache(),e.getIndexedDB()]).then(()=>{c(!0)}).catch(()=>{c(!1),r([])}):(c(!1),r([]))},A=N=>{const{status:D,loadedBytes:E,totalBytes:F,requestedCollection:z}=N.data;switch(m(E/F),L(E),y(F),D){case"loading":return;case"done":console.log("Caching complete");break;case"error":console.log("Caching error");break}k.current?.terminate(),k.current=null,i(!1),v(z)},T=j.useCallback(N=>{"caches"in window&&(i(!0),m(0),L(0),k.current===null&&(console.log("Creating new CacheManagerWorker..."),k.current=new Jt,k.current.addEventListener("message",A),k.current.postMessage({serializedCorpus:Re(e.corpus),requestedCollection:N})))},[e]),d=async(N="background")=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[D,E]=await Promise.all([e.getCache(),e.getIndexedDB()]),F=e.corpus.entries.flatMap(([V,h])=>h.files.flatMap(g=>h.languages.map(R=>[V,R,g]))),z=F.map(([V,h,g])=>e.getFilePath(V,h,g)),U=await Promise.all(z.map(V=>e.getFileCacheOnly(D,E,V).then(async([h,g])=>[h!==void 0?(await h.blob()).size:-1,g])));r(U.map(([V,h],g)=>[F[g],V,h]).filter(([,V])=>V!==-1));const p=new Set(z),q=(await e.getAllLocalFilePaths(E)).filter(V=>!p.has(V));await Promise.all(q.map(V=>Promise.all([e.deleteLocalMetadata(E,V),D.delete(V)]).then(([h,g])=>{console.debug(h&&g?`Deleted ${V} from cache`:`Failed to delete ${V} from cache`)}))),E.close(),N==="cacheAll"&&U.some(([V,h])=>V===-1||!h)&&C()}},v=N=>{d(N).catch(Q)},x=()=>{const N=[];k.current&&(k.current.terminate(),k.current=null),"serviceWorker"in navigator&&N.push(navigator.serviceWorker.ready.then(D=>D.unregister())),"indexedDB"in window&&"databases"in window.indexedDB&&N.push(e.getIndexedDB().then(D=>e.clearLocalMetadata(D).then(()=>d()))),"caches"in window&&N.push(e.getCache().then(D=>D.keys().then(E=>Promise.all(E.map(F=>D.delete(F)))))),Promise.all(N).then(()=>{console.log("Cache cleared")}).catch(D=>{console.log("Error clearing cache"),console.error(D)})},S=async N=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[D,E]=await Promise.all([e.getCache(),e.getIndexedDB()]),F=e.corpus.getCollection(N);await Promise.all(F.languages.flatMap(z=>F.files.flatMap(U=>{const p=e.getFilePath(N,z,U);return[e.deleteLocalMetadata(E,p),D.delete(p)]}))),E.close(),await d()}},w=j.useCallback(N=>{S(N).catch(Q)},[]);j.useEffect(()=>{M(),d().catch(Q)},[s,e.corpus.entries,e.corpus.metadata]);const P=()=>{e.getDownloadSizeTotal().then(N=>{t({message:l("cache.cacheAllModal.message",oe(N)),buttons:[{message:l("cache.cacheAllModal.buttons.yes"),callback:()=>{T("cacheAll")}},{message:l("cache.cacheAllModal.buttons.no"),callback:()=>{i(!1)},autoFocus:!0}],cancelCallback:()=>{i(!1)}})}).catch(Q)},C=()=>{t({message:l("cache.cacheAllFailedModal.message"),buttons:[{message:l("cache.cacheAllFailedModal.buttons.ok"),autoFocus:!0}]})},$=()=>{t({message:l("cache.clearCacheModal.message"),buttons:[{message:l("cache.clearCacheModal.buttons.yes"),callback:x},{message:l("cache.clearCacheModal.buttons.no"),autoFocus:!0}]})};return s&&a.jsxs("div",{className:"cache",children:[a.jsxs("div",{className:"cache-button-group item-group",children:[a.jsx("button",{onClick:P,disabled:u!==!1,children:l("cacheAll")}),a.jsx("button",{onClick:$,children:l("clearCache")})]}),a.jsx("div",{className:"cache-results app-window",children:a.jsxs("div",{className:"app-window-inner",children:[a.jsx(Xt,{cacheStorageEnabled:o,cachedMetadata:n}),u?a.jsx(Yt,{loadedBytes:b,totalBytes:_,progress:f}):a.jsx(es,{corpus:e.corpus,cachedMetadata:n,cacheCollections:T,clearCachedFile:w})]})})]})}function ss(s){const e=H.c(27),{classes:t,message:l,buttons:o,checkbox:c,cancelCallback:n}=s,[r,u]=j.useState(l!==void 0),[i,f]=j.useState(c?.checked??!1),m=j.useRef(null),b=j.useRef(null);let L;e[0]!==o||e[1]!==r?(L=()=>{const C=m.current,$=b.current;if(C!==null)if(r){if(C.showModal(),o){const N=o.findIndex(as);$!==null&&N!==-1&&Array.from($.children).filter(ns)[N].focus()}}else C.close()},e[0]=o,e[1]=r,e[2]=L):L=e[2];let _;e[3]!==r?(_=[r],e[3]=r,e[4]=_):_=e[4],j.useEffect(L,_);let y;e[5]!==i?(y=(C,$)=>()=>{u(!1),C&&C(),$&&$(i)},e[5]=i,e[6]=y):y=e[6];const k=y;let M;e[7]!==n?(M=()=>{n&&n(),u(!1)},e[7]=n,e[8]=M):M=e[8];const A=M;if(!r)return null;let T;e[9]!==t?(T=["modal"],t&&t.forEach(C=>T.push(C)),e[9]=t,e[10]=T):T=e[10];const d=T.join(" ");let v;e[11]!==l?(v=a.jsx("div",{className:"modal-message",children:l}),e[11]=l,e[12]=v):v=e[12];let x;e[13]!==c||e[14]!==i?(x=c&&a.jsx("div",{className:"modal-checkbox",children:a.jsxs("div",{children:[a.jsx("input",{type:"checkbox",id:"modalCheckbox",name:"modalCheckbox",checked:i,onChange:C=>{f(C.target.checked)}}),a.jsx("label",{htmlFor:"modalCheckbox",children:c.message})]})}),e[13]=c,e[14]=i,e[15]=x):x=e[15];let S;e[16]!==o||e[17]!==k?(S=o?.map((C,$)=>{const{message:N,callback:D,checkboxCallback:E,autoFocus:F}=C;return a.jsx("button",{type:"button",onClick:k(D,E),autoFocus:F,children:N},$)}),e[16]=o,e[17]=k,e[18]=S):S=e[18];let w;e[19]!==S?(w=a.jsx("div",{ref:b,className:"modal-button-group",children:S}),e[19]=S,e[20]=w):w=e[20];let P;return e[21]!==A||e[22]!==d||e[23]!==v||e[24]!==x||e[25]!==w?(P=a.jsxs("dialog",{ref:m,id:"modal",className:d,onCancel:A,children:[v,x,w]}),e[21]=A,e[22]=d,e[23]=v,e[24]=x,e[25]=w,e[26]=P):P=e[26],P}function ns(s){return s instanceof HTMLButtonElement}function as(s){return s.autoFocus}function de(){const s=H.c(11),{t:e}=W();let t;s[0]!==e?(t=e("error.title"),s[0]=e,s[1]=t):t=s[1];let l;s[2]!==t?(l=a.jsx("h2",{children:t}),s[2]=t,s[3]=l):l=s[3];let o;s[4]!==e?(o=e("error.message"),s[4]=e,s[5]=o):o=s[5];let c;s[6]!==o?(c=a.jsx("div",{children:o}),s[6]=o,s[7]=c):c=s[7];let n;return s[8]!==l||s[9]!==c?(n=a.jsx("div",{className:"app-window",children:a.jsx("div",{className:"app-window-inner",children:a.jsxs("section",{className:"results-section",children:[l,c]})})}),s[8]=l,s[9]=c,s[10]=n):n=s[10],n}const me="corpus",ie=s=>"/poke-corpus/"+s,os=ie("data.json"),ls=s=>{const e=d=>f(d).size,t=async(d,v)=>{const[x,S]=await _(d,v);return S?.hash===x.hash?0:x.size},l=async(d=s.collections,v=s.languages)=>{try{const x=await i(),S=(await Promise.all(d.flatMap(w=>s.getCollection(w).languages.filter(P=>v.includes(P)).flatMap(P=>s.getCollection(w).files.map(C=>t(x,ce(w,P,C))))))).reduce((w,P)=>w+P,0);return x.close(),S}catch{return d.flatMap(x=>s.getCollection(x).languages.filter(S=>v.includes(S)).flatMap(S=>s.getCollection(x).files.map(w=>e(ce(x,S,w))))).reduce((x,S)=>x+S,0)}},o=async(d,v,x)=>{const S=ie(x),[w,P]=await _(v,x);if(P?.hash===w.hash||!navigator.onLine&&P?.hash!==void 0){const N=await A(d,S);if(N!==void 0)return N}const C=await fetch(S);return C.ok?(await T(d,S,C).then(async N=>{N&&await b(v,x)}),C):await A(d,S)??null},c=async(d,v,x)=>{const S=ie(x),[w,P]=await _(v,x);return P!==void 0?[await A(d,S),P.hash===w.hash]:[void 0,!1]},n=async d=>{const v=ie(d),x=await fetch(v);return x.ok?x:null},r="corpus",u="files",i=async()=>{const d=indexedDB.open(r);return new Promise((v,x)=>{d.onupgradeneeded=()=>{d.result.createObjectStore(u),d.transaction!==null&&(d.transaction.oncomplete=()=>{console.log("Created object store")})},d.onsuccess=()=>{v(d.result)},d.onerror=()=>{x(d.error)}})},f=d=>s.metadata[d],m=async(d,v)=>{const w=d.transaction([u],"readonly").objectStore(u).get(v);return new Promise((P,C)=>{w.onsuccess=()=>{P(mt(w.result)?w.result:void 0)},w.onerror=()=>{C(w.error)}})},b=async(d,v)=>{const w=d.transaction([u],"readwrite").objectStore(u).put(f(v),v);return new Promise((P,C)=>{w.onsuccess=()=>{P(w.result===v)},w.onerror=()=>{C(w.error)}})},L=async(d,v)=>{const w=d.transaction([u],"readwrite").objectStore(u).delete(v);return new Promise((P,C)=>{w.onsuccess=()=>{P(!0)},w.onerror=()=>{C(w.error)}})},_=async(d,v)=>[f(v),await m(d,v)],y=async d=>{const S=d.transaction(["files"],"readwrite").objectStore("files").clear();return d.close(),new Promise((w,P)=>{S.onsuccess=()=>{w(!0)},S.onerror=()=>{P(S.error)}})},k=async d=>{const S=d.transaction([u],"readonly").objectStore(u).getAllKeys();return d.close(),new Promise((w,P)=>{S.onsuccess=()=>{w(S.result.filter(C=>typeof C=="string"))},S.onerror=()=>{P(S.error)}})},M=async()=>await caches.open(me),A=async(d,v)=>{try{return await d.match(v)}catch(x){console.error(x);return}},T=async(d,v,x)=>{try{return await d.put(v,x.clone()),!0}catch(S){return console.error(S),!1}};return{corpus:s,getFilePath:ce,getFileSize:e,getDownloadSizeTotal:l,getFile:o,getFileCacheOnly:c,getFileRemote:n,getIndexedDB:i,deleteLocalMetadata:L,clearLocalMetadata:y,getAllLocalFilePaths:k,getCache:M}};function cs(s){return ls(s)}function rs(s,e=os){const t=()=>{s(l=>l===void 0?null:l)};Promise.all([is(e).then(l=>{s(o=>o===void 0&&l!==null?l:o)}).catch(Q),us(e).then(l=>{s(o=>l??o)}).catch(Q)]).then(t,t)}async function is(s){if("caches"in window){const t=await(await caches.open(me)).match(s);if(t?.ok)return Me(t)}return null}async function us(s){const e=await fetch(s);if(!e.ok)return null;if("caches"in window){const t=e.clone();caches.open(me).then(l=>l.put(s,t)).catch(Q)}return Me(e)}async function Me(s){const e=await s.json(),t=bt(e);return cs(t)}const ye="Search";function hs(s){const e=H.c(14);let t,l;e[0]!==s?({reset:l,...t}=s,e[0]=s,e[1]=t,e[2]=l):(t=e[1],l=e[2]);const{t:o}=W();let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=a.jsx("img",{className:"header-logo",src:"logo.svg",alt:"",height:"40",width:"40"}),e[3]=c):c=e[3];let n;e[4]!==o?(n=o("title",{version:o("version")}),e[4]=o,e[5]=n):n=e[5];let r;e[6]!==l||e[7]!==n?(r=a.jsx("h1",{children:a.jsxs("a",{href:"/poke-corpus/",onClick:l,children:[c," ",n]})}),e[6]=l,e[7]=n,e[8]=r):r=e[8];let u;e[9]!==t?(u=a.jsx(fe,{fallback:null,children:a.jsx(lt,{...t})}),e[9]=t,e[10]=u):u=e[10];let i;return e[11]!==r||e[12]!==u?(i=a.jsxs("header",{className:"header",children:[r,u]}),e[11]=r,e[12]=u,e[13]=i):i=e[13],i}function ds(s){const e=H.c(26),{view:t,switchView:l}=s,{t:o}=W();let c;e[0]!==o?(c=o("tagline"),e[0]=o,e[1]=c):c=e[1];let n;e[2]!==c?(n=a.jsx("span",{children:c}),e[2]=c,e[3]=n):n=e[3];let r;e[4]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[4]=r):r=e[4];let u;e[5]!==o?(u=o("footerText"),e[5]=o,e[6]=u):u=e[6];let i;e[7]!==u?(i=a.jsx("span",{children:u}),e[7]=u,e[8]=i):i=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[9]=f):f=e[9];const m=t!=="Search"?"backToSearch":"manageCache";let b;e[10]!==o||e[11]!==m?(b=o(m),e[10]=o,e[11]=m,e[12]=b):b=e[12];let L;e[13]!==l||e[14]!==b?(L=a.jsx("span",{children:a.jsx("button",{className:"link",onClick:l,children:b})}),e[13]=l,e[14]=b,e[15]=L):L=e[15];let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[16]=_):_=e[16];let y;e[17]!==o?(y=o("github"),e[17]=o,e[18]=y):y=e[18];let k;e[19]!==y?(k=a.jsx("span",{children:a.jsx("a",{href:"https://github.com/abcboy101/poke-corpus",children:y})}),e[19]=y,e[20]=k):k=e[20];let M;return e[21]!==k||e[22]!==n||e[23]!==i||e[24]!==L?(M=a.jsxs("footer",{children:[n,r,i,f,L,_,k]}),e[21]=k,e[22]=n,e[23]=i,e[24]=L,e[25]=M):M=e[25],M}function fs(){const[s,e]=j.useState(le.language),[t,l]=j.useState(Ye),[o,c]=j.useState(Xe),[n,r]=j.useState(ye),[u,i]=j.useState(0),[f,m]=j.useState(0),[b,L]=j.useState(null),[_,y]=j.useState(!1),[k,M]=j.useState(void 0);j.useEffect(()=>{const x=ke();document.body.classList.add(`mode-${x}`),y(!0),rs(M)},[]);const A=j.useCallback(x=>{window.location.hash="",Je("corpus-params"),r(ye),i(S=>S+1&255),m(0),L(null),x.preventDefault()},[]),T=j.useCallback(x=>{L(x),m(S=>S+1&255)},[]),d=j.useCallback(()=>{r(x=>{const S=x!=="Search"?"Search":"CacheManager";return _||y(S==="CacheManager"),S})},[]);if(k===void 0)return;const v=["app",`view-${n.toLowerCase()}`];return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&v.push("ua-safari"),a.jsxs("div",{className:v.join(" "),lang:s,dir:le.dir(s),children:[a.jsx(hs,{showModal:T,language:s,setLanguage:e,richText:t,setRichText:l,limit:o,setLimit:c,reset:A}),k!==null?a.jsxs(fe,{FallbackComponent:de,children:[a.jsx(Kt,{loader:k,showModal:T,language:s,richText:t,limit:o}),a.jsx(ts,{active:n==="CacheManager",loader:k,showModal:T})]}):a.jsx(de,{}),a.jsx(ds,{view:n,switchView:d}),a.jsx(ss,{...b},f)]},u)}function gs(){const s=H.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=a.jsx("div",{className:"app",children:a.jsx(de,{})}),s[0]=e):e=s[0],e}const ms=Oe.createRoot(document.getElementById("root"));ms.render(a.jsx(De.StrictMode,{children:a.jsx(fe,{FallbackComponent:gs,children:a.jsx(fs,{})})}));Ke({onOfflineReady(){console.log("Ready to work offline!")}});
