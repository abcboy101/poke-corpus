(function(){"use strict";var He={},Ar=function(e,r,t,n,a){var s=new Worker(He[r]||(He[r]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return s.onmessage=function(l){var c=l.data,v=c.$e$;if(v){var i=new Error(v[0]);i.code=v[1],i.stack=v[2],a(i,null)}else a(null,c)},s.postMessage(t,n),s},x=Uint8Array,B=Uint16Array,ge=Int32Array,te=new x([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ne=new x([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),we=new x([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ke=function(e,r){for(var t=new B(31),n=0;n<31;++n)t[n]=r+=1<<e[n-1];for(var a=new ge(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)a[s]=s-t[n]<<5|n;return{b:t,r:a}},Je=Ke(te,2),Le=Je.b,Ae=Je.r;Le[28]=258,Ae[258]=28;for(var Xe=Ke(ne,0),Ye=Xe.b,Te=Xe.r,de=new B(32768),k=0;k<32768;++k){var _=(k&43690)>>1|(k&21845)<<1;_=(_&52428)>>2|(_&13107)<<2,_=(_&61680)>>4|(_&3855)<<4,de[k]=((_&65280)>>8|(_&255)<<8)>>1}for(var I=function(e,r,t){for(var n=e.length,a=0,s=new B(r);a<n;++a)e[a]&&++s[e[a]-1];var l=new B(r);for(a=1;a<r;++a)l[a]=l[a-1]+s[a-1]<<1;var c;if(t){c=new B(1<<r);var v=15-r;for(a=0;a<n;++a)if(e[a])for(var i=a<<4|e[a],o=r-e[a],f=l[e[a]-1]++<<o,y=f|(1<<o)-1;f<=y;++f)c[de[f]>>v]=i}else for(c=new B(n),a=0;a<n;++a)e[a]&&(c[a]=de[l[e[a]-1]++]>>15-e[a]);return c},X=new x(288),k=0;k<144;++k)X[k]=8;for(var k=144;k<256;++k)X[k]=9;for(var k=256;k<280;++k)X[k]=7;for(var k=280;k<288;++k)X[k]=8;for(var ae=new x(32),k=0;k<32;++k)ae[k]=5;var _e=I(X,9,0),er=I(X,9,1),rr=I(ae,5,0),tr=I(ae,5,1),Me=function(e){for(var r=e[0],t=1;t<e.length;++t)e[t]>r&&(r=e[t]);return r},G=function(e,r,t){var n=r/8|0;return(e[n]|e[n+1]<<8)>>(r&7)&t},Ce=function(e,r){var t=r/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(r&7)},se=function(e){return(e+7)/8|0},ee=function(e,r,t){return(r==null||r<0)&&(r=0),(t==null||t>e.length)&&(t=e.length),new x(e.subarray(r,t))},nr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],T=function(e,r,t){var n=new Error(r||nr[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,T),!t)throw n;return n},De=function(e,r,t,n){var a=e.length,s=n?n.length:0;if(!a||r.f&&!r.l)return t||new x(0);var l=!t,c=l||r.i!=2,v=r.i;l&&(t=new x(a*3));var i=function(be){var ze=t.length;if(be>ze){var pe=new x(Math.max(ze*2,be));pe.set(t),t=pe}},o=r.f||0,f=r.p||0,y=r.b||0,M=r.l,P=r.d,C=r.m,q=r.n,U=a*8;do{if(!M){o=G(e,f,1);var R=G(e,f+1,3);if(f+=3,R)if(R==1)M=er,P=tr,C=9,q=5;else if(R==2){var g=G(e,f,31)+257,d=G(e,f+10,15)+4,u=g+G(e,f+5,31)+1;f+=14;for(var h=new x(u),z=new x(19),w=0;w<d;++w)z[we[w]]=G(e,f+w*3,7);f+=d*3;for(var m=Me(z),S=(1<<m)-1,L=I(z,m,1),w=0;w<u;){var F=L[G(e,f,S)];f+=F&15;var O=F>>4;if(O<16)h[w++]=O;else{var A=0,b=0;for(O==16?(b=3+G(e,f,3),f+=2,A=h[w-1]):O==17?(b=3+G(e,f,7),f+=3):O==18&&(b=11+G(e,f,127),f+=7);b--;)h[w++]=A}}var D=h.subarray(0,g),W=h.subarray(g);C=Me(D),q=Me(W),M=I(D,C,1),P=I(W,q,1)}else T(1);else{var O=se(f)+4,j=e[O-4]|e[O-3]<<8,p=O+j;if(p>a){v&&T(0);break}c&&i(y+j),t.set(e.subarray(O,p),y),r.b=y+=j,r.p=f=p*8,r.f=o;continue}if(f>U){v&&T(0);break}}c&&i(y+131072);for(var me=(1<<C)-1,Q=(1<<q)-1,Y=f;;Y=f){var A=M[Ce(e,f)&me],N=A>>4;if(f+=A&15,f>U){v&&T(0);break}if(A||T(2),N<256)t[y++]=N;else if(N==256){Y=f,M=null;break}else{var $=N-254;if(N>264){var w=N-257,E=te[w];$=G(e,f,(1<<E)-1)+Le[w],f+=E}var J=P[Ce(e,f)&Q],he=J>>4;J||T(3),f+=J&15;var W=Ye[he];if(he>3){var E=ne[he];W+=Ce(e,f)&(1<<E)-1,f+=E}if(f>U){v&&T(0);break}c&&i(y+131072);var ve=y+$;if(y<W){var Fe=s-W,Oe=Math.min(W,ve);for(Fe+y<0&&T(3);y<Oe;++y)t[y]=n[Fe+y]}for(;y<ve;++y)t[y]=t[y-W]}}r.l=M,r.p=Y,r.b=y,r.f=o,M&&(o=1,r.m=C,r.d=P,r.n=q)}while(!o);return y!=t.length&&l?ee(t,0,y):t.subarray(0,y)},K=function(e,r,t){t<<=r&7;var n=r/8|0;e[n]|=t,e[n+1]|=t>>8},oe=function(e,r,t){t<<=r&7;var n=r/8|0;e[n]|=t,e[n+1]|=t>>8,e[n+2]|=t>>16},Se=function(e,r){for(var t=[],n=0;n<e.length;++n)e[n]&&t.push({s:n,f:e[n]});var a=t.length,s=t.slice();if(!a)return{t:je,l:0};if(a==1){var l=new x(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(p,g){return p.f-g.f}),t.push({s:-1,f:25001});var c=t[0],v=t[1],i=0,o=1,f=2;for(t[0]={s:-1,f:c.f+v.f,l:c,r:v};o!=a-1;)c=t[t[i].f<t[f].f?i++:f++],v=t[i!=o&&t[i].f<t[f].f?i++:f++],t[o++]={s:-1,f:c.f+v.f,l:c,r:v};for(var y=s[0].s,n=1;n<a;++n)s[n].s>y&&(y=s[n].s);var M=new B(y+1),P=xe(t[o-1],M,0);if(P>r){var n=0,C=0,q=P-r,U=1<<q;for(s.sort(function(g,d){return M[d.s]-M[g.s]||g.f-d.f});n<a;++n){var R=s[n].s;if(M[R]>r)C+=U-(1<<P-M[R]),M[R]=r;else break}for(C>>=q;C>0;){var O=s[n].s;M[O]<r?C-=1<<r-M[O]++-1:++n}for(;n>=0&&C;--n){var j=s[n].s;M[j]==r&&(--M[j],++C)}P=r}return{t:new x(M),l:P}},xe=function(e,r,t){return e.s==-1?Math.max(xe(e.l,r,t+1),xe(e.r,r,t+1)):r[e.s]=t},Ee=function(e){for(var r=e.length;r&&!e[--r];);for(var t=new B(++r),n=0,a=e[0],s=1,l=function(v){t[n++]=v},c=1;c<=r;++c)if(e[c]==a&&c!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(a),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(a);s=1,a=e[c]}return{c:t.subarray(0,n),n:r}},ie=function(e,r){for(var t=0,n=0;n<r.length;++n)t+=e[n]*r[n];return t},qe=function(e,r,t){var n=t.length,a=se(r+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=t[s];return(a+4+n)*8},Re=function(e,r,t,n,a,s,l,c,v,i,o){K(r,o++,t),++a[256];for(var f=Se(a,15),y=f.t,M=f.l,P=Se(s,15),C=P.t,q=P.l,U=Ee(y),R=U.c,O=U.n,j=Ee(C),p=j.c,g=j.n,d=new B(19),u=0;u<R.length;++u)++d[R[u]&31];for(var u=0;u<p.length;++u)++d[p[u]&31];for(var h=Se(d,7),z=h.t,w=h.l,m=19;m>4&&!z[we[m-1]];--m);var S=i+5<<3,L=ie(a,X)+ie(s,ae)+l,F=ie(a,y)+ie(s,C)+l+14+3*m+ie(d,z)+2*d[16]+3*d[17]+7*d[18];if(v>=0&&S<=L&&S<=F)return qe(r,o,e.subarray(v,v+i));var A,b,D,W;if(K(r,o,1+(F<L)),o+=2,F<L){A=I(y,M,0),b=y,D=I(C,q,0),W=C;var me=I(z,w,0);K(r,o,O-257),K(r,o+5,g-1),K(r,o+10,m-4),o+=14;for(var u=0;u<m;++u)K(r,o+3*u,z[we[u]]);o+=3*m;for(var Q=[R,p],Y=0;Y<2;++Y)for(var N=Q[Y],u=0;u<N.length;++u){var $=N[u]&31;K(r,o,me[$]),o+=z[$],$>15&&(K(r,o,N[u]>>5&127),o+=N[u]>>12)}}else A=_e,b=X,D=rr,W=ae;for(var u=0;u<c;++u){var E=n[u];if(E>255){var $=E>>18&31;oe(r,o,A[$+257]),o+=b[$+257],$>7&&(K(r,o,E>>23&31),o+=te[$]);var J=E&31;oe(r,o,D[J]),o+=W[J],J>3&&(oe(r,o,E>>5&8191),o+=ne[J])}else oe(r,o,A[E]),o+=b[E]}return oe(r,o,A[256]),o+b[256]},ar=new ge([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),je=new x(0),sr=function(e,r,t,n,a,s){var l=s.z||e.length,c=new x(n+l+5*(1+Math.ceil(l/7e3))+a),v=c.subarray(n,c.length-a),i=s.l,o=(s.r||0)&7;if(r){o&&(v[0]=s.r>>3);for(var f=ar[r-1],y=f>>13,M=f&8191,P=(1<<t)-1,C=s.p||new B(32768),q=s.h||new B(P+1),U=Math.ceil(t/3),R=2*U,O=function(Ve){return(e[Ve]^e[Ve+1]<<U^e[Ve+2]<<R)&P},j=new ge(25e3),p=new B(288),g=new B(32),d=0,u=0,h=s.i||0,z=0,w=s.w||0,m=0;h+2<l;++h){var S=O(h),L=h&32767,F=q[S];if(C[L]=F,q[S]=L,w<=h){var A=l-h;if((d>7e3||z>24576)&&(A>423||!i)){o=Re(e,v,0,j,p,g,u,z,m,h-m,o),z=d=u=0,m=h;for(var b=0;b<286;++b)p[b]=0;for(var b=0;b<30;++b)g[b]=0}var D=2,W=0,me=M,Q=L-F&32767;if(A>2&&S==O(h-Q))for(var Y=Math.min(y,A)-1,N=Math.min(32767,h),$=Math.min(258,A);Q<=N&&--me&&L!=F;){if(e[h+D]==e[h+D-Q]){for(var E=0;E<$&&e[h+E]==e[h+E-Q];++E);if(E>D){if(D=E,W=Q,E>Y)break;for(var J=Math.min(Q,E-2),he=0,b=0;b<J;++b){var ve=h-Q+b&32767,Fe=C[ve],Oe=ve-Fe&32767;Oe>he&&(he=Oe,F=ve)}}}L=F,F=C[L],Q+=L-F&32767}if(W){j[z++]=268435456|Ae[D]<<18|Te[W];var be=Ae[D]&31,ze=Te[W]&31;u+=te[be]+ne[ze],++p[257+be],++g[ze],w=h+D,++d}else j[z++]=e[h],++p[e[h]]}}for(h=Math.max(h,w);h<l;++h)j[z++]=e[h],++p[e[h]];o=Re(e,v,i,j,p,g,u,z,m,h-m,o),i||(s.r=o&7|v[o/8|0]<<3,o-=7,s.h=q,s.p=C,s.i=h,s.w=w)}else{for(var h=s.w||0;h<l+i;h+=65535){var pe=h+65535;pe>=l&&(v[o/8|0]=i,pe=l),o=qe(v,o+1,e.subarray(h,pe))}s.i=l}return ee(c,0,n+se(o)+a)},or=function(){for(var e=new Int32Array(256),r=0;r<256;++r){for(var t=r,n=9;--n;)t=(t&1&&-306674912)^t>>>1;e[r]=t}return e}(),ir=function(){var e=-1;return{p:function(r){for(var t=e,n=0;n<r.length;++n)t=or[t&255^r[n]]^t>>>8;e=t},d:function(){return~e}}},Ue=function(){var e=1,r=0;return{p:function(t){for(var n=e,a=r,s=t.length|0,l=0;l!=s;){for(var c=Math.min(l+2655,s);l<c;++l)a+=n+=t[l];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,r=a},d:function(){return e%=65521,r%=65521,(e&255)<<24|(e&65280)<<8|(r&255)<<8|r>>8}}},ye=function(e,r,t,n,a){if(!a&&(a={l:1},r.dictionary)){var s=r.dictionary.subarray(-32768),l=new x(s.length+e.length);l.set(s),l.set(e,s.length),e=l,a.w=s.length}return sr(e,r.level==null?6:r.level,r.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+r.mem,t,n,a)},Mr=function(e,r){var t={};for(var n in e)t[n]=e[n];for(var n in r)t[n]=r[n];return t},lr=function(e,r,t){for(var n=e(),a=e.toString(),s=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/\s+/g,"").split(","),l=0;l<n.length;++l){var c=n[l],v=s[l];if(typeof c=="function"){r+=";"+v+"=";var i=c.toString();if(c.prototype)if(i.indexOf("[native code]")!=-1){var o=i.indexOf(" ",8)+1;r+=i.slice(o,i.indexOf("(",o))}else{r+=i;for(var f in c.prototype)r+=";"+v+".prototype."+f+"="+c.prototype[f].toString()}else r+=i}else t[v]=c}return r},ke=[],Cr=function(e){var r=[];for(var t in e)e[t].buffer&&r.push((e[t]=new e[t].constructor(e[t])).buffer);return r},Sr=function(e,r,t,n){if(!ke[t]){for(var a="",s={},l=e.length-1,c=0;c<l;++c)a=lr(e[c],a,s);ke[t]={c:lr(e[l],a,s),e:s}}var v=Mr({},ke[t].e);return Ar(ke[t].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+r.toString()+"}",t,v,Cr(v),n)},We=function(){return[x,B,ge,te,ne,we,Le,Ye,er,tr,de,nr,I,Me,G,Ce,se,ee,T,De,Er,cr,Or]},Be=function(){return[x,B,ge,te,ne,we,Ae,Te,_e,X,rr,ae,de,ar,je,I,K,oe,Se,xe,Ee,ie,qe,Re,se,ee,sr,ye,Tr,cr]},xr=function(){return[fr,hr,re,ir,or]},kr=function(){return[ur,Lr]},Pr=function(){return[vr,re,Ue]},Fr=function(){return[pr]},cr=function(e){return postMessage(e,[e.buffer])},Or=function(e){return e&&{out:e.size&&new x(e.size),dictionary:e.dictionary}},Z=function(e){return e.ondata=function(r,t){return postMessage([r,t],[r.buffer])},function(r){r.data.length?(e.push(r.data[0],r.data[1]),postMessage([r.data[0].length])):e.flush()}},le=function(e,r,t,n,a,s,l){var c,v=Sr(e,n,a,function(i,o){i?(v.terminate(),r.ondata.call(r,i)):Array.isArray(o)?o.length==1?(r.queuedSize-=o[0],r.ondrain&&r.ondrain(o[0])):(o[1]&&v.terminate(),r.ondata.call(r,i,o[0],o[1])):l(o)});v.postMessage(t),r.queuedSize=0,r.push=function(i,o){r.ondata||T(5),c&&r.ondata(T(4,0,1),null,!!o),r.queuedSize+=i.length,v.postMessage([i,c=o],[i.buffer])},r.terminate=function(){v.terminate()},s&&(r.flush=function(){v.postMessage([])})},re=function(e,r,t){for(;t;++r)e[r]=t,t>>>=8},fr=function(e,r){var t=r.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=r.level<2?4:r.level==9?2:0,e[9]=3,r.mtime!=0&&re(e,4,Math.floor(new Date(r.mtime||Date.now())/1e3)),t){e[3]=8;for(var n=0;n<=t.length;++n)e[n+10]=t.charCodeAt(n)}},ur=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&T(6,"invalid gzip data");var r=e[3],t=10;r&4&&(t+=(e[10]|e[11]<<8)+2);for(var n=(r>>3&1)+(r>>4&1);n>0;n-=!e[t++]);return t+(r&2)},Lr=function(e){var r=e.length;return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0},hr=function(e){return 10+(e.filename?e.filename.length+1:0)},vr=function(e,r){var t=r.level,n=t==0?0:t<6?1:t==9?3:2;if(e[0]=120,e[1]=n<<6|(r.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,r.dictionary){var a=Ue();a.p(r.dictionary),re(e,2,a.d())}},pr=function(e,r){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&T(6,"invalid zlib data"),(e[1]>>5&1)==+!r&&T(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function ce(e,r){return typeof e=="function"&&(r=e,e={}),this.ondata=r,e}var V=function(){function e(r,t){if(typeof r=="function"&&(t=r,r={}),this.ondata=t,this.o=r||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new x(98304),this.o.dictionary){var n=this.o.dictionary.subarray(-32768);this.b.set(n,32768-n.length),this.s.i=32768-n.length}}return e.prototype.p=function(r,t){this.ondata(ye(r,this.o,0,0,this.s),t)},e.prototype.push=function(r,t){this.ondata||T(5),this.s.l&&T(4);var n=r.length+this.s.z;if(n>this.b.length){if(n>2*this.b.length-32768){var a=new x(n&-32768);a.set(this.b.subarray(0,this.s.z)),this.b=a}var s=this.b.length-this.s.z;this.b.set(r.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(r.subarray(s),32768),this.s.z=r.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(r,this.s.z),this.s.z+=r.length;this.s.l=t&1,(this.s.z>this.s.w+8191||t)&&(this.p(this.b,t||!1),this.s.w=this.s.i,this.s.i-=2)},e.prototype.flush=function(){this.ondata||T(5),this.s.l&&T(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},e}(),gr=function(){function e(r,t){le([Be,function(){return[Z,V]}],this,ce.call(this,r,t),function(n){var a=new V(n.data);onmessage=Z(a)},6,1)}return e}();function Tr(e,r){return ye(e,r||{},0,0)}var H=function(){function e(r,t){typeof r=="function"&&(t=r,r={}),this.ondata=t;var n=r&&r.dictionary&&r.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new x(32768),this.p=new x(0),n&&this.o.set(n)}return e.prototype.e=function(r){if(this.ondata||T(5),this.d&&T(4),!this.p.length)this.p=r;else if(r.length){var t=new x(this.p.length+r.length);t.set(this.p),t.set(r,this.p.length),this.p=t}},e.prototype.c=function(r){this.s.i=+(this.d=r||!1);var t=this.s.b,n=De(this.p,this.s,this.o);this.ondata(ee(n,t,this.s.b),this.d),this.o=ee(n,this.s.b-32768),this.s.b=this.o.length,this.p=ee(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(r,t){this.e(r),this.c(t)},e}(),Dr=function(){function e(r,t){le([We,function(){return[Z,H]}],this,ce.call(this,r,t),function(n){var a=new H(n.data);onmessage=Z(a)},7,0)}return e}();function Er(e,r){return De(e,{i:2},r&&r.out,r&&r.dictionary)}var Ne=function(){function e(r,t){this.c=ir(),this.l=0,this.v=1,V.call(this,r,t)}return e.prototype.push=function(r,t){this.c.p(r),this.l+=r.length,V.prototype.push.call(this,r,t)},e.prototype.p=function(r,t){var n=ye(r,this.o,this.v&&hr(this.o),t&&8,this.s);this.v&&(fr(n,this.o),this.v=0),t&&(re(n,n.length-8,this.c.d()),re(n,n.length-4,this.l)),this.ondata(n,t)},e.prototype.flush=function(){V.prototype.flush.call(this)},e}(),qr=function(){function e(r,t){le([Be,xr,function(){return[Z,V,Ne]}],this,ce.call(this,r,t),function(n){var a=new Ne(n.data);onmessage=Z(a)},8,1)}return e}(),$e=function(){function e(r,t){this.v=1,this.r=0,H.call(this,r,t)}return e.prototype.push=function(r,t){if(H.prototype.e.call(this,r),this.r+=r.length,this.v){var n=this.p.subarray(this.v-1),a=n.length>3?ur(n):4;if(a>n.length){if(!t)return}else this.v>1&&this.onmember&&this.onmember(this.r-n.length);this.p=n.subarray(a),this.v=0}H.prototype.c.call(this,t),this.s.f&&!this.s.l&&!t&&(this.v=se(this.s.p)+9,this.s={i:0},this.o=new x(0),this.push(new x(0),t))},e}(),Rr=function(){function e(r,t){var n=this;le([We,kr,function(){return[Z,H,$e]}],this,ce.call(this,r,t),function(a){var s=new $e(a.data);s.onmember=function(l){return postMessage(l)},onmessage=Z(s)},9,0,function(a){return n.onmember&&n.onmember(a)})}return e}(),Ie=function(){function e(r,t){this.c=Ue(),this.v=1,V.call(this,r,t)}return e.prototype.push=function(r,t){this.c.p(r),V.prototype.push.call(this,r,t)},e.prototype.p=function(r,t){var n=ye(r,this.o,this.v&&(this.o.dictionary?6:2),t&&4,this.s);this.v&&(vr(n,this.o),this.v=0),t&&re(n,n.length-4,this.c.d()),this.ondata(n,t)},e.prototype.flush=function(){V.prototype.flush.call(this)},e}(),jr=function(){function e(r,t){le([Be,Pr,function(){return[Z,V,Ie]}],this,ce.call(this,r,t),function(n){var a=new Ie(n.data);onmessage=Z(a)},10,1)}return e}(),Ge=function(){function e(r,t){H.call(this,r,t),this.v=r&&r.dictionary?2:1}return e.prototype.push=function(r,t){if(H.prototype.e.call(this,r),this.v){if(this.p.length<6&&!t)return;this.p=this.p.subarray(pr(this.p,this.v-1)),this.v=0}t&&(this.p.length<4&&T(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),H.prototype.c.call(this,t)},e}(),Ur=function(){function e(r,t){le([We,Fr,function(){return[Z,H,Ge]}],this,ce.call(this,r,t),function(n){var a=new Ge(n.data);onmessage=Z(a)},11,0)}return e}(),Wr=typeof TextDecoder<"u"&&new TextDecoder,Br=0;try{Wr.decode(je,{stream:!0}),Br=1}catch{}const fe=e=>{class r{constructor(){this.i=new e,this.i.ondata=(n,a)=>{this.ondata(null,n,a)}}push(n,a){try{this.queuedSize+=n.length,this.i.push(n,a),this.queuedSize-=n.length,this.ondrain&&this.ondrain(n.length)}catch(s){this.ondata(s,null,a||!1)}}}return r};let Ze=1;try{new gr().terminate()}catch{Ze=0}const Nr=Ze?{gzip:qr,deflate:jr,"deflate-raw":gr}:{gzip:fe(Ne),deflate:fe(Ie),"deflate-raw":fe(V)},$r=Ze?{gzip:Rr,deflate:Ur,"deflate-raw":Dr}:{gzip:fe($e),deflate:fe(Ge),"deflate-raw":fe(H)},wr=(e,r,t)=>{class n extends e{constructor(s){if(!arguments.length)throw new TypeError(`Failed to construct '${t}': 1 argument required, but only 0 present.`);const l=r[s];if(!l)throw new TypeError(`Failed to construct '${t}': Unsupported compression format: '${s}'`);let c=new l,v;super({start:i=>{c.ondata=(o,f,y)=>{o?i.error(o):f&&(i.enqueue(f),y&&(v?v():i.terminate()))}},transform:i=>{if(i instanceof ArrayBuffer)i=new Uint8Array(i);else if(ArrayBuffer.isView(i))i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);else throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");if(c.push(i),c.queuedSize>=32768)return new Promise(o=>{c.ondrain=()=>{c.queuedSize<32768&&o()}})},flush:()=>new Promise(i=>{v=i,c.push(new Uint8Array(0),!0)})},{size:i=>i.byteLength|0,highWaterMark:65536},{size:i=>i.byteLength|0,highWaterMark:65536})}}return n};function Ir(e){return wr(e,Nr,"CompressionStream")}function Gr(e){return wr(e,$r,"DecompressionStream")}const Pe=typeof globalThis>"u"?typeof self>"u"?typeof global>"u"?{}:global:self:globalThis;typeof Pe.CompressionStream>"u"&&(Pe.CompressionStream=Ir(TransformStream)),typeof Pe.DecompressionStream>"u"&&(Pe.DecompressionStream=Gr(TransformStream));const dr="qid",Zr=e=>e!==null&&typeof e=="object"&&"hash"in e&&typeof e.hash=="string"&&"size"in e&&typeof e.size=="number",Qe=(e,r,t)=>`corpus/${e}/${r}_${t}.txt.gz`,Qr="corpus";function Vr(e){const r=e.corpus,t=Object.keys(r.collections),n=Object.entries(r.collections);return{_corpus:r,collections:t,languages:r.languages,entries:n,metadata:e.metadata,getCollection:a=>r.collections[a],isCollectionKey:a=>t.some(s=>a===s),isLanguageKey:a=>r.languages.some(s=>a===s)}}const Hr=e=>{const r=p=>f(p).size,t=async(p,g)=>{const[d,u]=await C(p,g);return u?.hash===d.hash?0:d.size},n=async(p=e.collections)=>{try{const g=await o(),d=(await Promise.all(p.flatMap(u=>e.getCollection(u).languages.flatMap(h=>e.getCollection(u).files.map(z=>t(g,Qe(u,h,z))))))).reduce((u,h)=>u+h,0);return g.close(),d}catch{return p.flatMap(g=>e.getCollection(g).languages.flatMap(d=>e.getCollection(g).files.map(u=>r(Qe(g,d,u))))).reduce((g,d)=>g+d,0)}},a=p=>"/poke-corpus/"+p,s=async(p,g,d)=>{const u=a(d),[h,z]=await C(g,d);if(z?.hash===h.hash||!navigator.onLine&&z?.hash!==void 0){const S=await O(p,u);if(S!==void 0)return S}const w=await fetch(u);return w.ok?(await j(p,u,w).then(async S=>{S&&await M(g,d)}),w):await O(p,u)??null},l=async(p,g,d)=>{const u=a(d),[h,z]=await C(g,d);return z!==void 0?[await O(p,u),z.hash===h.hash]:[void 0,!1]},c=async p=>{const g=a(p),d=await fetch(g);return d.ok?d:null},v="corpus",i="files",o=()=>{const p=indexedDB.open(v);return new Promise((g,d)=>{p.onupgradeneeded=()=>{p.result.createObjectStore(i),p.transaction!==null&&(p.transaction.oncomplete=()=>{console.log("Created object store")})},p.onsuccess=()=>{g(p.result)},p.onerror=()=>{d(p.error)}})},f=p=>e.metadata[p],y=(p,g)=>{const h=p.transaction([i],"readonly").objectStore(i).get(g);return new Promise((z,w)=>{h.onsuccess=()=>{z(Zr(h.result)?h.result:void 0)},h.onerror=()=>{w(h.error)}})},M=(p,g)=>{const h=p.transaction([i],"readwrite").objectStore(i).put(f(g),g);return new Promise((z,w)=>{h.onsuccess=()=>{z(h.result===g)},h.onerror=()=>{w(h.error)}})},P=(p,g)=>{const h=p.transaction([i],"readwrite").objectStore(i).delete(g);return new Promise((z,w)=>{h.onsuccess=()=>{z(!0)},h.onerror=()=>{w(h.error)}})},C=async(p,g)=>[f(g),await y(p,g)],q=()=>o().then(p=>{const u=p.transaction(["files"],"readwrite").objectStore("files").clear();return p.close(),new Promise((h,z)=>{u.onsuccess=()=>{h(!0)},u.onerror=()=>{z(u.error)}})}),U=()=>o().then(p=>{const u=p.transaction([i],"readonly").objectStore(i).getAllKeys();return p.close(),new Promise((h,z)=>{u.onsuccess=()=>{h(u.result.filter(w=>typeof w=="string"))},u.onerror=()=>{z(u.error)}})}),R=async()=>await caches.open(Qr),O=async(p,g)=>{try{return await p.match(g)}catch(d){console.error(d);return}},j=async(p,g,d)=>{try{return await p.put(g,d.clone()),!0}catch(u){return console.error(u),!1}};return{corpus:e,getFilePath:Qe,getFileSize:r,getDownloadSizeTotal:n,getFile:s,getFileCacheOnly:l,getFileRemote:c,getIndexedDB:o,deleteLocalMetadata:P,clearLocalMetadata:q,getAllLocalFilePaths:U,getCache:R}};function Kr(e){return Hr(e)}function Jr(e){return new Worker("/poke-corpus/assets/searchWorker-B1wyKC1R.js",{name:e?.name})}function yr(e){try{new RegExp(e,"u")}catch(r){return console.error(r),!1}return!0}function Xr(e){return e.replaceAll("\\\\","󰄀").replaceAll("\\n",`
`).replaceAll("\\r","\r").replaceAll("\\c","\f").replaceAll("󰄀","\\\\")}function Yr(e,r){const t=e.split(/\s+/);if(!r)return s=>t.every(l=>s.includes(l));const n=t.map(s=>s.toLowerCase()),a=t.map(s=>s.toUpperCase());return s=>{const l=s.toLowerCase(),c=s.toUpperCase();return t.every((v,i)=>l.includes(n[i])||c.includes(a[i]))}}function _r(e,r){if(!r)return a=>a.includes(e);const t=e.toLowerCase(),n=e.toUpperCase();return a=>a.toLowerCase().includes(t)||a.toUpperCase().includes(n)}function et(e,r){const t=new RegExp(e,r?"sui":"su");return n=>Xr(n).match(t)!==null}const rt=e=>({success:!0,postfix:e}),ue=e=>({success:!1,message:e}),tt=e=>e.replaceAll("\\\\","󰄀").replaceAll("\\/","󰄁").replaceAll("\\(","󰄈").replaceAll("\\)","󰄉").replaceAll('\\"',"󰆀"),mr=e=>e.replaceAll("󰄈","(").replaceAll("󰄉",")").replaceAll("󰆀",'"').replaceAll("󰄁","/").replaceAll("󰄀","\\\\"),nt=e=>e.replaceAll("󰄈","\\(").replaceAll("󰄉","\\)").replaceAll("󰆀",'\\"').replaceAll("󰄁","/").replaceAll("󰄀","\\\\");function at(e){e=tt(e);const r=e.split(/(\b(?:NOT|AND|OR)\b|\\?[/"()])/u).filter(l=>l.length>0),t=[],n=[];let a=!1,s=!1;for(const l of r){const c=l.trim();if(a&&c!=="/"||s&&c!=='"'){n[n.length-1]+=l;continue}switch(c){case"NOT":t.push(c);break;case"AND":case"OR":for(;t[t.length-1]!=="("&&(t[t.length-1]==="NOT"||t[t.length-1]==="AND"&&c==="OR"||c===t[t.length-1]);)n.push(t.pop());t.push(c);break;case"/":if(!a)t.push(c),a=!0,n.push("");else if(t[t.length-1]==="/"){t.pop();const v=n.pop();if(!yr(v))return ue("regex");for(n.push(`/${v}/`),a=!1;t[t.length-1]==="NOT";)n.push(t.pop())}break;case'"':if(!s)t.push(c),s=!0,n.push("");else if(t[t.length-1]==='"')for(t.pop(),n.push(`"${n.pop()}"`),s=!1;t[t.length-1]==="NOT";)n.push(t.pop());break;case"(":t.push(c);break;case")":for(;t[t.length-1]!=="(";){if(t.length===0)return ue("parentheses");n.push(t.pop())}if(t[t.length-1]!=="(")return ue("parentheses");for(t.pop();t[t.length-1]==="NOT";)n.push(t.pop());break;default:c.length>0&&n.push(c)}}for(;t.length>0;){if(t[t.length-1]==="(")return ue("parentheses");if(t[t.length-1]==="/")return ue("slash");if(t[t.length-1]==='"')return ue("quote");n.push(t.pop())}return rt(n)}function st(e,r){const t=[];for(const n of r)switch(n){case"NOT":{const a=t.pop();if(a===void 0)return null;t.push(s=>!a(s));break}case"AND":{const a=t.pop(),s=t.pop();if(a===void 0||s===void 0)return null;t.push(l=>s(l)&&a(l));break}case"OR":{const a=t.pop(),s=t.pop();if(a===void 0||s===void 0)return null;t.push(l=>s(l)||a(l));break}default:n.startsWith("/")&&n.endsWith("/")?t.push(et(nt(n.substring(1,n.length-1)),e)):n.startsWith('"')&&n.endsWith('"')?t.push(_r(mr(n.substring(1,n.length-1)),e)):t.push(Yr(mr(n),e))}for(;t.length>=2;){const n=t.pop(),a=t.pop();t.push(s=>a(s)&&n(s))}return t.pop()}function ot(e,r){const t=at(e);if(!t.success)return t.message;const n=st(r,t.postfix);return n===null?"operand":n===void 0?"empty":"success"}function it(e){return/(.*)\bWHERE\s+([0-9A-Za-z-]+)\s*(=|==|<>|!=)\s*([0-9A-Za-z-]+)/u.exec(e)}const br=e=>self.memoryCache?.get(e)?.deref(),lt=(e,r)=>self.memoryCache?.set(e,new WeakRef(r)),ct=(e,r,t,n)=>{const a=e.getFilePath(r,t,n);return br(a)!==void 0},zr=async(e,r,t,n)=>{const a=e.getFilePath(r,t,n),s=br(a);if(s)return s;let l;try{if("caches"in self&&"indexedDB"in self&&"databases"in self.indexedDB){const[i,o]=await Promise.all([e.getCache(),e.getIndexedDB()]);l=await e.getFile(i,o,a),o.close()}else l=await e.getFileRemote(a);if(l===null)return""}catch(i){return console.error(i),""}let c=(await l.blob()).stream();c=c.pipeThrough(new DecompressionStream("gzip"));const v=new Response(c).text();return lt(a,v),v};self.onmessage=async e=>{const r=e.data;self.memoryCache??=new Map;const t=r.showAllLanguages||r.languages.includes(dr);let n=.5,a=.5,s=0;const l=(i,o,f,y)=>{const M=o*n+f*a+y*s;postMessage({complete:!1,status:i,progress:M,showId:t})},c=(i,o,f,y,M)=>{const P=o*n+f*a+y*s,C={complete:!1,status:i,progress:P,showId:t,index:M.index,result:M.result};postMessage(C)},v=i=>{postMessage({complete:!0,status:i,progress:1,showId:t})};try{l("loading",0,0,0);const i=Vr(r.serializedCorpus),o=Kr(i);if(r.type==="regex"&&!yr(r.query)){v("regex");return}if(r.type==="boolean"){let w=r;const m=it(r.query);if(m){const[,L,F,,A]=m;if(!i.isLanguageKey(F)||!i.isLanguageKey(A)){v("boolean.where");return}w={...r,query:L}}const S=ot(w.query,w.caseInsensitive);if(S!=="success"&&!(m&&S==="empty")){v(`boolean.${S}`);return}}let f=0,y=0,M=0;const P=[];if(i.entries.forEach(([w,m])=>{if(!r.collections.includes(w)||!r.languages.some(A=>m.languages.includes(A)))return;const S=["common","messages","ui"],L=["script","talk"],F=m.structured&&r.showAllLanguages?m.languages:m.languages.filter(A=>r.languages.includes(A)||A===dr);m.files.forEach(A=>{!r.common&&S.includes(A)||!r.script&&L.includes(A)||(m.structured?(P.push({index:f,params:r,collectionKey:w,fileKey:A,languages:F,speaker:m.speaker,literals:m.literals}),f++):F.forEach(b=>{P.push({index:f,params:r,collectionKey:w,fileKey:A,languages:[b]}),f++}),y+=F.length,M+=F.reduce((b,D)=>b+ +ct(o,w,D,A),0))})}),f===0){v("noMatch");return}M>0&&(n*=(y-M)/y,a*=(1-n)/(a+s),s*=(1-n)/(a+s));let C=0,q=0,U=0;const R=()=>[C/y,q/y,U/f],O=w=>(C++,l("loading",...R()),w),j=()=>{q++,l("processing",...R())},p=w=>{U++,c("collecting",...R(),w)};let g=!1,d=!1;const u=[],h=w=>{if(g)return;const m=w.data;m.status==="processing"?j():m.status==="done"?(p(m),U===f&&(v(d?"network":"done"),u.forEach(S=>{S.terminate()}))):(g=!0,v(m.status),u.forEach(S=>{S.terminate()}))},z=Math.max(1,Math.min(f,(navigator.hardwareConcurrency||4)-2));for(let w=0;w<z;w++){const m=new Jr;m.onmessage=h,m.onerror=()=>{g||(g=!0,v("error"),u.forEach(S=>{S.terminate()}))},u.push(m)}await Promise.all(P.map(async(w,m)=>{const S=w.speaker,L=await Promise.all(w.languages.map(b=>zr(o,w.collectionKey,b,w.fileKey).then(O))),F=S===void 0?void 0:await Promise.all(w.languages.map(b=>zr(o,w.collectionKey,b,S.file)));if(g)return;const A={...w,files:L,speakerFiles:F};(L.some(b=>b==="")||F?.some(b=>b===""))&&(d=!0,A.languages=w.languages.filter((b,D)=>L[D]!==""),A.files=L.filter((b,D)=>L[D]!==""),A.speakerFiles=F?.filter((b,D)=>L[D]!==""),A.speakerFiles?.some(b=>b==="")&&(A.speaker=void 0)),u[m%u.length].postMessage(A)}))}catch(i){console.error(i),v("error")}}})();
