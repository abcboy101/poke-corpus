(function(){"use strict";var He={},Ar=function(e,r,t,n,a){var s=new Worker(He[r]||(He[r]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return s.onmessage=function(l){var c=l.data,h=c.$e$;if(h){var i=new Error(h[0]);i.code=h[1],i.stack=h[2],a(i,null)}else a(null,c)},s.postMessage(t,n),s},S=Uint8Array,B=Uint16Array,ge=Int32Array,te=new S([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ne=new S([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),we=new S([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ke=function(e,r){for(var t=new B(31),n=0;n<31;++n)t[n]=r+=1<<e[n-1];for(var a=new ge(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)a[s]=s-t[n]<<5|n;return{b:t,r:a}},Je=Ke(te,2),Le=Je.b,Ae=Je.r;Le[28]=258,Ae[258]=28;for(var Xe=Ke(ne,0),Ye=Xe.b,Te=Xe.r,de=new B(32768),x=0;x<32768;++x){var _=(x&43690)>>1|(x&21845)<<1;_=(_&52428)>>2|(_&13107)<<2,_=(_&61680)>>4|(_&3855)<<4,de[x]=((_&65280)>>8|(_&255)<<8)>>1}for(var I=function(e,r,t){for(var n=e.length,a=0,s=new B(r);a<n;++a)e[a]&&++s[e[a]-1];var l=new B(r);for(a=1;a<r;++a)l[a]=l[a-1]+s[a-1]<<1;var c;if(t){c=new B(1<<r);var h=15-r;for(a=0;a<n;++a)if(e[a])for(var i=a<<4|e[a],o=r-e[a],u=l[e[a]-1]++<<o,y=u|(1<<o)-1;u<=y;++u)c[de[u]>>h]=i}else for(c=new B(n),a=0;a<n;++a)e[a]&&(c[a]=de[l[e[a]-1]++]>>15-e[a]);return c},X=new S(288),x=0;x<144;++x)X[x]=8;for(var x=144;x<256;++x)X[x]=9;for(var x=256;x<280;++x)X[x]=7;for(var x=280;x<288;++x)X[x]=8;for(var ae=new S(32),x=0;x<32;++x)ae[x]=5;var _e=I(X,9,0),er=I(X,9,1),rr=I(ae,5,0),tr=I(ae,5,1),Me=function(e){for(var r=e[0],t=1;t<e.length;++t)e[t]>r&&(r=e[t]);return r},G=function(e,r,t){var n=r/8|0;return(e[n]|e[n+1]<<8)>>(r&7)&t},Ce=function(e,r){var t=r/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(r&7)},se=function(e){return(e+7)/8|0},ee=function(e,r,t){return(r==null||r<0)&&(r=0),(t==null||t>e.length)&&(t=e.length),new S(e.subarray(r,t))},nr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],F=function(e,r,t){var n=new Error(r||nr[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,F),!t)throw n;return n},De=function(e,r,t,n){var a=e.length,s=n?n.length:0;if(!a||r.f&&!r.l)return t||new S(0);var l=!t,c=l||r.i!=2,h=r.i;l&&(t=new S(a*3));var i=function(be){var ze=t.length;if(be>ze){var pe=new S(Math.max(ze*2,be));pe.set(t),t=pe}},o=r.f||0,u=r.p||0,y=r.b||0,b=r.l,P=r.d,M=r.m,q=r.n,j=a*8;do{if(!b){o=G(e,u,1);var R=G(e,u+1,3);if(u+=3,R)if(R==1)b=er,P=tr,M=9,q=5;else if(R==2){var v=G(e,u,31)+257,w=G(e,u+10,15)+4,p=v+G(e,u+5,31)+1;u+=14;for(var f=new S(p),m=new S(19),g=0;g<w;++g)m[we[g]]=G(e,u+g*3,7);u+=w*3;for(var d=Me(m),C=(1<<d)-1,E=I(m,d,1),g=0;g<p;){var k=E[G(e,u,C)];u+=k&15;var O=k>>4;if(O<16)f[g++]=O;else{var A=0,z=0;for(O==16?(z=3+G(e,u,3),u+=2,A=f[g-1]):O==17?(z=3+G(e,u,7),u+=3):O==18&&(z=11+G(e,u,127),u+=7);z--;)f[g++]=A}}var W=f.subarray(0,v),U=f.subarray(v);M=Me(W),q=Me(U),b=I(W,M,1),P=I(U,q,1)}else F(1);else{var O=se(u)+4,T=e[O-4]|e[O-3]<<8,D=O+T;if(D>a){h&&F(0);break}c&&i(y+T),t.set(e.subarray(O,D),y),r.b=y+=T,r.p=u=D*8,r.f=o;continue}if(u>j){h&&F(0);break}}c&&i(y+131072);for(var me=(1<<M)-1,Q=(1<<q)-1,Y=u;;Y=u){var A=b[Ce(e,u)&me],N=A>>4;if(u+=A&15,u>j){h&&F(0);break}if(A||F(2),N<256)t[y++]=N;else if(N==256){Y=u,b=null;break}else{var $=N-254;if(N>264){var g=N-257,L=te[g];$=G(e,u,(1<<L)-1)+Le[g],u+=L}var J=P[Ce(e,u)&Q],he=J>>4;J||F(3),u+=J&15;var U=Ye[he];if(he>3){var L=ne[he];U+=Ce(e,u)&(1<<L)-1,u+=L}if(u>j){h&&F(0);break}c&&i(y+131072);var ve=y+$;if(y<U){var Fe=s-U,Oe=Math.min(U,ve);for(Fe+y<0&&F(3);y<Oe;++y)t[y]=n[Fe+y]}for(;y<ve;++y)t[y]=t[y-U]}}r.l=b,r.p=Y,r.b=y,r.f=o,b&&(o=1,r.m=M,r.d=P,r.n=q)}while(!o);return y!=t.length&&l?ee(t,0,y):t.subarray(0,y)},K=function(e,r,t){t<<=r&7;var n=r/8|0;e[n]|=t,e[n+1]|=t>>8},oe=function(e,r,t){t<<=r&7;var n=r/8|0;e[n]|=t,e[n+1]|=t>>8,e[n+2]|=t>>16},Se=function(e,r){for(var t=[],n=0;n<e.length;++n)e[n]&&t.push({s:n,f:e[n]});var a=t.length,s=t.slice();if(!a)return{t:je,l:0};if(a==1){var l=new S(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(D,v){return D.f-v.f}),t.push({s:-1,f:25001});var c=t[0],h=t[1],i=0,o=1,u=2;for(t[0]={s:-1,f:c.f+h.f,l:c,r:h};o!=a-1;)c=t[t[i].f<t[u].f?i++:u++],h=t[i!=o&&t[i].f<t[u].f?i++:u++],t[o++]={s:-1,f:c.f+h.f,l:c,r:h};for(var y=s[0].s,n=1;n<a;++n)s[n].s>y&&(y=s[n].s);var b=new B(y+1),P=xe(t[o-1],b,0);if(P>r){var n=0,M=0,q=P-r,j=1<<q;for(s.sort(function(v,w){return b[w.s]-b[v.s]||v.f-w.f});n<a;++n){var R=s[n].s;if(b[R]>r)M+=j-(1<<P-b[R]),b[R]=r;else break}for(M>>=q;M>0;){var O=s[n].s;b[O]<r?M-=1<<r-b[O]++-1:++n}for(;n>=0&&M;--n){var T=s[n].s;b[T]==r&&(--b[T],++M)}P=r}return{t:new S(b),l:P}},xe=function(e,r,t){return e.s==-1?Math.max(xe(e.l,r,t+1),xe(e.r,r,t+1)):r[e.s]=t},Ee=function(e){for(var r=e.length;r&&!e[--r];);for(var t=new B(++r),n=0,a=e[0],s=1,l=function(h){t[n++]=h},c=1;c<=r;++c)if(e[c]==a&&c!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(a),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(a);s=1,a=e[c]}return{c:t.subarray(0,n),n:r}},ie=function(e,r){for(var t=0,n=0;n<r.length;++n)t+=e[n]*r[n];return t},qe=function(e,r,t){var n=t.length,a=se(r+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=t[s];return(a+4+n)*8},Re=function(e,r,t,n,a,s,l,c,h,i,o){K(r,o++,t),++a[256];for(var u=Se(a,15),y=u.t,b=u.l,P=Se(s,15),M=P.t,q=P.l,j=Ee(y),R=j.c,O=j.n,T=Ee(M),D=T.c,v=T.n,w=new B(19),p=0;p<R.length;++p)++w[R[p]&31];for(var p=0;p<D.length;++p)++w[D[p]&31];for(var f=Se(w,7),m=f.t,g=f.l,d=19;d>4&&!m[we[d-1]];--d);var C=i+5<<3,E=ie(a,X)+ie(s,ae)+l,k=ie(a,y)+ie(s,M)+l+14+3*d+ie(w,m)+2*w[16]+3*w[17]+7*w[18];if(h>=0&&C<=E&&C<=k)return qe(r,o,e.subarray(h,h+i));var A,z,W,U;if(K(r,o,1+(k<E)),o+=2,k<E){A=I(y,b,0),z=y,W=I(M,q,0),U=M;var me=I(m,g,0);K(r,o,O-257),K(r,o+5,v-1),K(r,o+10,d-4),o+=14;for(var p=0;p<d;++p)K(r,o+3*p,m[we[p]]);o+=3*d;for(var Q=[R,D],Y=0;Y<2;++Y)for(var N=Q[Y],p=0;p<N.length;++p){var $=N[p]&31;K(r,o,me[$]),o+=m[$],$>15&&(K(r,o,N[p]>>5&127),o+=N[p]>>12)}}else A=_e,z=X,W=rr,U=ae;for(var p=0;p<c;++p){var L=n[p];if(L>255){var $=L>>18&31;oe(r,o,A[$+257]),o+=z[$+257],$>7&&(K(r,o,L>>23&31),o+=te[$]);var J=L&31;oe(r,o,W[J]),o+=U[J],J>3&&(oe(r,o,L>>5&8191),o+=ne[J])}else oe(r,o,A[L]),o+=z[L]}return oe(r,o,A[256]),o+z[256]},ar=new ge([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),je=new S(0),sr=function(e,r,t,n,a,s){var l=s.z||e.length,c=new S(n+l+5*(1+Math.ceil(l/7e3))+a),h=c.subarray(n,c.length-a),i=s.l,o=(s.r||0)&7;if(r){o&&(h[0]=s.r>>3);for(var u=ar[r-1],y=u>>13,b=u&8191,P=(1<<t)-1,M=s.p||new B(32768),q=s.h||new B(P+1),j=Math.ceil(t/3),R=2*j,O=function(Ve){return(e[Ve]^e[Ve+1]<<j^e[Ve+2]<<R)&P},T=new ge(25e3),D=new B(288),v=new B(32),w=0,p=0,f=s.i||0,m=0,g=s.w||0,d=0;f+2<l;++f){var C=O(f),E=f&32767,k=q[C];if(M[E]=k,q[C]=E,g<=f){var A=l-f;if((w>7e3||m>24576)&&(A>423||!i)){o=Re(e,h,0,T,D,v,p,m,d,f-d,o),m=w=p=0,d=f;for(var z=0;z<286;++z)D[z]=0;for(var z=0;z<30;++z)v[z]=0}var W=2,U=0,me=b,Q=E-k&32767;if(A>2&&C==O(f-Q))for(var Y=Math.min(y,A)-1,N=Math.min(32767,f),$=Math.min(258,A);Q<=N&&--me&&E!=k;){if(e[f+W]==e[f+W-Q]){for(var L=0;L<$&&e[f+L]==e[f+L-Q];++L);if(L>W){if(W=L,U=Q,L>Y)break;for(var J=Math.min(Q,L-2),he=0,z=0;z<J;++z){var ve=f-Q+z&32767,Fe=M[ve],Oe=ve-Fe&32767;Oe>he&&(he=Oe,k=ve)}}}E=k,k=M[E],Q+=E-k&32767}if(U){T[m++]=268435456|Ae[W]<<18|Te[U];var be=Ae[W]&31,ze=Te[U]&31;p+=te[be]+ne[ze],++D[257+be],++v[ze],g=f+W,++w}else T[m++]=e[f],++D[e[f]]}}for(f=Math.max(f,g);f<l;++f)T[m++]=e[f],++D[e[f]];o=Re(e,h,i,T,D,v,p,m,d,f-d,o),i||(s.r=o&7|h[o/8|0]<<3,o-=7,s.h=q,s.p=M,s.i=f,s.w=g)}else{for(var f=s.w||0;f<l+i;f+=65535){var pe=f+65535;pe>=l&&(h[o/8|0]=i,pe=l),o=qe(h,o+1,e.subarray(f,pe))}s.i=l}return ee(c,0,n+se(o)+a)},or=function(){for(var e=new Int32Array(256),r=0;r<256;++r){for(var t=r,n=9;--n;)t=(t&1&&-306674912)^t>>>1;e[r]=t}return e}(),ir=function(){var e=-1;return{p:function(r){for(var t=e,n=0;n<r.length;++n)t=or[t&255^r[n]]^t>>>8;e=t},d:function(){return~e}}},Ue=function(){var e=1,r=0;return{p:function(t){for(var n=e,a=r,s=t.length|0,l=0;l!=s;){for(var c=Math.min(l+2655,s);l<c;++l)a+=n+=t[l];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,r=a},d:function(){return e%=65521,r%=65521,(e&255)<<24|(e&65280)<<8|(r&255)<<8|r>>8}}},ye=function(e,r,t,n,a){if(!a&&(a={l:1},r.dictionary)){var s=r.dictionary.subarray(-32768),l=new S(s.length+e.length);l.set(s),l.set(e,s.length),e=l,a.w=s.length}return sr(e,r.level==null?6:r.level,r.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+r.mem,t,n,a)},Mr=function(e,r){var t={};for(var n in e)t[n]=e[n];for(var n in r)t[n]=r[n];return t},lr=function(e,r,t){for(var n=e(),a=e.toString(),s=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/\s+/g,"").split(","),l=0;l<n.length;++l){var c=n[l],h=s[l];if(typeof c=="function"){r+=";"+h+"=";var i=c.toString();if(c.prototype)if(i.indexOf("[native code]")!=-1){var o=i.indexOf(" ",8)+1;r+=i.slice(o,i.indexOf("(",o))}else{r+=i;for(var u in c.prototype)r+=";"+h+".prototype."+u+"="+c.prototype[u].toString()}else r+=i}else t[h]=c}return r},Pe=[],Cr=function(e){var r=[];for(var t in e)e[t].buffer&&r.push((e[t]=new e[t].constructor(e[t])).buffer);return r},Sr=function(e,r,t,n){if(!Pe[t]){for(var a="",s={},l=e.length-1,c=0;c<l;++c)a=lr(e[c],a,s);Pe[t]={c:lr(e[l],a,s),e:s}}var h=Mr({},Pe[t].e);return Ar(Pe[t].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+r.toString()+"}",t,h,Cr(h),n)},We=function(){return[S,B,ge,te,ne,we,Le,Ye,er,tr,de,nr,I,Me,G,Ce,se,ee,F,De,Er,cr,Or]},Be=function(){return[S,B,ge,te,ne,we,Ae,Te,_e,X,rr,ae,de,ar,je,I,K,oe,Se,xe,Ee,ie,qe,Re,se,ee,sr,ye,Tr,cr]},xr=function(){return[fr,hr,re,ir,or]},Pr=function(){return[ur,Lr]},kr=function(){return[vr,re,Ue]},Fr=function(){return[pr]},cr=function(e){return postMessage(e,[e.buffer])},Or=function(e){return e&&{out:e.size&&new S(e.size),dictionary:e.dictionary}},Z=function(e){return e.ondata=function(r,t){return postMessage([r,t],[r.buffer])},function(r){r.data.length?(e.push(r.data[0],r.data[1]),postMessage([r.data[0].length])):e.flush()}},le=function(e,r,t,n,a,s,l){var c,h=Sr(e,n,a,function(i,o){i?(h.terminate(),r.ondata.call(r,i)):Array.isArray(o)?o.length==1?(r.queuedSize-=o[0],r.ondrain&&r.ondrain(o[0])):(o[1]&&h.terminate(),r.ondata.call(r,i,o[0],o[1])):l(o)});h.postMessage(t),r.queuedSize=0,r.push=function(i,o){r.ondata||F(5),c&&r.ondata(F(4,0,1),null,!!o),r.queuedSize+=i.length,h.postMessage([i,c=o],[i.buffer])},r.terminate=function(){h.terminate()},s&&(r.flush=function(){h.postMessage([])})},re=function(e,r,t){for(;t;++r)e[r]=t,t>>>=8},fr=function(e,r){var t=r.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=r.level<2?4:r.level==9?2:0,e[9]=3,r.mtime!=0&&re(e,4,Math.floor(new Date(r.mtime||Date.now())/1e3)),t){e[3]=8;for(var n=0;n<=t.length;++n)e[n+10]=t.charCodeAt(n)}},ur=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&F(6,"invalid gzip data");var r=e[3],t=10;r&4&&(t+=(e[10]|e[11]<<8)+2);for(var n=(r>>3&1)+(r>>4&1);n>0;n-=!e[t++]);return t+(r&2)},Lr=function(e){var r=e.length;return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0},hr=function(e){return 10+(e.filename?e.filename.length+1:0)},vr=function(e,r){var t=r.level,n=t==0?0:t<6?1:t==9?3:2;if(e[0]=120,e[1]=n<<6|(r.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,r.dictionary){var a=Ue();a.p(r.dictionary),re(e,2,a.d())}},pr=function(e,r){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&F(6,"invalid zlib data"),(e[1]>>5&1)==+!r&&F(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function ce(e,r){return typeof e=="function"&&(r=e,e={}),this.ondata=r,e}var V=function(){function e(r,t){if(typeof r=="function"&&(t=r,r={}),this.ondata=t,this.o=r||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new S(98304),this.o.dictionary){var n=this.o.dictionary.subarray(-32768);this.b.set(n,32768-n.length),this.s.i=32768-n.length}}return e.prototype.p=function(r,t){this.ondata(ye(r,this.o,0,0,this.s),t)},e.prototype.push=function(r,t){this.ondata||F(5),this.s.l&&F(4);var n=r.length+this.s.z;if(n>this.b.length){if(n>2*this.b.length-32768){var a=new S(n&-32768);a.set(this.b.subarray(0,this.s.z)),this.b=a}var s=this.b.length-this.s.z;this.b.set(r.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(r.subarray(s),32768),this.s.z=r.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(r,this.s.z),this.s.z+=r.length;this.s.l=t&1,(this.s.z>this.s.w+8191||t)&&(this.p(this.b,t||!1),this.s.w=this.s.i,this.s.i-=2)},e.prototype.flush=function(){this.ondata||F(5),this.s.l&&F(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},e}(),gr=function(){function e(r,t){le([Be,function(){return[Z,V]}],this,ce.call(this,r,t),function(n){var a=new V(n.data);onmessage=Z(a)},6,1)}return e}();function Tr(e,r){return ye(e,r||{},0,0)}var H=function(){function e(r,t){typeof r=="function"&&(t=r,r={}),this.ondata=t;var n=r&&r.dictionary&&r.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new S(32768),this.p=new S(0),n&&this.o.set(n)}return e.prototype.e=function(r){if(this.ondata||F(5),this.d&&F(4),!this.p.length)this.p=r;else if(r.length){var t=new S(this.p.length+r.length);t.set(this.p),t.set(r,this.p.length),this.p=t}},e.prototype.c=function(r){this.s.i=+(this.d=r||!1);var t=this.s.b,n=De(this.p,this.s,this.o);this.ondata(ee(n,t,this.s.b),this.d),this.o=ee(n,this.s.b-32768),this.s.b=this.o.length,this.p=ee(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(r,t){this.e(r),this.c(t)},e}(),Dr=function(){function e(r,t){le([We,function(){return[Z,H]}],this,ce.call(this,r,t),function(n){var a=new H(n.data);onmessage=Z(a)},7,0)}return e}();function Er(e,r){return De(e,{i:2},r&&r.out,r&&r.dictionary)}var Ne=function(){function e(r,t){this.c=ir(),this.l=0,this.v=1,V.call(this,r,t)}return e.prototype.push=function(r,t){this.c.p(r),this.l+=r.length,V.prototype.push.call(this,r,t)},e.prototype.p=function(r,t){var n=ye(r,this.o,this.v&&hr(this.o),t&&8,this.s);this.v&&(fr(n,this.o),this.v=0),t&&(re(n,n.length-8,this.c.d()),re(n,n.length-4,this.l)),this.ondata(n,t)},e.prototype.flush=function(){V.prototype.flush.call(this)},e}(),qr=function(){function e(r,t){le([Be,xr,function(){return[Z,V,Ne]}],this,ce.call(this,r,t),function(n){var a=new Ne(n.data);onmessage=Z(a)},8,1)}return e}(),$e=function(){function e(r,t){this.v=1,this.r=0,H.call(this,r,t)}return e.prototype.push=function(r,t){if(H.prototype.e.call(this,r),this.r+=r.length,this.v){var n=this.p.subarray(this.v-1),a=n.length>3?ur(n):4;if(a>n.length){if(!t)return}else this.v>1&&this.onmember&&this.onmember(this.r-n.length);this.p=n.subarray(a),this.v=0}H.prototype.c.call(this,t),this.s.f&&!this.s.l&&!t&&(this.v=se(this.s.p)+9,this.s={i:0},this.o=new S(0),this.push(new S(0),t))},e}(),Rr=function(){function e(r,t){var n=this;le([We,Pr,function(){return[Z,H,$e]}],this,ce.call(this,r,t),function(a){var s=new $e(a.data);s.onmember=function(l){return postMessage(l)},onmessage=Z(s)},9,0,function(a){return n.onmember&&n.onmember(a)})}return e}(),Ie=function(){function e(r,t){this.c=Ue(),this.v=1,V.call(this,r,t)}return e.prototype.push=function(r,t){this.c.p(r),V.prototype.push.call(this,r,t)},e.prototype.p=function(r,t){var n=ye(r,this.o,this.v&&(this.o.dictionary?6:2),t&&4,this.s);this.v&&(vr(n,this.o),this.v=0),t&&re(n,n.length-4,this.c.d()),this.ondata(n,t)},e.prototype.flush=function(){V.prototype.flush.call(this)},e}(),jr=function(){function e(r,t){le([Be,kr,function(){return[Z,V,Ie]}],this,ce.call(this,r,t),function(n){var a=new Ie(n.data);onmessage=Z(a)},10,1)}return e}(),Ge=function(){function e(r,t){H.call(this,r,t),this.v=r&&r.dictionary?2:1}return e.prototype.push=function(r,t){if(H.prototype.e.call(this,r),this.v){if(this.p.length<6&&!t)return;this.p=this.p.subarray(pr(this.p,this.v-1)),this.v=0}t&&(this.p.length<4&&F(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),H.prototype.c.call(this,t)},e}(),Ur=function(){function e(r,t){le([We,Fr,function(){return[Z,H,Ge]}],this,ce.call(this,r,t),function(n){var a=new Ge(n.data);onmessage=Z(a)},11,0)}return e}(),Wr=typeof TextDecoder<"u"&&new TextDecoder,Br=0;try{Wr.decode(je,{stream:!0}),Br=1}catch{}const fe=e=>{class r{constructor(){this.i=new e,this.i.ondata=(n,a)=>{this.ondata(null,n,a)}}push(n,a){try{this.queuedSize+=n.length,this.i.push(n,a),this.queuedSize-=n.length,this.ondrain&&this.ondrain(n.length)}catch(s){this.ondata(s,null,a||!1)}}}return r};let Ze=1;try{new gr().terminate()}catch{Ze=0}const Nr=Ze?{gzip:qr,deflate:jr,"deflate-raw":gr}:{gzip:fe(Ne),deflate:fe(Ie),"deflate-raw":fe(V)},$r=Ze?{gzip:Rr,deflate:Ur,"deflate-raw":Dr}:{gzip:fe($e),deflate:fe(Ge),"deflate-raw":fe(H)},wr=(e,r,t)=>{class n extends e{constructor(s){if(!arguments.length)throw new TypeError(`Failed to construct '${t}': 1 argument required, but only 0 present.`);const l=r[s];if(!l)throw new TypeError(`Failed to construct '${t}': Unsupported compression format: '${s}'`);let c=new l,h;super({start:i=>{c.ondata=(o,u,y)=>{o?i.error(o):u&&(i.enqueue(u),y&&(h?h():i.terminate()))}},transform:i=>{if(i instanceof ArrayBuffer)i=new Uint8Array(i);else if(ArrayBuffer.isView(i))i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);else throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");if(c.push(i),c.queuedSize>=32768)return new Promise(o=>{c.ondrain=()=>{c.queuedSize<32768&&o()}})},flush:()=>new Promise(i=>{h=i,c.push(new Uint8Array(0),!0)})},{size:i=>i.byteLength|0,highWaterMark:65536},{size:i=>i.byteLength|0,highWaterMark:65536})}}return n};function Ir(e){return wr(e,Nr,"CompressionStream")}function Gr(e){return wr(e,$r,"DecompressionStream")}const ke=typeof globalThis>"u"?typeof self>"u"?typeof global>"u"?{}:global:self:globalThis;typeof ke.CompressionStream>"u"&&(ke.CompressionStream=Ir(TransformStream)),typeof ke.DecompressionStream>"u"&&(ke.DecompressionStream=Gr(TransformStream));const dr="qid",Zr=e=>e!==null&&typeof e=="object"&&"hash"in e&&typeof e.hash=="string"&&"size"in e&&typeof e.size=="number",Qe=(e,r,t)=>`corpus/${e}/${r}_${t}.txt.gz`;function Qr(e){const r=e.corpus,t=Object.keys(r.collections),n=Object.entries(r.collections);return{_corpus:r,collections:t,languages:r.languages,entries:n,metadata:e.metadata,getCollection:a=>r.collections[a],isCollectionKey:a=>t.some(s=>a===s),isLanguageKey:a=>r.languages.some(s=>a===s)}}const Vr=e=>{const r=v=>u(v).size,t=async(v,w)=>{const[p,f]=await M(v,w);return f?.hash===p.hash?0:p.size},n=async(v=e.collections)=>{try{const w=await o(),p=(await Promise.all(v.flatMap(f=>e.getCollection(f).languages.flatMap(m=>e.getCollection(f).files.map(g=>t(w,Qe(f,m,g))))))).reduce((f,m)=>f+m,0);return w.close(),p}catch{return v.flatMap(w=>e.getCollection(w).languages.flatMap(p=>e.getCollection(w).files.map(f=>r(Qe(w,p,f))))).reduce((w,p)=>w+p,0)}},a=v=>"/poke-corpus/"+v,s=async(v,w,p)=>{const f=a(p),[m,g]=await M(w,p);if(g?.hash===m.hash||!navigator.onLine&&g?.hash!==void 0){const C=await T(v,f);if(C!==void 0)return C}const d=await fetch(f);return await D(v,f,d).then(async C=>{C&&await b(w,p)}),d},l=async(v,w,p)=>{const f=a(p),[m,g]=await M(w,p);return g!==void 0?[await T(v,f),g.hash===m.hash]:[void 0,!1]},c=v=>{const w=a(v);return fetch(w)},h="corpus",i="files",o=()=>{const v=indexedDB.open(h);return new Promise((w,p)=>{v.onupgradeneeded=()=>{v.result.createObjectStore(i),v.transaction!==null&&(v.transaction.oncomplete=()=>{console.log("Created object store")})},v.onsuccess=()=>{w(v.result)},v.onerror=()=>{p(v.error)}})},u=v=>e.metadata[v],y=(v,w)=>{const m=v.transaction([i],"readonly").objectStore(i).get(w);return new Promise((g,d)=>{m.onsuccess=()=>{g(Zr(m.result)?m.result:void 0)},m.onerror=()=>{d(m.error)}})},b=(v,w)=>{const m=v.transaction([i],"readwrite").objectStore(i).put(u(w),w);return new Promise((g,d)=>{m.onsuccess=()=>{g(m.result===w)},m.onerror=()=>{d(m.error)}})},P=(v,w)=>{const m=v.transaction([i],"readwrite").objectStore(i).delete(w);return new Promise((g,d)=>{m.onsuccess=()=>{g(!0)},m.onerror=()=>{d(m.error)}})},M=async(v,w)=>[u(w),await y(v,w)],q=()=>o().then(v=>{const f=v.transaction(["files"],"readwrite").objectStore("files").clear();return v.close(),new Promise((m,g)=>{f.onsuccess=()=>{m(!0)},f.onerror=()=>{g(f.error)}})}),j=()=>o().then(v=>{const f=v.transaction([i],"readonly").objectStore(i).getAllKeys();return v.close(),new Promise((m,g)=>{f.onsuccess=()=>{m(f.result.filter(d=>typeof d=="string"))},f.onerror=()=>{g(f.error)}})}),R="corpus",O=async()=>await caches.open(R),T=async(v,w)=>{try{return await v.match(w)}catch(p){console.error(p);return}},D=async(v,w,p)=>{try{return await v.put(w,p.clone()),!0}catch(f){return console.error(f),!1}};return{corpus:e,getFilePath:Qe,getFileSize:r,getDownloadSizeTotal:n,getFile:s,getFileCacheOnly:l,getFileRemote:c,getIndexedDB:o,deleteLocalMetadata:P,clearLocalMetadata:q,getAllLocalFilePaths:j,getCache:O}};function Hr(e){return Vr(e)}function Kr(e){return new Worker("/poke-corpus/assets/searchWorker-B1wyKC1R.js",{name:e?.name})}function yr(e){try{new RegExp(e,"u")}catch(r){return console.error(r),!1}return!0}function Jr(e){return e.replaceAll("\\\\","󰄀").replaceAll("\\n",`
`).replaceAll("\\r","\r").replaceAll("\\c","\f").replaceAll("󰄀","\\\\")}function Xr(e,r){const t=e.split(/\s+/);if(!r)return s=>t.every(l=>s.includes(l));const n=t.map(s=>s.toLowerCase()),a=t.map(s=>s.toUpperCase());return s=>{const l=s.toLowerCase(),c=s.toUpperCase();return t.every((h,i)=>l.includes(n[i])||c.includes(a[i]))}}function Yr(e,r){if(!r)return a=>a.includes(e);const t=e.toLowerCase(),n=e.toUpperCase();return a=>a.toLowerCase().includes(t)||a.toUpperCase().includes(n)}function _r(e,r){const t=new RegExp(e,r?"sui":"su");return n=>Jr(n).match(t)!==null}const et=e=>({success:!0,postfix:e}),ue=e=>({success:!1,message:e}),rt=e=>e.replaceAll("\\\\","󰄀").replaceAll("\\/","󰄁").replaceAll("\\(","󰄈").replaceAll("\\)","󰄉").replaceAll('\\"',"󰆀"),mr=e=>e.replaceAll("󰄈","(").replaceAll("󰄉",")").replaceAll("󰆀",'"').replaceAll("󰄁","/").replaceAll("󰄀","\\\\"),tt=e=>e.replaceAll("󰄈","\\(").replaceAll("󰄉","\\)").replaceAll("󰆀",'\\"').replaceAll("󰄁","/").replaceAll("󰄀","\\\\");function nt(e){e=rt(e);const r=e.split(/(\b(?:NOT|AND|OR)\b|\\?[/"()])/u).filter(l=>l.length>0),t=[],n=[];let a=!1,s=!1;for(const l of r){const c=l.trim();if(a&&c!=="/"||s&&c!=='"'){n[n.length-1]+=l;continue}switch(c){case"NOT":t.push(c);break;case"AND":case"OR":for(;t[t.length-1]!=="("&&(t[t.length-1]==="NOT"||t[t.length-1]==="AND"&&c==="OR"||c===t[t.length-1]);)n.push(t.pop());t.push(c);break;case"/":if(!a)t.push(c),a=!0,n.push("");else if(t[t.length-1]==="/"){t.pop();const h=n.pop();if(!yr(h))return ue("regex");for(n.push(`/${h}/`),a=!1;t[t.length-1]==="NOT";)n.push(t.pop())}break;case'"':if(!s)t.push(c),s=!0,n.push("");else if(t[t.length-1]==='"')for(t.pop(),n.push(`"${n.pop()}"`),s=!1;t[t.length-1]==="NOT";)n.push(t.pop());break;case"(":t.push(c);break;case")":for(;t[t.length-1]!=="(";){if(t.length===0)return ue("parentheses");n.push(t.pop())}if(t[t.length-1]!=="(")return ue("parentheses");for(t.pop();t[t.length-1]==="NOT";)n.push(t.pop());break;default:c.length>0&&n.push(c)}}for(;t.length>0;){if(t[t.length-1]==="(")return ue("parentheses");if(t[t.length-1]==="/")return ue("slash");if(t[t.length-1]==='"')return ue("quote");n.push(t.pop())}return et(n)}function at(e,r){const t=[];for(const n of r)switch(n){case"NOT":{const a=t.pop();if(a===void 0)return null;t.push(s=>!a(s));break}case"AND":{const a=t.pop(),s=t.pop();if(a===void 0||s===void 0)return null;t.push(l=>s(l)&&a(l));break}case"OR":{const a=t.pop(),s=t.pop();if(a===void 0||s===void 0)return null;t.push(l=>s(l)||a(l));break}default:n.startsWith("/")&&n.endsWith("/")?t.push(_r(tt(n.substring(1,n.length-1)),e)):n.startsWith('"')&&n.endsWith('"')?t.push(Yr(mr(n.substring(1,n.length-1)),e)):t.push(Xr(mr(n),e))}for(;t.length>=2;){const n=t.pop(),a=t.pop();t.push(s=>a(s)&&n(s))}return t.pop()}function st(e,r){const t=nt(e);if(!t.success)return t.message;const n=at(r,t.postfix);return n===null?"operand":n===void 0?"empty":"success"}function ot(e){return/(.*)\bWHERE\s+([0-9A-Za-z-]+)\s*(=|==|<>|!=)\s*([0-9A-Za-z-]+)/u.exec(e)}const br=e=>self.memoryCache?.get(e)?.deref(),it=(e,r)=>self.memoryCache?.set(e,new WeakRef(r)),lt=(e,r,t,n)=>{const a=e.getFilePath(r,t,n);return br(a)!==void 0},zr=async(e,r,t,n)=>{const a=e.getFilePath(r,t,n),s=br(a);if(s)return s;let l;try{if("caches"in self&&"indexedDB"in self&&"databases"in self.indexedDB){const[i,o]=await Promise.all([e.getCache(),e.getIndexedDB()]);l=await e.getFile(i,o,a),o.close()}else l=await e.getFileRemote(a)}catch(i){return console.error(i),""}let c=(await l.blob()).stream();c=c.pipeThrough(new DecompressionStream("gzip"));const h=new Response(c).text();return it(a,h),h};self.onmessage=async e=>{const r=e.data;self.memoryCache??=new Map;const t=r.showAllLanguages||r.languages.includes(dr);let n=.5,a=.5,s=0;const l=(i,o,u,y)=>{const b=o*n+u*a+y*s;postMessage({complete:!1,status:i,progress:b,showId:t})},c=(i,o,u,y,b)=>{const P=o*n+u*a+y*s,M={complete:!1,status:i,progress:P,showId:t,index:b.index,result:b.result};postMessage(M)},h=i=>{postMessage({complete:!0,status:i,progress:1,showId:t})};try{l("loading",0,0,0);const i=Qr(r.serializedCorpus),o=Hr(i);if(r.type==="regex"&&!yr(r.query)){h("regex");return}if(r.type==="boolean"){let g=r;const d=ot(r.query);if(d){const[,E,k,,A]=d;if(!i.isLanguageKey(k)||!i.isLanguageKey(A)){h("boolean.where");return}g={...r,query:E}}const C=st(g.query,g.caseInsensitive);if(C!=="success"&&!(d&&C==="empty")){h(`boolean.${C}`);return}}let u=0,y=0,b=0;const P=[];if(i.entries.forEach(([g,d])=>{if(!r.collections.includes(g)||!r.languages.some(A=>d.languages.includes(A)))return;const C=["common","messages","ui"],E=["script","talk"],k=d.structured&&r.showAllLanguages?d.languages:d.languages.filter(A=>r.languages.includes(A)||A===dr);d.files.forEach(A=>{!r.common&&C.includes(A)||!r.script&&E.includes(A)||(d.structured?(P.push({index:u,params:r,collectionKey:g,fileKey:A,languages:k,speaker:d.speaker,literals:d.literals}),u++):k.forEach(z=>{P.push({index:u,params:r,collectionKey:g,fileKey:A,languages:[z]}),u++}),y+=k.length,b+=k.reduce((z,W)=>z+ +lt(o,g,W,A),0))})}),u===0){h("noMatch");return}b>0&&(n*=(y-b)/y,a*=(1-n)/(a+s),s*=(1-n)/(a+s));let M=0,q=0,j=0;const R=()=>[M/y,q/y,j/u],O=g=>(M++,l("loading",...R()),g),T=()=>{q++,l("processing",...R())},D=g=>{j++,c("collecting",...R(),g)};let v=!1,w=!1;const p=[],f=g=>{if(v)return;const d=g.data;d.status==="processing"?T():d.status==="done"?(D(d),j===u&&(h(w?"network":"done"),p.forEach(C=>{C.terminate()}))):(v=!0,h(d.status),p.forEach(C=>{C.terminate()}))},m=Math.max(1,Math.min(u,(navigator.hardwareConcurrency||4)-2));for(let g=0;g<m;g++){const d=new Kr;d.onmessage=f,d.onerror=()=>{v||(v=!0,h("error"),p.forEach(C=>{C.terminate()}))},p.push(d)}await Promise.all(P.map(async(g,d)=>{const C=g.speaker,E=await Promise.all(g.languages.map(z=>zr(o,g.collectionKey,z,g.fileKey).then(O))),k=C===void 0?void 0:await Promise.all(g.languages.map(z=>zr(o,g.collectionKey,z,C.file)));if((E.some(z=>z==="")||k?.some(z=>z===""))&&(w=!0),v)return;const A={...g,files:E,speakerFiles:k};p[d%p.length].postMessage(A)}))}catch(i){console.error(i),h("error")}}})();
