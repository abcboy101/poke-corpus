import{c as K,u as J,r as y,j as a,a as De,i as ce,B as Oe,b as Ve,d as Be,T as qe,E as be,R as ze}from"./vendor-Du09M3wW.js";import{R as Ue}from"./react-dom-CAJmXjWw.js";import{t as We,a as He,i as Ge,f as Ke,l as Je,c as Ze,b as Qe}from"./i18n-en-7MZRJ-Bu.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function t(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(c){if(c.ep)return;c.ep=!0;const o=t(c);fetch(c.href,o)}})();const Xe="modulepreload",Ye=function(s){return"/poke-corpus/"+s},ve={},D=function(e,t,l){let c=Promise.resolve();if(t&&t.length>0){let u=function(i){return Promise.all(i.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");c=u(t.map(i=>{if(i=Ye(i),i in ve)return;ve[i]=!0;const h=i.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":Xe,h||(g.as="script"),g.crossOrigin="",g.href=i,r&&g.setAttribute("nonce",r),document.head.appendChild(g),h)return new Promise((C,_)=>{g.addEventListener("load",C),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${i}`)))})}))}function o(n){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n}return c.then(n=>{for(const r of n||[])r.status==="rejected"&&o(r.reason);return e().catch(o)})};function et(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:l,onRegistered:c,onRegisteredSW:o,onRegisterError:n}=s;let r,u;const i=async(m=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(r=await D(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/poke-corpus/sw.js",{scope:"/poke-corpus/",type:"classic"})).catch(m=>{n?.(m)}),!r)return;r.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),r.addEventListener("installed",m=>{m.isUpdate||l?.()}),r.register({immediate:e}).then(m=>{o?o("/poke-corpus/sw.js",m):c?.(m)}).catch(m=>{n?.(m)})}}return u=h(),i}const ye=s=>s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");function Y(s){try{return localStorage.getItem(s)}catch{return null}}function te(s,e){try{localStorage.setItem(s,e)}catch{return}}function tt(s){try{localStorage.removeItem(s)}catch{return}}const Ee=["system","light","dark"],Pe=s=>Ee.some(e=>s===e),st=s=>typeof s=="string"&&Pe(s)?s:"system",Ae=()=>st(Y("mode")),me=500,nt=s=>!Number.isNaN(s)&&Number.isInteger(s)&&s>0,ot=()=>{const s=+(Y("corpus-limit")??me);return Number.isNaN(s)?me:s},at=()=>Y("corpus-richText")!=="false",we=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"];function le(s){const e=Math.min(Math.floor((s.toString().length-1)/3),we.length-1),t={style:"unit",unit:we[e],unitDisplay:e===0?"long":"short",minimumFractionDigits:e===0?0:1,maximumFractionDigits:1,maximumSignificantDigits:3,roundingPriority:"lessPrecision"};return{amount:s/Math.pow(1e3,e),formatParams:{amount:t}}}function lt(s,e=1){return{amount:s,formatParams:{amount:{style:"percent",minimumFractionDigits:e,maximumFractionDigits:e}}}}function Re(s){try{return JSON.parse(s)}catch(e){return console.error(e),null}}function ee(s){console.error(s)}const ct=[{code:"en",name:"English (United States)"},{code:"en-GB",name:"English (United Kingdom)"},{code:"ja",name:"日本語"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français (France)"},{code:"fr-CA",name:"Français (Canada)"},{code:"es",name:"Español (España)"},{code:"it",name:"Italiano"},{code:"ko",name:"한국어"},{code:"zh-Hans",name:"简体中文"},{code:"zh-Hant",name:"繁体中文"}];function ae(s){const e=K.c(3),{i18nKey:t,ns:l}=s,{t:c}=J(l);let o;return e[0]!==t||e[1]!==c?(o=c(t),e[0]=t,e[1]=c,e[2]=o):o=e[2],o}function rt(s){const e=K.c(60),{showModal:t,language:l,setLanguage:c,richText:o,richTextRef:n,limit:r,limitRef:u}=s,{t:i}=J(),[h,m]=y.useState(Ae);let g;e[0]!==c||e[1]!==t?(g=d=>{De(d.target.value,b=>{b?.some(dt)?(console.error(b),t({message:a.jsx(ae,{i18nKey:"options.network"}),buttons:[{message:a.jsx(ae,{i18nKey:"options.close"}),autoFocus:!0}]})):c(d.target.value)}).catch(ee)},e[0]=c,e[1]=t,e[2]=g):g=e[2];const C=g;let _;e[3]!==h?(_=d=>{const b=d.target.value;Pe(b)&&(m(b),te("mode",b),document.body.classList.replace(`mode-${h}`,`mode-${b}`))},e[3]=h,e[4]=_):_=e[4];const S=_,k=ut;let R;e[5]!==i?(R=i("options.language"),e[5]=i,e[6]=R):R=e[6];let E;e[7]!==R?(E=a.jsx("label",{htmlFor:"language",children:R}),e[7]=R,e[8]=E):E=e[8];let M;e[9]===Symbol.for("react.memo_cache_sentinel")?(M=ct.map(it),e[9]=M):M=e[9];let f;e[10]!==l||e[11]!==C?(f=a.jsx("select",{name:"language",id:"language",onChange:C,defaultValue:l,autoFocus:!0,translate:"no",children:M}),e[10]=l,e[11]=C,e[12]=f):f=e[12];let x;e[13]!==i?(x=i("options.mode"),e[13]=i,e[14]=x):x=e[14];let v;e[15]!==x?(v=a.jsx("label",{htmlFor:"mode",children:x}),e[15]=x,e[16]=v):v=e[16];let L;e[17]!==i?(L=Ee.map(d=>a.jsx("option",{value:d,children:i(`options.modes.${d}`)},d)),e[17]=i,e[18]=L):L=e[18];let w;e[19]!==h||e[20]!==S||e[21]!==L?(w=a.jsx("select",{name:"mode",id:"mode",onChange:S,defaultValue:h,children:L}),e[19]=h,e[20]=S,e[21]=L,e[22]=w):w=e[22];let P;e[23]!==i?(P=i("options.longURL"),e[23]=i,e[24]=P):P=e[24];let A;e[25]!==P?(A=a.jsx("label",{htmlFor:"longURL",children:P}),e[25]=P,e[26]=A):A=e[26];let F,T;e[27]===Symbol.for("react.memo_cache_sentinel")?(F=Y("corpus-longURL")??"false",T=["true","false"],e[27]=F,e[28]=T):(F=e[27],T=e[28]);let $;e[29]!==i?($=a.jsx("select",{name:"longURL",id:"longURL",onChange:k,defaultValue:F,children:T.map(d=>a.jsx("option",{value:d,children:i(`options.longURLSelect.${d}`)},d))}),e[29]=i,e[30]=$):$=e[30];let j;e[31]!==i?(j=i("options.richText"),e[31]=i,e[32]=j):j=e[32];let N;e[33]!==j?(N=a.jsx("label",{htmlFor:"richText",children:j}),e[33]=j,e[34]=N):N=e[34];const V=o?"true":"false";let U;e[35]===Symbol.for("react.memo_cache_sentinel")?(U=["true","false"],e[35]=U):U=e[35];let p;e[36]!==i?(p=U.map(d=>a.jsx("option",{value:d,children:i(`options.richTextSelect.${d}`)},d)),e[36]=i,e[37]=p):p=e[37];let B;e[38]!==n||e[39]!==V||e[40]!==p?(B=a.jsx("select",{ref:n,name:"richText",id:"richText",defaultValue:V,children:p}),e[38]=n,e[39]=V,e[40]=p,e[41]=B):B=e[41];let O;e[42]!==i?(O=i("options.limit"),e[42]=i,e[43]=O):O=e[43];let W;e[44]!==O?(W=a.jsx("label",{htmlFor:"limit",children:O}),e[44]=O,e[45]=W):W=e[45];let G;e[46]!==r||e[47]!==u?(G=a.jsx("input",{ref:u,type:"number",name:"limit",id:"limit",min:1,defaultValue:r}),e[46]=r,e[47]=u,e[48]=G):G=e[48];let Q;return e[49]!==w||e[50]!==A||e[51]!==$||e[52]!==N||e[53]!==B||e[54]!==W||e[55]!==G||e[56]!==E||e[57]!==f||e[58]!==v?(Q=a.jsx("div",{className:"options",children:a.jsxs("div",{className:"options-grid",children:[E,f,v,w,A,$,N,B,W,G]})}),e[49]=w,e[50]=A,e[51]=$,e[52]=N,e[53]=B,e[54]=W,e[55]=G,e[56]=E,e[57]=f,e[58]=v,e[59]=Q):Q=e[59],Q}function it(s){return a.jsx("option",{value:s.code,lang:s.code,children:s.name},s.code)}function ut(s){const e=s.target.value;(e==="true"||e==="false")&&te("corpus-longURL",e)}function dt(s){return!s.message.includes("Unknown variable dynamic import")}function ht(s){const e=K.c(22),{t}=J(),{showModal:l,setRichText:c,setLimit:o}=s,n=y.useRef(null),r=y.useRef(null);let u;e[0]!==o||e[1]!==c?(u=()=>{if(n.current!==null){const f=n.current.value;(f==="true"||f==="false")&&(te("corpus-richText",f),c(f!=="false"))}if(r.current!==null){const f=r.current.valueAsNumber;nt(f)&&(te("corpus-limit",f.toString()),o(f))}},e[0]=o,e[1]=c,e[2]=u):u=e[2];const i=u;let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=["modal-options"],e[3]=h):h=e[3];let m;e[4]!==s?(m=a.jsx(rt,{...s,richTextRef:n,limitRef:r}),e[4]=s,e[5]=m):m=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=a.jsx(ae,{i18nKey:"options.close"}),e[6]=g):g=e[6];let C;e[7]!==i?(C=[{message:g,callback:i}],e[7]=i,e[8]=C):C=e[8];let _;e[9]!==i||e[10]!==m||e[11]!==C?(_={classes:h,message:m,buttons:C,cancelCallback:i},e[9]=i,e[10]=m,e[11]=C,e[12]=_):_=e[12];const S=_;let k;e[13]!==S||e[14]!==l?(k=()=>{l(S)},e[13]=S,e[14]=l,e[15]=k):k=e[15];let R;e[16]===Symbol.for("react.memo_cache_sentinel")?(R=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#gear"})}),e[16]=R):R=e[16];let E;e[17]!==t?(E=t("options.options"),e[17]=t,e[18]=E):E=e[18];let M;return e[19]!==k||e[20]!==E?(M=a.jsxs("button",{className:"header-options",onClick:k,children:[R,E]}),e[19]=k,e[20]=E,e[21]=M):M=e[21],M}function ft(s){return new Worker("/poke-corpus/assets/searchWorkerManager-Dy84kqIU.js",{name:s?.name})}function mt(s){return new Worker("/poke-corpus/assets/textWorker-DTDzRRxL.js",{name:s?.name})}const gt=["error","regex","noMatch","network","boolean.parentheses","boolean.regex","boolean.slash","boolean.quote","boolean.operand","boolean.empty","boolean.where"],pt=s=>gt.some(e=>s===e),bt=["waiting","loading","processing","collecting"],Me=s=>bt.some(e=>s===e),se=["exact","regex","boolean","all"],xe=s=>se.some(e=>s===e),Ne={id:"",file:"",query:"",type:"all",caseInsensitive:!0,common:!0,script:!0,showAllLanguages:!0,run:!1},xt=s=>({...Ne,collections:s.collections.filter(e=>s.getCollection(e).structured),languages:s.languages}),jt=s=>{function e(d){const b={};return d.id!==void 0&&(b.id=d.id),d.file!==void 0&&(b.file=d.file),d.run!==void 0&&(b.run=d.run.toString()),new URLSearchParams({query:d.query,type:d.type,caseInsensitive:d.caseInsensitive.toString(),common:d.common.toString(),script:d.script.toString(),showAllLanguages:d.showAllLanguages.toString(),collections:d.collections.join(","),languages:d.languages.join(","),...b}).toString()}function t(d){const b=new URLSearchParams(d);return{id:l(b.get("id")),file:l(b.get("file")),query:l(b.get("query")),type:o(b.get("type")??(b.get("regex")==="true"?"regex":null),xe),caseInsensitive:c(b.get("caseInsensitive")),common:c(b.get("common")),script:c(b.get("script")),showAllLanguages:c(b.get("showAllLanguages")),collections:n(b.get("collections"),s.isCollectionKey),languages:n(b.get("languages"),s.isLanguageKey,r),run:c(b.get("run"))}}function l(d){return d??void 0}function c(d){switch(d){case"true":return!0;case"false":return!1}}function o(d,b){if(d!==null&&b(d))return d}function n(d,b,I=q=>q){if(d!==null)return d.split(",").map(I).filter(b)}function r(d){switch(d){case"qid-ZZ":case"ja-JP":case"en-US":case"fr-FR":case"it-IT":case"de-DE":case"es-ES":case"ko-KR":return d.split("-",1)[0];case"ja-Hrkt-JP":return"ja-Hrkt";case"zh-CN":return"zh-Hans";case"zh-TW":return"zh-Hant";default:return d}}const u=s.languages.filter(d=>d!=="en-AU"),i=s.collections,h=i.length^u.length<<4,m=2,g=Math.ceil(u.length/8),C=Math.ceil(i.length/8),_=g+C,S=64,k=Math.ceil(Math.log2(u.length+i.length)),R=m+_,E=d=>btoa(String.fromCodePoint(...d)).replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),M=d=>Uint8Array.from(atob(d.replaceAll("_","/").replaceAll("-","+")),b=>b.charCodeAt(0));function f(d){const b={};d.id!==void 0&&(b.id=d.id),d.file!==void 0&&(b.file=d.file);const I=v(d);return V(I),new URLSearchParams({...b,q:d.query,s:E(I)}).toString()}function x(d){const b=new URLSearchParams(d),I={id:l(b.get("id")),file:l(b.get("file")),query:l(b.get("q"))},q=l(b.get("s"));if(!q)return I;try{const z=M(q).subarray(0,R);return U(z),{...I,...L(z)}}catch{return I}}function v(d){d={...d,languages:d.languages.map(z=>z==="en-AU"?"en-GB":z)};const b=new Uint8Array(R);b[1]=+(d.run??Ne.run)<<0|+d.caseInsensitive<<1|+d.common<<2|+d.script<<3|se.indexOf(d.type)<<4|+!d.showAllLanguages<<7;const I=b.subarray(m);w(d,I),A(I,b.subarray(1,2));let q=b.length;for(;b[q-1]===0&&q>1;)q--;return b.subarray(0,q)}function L(d){const b=new Uint8Array(_);d[1]&S?P(d.subarray(m),b):b.set(d.subarray(m));const I=u.filter((H,Z)=>N(b,Z)),q=i.filter((H,Z)=>N(b,8*g+Z)),z=I.indexOf("en-GB");return z!==-1&&I.splice(z+1,0,"en-AU"),{run:(d[1]&1)!==0,caseInsensitive:(d[1]&2)!==0,common:(d[1]&4)!==0,script:(d[1]&8)!==0,type:se[(d[1]&48)>>4],showAllLanguages:(d[1]&128)===0,languages:I,collections:q}}function w(d,b){u.forEach((I,q)=>{d.languages.includes(I)&&$(b,q)}),i.forEach((I,q)=>{d.collections.includes(I)&&$(b,8*g+q)})}function P(d,b){const I=T(d);u.forEach((q,z)=>{I.next().value&&$(b,z)}),i.forEach((q,z)=>{I.next().value&&$(b,8*g+z)})}function A(d,b){const I=N(d,0),q=F(d,I);let z=d.length;for(;d[z-1]===0;)z--;if(1+q.length*k<8*z){b[0]|=S,d.fill(0),I||$(d,0);let H=1;q.forEach(([Z])=>{for(let X=0;X<k;H++,X++)$(d,H,Z>>X&1)})}}function F(d,b){const I=[[0,b]];return u.forEach((q,z)=>{const H=N(d,z);I[I.length-1][1]===H?I[I.length-1][0]++:I.push([1,H])}),i.forEach((q,z)=>{const H=N(d,8*g+z);I[I.length-1][1]===H?I[I.length-1][0]++:I.push([1,H])}),I.pop(),I}function*T(d){const b=new Uint8Array(_);b.set(d);let I=!N(b,0);for(let q=1;q+k<=b.length*8;){let z=0;for(let H=0;H<k;q++,H++)z|=j(b,q)<<H;if(z===0)break;for(;z>0;)yield I,z--;I=!I}for(;;)yield I}function $(d,b,I=1){d[b>>3]|=I<<(b&7)}function j(d,b){return d[b>>3]>>(b&7)&1}function N(d,b){return j(d,b)===1}function V(d){const b=d[0]=p(d);B(b,d)}function U(d){const b=d[0];if(B(b,d),b!==p(d))throw Error("invalid checksum")}function p(d,b=1){return d.subarray(b).reduce((I,q)=>I+q&255,0)^h&255}function B(d,b,I=1){let q=O(d);for(let z=I;z<b.length;z++)b[z]^=q>>24,q=W(q)}const O=d=>2480367069*d&4294967295,W=d=>2438952949*d+2654435769&4294967295;function G(d){return(Y("corpus-longURL")==="true"?e:f)(d)}function Q(d){const b=new URLSearchParams(d);return(b.get("q")||b.get("s")?x:t)(d)}return{_bytesBase64:R,_searchParamsToQueryString:e,_queryStringToSearchParams:t,_searchParamsToBase64:f,_base64ToSearchParams:x,_serializeByteArray:v,_deserializeByteArray:L,_encryptBytes:V,_decryptBytes:U,searchParamsToHash:G,hashToSearchParams:Q}};function Te(s){return jt(s)}const ne="qid",vt="zxx",yt=s=>s!==null&&typeof s=="object"&&"hash"in s&&typeof s.hash=="string"&&"size"in s&&typeof s.size=="number",wt=s=>{const e=Object.entries(s.corpus.collections);return Object.fromEntries(e.flatMap(([t,l])=>l.languages.flatMap(c=>l.files.map(o=>ie(t,c,o)))).map((t,l)=>[t,{hash:s.hashes[l],size:s.sizes[l]}]))},_t=s=>{const e=s.corpus,t=Object.keys(e.collections),l=Object.entries(e.collections),c=wt(s);return{_corpus:e,collections:t,languages:e.languages,entries:l,metadata:c,getCollection:o=>e.collections[o],isCollectionKey:o=>t.some(n=>o===n),isLanguageKey:o=>e.languages.some(n=>o===n)}},ie=(s,e,t)=>`corpus/${s}/${e}_${t}.txt.gz`;function Ie(s){return{corpus:s._corpus,metadata:s.metadata}}const St=(s,e,t)=>{const l=s[e];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((c,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})};ce.use(Oe).use(Ve).use(Be((s,e)=>St(Object.assign({"./de/collections.json":()=>D(()=>import("./i18n-de-DPXBsnw0.js").then(t=>t.c),[]),"./de/files.json":()=>D(()=>import("./i18n-de-DPXBsnw0.js").then(t=>t.f),[]),"./de/languages.json":()=>D(()=>import("./i18n-de-DPXBsnw0.js").then(t=>t.l),[]),"./de/translation.json":()=>D(()=>import("./i18n-de-DPXBsnw0.js").then(t=>t.t),[]),"./en-GB/translation.json":()=>D(()=>import("./i18n-en-7MZRJ-Bu.js").then(t=>t.m),[]),"./en/collections.json":()=>D(()=>import("./i18n-en-7MZRJ-Bu.js").then(t=>t.e),[]),"./en/files.json":()=>D(()=>import("./i18n-en-7MZRJ-Bu.js").then(t=>t.h),[]),"./en/icons.json":()=>D(()=>import("./i18n-en-7MZRJ-Bu.js").then(t=>t.j),[]),"./en/languages.json":()=>D(()=>import("./i18n-en-7MZRJ-Bu.js").then(t=>t.g),[]),"./en/translation.json":()=>D(()=>import("./i18n-en-7MZRJ-Bu.js").then(t=>t.d),[]),"./en/tutorial.json":()=>D(()=>import("./i18n-en-7MZRJ-Bu.js").then(t=>t.k),[]),"./es/collections.json":()=>D(()=>import("./i18n-es-D3bpF0IX.js").then(t=>t.c),[]),"./es/files.json":()=>D(()=>import("./i18n-es-D3bpF0IX.js").then(t=>t.f),[]),"./es/languages.json":()=>D(()=>import("./i18n-es-D3bpF0IX.js").then(t=>t.l),[]),"./es/translation.json":()=>D(()=>import("./i18n-es-D3bpF0IX.js").then(t=>t.t),[]),"./es/tutorial.json":()=>D(()=>import("./i18n-es-D3bpF0IX.js").then(t=>t.a),[]),"./fr-CA/translation.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.t),[]),"./fr/collections.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.c),[]),"./fr/files.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.f),[]),"./fr/languages.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.l),[]),"./fr/translation.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.a),[]),"./it/collections.json":()=>D(()=>import("./i18n-it-DRYyds-I.js").then(t=>t.c),[]),"./it/files.json":()=>D(()=>import("./i18n-it-DRYyds-I.js").then(t=>t.f),[]),"./it/languages.json":()=>D(()=>import("./i18n-it-DRYyds-I.js").then(t=>t.l),[]),"./it/translation.json":()=>D(()=>import("./i18n-it-DRYyds-I.js").then(t=>t.t),[]),"./ja/collections.json":()=>D(()=>import("./i18n-ja-DZEeUAmS.js").then(t=>t.c),[]),"./ja/files.json":()=>D(()=>import("./i18n-ja-DZEeUAmS.js").then(t=>t.f),[]),"./ja/icons.json":()=>D(()=>import("./i18n-ja-DZEeUAmS.js").then(t=>t.i),[]),"./ja/languages.json":()=>D(()=>import("./i18n-ja-DZEeUAmS.js").then(t=>t.l),[]),"./ja/translation.json":()=>D(()=>import("./i18n-ja-DZEeUAmS.js").then(t=>t.t),[]),"./ja/tutorial.json":()=>D(()=>import("./i18n-ja-DZEeUAmS.js").then(t=>t.a),[]),"./ko/collections.json":()=>D(()=>import("./i18n-ko-DsM4ahrX.js").then(t=>t.c),[]),"./ko/files.json":()=>D(()=>import("./i18n-ko-DsM4ahrX.js").then(t=>t.f),[]),"./ko/languages.json":()=>D(()=>import("./i18n-ko-DsM4ahrX.js").then(t=>t.l),[]),"./ko/translation.json":()=>D(()=>import("./i18n-ko-DsM4ahrX.js").then(t=>t.t),[]),"./zh-Hans/collections.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.c),[]),"./zh-Hans/files.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.f),[]),"./zh-Hans/languages.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.l),[]),"./zh-Hans/translation.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.t),[]),"./zh-Hant/collections.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.a),[]),"./zh-Hant/files.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.b),[]),"./zh-Hant/languages.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.d),[]),"./zh-Hant/translation.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.e),[])}),`./${s}/${e}.json`,3))).init({partialBundledLanguages:!0,fallbackLng:"en",ns:["translation","collections","languages","files","icons","tutorial"],resources:{en:{translation:Qe,collections:Ze,languages:Je,files:Ke,icons:Ge,tutorial:He},"en-GB":{translation:We}},react:{hashTransKey:()=>!1}}).catch(ee);function ge(s,e=4){let t=0;for(let l=0;l<s.length;l++)t+=s.charCodeAt(l)>255?1:.5;return t<=e?void 0:{fontSize:`${e*100/t}%`,scale:`1 ${t/e}`,whiteSpace:"nowrap"}}function kt(s,e){if(e.length===0)return new Set(s.collections);const t=new Set,l=new Set(e);for(const[c,o]of s.entries)o.languages.some(n=>l.has(n))&&t.add(c);return t}function Ct(s,e){if(e.length===0)return new Set(s.languages);const t=new Set;for(const l of e)for(const c of s.getCollection(l).languages)t.add(c);return t}function Lt(s){const e=K.c(38),{corpus:t,language:l,collections:c,languages:o,setCollections:n}=s,{t:r}=J();let u;e[0]!==l?(u=["ja","ko","zh"].some(L=>l.startsWith(L)),e[0]=l,e[1]=u):u=e[1];const i=u;let h,m;if(e[2]!==c||e[3]!==t||e[4]!==i||e[5]!==o||e[6]!==n||e[7]!==r){const L=kt(t,o);h="search-collections";let w;e[10]!==r?(w=P=>[P,r(`collections:${P}.name`),r(`collections:${P}.short`)],e[10]=r,e[11]=w):w=e[11],m=t.collections.map(w).map(P=>{const[A,F,T]=P;return a.jsxs("div",{className:`search-collection search-${L.has(A)?"valid":"invalid"}`,children:[a.jsx("input",{type:"checkbox",name:`collection-${A}`,id:`collection-${A}`,checked:c.includes(A),onChange:$=>{n(j=>$.target.checked?j.concat([A]):j.filter(N=>N!==A))}}),a.jsx("label",{htmlFor:`collection-${A}`,style:i?ge(T):void 0,children:F===T?F:a.jsx("abbr",{title:F,children:a.jsx("span",{translate:"no",children:T})})})]},A)}),e[2]=c,e[3]=t,e[4]=i,e[5]=o,e[6]=n,e[7]=r,e[8]=h,e[9]=m}else h=e[8],m=e[9];let g;e[12]!==h||e[13]!==m?(g=a.jsx("div",{className:h,children:m}),e[12]=h,e[13]=m,e[14]=g):g=e[14];const C=c.length===t.collections.length;let _;e[15]!==t.collections||e[16]!==n?(_=()=>{n(t.collections)},e[15]=t.collections,e[16]=n,e[17]=_):_=e[17];let S;e[18]!==r?(S=r("selectAll"),e[18]=r,e[19]=S):S=e[19];let k;e[20]!==C||e[21]!==_||e[22]!==S?(k=a.jsx("button",{disabled:C,onClick:_,children:S}),e[20]=C,e[21]=_,e[22]=S,e[23]=k):k=e[23];const R=c.length===0;let E;e[24]!==n?(E=()=>{n([])},e[24]=n,e[25]=E):E=e[25];let M;e[26]!==r?(M=r("deselectAll"),e[26]=r,e[27]=M):M=e[27];let f;e[28]!==E||e[29]!==M||e[30]!==R?(f=a.jsx("button",{disabled:R,onClick:E,children:M}),e[28]=E,e[29]=M,e[30]=R,e[31]=f):f=e[31];let x;e[32]!==f||e[33]!==k?(x=a.jsxs("div",{className:"item-group",children:[k,f]}),e[32]=f,e[33]=k,e[34]=x):x=e[34];let v;return e[35]!==x||e[36]!==g?(v=a.jsxs(a.Fragment,{children:[g,x]}),e[35]=x,e[36]=g,e[37]=v):v=e[37],v}function Et(s){const e=K.c(38),{corpus:t,language:l,collections:c,languages:o,setLanguages:n}=s,{t:r}=J();let u;e[0]!==l?(u=["ja","ko","zh"].some(L=>l.startsWith(L)),e[0]=l,e[1]=u):u=e[1];const i=u;let h,m;if(e[2]!==c||e[3]!==t||e[4]!==i||e[5]!==o||e[6]!==n||e[7]!==r){const L=Ct(t,c);h="search-languages";let w;e[10]!==r?(w=P=>{let A=P,F=[P];return P==="en-GB"&&(A="en-ZZ",F=["en-GB","en-AU"]),[A,F,r(`languages:${A}.name`),r(`languages:${A}.code`)]},e[10]=r,e[11]=w):w=e[11],m=t.languages.filter(Pt).map(w).map(P=>{const[A,F,T,$]=P;return a.jsxs("div",{className:`search-language search-${F.some(j=>L.has(j))?"valid":"invalid"}`,children:[a.jsx("input",{type:"checkbox",name:`language-${A}`,id:`language-${A}`,checked:F.some(j=>o.includes(j)),onChange:j=>{n(N=>j.target.checked?N.concat(F):N.filter(V=>!F.includes(V)))}}),a.jsxs("label",{htmlFor:`language-${A}`,children:[a.jsx("span",{className:"search-language-code",children:a.jsx("abbr",{title:T,children:a.jsx("span",{translate:"no",children:$})})}),a.jsx("span",{className:"search-language-name",style:i?ge(T,12):ge(T,15),children:T})]})]},A)}),e[2]=c,e[3]=t,e[4]=i,e[5]=o,e[6]=n,e[7]=r,e[8]=h,e[9]=m}else h=e[8],m=e[9];let g;e[12]!==h||e[13]!==m?(g=a.jsx("div",{className:h,children:m}),e[12]=h,e[13]=m,e[14]=g):g=e[14];const C=o.length===t.languages.length;let _;e[15]!==t.languages||e[16]!==n?(_=()=>{n(t.languages)},e[15]=t.languages,e[16]=n,e[17]=_):_=e[17];let S;e[18]!==r?(S=r("selectAll"),e[18]=r,e[19]=S):S=e[19];let k;e[20]!==C||e[21]!==_||e[22]!==S?(k=a.jsx("button",{disabled:C,onClick:_,children:S}),e[20]=C,e[21]=_,e[22]=S,e[23]=k):k=e[23];const R=o.length===0;let E;e[24]!==n?(E=()=>{n([])},e[24]=n,e[25]=E):E=e[25];let M;e[26]!==r?(M=r("deselectAll"),e[26]=r,e[27]=M):M=e[27];let f;e[28]!==E||e[29]!==M||e[30]!==R?(f=a.jsx("button",{disabled:R,onClick:E,children:M}),e[28]=E,e[29]=M,e[30]=R,e[31]=f):f=e[31];let x;e[32]!==f||e[33]!==k?(x=a.jsxs("div",{className:"item-group",children:[k,f]}),e[32]=f,e[33]=k,e[34]=x):x=e[34];let v;return e[35]!==x||e[36]!==g?(v=a.jsxs(a.Fragment,{children:[g,x]}),e[35]=x,e[36]=g,e[37]=v):v=e[37],v}function Pt(s){return s!=="en-AU"}function At(s){const e=K.c(13),{corpus:t,language:l,filtersVisible:c,collections:o,setCollections:n,languages:r,setLanguages:u}=s,i=y.useRef(null);let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=()=>i.current?.style.setProperty("--search-filters-height",`${i.current.scrollHeight}px`),e[0]=h):h=e[0];const m=h;let g,C;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{if(!CSS.supports("interpolate-size","allow-keywords"))return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},C=[],e[1]=g,e[2]=C):(g=e[1],C=e[2]),y.useEffect(g,C);const _=`search-filters search-filters-${c?"show":"hide"}`;let S;e[3]!==o||e[4]!==t||e[5]!==l||e[6]!==r||e[7]!==n||e[8]!==u?(S=a.jsxs(a.Fragment,{children:[a.jsx(Lt,{corpus:t,language:l,collections:o,languages:r,setCollections:n}),a.jsx("div",{className:"search-filters-divider"}),a.jsx(Et,{corpus:t,language:l,collections:o,languages:r,setLanguages:u})]}),e[3]=o,e[4]=t,e[5]=l,e[6]=r,e[7]=n,e[8]=u,e[9]=S):S=e[9];let k;return e[10]!==_||e[11]!==S?(k=a.jsx("div",{ref:i,className:_,children:S}),e[10]=_,e[11]=S,e[12]=k):k=e[12],k}const _e=s=>Array.isArray(s)&&s.every(e=>typeof e=="string"),Rt=(s,e)=>{const t=s.languages.filter(n=>n.startsWith(e.split("-")[0])),l={...xt(s),languages:t.length===0?s.languages.filter(n=>n.startsWith("en")):t},c=Y("corpus-params");if(c===null)return l;const o=Re(c);return typeof o=="object"&&o!==null&&("query"in o&&typeof o.query=="string"&&(l.query=o.query),"type"in o&&xe(o.type)&&(l.type=o.type),"caseInsensitive"in o&&typeof o.caseInsensitive=="boolean"&&(l.caseInsensitive=o.caseInsensitive),"common"in o&&typeof o.common=="boolean"&&(l.common=o.common),"script"in o&&typeof o.script=="boolean"&&(l.script=o.script),"showAllLanguages"in o&&typeof o.showAllLanguages=="boolean"&&(l.showAllLanguages=o.showAllLanguages),"collections"in o&&_e(o.collections)&&o.collections.every(n=>s.isCollectionKey(n))&&(l.collections=o.collections),"languages"in o&&_e(o.languages)&&o.languages.every(n=>s.isLanguageKey(n))&&(l.languages=o.languages)),l},Mt=[se[3],se[0],se[1],se[2]];function Nt({corpus:s,language:e,waiting:t,inProgress:l,postToWorker:c,terminateWorker:o}){const{t:n}=J(),r=y.useMemo(()=>Rt(s,e),[s,e]),[u,i]=y.useState(r.query),[h,m]=y.useState(r.type),[g,C]=y.useState(r.caseInsensitive),[_,S]=y.useState(r.common),[k,R]=y.useState(r.script),[E,M]=y.useState(r.showAllLanguages),[f,x]=y.useState(r.collections),[v,L]=y.useState(r.languages),[w,P]=y.useState((Y("corpus-filtersVisible")??(window.location.hash?"false":"true"))!=="false"),A=y.useMemo(()=>Te(s),[s]),F=y.useCallback(()=>{const p=A.hashToSearchParams(window.location.hash.substring(1));if(p.query!==void 0&&i(p.query),p.type!==void 0&&m(p.type),p.caseInsensitive!==void 0&&C(p.caseInsensitive),p.common!==void 0&&S(p.common),p.script!==void 0&&R(p.script),p.showAllLanguages!==void 0&&M(p.showAllLanguages),p.collections!==void 0&&x(p.collections),p.languages!==void 0&&L(p.languages),p.id!==void 0&&p.id!==""){const B=p.id.split(".")[0];c({query:`^${ye(p.id)}$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(O=>s.getCollection(O).id===B),languages:[ne]});return}if(p.file!==void 0&&p.file!==""){const B=p.file.split(".")[0];c({query:`^${ye(p.file)}\\..*$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(O=>s.getCollection(O).id===B),languages:[ne]});return}if(p.run!==void 0&&p.run){const B={query:p.query??r.query,type:p.type??r.type,caseInsensitive:p.caseInsensitive??r.caseInsensitive,common:p.common??r.common,script:p.script??r.script,showAllLanguages:p.showAllLanguages??r.showAllLanguages,collections:p.collections??r.collections,languages:p.languages??r.languages};window.location.hash=A.searchParamsToHash(B),c(B);return}Y("corpus-filtersVisible")===null&&P(!p.query||!p.collections||!p.languages)},[c,r]);y.useEffect(()=>{window.location.hash&&F()},[]),y.useEffect(()=>(window.addEventListener("hashchange",F),()=>{window.removeEventListener("hashchange",F)}),[F]),y.useEffect(()=>{te("corpus-params",JSON.stringify({query:u,type:h,caseInsensitive:g,common:_,script:k,showAllLanguages:E,collections:f,languages:v}))},[u,h,g,_,k,E,f,v]);const T=p=>{p.preventDefault(),Y("corpus-filtersVisible")||te("corpus-filtersVisible",w.toString());const B=document.getElementsByClassName("view-search").item(0);B&&B.scrollHeight>document.body.clientHeight&&P(!1);const O={query:u,type:h,caseInsensitive:g,common:_,script:k,showAllLanguages:E,collections:f,languages:v};window.location.hash=A.searchParamsToHash(O),c(O)},$=()=>{o()},j=()=>{const p=!w;P(p),te("corpus-filtersVisible",p.toString())},N=p=>{const B=p.target.value;xe(B)&&m(B)},V=t||l||u.length===0||f.length===0||v.length===0,U=y.useMemo(()=>a.jsx(At,{corpus:s,language:e,filtersVisible:w,collections:f,setCollections:x,languages:v,setLanguages:L}),[e,w,f,v]);return a.jsxs("form",{className:"search-form",role:"search",onSubmit:T,children:[a.jsxs("div",{className:"search-bar",children:[a.jsxs("div",{className:"item-group",children:[a.jsx("label",{htmlFor:"query",children:n("query")}),a.jsx("input",{type:"search",name:"query",id:"query",value:u,onChange:p=>{i(p.target.value)}}),a.jsxs("div",{className:"btn-alternate-container",children:[a.jsx("input",{id:"submit",type:"submit",className:l?"invisible":"visible",value:n("search"),disabled:V}),a.jsx("button",{type:"button",className:l?"visible":"invisible",onClick:$,disabled:!l,children:n("cancel")})]}),a.jsx("button",{id:"filters",type:"button",className:w?"active":void 0,onClick:j,children:n("filters")}),a.jsx("select",{name:"type",id:"type",onChange:N,value:h,title:n("searchType.searchType"),"aria-label":n("searchType.searchType"),children:Mt.map(p=>a.jsx("option",{value:p,children:n(`searchType.${p}`)},p))})]}),a.jsxs("div",{className:"item-group search-option-group",children:[a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"caseInsensitive",id:"caseInsensitive",checked:g,onChange:p=>{C(p.target.checked)}}),a.jsx("label",{htmlFor:"caseInsensitive",children:n("caseInsensitive")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"common",id:"common",checked:_,onChange:p=>{S(p.target.checked)}}),a.jsx("label",{htmlFor:"common",children:n("common")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"script",id:"script",checked:k,onChange:p=>{R(p.target.checked)}}),a.jsx("label",{htmlFor:"script",children:n("script")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"showAllLanguages",id:"showAllLanguages",checked:E,onChange:p=>{M(p.target.checked)}}),a.jsx("label",{htmlFor:"showAllLanguages",children:n("showAllLanguages")})]})]})]}),U]})}function Tt(s){const e=K.c(10),{src:t,active:l}=s,c=l===void 0?!0:l,o=y.useRef(null);let n,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{o.current?.classList.add("spinner-stopped")},r=[],e[0]=n,e[1]=r):(n=e[0],r=e[1]),y.useEffect(n,r);let u,i;e[2]!==c?(u=()=>{const _=o.current;if(_!==null){const S=()=>{c||_.classList.add("spinner-stopped")};return _.addEventListener("animationiteration",S),()=>{_.removeEventListener("animationiteration",S)}}},i=[c],e[2]=c,e[3]=u,e[4]=i):(u=e[3],i=e[4]),y.useEffect(u,i);const h=c?"spinner-active":"spinner-inactive";let m;e[5]!==h?(m=["spinner",h],e[5]=h,e[6]=m):m=e[6];const g=m.join(" ");let C;return e[7]!==t||e[8]!==g?(C=a.jsx("img",{ref:o,className:g,src:t,alt:""}),e[7]=t,e[8]=g,e[9]=C):C=e[9],C}function $e(s){const e=K.c(16),{progress:t}=s,{t:l}=J(),c=Math.min(Math.max(0,t*100),100);let o;e[0]!==l?(o=l("progressBar.title"),e[0]=l,e[1]=o):o=e[1];const n=`${c}%`,r=c===0?0:void 0,u=c===0?"hidden":void 0;let i;e[2]!==n||e[3]!==r||e[4]!==u?(i=a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-bar-complete",style:{width:n,maxWidth:r,visibility:u}})}),e[2]=n,e[3]=r,e[4]=u,e[5]=i):i=e[5];let h;e[6]!==t||e[7]!==l?(h=l("progressBar.value",lt(t)),e[6]=t,e[7]=l,e[8]=h):h=e[8];let m;e[9]!==h?(m=a.jsx("div",{className:"progress-bar-text",children:h}),e[9]=h,e[10]=m):m=e[10];let g;return e[11]!==c||e[12]!==o||e[13]!==i||e[14]!==m?(g=a.jsxs("div",{className:"progress-bar-container",role:"progressbar","aria-label":o,"aria-valuenow":c,children:[i,m]}),e[11]=c,e[12]=o,e[13]=i,e[14]=m,e[15]=g):g=e[15],g}const It=s=>{if("share"in navigator){const e=s.currentTarget.href;s.preventDefault(),navigator.share({url:e}).catch(t=>{t instanceof Error&&t.name!=="AbortError"||(console.error(t),window.open(e,"_blank"))})}};function $t(s){const e=K.c(6),{hash:t}=s,{t:l}=J();let c;e[0]!==l?(c=l("share"),e[0]=l,e[1]=c):c=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#share"})}),e[2]=o):o=e[2];let n;return e[3]!==t||e[4]!==c?(n=a.jsx("a",{href:t,rel:"bookmark noreferrer",target:"_blank",title:c,onClick:It,children:o}),e[3]=t,e[4]=c,e[5]=n):n=e[5],n}function Ft(s){const e=K.c(7),{hash:t,callback:l}=s,{t:c}=J();let o;e[0]!==c?(o=c("viewNearby"),e[0]=c,e[1]=o):o=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#file-lines"})}),e[2]=n):n=e[2];let r;return e[3]!==l||e[4]!==t||e[5]!==o?(r=a.jsx("a",{href:t,rel:"bookmark noreferrer",title:o,onClick:l,children:n}),e[3]=l,e[4]=t,e[5]=o,e[6]=r):r=e[6],r}function Dt(s){const e=K.c(6),{callback:t}=s,{t:l}=J();let c;e[0]!==l?(c=l("copy"),e[0]=l,e[1]=c):c=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#copy"})}),e[2]=o):o=e[2];let n;return e[3]!==t||e[4]!==c?(n=a.jsx("button",{className:"link",title:c,onClick:t,children:o}),e[3]=t,e[4]=c,e[5]=n):n=e[5],n}function Ot(s,e,t,l,c){return s.replaceAll(/<a class="speaker" data-var="(.+?)">(.+?)<\/a>/gu,(o,n,r)=>`<a class="speaker" href="#${e.searchParamsToHash({query:n,type:"exact",caseInsensitive:!1,common:!1,script:!0,showAllLanguages:!1,collections:[t],languages:[l],run:!0})}" title="${c}" translate="yes"><span translate="no">${r}</span></a>`)}const Vt=(s,e)=>e===ne?s.replaceAll(/([._/]|([a-z])(?=[A-Z])|([A-Za-z])(?=[0-9]))/gu,"$1<wbr>"):s;function Bt(){const s=K.c(4),{t:e}=J();let t;s[0]!==e?(t=e("status.rendering"),s[0]=e,s[1]=t):t=s[1];let l;return s[2]!==t?(l=a.jsx("div",{className:"results-rendering",children:t}),s[2]=t,s[3]=l):l=s[3],l}function qt(s){const e=K.c(7),{id:t}=s,l=`#id=${t}`;let c;e[0]!==l?(c=a.jsx($t,{hash:l}),e[0]=l,e[1]=c):c=e[1];const o=`#file=${t.split(".").slice(0,-1).join(".")}`;let n;e[2]!==o?(n=a.jsx(Ft,{hash:o}),e[2]=o,e[3]=n):n=e[3];let r;return e[4]!==c||e[5]!==n?(r=a.jsx("td",{className:"results-table-actions-cell",translate:"yes",children:a.jsxs("div",{className:"results-table-actions",children:[c,n]})},"actions"),e[4]=c,e[5]=n,e[6]=r):r=e[6],r}function zt(s){const e=K.c(49),{corpus:t,index:l,collection:c,file:o,languages:n,lines:r,start:u,end:i,showId:h,richText:m,sectionOffset:g,onShowSection:C,searchParamsFactory:_}=s,{t:S}=J();let k;e[0]!==n?(k=n.indexOf(ne),e[0]=n,e[1]=k):k=e[1];const R=k,E=n.map(Wt),M=S("viewSpeaker"),f=t.getCollection(c).speaker!==void 0,x=E.map(Ut),v=x.every(H=>H===x[0]),L=y.useRef(null);let w;e[2]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{const H=L.current,Z=window.getSelection();Z!==null&&H!==null&&(Z.removeAllRanges(),Z.selectAllChildren(H),document.execCommand("copy"),Z.removeAllRanges())},e[2]=w):w=e[2];const P=w,A=`collection-${t.getCollection(c).id??c.toLowerCase()}`,F=`file-${o}`,T=`rich-text-${m?"enabled":"disabled"}`;let $;e[3]!==c||e[4]!==t||e[5]!==A||e[6]!==F||e[7]!==T?($=["results-table",A,F,T],t.getCollection(c).softWrap===!0&&$.push("soft"),e[3]=c,e[4]=t,e[5]=A,e[6]=F,e[7]=T,e[8]=$):$=e[8];const j="results-table-container",N=$.join(" ");let V;e[9]!==R?(V=R!==-1&&a.jsx("th",{className:"results-table-actions-cell",children:a.jsx(Dt,{callback:P})}),e[9]=R,e[10]=V):V=e[10];let U;if(e[11]!==n||e[12]!==h||e[13]!==S){let H;e[15]!==h?(H=X=>h||X!==ne,e[15]=h,e[16]=H):H=e[16];let Z;e[17]!==S?(Z=X=>a.jsx("th",{children:a.jsx("abbr",{title:S(`languages:${X}.name`),children:a.jsx("span",{translate:"no",children:S(`languages:${X}.code`)})})},X),e[17]=S,e[18]=Z):Z=e[18],U=n.filter(H).map(Z),e[11]=n,e[12]=h,e[13]=S,e[14]=U}else U=e[14];let p;e[19]!==V||e[20]!==U?(p=a.jsx("thead",{children:a.jsxs("tr",{children:[V,U]})}),e[19]=V,e[20]=U,e[21]=p):p=e[21];let B;e[22]!==x||e[23]!==v?(B=v&&x[0]!==ce.dir()?x[0]:void 0,e[22]=x,e[23]=v,e[24]=B):B=e[24];const O="no",W=r.map((H,Z)=>u<=Z&&Z<i&&a.jsxs("tr",{"data-id":R!==-1?H[R]:void 0,children:[R!==-1&&a.jsx(qt,{id:H[R]}),H.map((X,oe)=>{if(h||n[oe]!==ne)return a.jsx("td",{lang:E[oe],dir:v?void 0:x[oe],dangerouslySetInnerHTML:{__html:Vt(f?Ot(X,_,c,n[oe],M):X,n[oe])}},oe)})]},Z));let G;e[25]!==B||e[26]!==W?(G=a.jsx("tbody",{dir:B,translate:O,children:W}),e[25]=B,e[26]=W,e[27]=G):G=e[27];let Q;e[28]!==p||e[29]!==G||e[30]!==N?(Q=a.jsx("div",{className:j,children:a.jsxs("table",{ref:L,className:N,children:[p,G]})}),e[28]=p,e[29]=G,e[30]=N,e[31]=Q):Q=e[31];const d=Q;let b;e[32]!==l||e[33]!==C||e[34]!==g||e[35]!==u||e[36]!==S?(b=u!==0&&a.jsx("button",{className:"results-notice",onClick:C(g,l),children:S("tablePartial",{count:u})}),e[32]=l,e[33]=C,e[34]=g,e[35]=u,e[36]=S,e[37]=b):b=e[37];const I=u!==i&&d;let q;e[38]!==i||e[39]!==l||e[40]!==r.length||e[41]!==C||e[42]!==g||e[43]!==S?(q=i<r.length&&a.jsx("button",{className:"results-notice",onClick:C(g+i,l),children:S("tablePartial",{count:r.length-i})}),e[38]=i,e[39]=l,e[40]=r.length,e[41]=C,e[42]=g,e[43]=S,e[44]=q):q=e[44];let z;return e[45]!==b||e[46]!==I||e[47]!==q?(z=a.jsxs(a.Fragment,{children:[b,I,q]}),e[45]=b,e[46]=I,e[47]=q,e[48]=z):z=e[48],z}function Ut(s){return ce.dir(s)}function Wt(s){return s===ne?vt:s}function Ht(s){const{index:e,status:t,header:l,offset:c,limit:o,lines:n,sectionOffset:r,richText:u}=s,i=Math.max(0,Math.min(n.length,c-r)),h=Math.max(0,Math.min(n.length,c+o-r)),m=y.useMemo(()=>{switch(t){case"noLines":return;case"worker":return a.jsx(Bt,{});case"done":return a.jsx(zt,{...s,start:i,end:h})}},[t,i,h,u]);return m&&a.jsxs("section",{id:`results-section${e}`,className:"results-section",children:[l&&a.jsx("h2",{children:l}),m]})}function Gt({results:s,headers:e,jumpTo:t,...l}){const c=y.useMemo(()=>Te(l.corpus),[l.corpus]),o=y.useMemo(()=>{let n=0;const r=[];for(const[u,i]of s.entries()){if(i.status==="initial")break;const h=i.status==="done"&&i.richText;r.push({...l,...i.params,index:u,sectionOffset:n,richText:h,status:i.status,header:e[u],searchParamsFactory:c}),n+=i.params.lines.length}return r},[s,l]);return y.useEffect(()=>{let n=0;for(const[r,u]of s.entries())if(u.status!=="initial"){if(l.offset>=n&&l.offset<n+u.params.lines.length){t(r);break}n+=u.params.lines.length}},[l.offset]),a.jsx("div",{className:"app-window-inner",children:o.map(n=>a.jsx(Ht,{...n},n.index))})}function ue(s){const e=document.getElementById("results"),t=document.getElementById(`results-section${s}`),l=e?.firstElementChild;e&&t&&l instanceof HTMLElement&&(e.scrollTop=t.offsetTop-l.offsetTop)}function Kt(s){const e=K.c(9),{headers:t}=s,{t:l}=J();let c;e[0]!==l?(c=l("jumpTo"),e[0]=l,e[1]=c):c=e[1];let o;e[2]!==c?(o=a.jsx("option",{value:"",disabled:!0,children:c}),e[2]=c,e[3]=o):o=e[3];let n;e[4]!==t?(n=t.map((u,i)=>u!==void 0&&(i===0||t[i-1]!==u)&&a.jsx("option",{value:i,children:u},i)),e[4]=t,e[5]=n):n=e[5];let r;return e[6]!==o||e[7]!==n?(r=a.jsx("nav",{className:"results-jump",children:a.jsxs("select",{name:"jump",id:"jump",onChange:Jt,value:"",children:[o,n]})}),e[6]=o,e[7]=n,e[8]=r):r=e[8],r}function Jt(s){ue(Number(s.target.value))}function Zt(s){const e=K.c(50),{count:t,offset:l,limit:c,setOffset:o}=s,{t:n}=J(),r=l+1,u=Math.min(t,l+c);let i;e[0]!==t||e[1]!==n||e[2]!==r||e[3]!==u?(i=n("displayedRange.long",{count:t,start:r,end:u}),e[0]=t,e[1]=n,e[2]=r,e[3]=u,e[4]=i):i=e[4];let h;e[5]!==i?(h=a.jsx("span",{className:"results-nav-range-long",children:i}),e[5]=i,e[6]=h):h=e[6];const m=l+1,g=Math.min(t,l+c);let C;e[7]!==t||e[8]!==n||e[9]!==m||e[10]!==g?(C=n("displayedRange.short",{count:t,start:m,end:g}),e[7]=t,e[8]=n,e[9]=m,e[10]=g,e[11]=C):C=e[11];let _;e[12]!==C?(_=a.jsx("span",{className:"results-nav-range-short",children:C}),e[12]=C,e[13]=_):_=e[13];let S;e[14]!==h||e[15]!==_?(S=a.jsxs("div",{children:[h,_]}),e[14]=h,e[15]=_,e[16]=S):S=e[16];const k=l===0;let R;e[17]!==c||e[18]!==l||e[19]!==o?(R=()=>{o(Math.max(0,l-c))},e[17]=c,e[18]=l,e[19]=o,e[20]=R):R=e[20];let E;e[21]!==n?(E=n("loadPrev"),e[21]=n,e[22]=E):E=e[22];let M;e[23]!==c||e[24]!==n?(M=n("icons:loadPrev",{limit:c}),e[23]=c,e[24]=n,e[25]=M):M=e[25];let f;e[26]!==k||e[27]!==R||e[28]!==E||e[29]!==M?(f=a.jsx("button",{className:"button-square",disabled:k,onClick:R,title:E,children:M}),e[26]=k,e[27]=R,e[28]=E,e[29]=M,e[30]=f):f=e[30];const x=l+c>=t;let v;e[31]!==t||e[32]!==c||e[33]!==l||e[34]!==o?(v=()=>{o(Math.min(Math.floor(t/c)*c,l+c))},e[31]=t,e[32]=c,e[33]=l,e[34]=o,e[35]=v):v=e[35];let L;e[36]!==n?(L=n("loadNext"),e[36]=n,e[37]=L):L=e[37];let w;e[38]!==c||e[39]!==n?(w=n("icons:loadNext",{limit:c}),e[38]=c,e[39]=n,e[40]=w):w=e[40];let P;e[41]!==x||e[42]!==v||e[43]!==L||e[44]!==w?(P=a.jsx("button",{className:"button-square",disabled:x,onClick:v,title:L,children:w}),e[41]=x,e[42]=v,e[43]=L,e[44]=w,e[45]=P):P=e[45];let A;return e[46]!==f||e[47]!==P||e[48]!==S?(A=a.jsxs("div",{className:"results-nav",children:[S,f,P]}),e[46]=f,e[47]=P,e[48]=S,e[49]=A):A=e[49],A}const Se={showVariables:0,showAllCharacters:!1,showGender:2,showPlural:0,showGrammar:!0,showFurigana:!0},Qt=()=>{const s=Y("corpus-toggle");if(s===null)return Se;const e={...Se},t=Re(s);return typeof t=="object"&&t!==null&&("showVariables"in t&&typeof t.showVariables=="number"&&[0,1,2].includes(t.showVariables)&&(e.showVariables=t.showVariables),"showAllCharacters"in t&&typeof t.showAllCharacters=="boolean"&&(e.showAllCharacters=t.showAllCharacters),"showGender"in t&&typeof t.showGender=="number"&&[0,1,2].includes(t.showGender)&&(e.showGender=t.showGender),"showPlural"in t&&typeof t.showPlural=="number"&&[0,1,2].includes(t.showPlural)&&(e.showPlural=t.showPlural),"showGrammar"in t&&typeof t.showGrammar=="boolean"&&(e.showGrammar=t.showGrammar),"showFurigana"in t&&typeof t.showFurigana=="boolean"&&(e.showFurigana=t.showFurigana)),e};function Xt({corpus:s,language:e,status:t,progress:l,results:c,showId:o=!0,richText:n=!0,limit:r=me}){const{t:u}=J(),i=y.useMemo(Qt,[]),[h,m]=y.useState(i.showVariables),[g,C]=y.useState(i.showAllCharacters),[_,S]=y.useState(i.showGender),[k,R]=y.useState(i.showPlural),[E,M]=y.useState(i.showGrammar),[f,x]=y.useState(i.showFurigana),[v,L]=y.useState(null),[w,P]=y.useState(0);y.useEffect(()=>{te("corpus-toggle",JSON.stringify({showVariables:h,showAllCharacters:g,showGender:_,showPlural:k,showGrammar:E,showFurigana:f}))},[h,g,_,k,E,f]);const A=y.useCallback((p,B)=>()=>{P(p),ue(B)},[]),F=y.useMemo(()=>{const p=[];let B="";for(const O of c){if(O.status==="initial"||O.status==="noLines"){p.push(void 0);continue}const{collection:W,file:G}=O.params,Q=u("tableHeader",{collection:u(`collections:${W}.name`),file:u(`files:${G}`),interpolation:{escapeValue:!1}});p.push(Q===B?void 0:Q),B=Q}return p},[c,e]),T=y.useMemo(()=>c.reduce((p,B)=>p+(B.status==="initial"?0:B.params.lines.length),0),[c]);T<w&&P(p=>Math.min(p,T));const $=a.jsxs("div",{className:"results-toggle",children:[a.jsx("button",{className:h!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{m((h+1)%3)},title:u("showVariables"),children:a.jsx("span",{translate:"no",children:u("icons:showVariables",{context:h})})}),a.jsx("button",{className:g?"button-square active":"button-square",disabled:!n,onClick:()=>{C(!g)},title:u("showAllCharacters"),children:a.jsx("span",{translate:"no",children:u("icons:showAllCharacters")})}),a.jsx("button",{className:_!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{S((_+1)%3)},title:u("showGender"),children:a.jsx("span",{translate:"no",children:u("icons:showGender",{context:_})})}),a.jsx("button",{className:k!==0?"button-square active":"button-square",disabled:!n,onClick:()=>{R((k+1)%3)},title:u("showPlural"),children:a.jsx("span",{translate:"no",children:u("icons:showPlural",{context:k})})}),a.jsx("button",{className:E?"button-square active":"button-square",disabled:!n,onClick:()=>{M(!E)},title:u("showGrammar"),children:a.jsx("span",{translate:"no",children:u("icons:showGrammar")})}),a.jsx("button",{className:f?"button-square active":"button-square",disabled:!n,onClick:()=>{x(!f)},title:u("showFurigana"),children:a.jsx("span",{className:"results-toggle-furigana",translate:"no",children:u("icons:showFurigana")})})]});y.useEffect(()=>{y.startTransition(()=>{L(a.jsx(Gt,{corpus:s,results:c,headers:F,showId:o,offset:w,limit:r,onShowSection:A,jumpTo:ue}))})},[s,c,F,o,w,r,A,ue]);const j=Me(t),N=u(`status.${t.split(".",1)[0]}`),V=y.useMemo(()=>!j&&F.filter(p=>p!==void 0).length>1?a.jsx(Kt,{headers:F}):a.jsx("div",{className:"results-status-text",children:N}),[j,F,N]),U=`app-window variables-${["short","show","hide"][h]} control-${g?"show":"hide"} gender-${_} number-${k} grammar-${E?"show":"hide"} furigana-${f?"show":"hide"}`;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"results-status",children:[V,a.jsx(Tt,{src:"logo.svg",active:j}),!j&&T>r?a.jsx(Zt,{count:T,offset:w,limit:r,setOffset:P}):a.jsx($e,{progress:l}),$]}),a.jsx("main",{id:"results",className:U,children:v})]})}const Yt={status:"initial"},ke="corpus-warn",es=2e7;function ts({loader:s,showModal:e,language:t,richText:l,limit:c}){const{t:o}=J(),n=y.useRef(null),r=y.useRef(null),u=y.useRef([]),i=y.useRef(l),h=y.useRef(Y(ke)!=="false"),[m,g]=y.useState("initial"),[C,_]=y.useState(0),[S,k]=y.useState(!0),[R,E]=y.useState([]);y.useEffect(()=>{i.current=l;for(const{index:j,params:N}of u.current)x(j,N)},[l]);const M=(j,N)=>{E(V=>{const U=Array().concat(V);for(let p=U.length;p<j;p++)U[p]=Yt;return U[j]=N,U})},f=j=>{M(j.data.index,{status:"done",params:j.data,richText:j.data.richText}),j.data.error&&e({message:o("statusModal.error"),buttons:[{message:o("statusModal.buttons.ok"),autoFocus:!0}]})},x=(j,N)=>{r.current===null&&(console.log("Creating new TextWorker..."),r.current=new mt,r.current.addEventListener("message",f)),r.current.postMessage({...N,index:j,richText:i.current,corpusLiterals:s.corpus.getCollection(N.collection).literals})},v=j=>{if(g(j.data.status),_(j.data.progress),k(j.data.showId),"index"in j.data&&"result"in j.data){const{index:N,result:V}=j.data;j.data.result.lines.length===0?M(N,{status:"noLines",params:V}):(u.current.push({index:N,params:V}),M(N,{status:"worker",params:V}),x(N,V))}j.data.complete&&pt(j.data.status)&&e({message:o(`statusModal.${j.data.status}`),buttons:[{message:o("statusModal.buttons.ok"),autoFocus:!0}]})},L=y.useCallback(()=>{console.log("Terminating workers!"),n.current!==null&&(n.current.removeEventListener("message",v),n.current.terminate(),n.current=null),r.current!==null&&(r.current.removeEventListener("message",v),r.current.terminate(),r.current=null),g("initial"),_(0),E([]),u.current=[]},[]),w=j=>{E([]),u.current=[],j.query.length>0&&j.collections.length>0&&j.languages.length>0&&(n.current===null&&(console.log("Creating new SearchWorkerManager..."),n.current=new ft,n.current.addEventListener("message",v)),g("waiting"),_(0),n.current.postMessage({...j,serializedCorpus:Ie(s.corpus)}))},P=y.useCallback(j=>{if(!h.current){w(j);return}s.getDownloadSizeTotal(j.collections,j.showAllLanguages?void 0:j.languages).then(N=>{if(N<=es){w(j);return}e({message:o("searchModal.message",le(N)),checkbox:{message:o("searchModal.checkboxDoNotShowAgain"),checked:!1},buttons:[{message:o("searchModal.buttons.yes"),callback:()=>{w(j)},checkboxCallback:V=>{h.current=!V,te(ke,(!V).toString())}},{message:o("searchModal.buttons.no"),callback:()=>{g("initial")},autoFocus:!0}],cancelCallback:()=>{g("initial")}})}).catch(ee)},[s.getDownloadSizeTotal]),A=Me(m),F=m==="waiting",T=y.useMemo(()=>a.jsx(Nt,{corpus:s.corpus,language:t,inProgress:A,waiting:F,postToWorker:P,terminateWorker:L}),[s.corpus,t,A,F,P,L]),$=y.useMemo(()=>a.jsx(Xt,{corpus:s.corpus,language:t,status:m,progress:C,showId:S,richText:l,results:R,limit:c}),[s.corpus,t,m,C,S,l,R,c]);return a.jsxs("div",{className:"search",children:[T,$]})}function ss(s){return new Worker("/poke-corpus/assets/cacheManagerWorker-CLSMdnkw.js",{name:s?.name})}function ns(s){const e=K.c(6),{callback:t}=s,{t:l}=J();let c;e[0]!==l?(c=l("delete"),e[0]=l,e[1]=c):c=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#trash-can"})}),e[2]=o):o=e[2];let n;return e[3]!==t||e[4]!==c?(n=a.jsx("button",{className:"link",title:c,onClick:t,children:o}),e[3]=t,e[4]=c,e[5]=n):n=e[5],n}function os(s){const e=K.c(6),{callback:t}=s,{t:l}=J();let c;e[0]!==l?(c=l("refresh"),e[0]=l,e[1]=c):c=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#arrows-rotate"})}),e[2]=o):o=e[2];let n;return e[3]!==t||e[4]!==c?(n=a.jsx("button",{className:"link",title:c,onClick:t,children:o}),e[3]=t,e[4]=c,e[5]=n):n=e[5],n}function as({cacheStorageEnabled:s,cachedMetadata:e}){const{t}=J(),l=y.useMemo(()=>le(e.reduce((c,[,o])=>c+o,0)),[e]);return a.jsxs("ul",{children:[a.jsx("li",{children:t("cache.storageStatus",{val:t(s?"cache.storageEnabled":"cache.storageDisabled")})}),s&&a.jsx("li",{children:t("cache.filesStored",{count:e.length})}),s&&a.jsx("li",{children:t("cache.storageUsed",l)})]})}function ls(s){const e=K.c(9),{loadedBytes:t,totalBytes:l,progress:c}=s,{t:o}=J();let n;e[0]!==t||e[1]!==o||e[2]!==l?(n=o("cache.loading",{message:o("cache.inProgress"),loaded:o("cache.size",le(t)),total:o("cache.size",le(l))}),e[0]=t,e[1]=o,e[2]=l,e[3]=n):n=e[3];let r;e[4]!==c?(r=a.jsx($e,{progress:c}),e[4]=c,e[5]=r):r=e[5];let u;return e[6]!==n||e[7]!==r?(u=a.jsxs("div",{className:"cache-entry-notice",children:[n,r]}),e[6]=n,e[7]=r,e[8]=u):u=e[8],u}function cs({corpus:s,cachedMetadata:e,cacheCollections:t,clearCachedFile:l}){const{t:c}=J(),o=y.useMemo(()=>s.collections.map(r=>{const u=e.filter(([[i]])=>r===i);return[r,u.reduce((i,[,h])=>i+h,0),u.every(([,,i])=>i)]}).filter(([,r])=>r>0),[e]);return a.jsx("div",{className:"cache-entry-list",children:e.length>0&&o.map(([n,r,u],i)=>a.jsxs("div",{className:`cache-entry cache-entry-${u?"current":"outdated"}`,children:[a.jsxs("div",{className:"cache-entry-text",children:[a.jsx("div",{children:a.jsx("abbr",{title:c(`collections:${n}.name`),children:a.jsx("span",{translate:"no",children:c(`collections:${n}.short`)})})}),a.jsx("div",{translate:"no",children:c("cache.size",le(r))})]}),a.jsxs("div",{className:"cache-entry-actions",children:[!u&&a.jsx(os,{callback:()=>{t(n)}}),a.jsx(ns,{callback:()=>{l(n)}})]})]},i))})}function rs({active:s,loader:e,showModal:t}){const{t:l}=J(),[c,o]=y.useState(!1),[n,r]=y.useState([]),[u,i]=y.useState(!1),[h,m]=y.useState(0),[g,C]=y.useState(0),[_,S]=y.useState(0),k=y.useRef(null),R=()=>{"caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB?Promise.all([e.getCache(),e.getIndexedDB()]).then(()=>{o(!0)}).catch(()=>{o(!1),r([])}):(o(!1),r([]))},E=T=>{const{status:$,loadedBytes:j,totalBytes:N,requestedCollection:V}=T.data;switch(m(j/N),C(j),S(N),$){case"loading":return;case"done":console.log("Caching complete");break;case"error":console.log("Caching error");break}k.current?.terminate(),k.current=null,i(!1),x(V)},M=y.useCallback(T=>{"caches"in window&&(i(!0),m(0),C(0),k.current===null&&(console.log("Creating new CacheManagerWorker..."),k.current=new ss,k.current.addEventListener("message",E),k.current.postMessage({serializedCorpus:Ie(e.corpus),requestedCollection:T})))},[e]),f=async(T="background")=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[$,j]=await Promise.all([e.getCache(),e.getIndexedDB()]),N=e.corpus.entries.flatMap(([O,W])=>W.files.flatMap(G=>W.languages.map(Q=>[O,Q,G]))),V=N.map(([O,W,G])=>e.getFilePath(O,W,G)),U=await Promise.all(V.map(O=>e.getFileCacheOnly($,j,O).then(async([W,G])=>[W!==void 0?(await W.blob()).size:-1,G])));r(U.map(([O,W],G)=>[N[G],O,W]).filter(([,O])=>O!==-1));const p=new Set(V),B=(await e.getAllLocalFilePaths(j)).filter(O=>!p.has(O));await Promise.all(B.map(O=>Promise.all([e.deleteLocalMetadata(j,O),$.delete(O)]).then(([W,G])=>{console.debug(W&&G?`Deleted ${O} from cache`:`Failed to delete ${O} from cache`)}))),j.close(),T==="cacheAll"&&U.some(([O,W])=>O===-1||!W)&&A()}},x=T=>{f(T).catch(ee)},v=()=>{const T=[];k.current&&(k.current.terminate(),k.current=null),"serviceWorker"in navigator&&T.push(navigator.serviceWorker.ready.then($=>$.unregister())),"indexedDB"in window&&"databases"in window.indexedDB&&T.push(e.getIndexedDB().then($=>e.clearLocalMetadata($).then(()=>($.close(),f())))),"caches"in window&&T.push(e.getCache().then($=>$.keys().then(j=>Promise.all(j.map(N=>$.delete(N)))))),Promise.all(T).then(()=>{console.log("Cache cleared")}).catch($=>{console.log("Error clearing cache"),console.error($)})},L=async T=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[$,j]=await Promise.all([e.getCache(),e.getIndexedDB()]),N=e.corpus.getCollection(T);await Promise.all(N.languages.flatMap(V=>N.files.flatMap(U=>{const p=e.getFilePath(T,V,U);return[e.deleteLocalMetadata(j,p),$.delete(p)]}))),j.close(),await f()}},w=y.useCallback(T=>{L(T).catch(ee)},[]);y.useEffect(()=>{R(),f().catch(ee)},[s,e.corpus.entries,e.corpus.metadata]);const P=()=>{e.getDownloadSizeTotal().then(T=>{t({message:l("cache.cacheAllModal.message",le(T)),buttons:[{message:l("cache.cacheAllModal.buttons.yes"),callback:()=>{M("cacheAll")}},{message:l("cache.cacheAllModal.buttons.no"),callback:()=>{i(!1)},autoFocus:!0}],cancelCallback:()=>{i(!1)}})}).catch(ee)},A=()=>{t({message:l("cache.cacheAllFailedModal.message"),buttons:[{message:l("cache.cacheAllFailedModal.buttons.ok"),autoFocus:!0}]})},F=()=>{t({message:l("cache.clearCacheModal.message"),buttons:[{message:l("cache.clearCacheModal.buttons.yes"),callback:v},{message:l("cache.clearCacheModal.buttons.no"),autoFocus:!0}]})};return s&&a.jsxs("div",{className:"cache",children:[a.jsxs("div",{className:"cache-button-group item-group",children:[a.jsx("button",{onClick:P,disabled:u!==!1,children:l("cacheAll")}),a.jsx("button",{onClick:F,children:l("clearCache")})]}),a.jsx("div",{className:"cache-results app-window",children:a.jsxs("div",{className:"app-window-inner",children:[a.jsx(as,{cacheStorageEnabled:c,cachedMetadata:n}),u?a.jsx(ls,{loadedBytes:g,totalBytes:_,progress:h}):a.jsx(cs,{corpus:e.corpus,cachedMetadata:n,cacheCollections:M,clearCachedFile:w})]})})]})}function is(s){const e=K.c(34),{closeCallback:t,classes:l,message:c,buttons:o,checkbox:n,cancelCallback:r,isModal:u}=s,i=u===void 0?!0:u,h=c!==void 0,[m,g]=y.useState(n?.checked??!1),C=y.useRef(null),_=y.useRef(null);let S,k;e[0]!==i||e[1]!==h?(S=()=>{const j=C.current;j!==null&&(j.open&&j.close(),h&&(i?j.showModal():j.show()))},k=[h,i],e[0]=i,e[1]=h,e[2]=S,e[3]=k):(S=e[2],k=e[3]),y.useEffect(S,k);let R;e[4]!==o||e[5]!==h?(R=()=>{const j=_.current;if(h&&o&&j!==null){const N=o.findIndex(ds);N!==-1&&Array.from(j.children).filter(us)[N].focus()}},e[4]=o,e[5]=h,e[6]=R):R=e[6];let E;e[7]!==c||e[8]!==h?(E=[c,h],e[7]=c,e[8]=h,e[9]=E):E=e[9],y.useEffect(R,E);let M;e[10]!==m||e[11]!==t?(M=(j,N,V)=>{const U=V===void 0?!0:V;return()=>{U&&t(),j&&j(),N&&N(m)}},e[10]=m,e[11]=t,e[12]=M):M=e[12];const f=M;let x;e[13]!==r||e[14]!==t?(x=()=>{r&&r(),t()},e[13]=r,e[14]=t,e[15]=x):x=e[15];const v=x;if(!h)return null;let L;e[16]!==l?(L=["modal"],l&&l.forEach(j=>L.push(j)),e[16]=l,e[17]=L):L=e[17];const w=L.join(" ");let P;e[18]!==c?(P=a.jsx("div",{className:"modal-message",children:c}),e[18]=c,e[19]=P):P=e[19];let A;e[20]!==n||e[21]!==m?(A=n&&a.jsx("div",{className:"modal-checkbox",children:a.jsxs("div",{children:[a.jsx("input",{type:"checkbox",id:"modalCheckbox",name:"modalCheckbox",checked:m,onChange:j=>{g(j.target.checked)}}),a.jsx("label",{htmlFor:"modalCheckbox",children:n.message})]})}),e[20]=n,e[21]=m,e[22]=A):A=e[22];let F;e[23]!==o||e[24]!==f?(F=o?.map((j,N)=>{const{message:V,callback:U,checkboxCallback:p,close:B,...O}=j;return a.jsx("button",{type:"button",onClick:f(U,p,B),...O,children:V},N)}),e[23]=o,e[24]=f,e[25]=F):F=e[25];let T;e[26]!==F?(T=a.jsx("div",{ref:_,className:"modal-button-group",children:F}),e[26]=F,e[27]=T):T=e[27];let $;return e[28]!==v||e[29]!==A||e[30]!==T||e[31]!==w||e[32]!==P?($=a.jsxs("dialog",{ref:C,id:"modal",className:w,onCancel:v,children:[P,A,T]}),e[28]=v,e[29]=A,e[30]=T,e[31]=w,e[32]=P,e[33]=$):$=e[33],$}function us(s){return s instanceof HTMLButtonElement}function ds(s){return s.autoFocus}function pe(){const s=K.c(11),{t:e}=J();let t;s[0]!==e?(t=e("error.title"),s[0]=e,s[1]=t):t=s[1];let l;s[2]!==t?(l=a.jsx("h2",{children:t}),s[2]=t,s[3]=l):l=s[3];let c;s[4]!==e?(c=e("error.message"),s[4]=e,s[5]=c):c=s[5];let o;s[6]!==c?(o=a.jsx("div",{children:c}),s[6]=c,s[7]=o):o=s[7];let n;return s[8]!==l||s[9]!==o?(n=a.jsx("div",{className:"app-window",children:a.jsx("div",{className:"app-window-inner",children:a.jsxs("section",{className:"results-section",children:[l,o]})})}),s[8]=l,s[9]=o,s[10]=n):n=s[10],n}const je="corpus",de=s=>"/poke-corpus/"+s,hs=de("data.json"),fs=s=>{const e=f=>h(f).size,t=async(f,x)=>{const[v,L]=await _(f,x);return L?.hash===v.hash?0:v.size},l=async(f=s.collections,x=s.languages)=>{try{const v=await i(),L=(await Promise.all(f.flatMap(w=>s.getCollection(w).languages.filter(P=>x.includes(P)).flatMap(P=>s.getCollection(w).files.map(A=>t(v,ie(w,P,A))))))).reduce((w,P)=>w+P,0);return v.close(),L}catch{return f.flatMap(v=>s.getCollection(v).languages.filter(L=>x.includes(L)).flatMap(L=>s.getCollection(v).files.map(w=>e(ie(v,L,w))))).reduce((v,L)=>v+L,0)}},c=async(f,x,v)=>{const L=de(v),[w,P]=await _(x,v);if(P?.hash===w.hash||!navigator.onLine&&P?.hash!==void 0){const T=await E(f,L);if(T!==void 0)return T}const A=await fetch(L);return A.ok?(await M(f,L,A).then(async T=>{T&&await g(x,v)}),A):await E(f,L)??null},o=async(f,x,v)=>{const L=de(v),[w,P]=await _(x,v);return P!==void 0?[await E(f,L),P.hash===w.hash]:[void 0,!1]},n=async f=>{const x=de(f),v=await fetch(x);return v.ok?v:null},r="corpus",u="files",i=async()=>{const f=indexedDB.open(r);return new Promise((x,v)=>{f.onupgradeneeded=()=>{f.result.createObjectStore(u),f.transaction!==null&&(f.transaction.oncomplete=()=>{console.log("Created object store")})},f.onsuccess=()=>{x(f.result)},f.onerror=()=>{v(f.error)}})},h=f=>s.metadata[f],m=async(f,x)=>{const w=f.transaction([u],"readonly").objectStore(u).get(x);return new Promise((P,A)=>{w.onsuccess=()=>{P(yt(w.result)?w.result:void 0)},w.onerror=()=>{A(w.error)}})},g=async(f,x)=>{const w=f.transaction([u],"readwrite").objectStore(u).put(h(x),x);return new Promise((P,A)=>{w.onsuccess=()=>{P(w.result===x)},w.onerror=()=>{A(w.error)}})},C=async(f,x)=>{const w=f.transaction([u],"readwrite").objectStore(u).delete(x);return new Promise((P,A)=>{w.onsuccess=()=>{P(!0)},w.onerror=()=>{A(w.error)}})},_=async(f,x)=>[h(x),await m(f,x)],S=async f=>{const L=f.transaction(["files"],"readwrite").objectStore("files").clear();return f.close(),new Promise((w,P)=>{L.onsuccess=()=>{w(!0)},L.onerror=()=>{P(L.error)}})},k=async f=>{const L=f.transaction([u],"readonly").objectStore(u).getAllKeys();return new Promise((w,P)=>{L.onsuccess=()=>{w(L.result.filter(A=>typeof A=="string"))},L.onerror=()=>{P(L.error)}})},R=async()=>await caches.open(je),E=async(f,x)=>{try{return await f.match(x)}catch(v){console.error(v);return}},M=async(f,x,v)=>{try{return await f.put(x,v.clone()),!0}catch(L){return console.error(L),!1}};return{corpus:s,getFilePath:ie,getFileSize:e,getDownloadSizeTotal:l,getFile:c,getFileCacheOnly:o,getFileRemote:n,getIndexedDB:i,deleteLocalMetadata:C,clearLocalMetadata:S,getAllLocalFilePaths:k,getCache:R}};function ms(s){return fs(s)}function gs(s,e=hs){const t=()=>{s(l=>l===void 0?null:l)};Promise.all([ps(e).then(l=>{s(c=>c===void 0&&l!==null?l:c)}).catch(ee),bs(e).then(l=>{s(c=>l??c)}).catch(ee)]).then(t,t)}async function ps(s){if("caches"in window){const t=await(await caches.open(je)).match(s);if(t?.ok)return Fe(t)}return null}async function bs(s){const e=await fetch(s);if(!e.ok)return null;if("caches"in window){const t=e.clone();caches.open(je).then(l=>l.put(s,t)).catch(ee)}return Fe(e)}async function Fe(s){const e=await s.json(),t=_t(e);return ms(t)}function xs(s){const e=K.c(2);let t;return e[0]!==s?(t=a.jsx("a",{className:"link",...s,children:s.children}),e[0]=s,e[1]=t):t=e[1],t}const Ce="corpus-tutorial",re=0,he=1,fe=5;function js(s){const e=K.c(31),{page:t}=s,{t:l}=J("tutorial");let c="";e:switch(t){case 1:{let o;e[0]!==l?(o=l("message.welcome"),e[0]=l,e[1]=o):o=e[1];let n;e[2]!==o?(n=a.jsx("div",{children:a.jsx("b",{children:o})}),e[2]=o,e[3]=n):n=e[3];let r;e[4]!==l?(r=l("message.intro"),e[4]=l,e[5]=r):r=e[5];let u;e[6]!==r?(u=a.jsx("div",{children:r}),e[6]=r,e[7]=u):u=e[7];let i;e[8]!==n||e[9]!==u?(i=a.jsxs(a.Fragment,{children:[n,u]}),e[8]=n,e[9]=u,e[10]=i):i=e[10],c=i;break e}case 2:{let o;e[11]!==l?(o=l("message.filters"),e[11]=l,e[12]=o):o=e[12],c=o;break e}case 3:{let o;e[13]!==l?(o=l("message.search"),e[13]=l,e[14]=o):o=e[14],c=o;break e}case 4:{let o;e[15]!==l?(o=l("message.results"),e[15]=l,e[16]=o):o=e[16],c=o;break e}case 5:{let o;e[17]!==l?(o=l("moreUrl"),e[17]=l,e[18]=o):o=e[18];let n;e[19]!==o?(n={Link:a.jsx(xs,{href:o})},e[19]=o,e[20]=n):n=e[20];let r;e[21]!==l||e[22]!==n?(r=a.jsx("div",{children:a.jsx(qe,{t:l,i18nKey:"message.more",components:n})}),e[21]=l,e[22]=n,e[23]=r):r=e[23];let u;e[24]!==l?(u=l("message.done"),e[24]=l,e[25]=u):u=e[25];let i;e[26]!==u?(i=a.jsx("div",{children:u}),e[26]=u,e[27]=i):i=e[27];let h;e[28]!==r||e[29]!==i?(h=a.jsxs(a.Fragment,{children:[r,i]}),e[28]=r,e[29]=i,e[30]=h):h=e[30],c=h}}return c}function vs(s){const e=K.c(13),{replaceModal:t}=s,{t:l}=J("tutorial"),[c,o]=y.useState(Y(Ce)?re:he);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{o(re),document.body.removeAttribute("data-tutorial-page"),te(Ce,"true")},e[0]=n):n=e[0];const r=n;let u;e[1]!==c||e[2]!==t?(u=()=>{c!==re&&(document.body.setAttribute("data-tutorial-page",c.toString()),t({isModal:!1,classes:["tutorial"],message:a.jsx(js,{page:c}),buttons:[{id:"tutorial-skip",message:a.jsx(ae,{ns:"tutorial",i18nKey:"button.skip"}),autoFocus:c===fe,callback:r},{id:"tutorial-back",message:a.jsx(ae,{ns:"tutorial",i18nKey:"button.back"}),disabled:c===he,callback:()=>{o(ws)},close:!1},{id:"tutorial-next",message:a.jsx(ae,{ns:"tutorial",i18nKey:"button.next"}),autoFocus:c<fe,disabled:c===fe,callback:()=>{o(ys)},close:!1}],cancelCallback:r}))},e[1]=c,e[2]=t,e[3]=u):u=e[3];let i;e[4]!==c?(i=[c],e[4]=c,e[5]=i):i=e[5],y.useEffect(u,i);let h;e[6]!==c?(h=()=>{c===re&&o(he)},e[6]=c,e[7]=h):h=e[7];const m=h;let g;e[8]!==l?(g=l("link"),e[8]=l,e[9]=g):g=e[9];let C;return e[10]!==g||e[11]!==m?(C=a.jsx("button",{className:"link",onClick:m,children:g}),e[10]=g,e[11]=m,e[12]=C):C=e[12],C}function ys(s){return s+1}function ws(s){return s-1}const Le="Search";function _s(s){const e=K.c(14);let t,l;e[0]!==s?({reset:l,...t}=s,e[0]=s,e[1]=t,e[2]=l):(t=e[1],l=e[2]);const{t:c}=J();let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx("img",{className:"header-logo",src:"logo.svg",alt:"",height:"40",width:"40"}),e[3]=o):o=e[3];let n;e[4]!==c?(n=c("title",{version:c("version")}),e[4]=c,e[5]=n):n=e[5];let r;e[6]!==l||e[7]!==n?(r=a.jsx("h1",{children:a.jsxs("a",{href:"/poke-corpus/",onClick:l,children:[o," ",n]})}),e[6]=l,e[7]=n,e[8]=r):r=e[8];let u;e[9]!==t?(u=a.jsx(be,{fallback:null,children:a.jsx(ht,{...t})}),e[9]=t,e[10]=u):u=e[10];let i;return e[11]!==r||e[12]!==u?(i=a.jsxs("header",{className:"header",children:[r,u]}),e[11]=r,e[12]=u,e[13]=i):i=e[13],i}function Ss(s){const e=K.c(30),{view:t,switchView:l,replaceModal:c}=s,{t:o}=J();let n;e[0]!==o?(n=o("tagline"),e[0]=o,e[1]=n):n=e[1];let r;e[2]!==n?(r=a.jsx("span",{children:n}),e[2]=n,e[3]=r):r=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[4]=u):u=e[4];let i;e[5]!==o?(i=o("footerText"),e[5]=o,e[6]=i):i=e[6];let h;e[7]!==i?(h=a.jsx("span",{children:i}),e[7]=i,e[8]=h):h=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[9]=m):m=e[9];let g;e[10]!==c?(g=a.jsx(vs,{replaceModal:c}),e[10]=c,e[11]=g):g=e[11];let C;e[12]===Symbol.for("react.memo_cache_sentinel")?(C=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[12]=C):C=e[12];const _=t!=="Search"?"backToSearch":"manageCache";let S;e[13]!==o||e[14]!==_?(S=o(_),e[13]=o,e[14]=_,e[15]=S):S=e[15];let k;e[16]!==l||e[17]!==S?(k=a.jsx("button",{className:"link",onClick:l,children:S}),e[16]=l,e[17]=S,e[18]=k):k=e[18];let R;e[19]===Symbol.for("react.memo_cache_sentinel")?(R=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[19]=R):R=e[19];let E;e[20]!==o?(E=o("github"),e[20]=o,e[21]=E):E=e[21];let M;e[22]!==E?(M=a.jsx("a",{href:"https://github.com/abcboy101/poke-corpus",children:E}),e[22]=E,e[23]=M):M=e[23];let f;return e[24]!==k||e[25]!==M||e[26]!==r||e[27]!==h||e[28]!==g?(f=a.jsxs("footer",{children:[r,u,h,m,g,C,k,R,M]}),e[24]=k,e[25]=M,e[26]=r,e[27]=h,e[28]=g,e[29]=f):f=e[29],f}function ks(){const[s,e]=y.useState(ce.language),[t,l]=y.useState(at),[c,o]=y.useState(ot),[n,r]=y.useState(Le),[u,i]=y.useState(0),[h,m]=y.useState([]),[g,C]=y.useState(!1),[_,S]=y.useState(void 0);y.useEffect(()=>{const x=Ae();document.body.classList.add(`mode-${x}`),C(!0),gs(S)},[]);const k=y.useCallback(x=>{window.location.hash="",tt("corpus-params"),r(Le),i(v=>v+1&255),m([]),x.preventDefault()},[]),R=y.useCallback(x=>{m(v=>v.concat(x))},[]),E=y.useCallback(x=>{m([x])},[]),M=y.useCallback(()=>{r(x=>{const v=x!=="Search"?"Search":"CacheManager";return g||C(v==="CacheManager"),v})},[]);if(_===void 0)return;const f=["app",`view-${n.toLowerCase()}`];return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&f.push("ua-safari"),a.jsxs("div",{className:f.join(" "),lang:s,dir:ce.dir(s),children:[a.jsx(_s,{showModal:R,language:s,setLanguage:e,richText:t,setRichText:l,limit:c,setLimit:o,reset:k}),_!==null?a.jsxs(be,{FallbackComponent:pe,children:[a.jsx(ts,{loader:_,showModal:R,language:s,richText:t,limit:c}),a.jsx(rs,{active:n==="CacheManager",loader:_,showModal:R})]}):a.jsx(pe,{}),a.jsx(Ss,{view:n,switchView:M,replaceModal:E}),a.jsx(is,{closeCallback:()=>{m(x=>x.slice(0,-1))},...h.at(-1)})]},u)}function Cs(){const s=K.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=a.jsx("div",{className:"app",children:a.jsx(pe,{})}),s[0]=e):e=s[0],e}const Ls=Ue.createRoot(document.getElementById("root"));Ls.render(a.jsx(ze.StrictMode,{children:a.jsx(be,{FallbackComponent:Cs,children:a.jsx(ks,{})})}));et({onOfflineReady(){console.log("Ready to work offline!")}});
