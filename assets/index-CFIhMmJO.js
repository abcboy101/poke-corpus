import{c as H,u as W,r as v,j as a,i as Q,B as Te,a as Ie,b as $e,E as fe,R as Fe}from"./vendor-CwbgnXAN.js";import{R as De}from"./react-dom-DAhMxiay.js";import{t as Oe,i as Ve,f as Be,l as qe,c as ze,a as Ue}from"./i18n-en-84MEhzKe.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();const We="modulepreload",He=function(s){return"/poke-corpus/"+s},pe={},D=function(e,t,c){let n=Promise.resolve();if(t&&t.length>0){let o=function(i){return Promise.all(i.map(m=>Promise.resolve(m).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),h=r?.nonce||r?.getAttribute("nonce");n=o(t.map(i=>{if(i=He(i),i in pe)return;pe[i]=!0;const m=i.endsWith(".css"),f=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${f}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":We,m||(w.as="script"),w.crossOrigin="",w.href=i,h&&w.setAttribute("nonce",h),document.head.appendChild(w),m)return new Promise((b,k)=>{w.addEventListener("load",b),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(o){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o}return n.then(o=>{for(const r of o||[])r.status==="rejected"&&l(r.reason);return e().catch(l)})};function Ge(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:c,onRegistered:n,onRegisteredSW:l,onRegisterError:o}=s;let r,h;const i=async(f=!0)=>{await h};async function m(){if("serviceWorker"in navigator){if(r=await D(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/poke-corpus/sw.js",{scope:"/poke-corpus/",type:"classic"})).catch(f=>{o?.(f)}),!r)return;r.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),r.addEventListener("installed",f=>{f.isUpdate||c?.()}),r.register({immediate:e}).then(f=>{l?l("/poke-corpus/sw.js",f):n?.(f)}).catch(f=>{o?.(f)})}}return h=m(),i}const be=s=>s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");function Z(s){try{return localStorage.getItem(s)}catch{return null}}function Y(s,e){try{localStorage.setItem(s,e)}catch{return}}function Ke(s){try{localStorage.removeItem(s)}catch{return}}const _e=["system","light","dark"],Se=s=>_e.some(e=>s===e),Je=s=>typeof s=="string"&&Se(s)?s:"system",ke=()=>Je(Z("mode")),ue=500,Ze=s=>!Number.isNaN(s)&&Number.isInteger(s)&&s>0,Qe=()=>{const s=+(Z("corpus-limit")??ue);return Number.isNaN(s)?ue:s},Xe=()=>Z("corpus-richText")!=="false",xe=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"];function le(s){const e=Math.min(Math.floor((s.toString().length-1)/3),xe.length-1),t={style:"unit",unit:xe[e],unitDisplay:e===0?"long":"short",minimumFractionDigits:e===0?0:1,maximumFractionDigits:1,maximumSignificantDigits:3,roundingPriority:"lessPrecision"};return{amount:s/Math.pow(1e3,e),formatParams:{amount:t}}}function Ye(s,e=1){return{amount:s,formatParams:{amount:{style:"percent",minimumFractionDigits:e,maximumFractionDigits:e}}}}function Ce(s){try{return JSON.parse(s)}catch(e){return console.error(e),null}}function X(s){console.error(s)}const et=[{code:"en",name:"English (United States)"},{code:"en-GB",name:"English (United Kingdom)"},{code:"ja",name:"日本語"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français (France)"},{code:"fr-CA",name:"Français (Canada)"},{code:"es",name:"Español (España)"},{code:"it",name:"Italiano"},{code:"ko",name:"한국어"},{code:"zh-Hans",name:"简体中文"},{code:"zh-Hant",name:"繁体中文"}];function tt(s){const e=H.c(59),{showModal:t,richText:c,richTextRef:n,limit:l,limitRef:o}=s,{t:r}=W(),[h,i]=v.useState(ke);let m;e[0]!==t||e[1]!==r?(m=d=>{Q.changeLanguage(d.target.value,N=>{N?.some(at)&&(console.error(N),t({message:r("options.network"),buttons:[{message:a.jsx(Le,{}),autoFocus:!0}]}))}).catch(X)},e[0]=t,e[1]=r,e[2]=m):m=e[2];const f=m;let w;e[3]!==h?(w=d=>{const N=d.target.value;Se(N)&&(i(N),Y("mode",N),document.body.classList.replace(`mode-${h}`,`mode-${N}`))},e[3]=h,e[4]=w):w=e[4];const b=w,k=nt;let j;e[5]!==r?(j=r("options.language"),e[5]=r,e[6]=j):j=e[6];let R;e[7]!==j?(R=a.jsx("label",{htmlFor:"language",children:j}),e[7]=j,e[8]=R):R=e[8];let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=et.map(st),e[9]=E):E=e[9];let M;e[10]!==f?(M=a.jsx("select",{name:"language",id:"language",onChange:f,defaultValue:Q.language,autoFocus:!0,translate:"no",children:E}),e[10]=f,e[11]=M):M=e[11];let A;e[12]!==r?(A=r("options.mode"),e[12]=r,e[13]=A):A=e[13];let g;e[14]!==A?(g=a.jsx("label",{htmlFor:"mode",children:A}),e[14]=A,e[15]=g):g=e[15];let x;e[16]!==r?(x=_e.map(d=>a.jsx("option",{value:d,children:r(`options.modes.${d}`)},d)),e[16]=r,e[17]=x):x=e[17];let L;e[18]!==h||e[19]!==b||e[20]!==x?(L=a.jsx("select",{name:"mode",id:"mode",onChange:b,defaultValue:h,children:x}),e[18]=h,e[19]=b,e[20]=x,e[21]=L):L=e[21];let y;e[22]!==r?(y=r("options.longURL"),e[22]=r,e[23]=y):y=e[23];let _;e[24]!==y?(_=a.jsx("label",{htmlFor:"longURL",children:y}),e[24]=y,e[25]=_):_=e[25];let C,P;e[26]===Symbol.for("react.memo_cache_sentinel")?(C=Z("corpus-longURL")??"false",P=["true","false"],e[26]=C,e[27]=P):(C=e[26],P=e[27]);let I;e[28]!==r?(I=a.jsx("select",{name:"longURL",id:"longURL",onChange:k,defaultValue:C,children:P.map(d=>a.jsx("option",{value:d,children:r(`options.longURLSelect.${d}`)},d))}),e[28]=r,e[29]=I):I=e[29];let T;e[30]!==r?(T=r("options.richText"),e[30]=r,e[31]=T):T=e[31];let S;e[32]!==T?(S=a.jsx("label",{htmlFor:"richText",children:T}),e[32]=T,e[33]=S):S=e[33];const $=c?"true":"false";let O;e[34]===Symbol.for("react.memo_cache_sentinel")?(O=["true","false"],e[34]=O):O=e[34];let B;e[35]!==r?(B=O.map(d=>a.jsx("option",{value:d,children:r(`options.richTextSelect.${d}`)},d)),e[35]=r,e[36]=B):B=e[36];let p;e[37]!==n||e[38]!==$||e[39]!==B?(p=a.jsx("select",{ref:n,name:"richText",id:"richText",defaultValue:$,children:B}),e[37]=n,e[38]=$,e[39]=B,e[40]=p):p=e[40];let F;e[41]!==r?(F=r("options.limit"),e[41]=r,e[42]=F):F=e[42];let U;e[43]!==F?(U=a.jsx("label",{htmlFor:"limit",children:F}),e[43]=F,e[44]=U):U=e[44];let z;e[45]!==l||e[46]!==o?(z=a.jsx("input",{ref:o,type:"number",name:"limit",id:"limit",min:1,defaultValue:l}),e[45]=l,e[46]=o,e[47]=z):z=e[47];let u;return e[48]!==L||e[49]!==_||e[50]!==I||e[51]!==S||e[52]!==p||e[53]!==U||e[54]!==z||e[55]!==R||e[56]!==M||e[57]!==g?(u=a.jsx("div",{className:"options",children:a.jsxs("div",{className:"options-grid",children:[R,M,g,L,_,I,S,p,U,z]})}),e[48]=L,e[49]=_,e[50]=I,e[51]=S,e[52]=p,e[53]=U,e[54]=z,e[55]=R,e[56]=M,e[57]=g,e[58]=u):u=e[58],u}function st(s){return a.jsx("option",{value:s.code,lang:s.code,children:s.name},s.code)}function nt(s){const e=s.target.value;(e==="true"||e==="false")&&Y("corpus-longURL",e)}function at(s){return!s.message.includes("Unknown variable dynamic import")}function Le(){const s=H.c(2),{t:e}=W();let t;return s[0]!==e?(t=e("options.close"),s[0]=e,s[1]=t):t=s[1],t}function ot(s){const e=H.c(22),{t}=W(),{showModal:c,setRichText:n,setLimit:l}=s,o=v.useRef(null),r=v.useRef(null);let h;e[0]!==l||e[1]!==n?(h=()=>{if(o.current!==null){const g=o.current.value;(g==="true"||g==="false")&&(Y("corpus-richText",g),n(g!=="false"))}if(r.current!==null){const g=r.current.valueAsNumber;Ze(g)&&(Y("corpus-limit",g.toString()),l(g))}},e[0]=l,e[1]=n,e[2]=h):h=e[2];const i=h;let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=["modal-options"],e[3]=m):m=e[3];let f;e[4]!==s?(f=a.jsx(tt,{...s,richTextRef:o,limitRef:r}),e[4]=s,e[5]=f):f=e[5];let w;e[6]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(Le,{}),e[6]=w):w=e[6];let b;e[7]!==i?(b=[{message:w,callback:i}],e[7]=i,e[8]=b):b=e[8];let k;e[9]!==i||e[10]!==f||e[11]!==b?(k={classes:m,message:f,buttons:b,cancelCallback:i},e[9]=i,e[10]=f,e[11]=b,e[12]=k):k=e[12];const j=k;let R;e[13]!==j||e[14]!==c?(R=()=>{c(j)},e[13]=j,e[14]=c,e[15]=R):R=e[15];let E;e[16]===Symbol.for("react.memo_cache_sentinel")?(E=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#gear"})}),e[16]=E):E=e[16];let M;e[17]!==t?(M=t("options.options"),e[17]=t,e[18]=M):M=e[18];let A;return e[19]!==R||e[20]!==M?(A=a.jsxs("button",{className:"header-options",onClick:R,children:[E,M]}),e[19]=R,e[20]=M,e[21]=A):A=e[21],A}function lt(s){return new Worker("/poke-corpus/assets/searchWorkerManager-lsv1yTkA.js",{name:s?.name})}function ct(s){return new Worker("/poke-corpus/assets/textWorker-Xwew4GOV.js",{name:s?.name})}const rt=["error","regex","noMatch","network","boolean.parentheses","boolean.regex","boolean.slash","boolean.quote","boolean.operand","boolean.empty","boolean.where"],it=s=>rt.some(e=>s===e),ut=["waiting","loading","processing","collecting"],Ee=s=>ut.some(e=>s===e),ne=["exact","regex","boolean","all"],ge=s=>ne.some(e=>s===e),Pe={id:"",file:"",query:"",type:"all",caseInsensitive:!0,common:!0,script:!0,showAllLanguages:!0,run:!1},ht=s=>({...Pe,collections:s.collections.filter(e=>s.getCollection(e).structured),languages:s.languages}),dt=s=>{function e(u){const d={};return u.id!==void 0&&(d.id=u.id),u.file!==void 0&&(d.file=u.file),u.run!==void 0&&(d.run=u.run.toString()),new URLSearchParams({query:u.query,type:u.type,caseInsensitive:u.caseInsensitive.toString(),common:u.common.toString(),script:u.script.toString(),showAllLanguages:u.showAllLanguages.toString(),collections:u.collections.join(","),languages:u.languages.join(","),...d}).toString()}function t(u){const d=new URLSearchParams(u);return{id:c(d.get("id")),file:c(d.get("file")),query:c(d.get("query")),type:l(d.get("type")??(d.get("regex")==="true"?"regex":null),ge),caseInsensitive:n(d.get("caseInsensitive")),common:n(d.get("common")),script:n(d.get("script")),showAllLanguages:n(d.get("showAllLanguages")),collections:o(d.get("collections"),s.isCollectionKey),languages:o(d.get("languages"),s.isLanguageKey,r),run:n(d.get("run"))}}function c(u){return u??void 0}function n(u){switch(u){case"true":return!0;case"false":return!1}}function l(u,d){if(u!==null&&d(u))return u}function o(u,d,N=V=>V){if(u!==null)return u.split(",").map(N).filter(d)}function r(u){switch(u){case"qid-ZZ":case"ja-JP":case"en-US":case"fr-FR":case"it-IT":case"de-DE":case"es-ES":case"ko-KR":return u.split("-",1)[0];case"ja-Hrkt-JP":return"ja-Hrkt";case"zh-CN":return"zh-Hans";case"zh-TW":return"zh-Hant";default:return u}}const h=s.collections.length^s.languages.length<<4,i=2,m=Math.ceil(s.languages.length/8),f=Math.ceil(s.collections.length/8),w=m+f,b=64,k=Math.ceil(Math.log2(s.languages.length+s.collections.length)),j=i+w,R=u=>btoa(String.fromCodePoint(...u)).replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),E=u=>Uint8Array.from(atob(u.replaceAll("_","/").replaceAll("-","+")),d=>d.charCodeAt(0));function M(u){const d={};u.id!==void 0&&(d.id=u.id),u.file!==void 0&&(d.file=u.file);const N=g(u);return S(N),new URLSearchParams({...d,q:u.query,s:R(N)}).toString()}function A(u){const d=new URLSearchParams(u),N={id:c(d.get("id")),file:c(d.get("file")),query:c(d.get("q"))},V=c(d.get("s"));if(!V)return N;try{const q=E(V).subarray(0,j);return $(q),{...N,...x(q)}}catch{return N}}function g(u){const d=new Uint8Array(j);d[1]=+(u.run??Pe.run)<<0|+u.caseInsensitive<<1|+u.common<<2|+u.script<<3|ne.indexOf(u.type)<<4|+!u.showAllLanguages<<7;const N=d.subarray(i);L(u,N),_(N,d.subarray(1,2));let V=d.length;for(;d[V-1]===0&&V>1;)V--;return d.subarray(0,V)}function x(u){const d=new Uint8Array(w);u[1]&b?y(u.subarray(i),d):d.set(u.subarray(i));const N=s.languages.filter((q,G)=>T(d,G)===1),V=s.collections.filter((q,G)=>T(d,8*m+G)===1);return{run:(u[1]&1)!==0,caseInsensitive:(u[1]&2)!==0,common:(u[1]&4)!==0,script:(u[1]&8)!==0,type:ne[(u[1]&48)>>4],showAllLanguages:(u[1]&128)===0,languages:N,collections:V}}function L(u,d){s.languages.forEach((N,V)=>{u.languages.includes(N)&&I(d,V)}),s.collections.forEach((N,V)=>{u.collections.includes(N)&&I(d,8*m+V)})}function y(u,d){const N=P(u);s.languages.forEach((V,q)=>{N.next().value&&I(d,q)}),s.collections.forEach((V,q)=>{N.next().value&&I(d,8*m+q)})}function _(u,d){const N=T(u,0)===1,V=C(u,N);let q=u.length;for(;u[q-1]===0;)q--;if(1+V.length*k<8*q){d[0]|=b,u.fill(0),N||I(u,0);let G=1;V.forEach(([ee])=>{for(let te=0;te<k;G++,te++)I(u,G,ee>>te&1)})}}function C(u,d){const N=[[0,d]];return s.languages.forEach((V,q)=>{const G=T(u,q)===1;N[N.length-1][1]===G?N[N.length-1][0]++:N.push([1,G])}),s.collections.forEach((V,q)=>{const G=T(u,8*m+q)===1;N[N.length-1][1]===G?N[N.length-1][0]++:N.push([1,G])}),N.pop(),N}function*P(u){const d=new Uint8Array(w);d.set(u);let N=T(d,0)!==1;for(let V=1;V+k<=d.length*8;){let q=0;for(let G=0;G<k;V++,G++)q|=T(d,V)<<G;if(q===0)break;for(;q>0;)yield N,q--;N=!N}for(;;)yield N}function I(u,d,N=1){u[d>>3]|=N<<(d&7)}function T(u,d){return u[d>>3]>>(d&7)&1}function S(u){const d=u[0]=O(u);B(d,u)}function $(u){const d=u[0];if(B(d,u),d!==O(u))throw Error("invalid checksum")}function O(u,d=1){return u.subarray(d).reduce((N,V)=>N+V&255,0)^h&255}function B(u,d,N=1){let V=p(u);for(let q=N;q<d.length;q++)d[q]^=V>>24,V=F(V)}const p=u=>2480367069*u&4294967295,F=u=>2438952949*u+2654435769&4294967295;function U(u){return(Z("corpus-longURL")==="true"?e:M)(u)}function z(u){const d=new URLSearchParams(u);return(d.get("q")||d.get("s")?A:t)(u)}return{_bytesBase64:j,_searchParamsToQueryString:e,_queryStringToSearchParams:t,_searchParamsToBase64:M,_base64ToSearchParams:A,_serializeByteArray:g,_deserializeByteArray:x,_encryptBytes:S,_decryptBytes:$,searchParamsToHash:U,hashToSearchParams:z}};function Ae(s){return dt(s)}const ae="qid",ft="zxx",gt=s=>s!==null&&typeof s=="object"&&"hash"in s&&typeof s.hash=="string"&&"size"in s&&typeof s.size=="number",mt=s=>{const e=Object.entries(s.corpus.collections);return Object.fromEntries(e.flatMap(([t,c])=>c.languages.flatMap(n=>c.files.map(l=>ce(t,n,l)))).map((t,c)=>[t,{hash:s.hashes[c],size:s.sizes[c]}]))},pt=s=>{const e=s.corpus,t=Object.keys(e.collections),c=Object.entries(e.collections),n=mt(s);return{_corpus:e,collections:t,languages:e.languages,entries:c,metadata:n,getCollection:l=>e.collections[l],isCollectionKey:l=>t.some(o=>l===o),isLanguageKey:l=>e.languages.some(o=>l===o)}},ce=(s,e,t)=>`corpus/${s}/${e}_${t}.txt.gz`;function Re(s){return{corpus:s._corpus,metadata:s.metadata}}const bt=(s,e,t)=>{const c=s[e];return c?typeof c=="function"?c():Promise.resolve(c):new Promise((n,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})};Q.use(Te).use(Ie).use($e((s,e)=>bt(Object.assign({"./de/collections.json":()=>D(()=>import("./i18n-de-DvTfi3sT.js").then(t=>t.c),[]),"./de/files.json":()=>D(()=>import("./i18n-de-DvTfi3sT.js").then(t=>t.f),[]),"./de/languages.json":()=>D(()=>import("./i18n-de-DvTfi3sT.js").then(t=>t.l),[]),"./de/translation.json":()=>D(()=>import("./i18n-de-DvTfi3sT.js").then(t=>t.t),[]),"./en-GB/translation.json":()=>D(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.j),[]),"./en/collections.json":()=>D(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.d),[]),"./en/files.json":()=>D(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.g),[]),"./en/icons.json":()=>D(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.h),[]),"./en/languages.json":()=>D(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.e),[]),"./en/translation.json":()=>D(()=>import("./i18n-en-84MEhzKe.js").then(t=>t.b),[]),"./es/collections.json":()=>D(()=>import("./i18n-es-DMw6BnNb.js").then(t=>t.c),[]),"./es/files.json":()=>D(()=>import("./i18n-es-DMw6BnNb.js").then(t=>t.f),[]),"./es/languages.json":()=>D(()=>import("./i18n-es-DMw6BnNb.js").then(t=>t.l),[]),"./es/translation.json":()=>D(()=>import("./i18n-es-DMw6BnNb.js").then(t=>t.t),[]),"./fr-CA/translation.json":()=>D(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.t),[]),"./fr/collections.json":()=>D(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.c),[]),"./fr/files.json":()=>D(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.f),[]),"./fr/languages.json":()=>D(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.l),[]),"./fr/translation.json":()=>D(()=>import("./i18n-fr-CUElNbPm.js").then(t=>t.a),[]),"./it/collections.json":()=>D(()=>import("./i18n-it-C970Nh-w.js").then(t=>t.c),[]),"./it/files.json":()=>D(()=>import("./i18n-it-C970Nh-w.js").then(t=>t.f),[]),"./it/languages.json":()=>D(()=>import("./i18n-it-C970Nh-w.js").then(t=>t.l),[]),"./it/translation.json":()=>D(()=>import("./i18n-it-C970Nh-w.js").then(t=>t.t),[]),"./ja/collections.json":()=>D(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.c),[]),"./ja/files.json":()=>D(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.f),[]),"./ja/icons.json":()=>D(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.i),[]),"./ja/languages.json":()=>D(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.l),[]),"./ja/translation.json":()=>D(()=>import("./i18n-ja-BwQ8-9Fx.js").then(t=>t.t),[]),"./ko/collections.json":()=>D(()=>import("./i18n-ko-Dg8pId4h.js").then(t=>t.c),[]),"./ko/files.json":()=>D(()=>import("./i18n-ko-Dg8pId4h.js").then(t=>t.f),[]),"./ko/languages.json":()=>D(()=>import("./i18n-ko-Dg8pId4h.js").then(t=>t.l),[]),"./ko/translation.json":()=>D(()=>import("./i18n-ko-Dg8pId4h.js").then(t=>t.t),[]),"./zh-Hans/collections.json":()=>D(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.c),[]),"./zh-Hans/files.json":()=>D(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.f),[]),"./zh-Hans/languages.json":()=>D(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.l),[]),"./zh-Hans/translation.json":()=>D(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.t),[]),"./zh-Hant/collections.json":()=>D(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.a),[]),"./zh-Hant/files.json":()=>D(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.b),[]),"./zh-Hant/languages.json":()=>D(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.d),[]),"./zh-Hant/translation.json":()=>D(()=>import("./i18n-zh-DRN2pXQa.js").then(t=>t.e),[])}),`./${s}/${e}.json`,3))).init({partialBundledLanguages:!0,fallbackLng:"en",ns:["translation","collections","languages","files","icons"],resources:{en:{translation:Ue,collections:ze,languages:qe,files:Be,icons:Ve},"en-GB":{translation:Oe}}}).catch(X);function he(s,e=4){let t=0;for(let c=0;c<s.length;c++)t+=s.charCodeAt(c)>255?1:.5;return t<=e?void 0:{fontSize:`${e*100/t}%`,scale:`1 ${t/e}`,whiteSpace:"nowrap"}}function xt(s,e){if(e.length===0)return new Set(s.collections);const t=new Set,c=new Set(e);for(const[n,l]of s.entries)l.languages.some(o=>c.has(o))&&t.add(n);return t}function jt(s,e){if(e.length===0)return new Set(s.languages);const t=new Set;for(const c of e)for(const n of s.getCollection(c).languages)t.add(n);return t}function vt(s){const e=H.c(36),{corpus:t,collections:c,languages:n,setCollections:l}=s,{t:o}=W();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=["ja","ko","zh"].some(wt),e[0]=r):r=e[0];const h=r;let i,m;if(e[1]!==c||e[2]!==t||e[3]!==n||e[4]!==l||e[5]!==o){const L=xt(t,n);i="search-collections";let y;e[8]!==o?(y=_=>[_,o(`collections:${_}.name`),o(`collections:${_}.short`)],e[8]=o,e[9]=y):y=e[9],m=t.collections.map(y).map(_=>{const[C,P,I]=_;return a.jsxs("div",{className:`search-collection search-${L.has(C)?"valid":"invalid"}`,children:[a.jsx("input",{type:"checkbox",name:`collection-${C}`,id:`collection-${C}`,checked:c.includes(C),onChange:T=>{T.target.checked&&!c.includes(C)?l(c.concat([C])):!T.target.checked&&c.includes(C)&&l(c.filter(S=>S!==C))}}),a.jsx("label",{htmlFor:`collection-${C}`,style:h?he(I):void 0,children:P===I?P:a.jsx("abbr",{title:P,children:a.jsx("span",{translate:"no",children:I})})})]},C)}),e[1]=c,e[2]=t,e[3]=n,e[4]=l,e[5]=o,e[6]=i,e[7]=m}else i=e[6],m=e[7];let f;e[10]!==i||e[11]!==m?(f=a.jsx("div",{className:i,children:m}),e[10]=i,e[11]=m,e[12]=f):f=e[12];const w=c.length===t.collections.length;let b;e[13]!==t.collections||e[14]!==l?(b=()=>{l(t.collections)},e[13]=t.collections,e[14]=l,e[15]=b):b=e[15];let k;e[16]!==o?(k=o("selectAll"),e[16]=o,e[17]=k):k=e[17];let j;e[18]!==w||e[19]!==b||e[20]!==k?(j=a.jsx("button",{disabled:w,onClick:b,children:k}),e[18]=w,e[19]=b,e[20]=k,e[21]=j):j=e[21];const R=c.length===0;let E;e[22]!==l?(E=()=>{l([])},e[22]=l,e[23]=E):E=e[23];let M;e[24]!==o?(M=o("deselectAll"),e[24]=o,e[25]=M):M=e[25];let A;e[26]!==E||e[27]!==M||e[28]!==R?(A=a.jsx("button",{disabled:R,onClick:E,children:M}),e[26]=E,e[27]=M,e[28]=R,e[29]=A):A=e[29];let g;e[30]!==A||e[31]!==j?(g=a.jsxs("div",{className:"item-group",children:[j,A]}),e[30]=A,e[31]=j,e[32]=g):g=e[32];let x;return e[33]!==g||e[34]!==f?(x=a.jsxs(a.Fragment,{children:[f,g]}),e[33]=g,e[34]=f,e[35]=x):x=e[35],x}function wt(s){return Q.language.startsWith(s)}function yt(s){const e=H.c(36),{corpus:t,collections:c,languages:n,setLanguages:l}=s,{t:o}=W();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=["ja","ko","zh"].some(_t),e[0]=r):r=e[0];const h=r;let i,m;if(e[1]!==c||e[2]!==t||e[3]!==n||e[4]!==l||e[5]!==o){const L=jt(t,c);i="search-languages";let y;e[8]!==o?(y=_=>[_,o(`languages:${_}.name`),o(`languages:${_}.code`)],e[8]=o,e[9]=y):y=e[9],m=t.languages.map(y).map(_=>{const[C,P,I]=_;return a.jsxs("div",{className:`search-language search-${L.has(C)?"valid":"invalid"}`,children:[a.jsx("input",{type:"checkbox",name:`language-${C}`,id:`language-${C}`,checked:n.includes(C),onChange:T=>{T.target.checked&&!n.includes(C)?l(n.concat([C])):!T.target.checked&&n.includes(C)&&l(n.filter(S=>S!==C))}}),a.jsxs("label",{htmlFor:`language-${C}`,children:[a.jsx("span",{className:"search-language-code",children:a.jsx("abbr",{title:P,children:a.jsx("span",{translate:"no",children:I})})}),a.jsx("span",{className:"search-language-name",style:h?he(P,12):he(P,15),children:P})]})]},C)}),e[1]=c,e[2]=t,e[3]=n,e[4]=l,e[5]=o,e[6]=i,e[7]=m}else i=e[6],m=e[7];let f;e[10]!==i||e[11]!==m?(f=a.jsx("div",{className:i,children:m}),e[10]=i,e[11]=m,e[12]=f):f=e[12];const w=n.length===t.languages.length;let b;e[13]!==t.languages||e[14]!==l?(b=()=>{l(t.languages)},e[13]=t.languages,e[14]=l,e[15]=b):b=e[15];let k;e[16]!==o?(k=o("selectAll"),e[16]=o,e[17]=k):k=e[17];let j;e[18]!==w||e[19]!==b||e[20]!==k?(j=a.jsx("button",{disabled:w,onClick:b,children:k}),e[18]=w,e[19]=b,e[20]=k,e[21]=j):j=e[21];const R=n.length===0;let E;e[22]!==l?(E=()=>{l([])},e[22]=l,e[23]=E):E=e[23];let M;e[24]!==o?(M=o("deselectAll"),e[24]=o,e[25]=M):M=e[25];let A;e[26]!==E||e[27]!==M||e[28]!==R?(A=a.jsx("button",{disabled:R,onClick:E,children:M}),e[26]=E,e[27]=M,e[28]=R,e[29]=A):A=e[29];let g;e[30]!==A||e[31]!==j?(g=a.jsxs("div",{className:"item-group",children:[j,A]}),e[30]=A,e[31]=j,e[32]=g):g=e[32];let x;return e[33]!==g||e[34]!==f?(x=a.jsxs(a.Fragment,{children:[f,g]}),e[33]=g,e[34]=f,e[35]=x):x=e[35],x}function _t(s){return Q.language.startsWith(s)}function St(s){const e=H.c(12),{corpus:t,filtersVisible:c,collections:n,setCollections:l,languages:o,setLanguages:r}=s,h=v.useRef(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>h.current?.style.setProperty("--search-filters-height",`${h.current.scrollHeight}px`),e[0]=i):i=e[0];const m=i;let f,w;e[1]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{if(!CSS.supports("interpolate-size","allow-keywords"))return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},w=[],e[1]=f,e[2]=w):(f=e[1],w=e[2]),v.useEffect(f,w);const b=`search-filters search-filters-${c?"show":"hide"}`;let k;e[3]!==n||e[4]!==t||e[5]!==o||e[6]!==l||e[7]!==r?(k=a.jsxs(a.Fragment,{children:[a.jsx(vt,{corpus:t,collections:n,languages:o,setCollections:l}),a.jsx("div",{className:"search-filters-divider"}),a.jsx(yt,{corpus:t,collections:n,languages:o,setLanguages:r})]}),e[3]=n,e[4]=t,e[5]=o,e[6]=l,e[7]=r,e[8]=k):k=e[8];let j;return e[9]!==b||e[10]!==k?(j=a.jsx("div",{ref:h,className:b,children:k}),e[9]=b,e[10]=k,e[11]=j):j=e[11],j}const je=s=>Array.isArray(s)&&s.every(e=>typeof e=="string"),kt=s=>{const e=s.languages.filter(l=>l.startsWith(Q.language.split("-")[0])),t={...ht(s),languages:e.length===0?s.languages.filter(l=>l.startsWith("en")):e},c=Z("corpus-params");if(c===null)return t;const n=Ce(c);return typeof n=="object"&&n!==null&&("query"in n&&typeof n.query=="string"&&(t.query=n.query),"type"in n&&ge(n.type)&&(t.type=n.type),"caseInsensitive"in n&&typeof n.caseInsensitive=="boolean"&&(t.caseInsensitive=n.caseInsensitive),"common"in n&&typeof n.common=="boolean"&&(t.common=n.common),"script"in n&&typeof n.script=="boolean"&&(t.script=n.script),"showAllLanguages"in n&&typeof n.showAllLanguages=="boolean"&&(t.showAllLanguages=n.showAllLanguages),"collections"in n&&je(n.collections)&&n.collections.every(l=>s.isCollectionKey(l))&&(t.collections=n.collections),"languages"in n&&je(n.languages)&&n.languages.every(l=>s.isLanguageKey(l))&&(t.languages=n.languages)),t},Ct=[ne[3],ne[0],ne[1],ne[2]];function Lt({corpus:s,waiting:e,inProgress:t,postToWorker:c,terminateWorker:n}){const{t:l}=W(),o=v.useMemo(()=>kt(s),[s]),[r,h]=v.useState(o.query),[i,m]=v.useState(o.type),[f,w]=v.useState(o.caseInsensitive),[b,k]=v.useState(o.common),[j,R]=v.useState(o.script),[E,M]=v.useState(o.showAllLanguages),[A,g]=v.useState(o.collections),[x,L]=v.useState(o.languages),[y,_]=v.useState((Z("corpus-filtersVisible")??(window.location.hash?"false":"true"))!=="false"),C=v.useMemo(()=>Ae(s),[s]),P=v.useCallback(()=>{const p=C.hashToSearchParams(window.location.hash.substring(1));if(p.query!==void 0&&h(p.query),p.type!==void 0&&m(p.type),p.caseInsensitive!==void 0&&w(p.caseInsensitive),p.common!==void 0&&k(p.common),p.script!==void 0&&R(p.script),p.showAllLanguages!==void 0&&M(p.showAllLanguages),p.collections!==void 0&&g(p.collections),p.languages!==void 0&&L(p.languages),p.id!==void 0&&p.id!==""){const F=p.id.split(".")[0];c({query:`^${be(p.id)}$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(U=>s.getCollection(U).id===F),languages:[ae]});return}if(p.file!==void 0&&p.file!==""){const F=p.file.split(".")[0];c({query:`^${be(p.file)}\\..*$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(U=>s.getCollection(U).id===F),languages:[ae]});return}if(p.run!==void 0&&p.run){const F={query:p.query??o.query,type:p.type??o.type,caseInsensitive:p.caseInsensitive??o.caseInsensitive,common:p.common??o.common,script:p.script??o.script,showAllLanguages:p.showAllLanguages??o.showAllLanguages,collections:p.collections??o.collections,languages:p.languages??o.languages};window.location.hash=C.searchParamsToHash(F),c(F);return}Z("corpus-filtersVisible")===null&&_(!p.query||!p.collections||!p.languages)},[c,o]);v.useEffect(()=>(window.location.hash&&P(),window.addEventListener("hashchange",P),()=>{window.removeEventListener("hashchange",P)}),[P]),v.useEffect(()=>{Y("corpus-params",JSON.stringify({query:r,type:i,caseInsensitive:f,common:b,script:j,showAllLanguages:E,collections:A,languages:x}))},[r,i,f,b,j,E,A,x]);const I=p=>{p.preventDefault(),Z("corpus-filtersVisible")||Y("corpus-filtersVisible",y.toString());const F=document.getElementsByClassName("view-search").item(0);F&&F.scrollHeight>document.body.clientHeight&&_(!1);const U={query:r,type:i,caseInsensitive:f,common:b,script:j,showAllLanguages:E,collections:A,languages:x};window.location.hash=C.searchParamsToHash(U),c(U)},T=()=>{n()},S=()=>{const p=!y;_(p),Y("corpus-filtersVisible",p.toString())},$=p=>{const F=p.target.value;ge(F)&&m(F)},O=e||t||r.length===0||A.length===0||x.length===0,B=v.useMemo(()=>a.jsx(St,{corpus:s,filtersVisible:y,collections:A,setCollections:g,languages:x,setLanguages:L}),[y,A,x]);return a.jsxs("form",{className:"search-form",role:"search",onSubmit:I,children:[a.jsxs("div",{className:"search-bar",children:[a.jsxs("div",{className:"item-group",children:[a.jsx("label",{htmlFor:"query",children:l("query")}),a.jsx("input",{type:"search",name:"query",id:"query",value:r,onChange:p=>{h(p.target.value)}}),a.jsxs("div",{className:"btn-alternate-container",children:[a.jsx("input",{id:"submit",type:"submit",className:t?"invisible":"visible",value:l("search"),disabled:O}),a.jsx("button",{type:"button",className:t?"visible":"invisible",onClick:T,disabled:!t,children:l("cancel")})]}),a.jsx("button",{type:"button",className:y?"active":void 0,onClick:S,children:l("filters")}),a.jsx("select",{name:"type",id:"type",onChange:$,value:i,title:l("searchType.searchType"),"aria-label":l("searchType.searchType"),children:Ct.map(p=>a.jsx("option",{value:p,children:l(`searchType.${p}`)},p))})]}),a.jsxs("div",{className:"item-group search-option-group",children:[a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"caseInsensitive",id:"caseInsensitive",checked:f,onChange:p=>{w(p.target.checked)}}),a.jsx("label",{htmlFor:"caseInsensitive",children:l("caseInsensitive")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"common",id:"common",checked:b,onChange:p=>{k(p.target.checked)}}),a.jsx("label",{htmlFor:"common",children:l("common")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"script",id:"script",checked:j,onChange:p=>{R(p.target.checked)}}),a.jsx("label",{htmlFor:"script",children:l("script")})]}),a.jsxs("div",{className:"search-option",children:[a.jsx("input",{type:"checkbox",name:"showAllLanguages",id:"showAllLanguages",checked:E,onChange:p=>{M(p.target.checked)}}),a.jsx("label",{htmlFor:"showAllLanguages",children:l("showAllLanguages")})]})]})]}),B]})}function Et(s){const e=H.c(10),{src:t,active:c}=s,n=c===void 0?!0:c,l=v.useRef(null);let o,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{l.current?.classList.add("spinner-stopped")},r=[],e[0]=o,e[1]=r):(o=e[0],r=e[1]),v.useEffect(o,r);let h,i;e[2]!==n?(h=()=>{const k=l.current;if(k!==null){const j=()=>{n||k.classList.add("spinner-stopped")};return k.addEventListener("animationiteration",j),()=>{k.removeEventListener("animationiteration",j)}}},i=[n],e[2]=n,e[3]=h,e[4]=i):(h=e[3],i=e[4]),v.useEffect(h,i);const m=n?"spinner-active":"spinner-inactive";let f;e[5]!==m?(f=["spinner",m],e[5]=m,e[6]=f):f=e[6];const w=f.join(" ");let b;return e[7]!==t||e[8]!==w?(b=a.jsx("img",{ref:l,className:w,src:t,alt:""}),e[7]=t,e[8]=w,e[9]=b):b=e[9],b}function Ne(s){const e=H.c(16),{progress:t}=s,{t:c}=W(),n=Math.min(Math.max(0,t*100),100);let l;e[0]!==c?(l=c("progressBar.title"),e[0]=c,e[1]=l):l=e[1];const o=`${n}%`,r=n===0?0:void 0,h=n===0?"hidden":void 0;let i;e[2]!==o||e[3]!==r||e[4]!==h?(i=a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-bar-complete",style:{width:o,maxWidth:r,visibility:h}})}),e[2]=o,e[3]=r,e[4]=h,e[5]=i):i=e[5];let m;e[6]!==t||e[7]!==c?(m=c("progressBar.value",Ye(t)),e[6]=t,e[7]=c,e[8]=m):m=e[8];let f;e[9]!==m?(f=a.jsx("div",{className:"progress-bar-text",children:m}),e[9]=m,e[10]=f):f=e[10];let w;return e[11]!==n||e[12]!==l||e[13]!==i||e[14]!==f?(w=a.jsxs("div",{className:"progress-bar-container",role:"progressbar","aria-label":l,"aria-valuenow":n,children:[i,f]}),e[11]=n,e[12]=l,e[13]=i,e[14]=f,e[15]=w):w=e[15],w}const Pt=s=>{if("share"in navigator){const e=s.currentTarget.href;s.preventDefault(),navigator.share({url:e}).catch(t=>{t instanceof Error&&t.name!=="AbortError"||(console.error(t),window.open(e,"_blank"))})}};function At(s){const e=H.c(6),{hash:t}=s,{t:c}=W();let n;e[0]!==c?(n=c("share"),e[0]=c,e[1]=n):n=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#share"})}),e[2]=l):l=e[2];let o;return e[3]!==t||e[4]!==n?(o=a.jsx("a",{href:t,rel:"bookmark noreferrer",target:"_blank",title:n,onClick:Pt,children:l}),e[3]=t,e[4]=n,e[5]=o):o=e[5],o}function Rt(s){const e=H.c(7),{hash:t,callback:c}=s,{t:n}=W();let l;e[0]!==n?(l=n("viewNearby"),e[0]=n,e[1]=l):l=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#file-lines"})}),e[2]=o):o=e[2];let r;return e[3]!==c||e[4]!==t||e[5]!==l?(r=a.jsx("a",{href:t,rel:"bookmark noreferrer",title:l,onClick:c,children:o}),e[3]=c,e[4]=t,e[5]=l,e[6]=r):r=e[6],r}function Nt(s){const e=H.c(6),{callback:t}=s,{t:c}=W();let n;e[0]!==c?(n=c("copy"),e[0]=c,e[1]=n):n=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#copy"})}),e[2]=l):l=e[2];let o;return e[3]!==t||e[4]!==n?(o=a.jsx("button",{className:"link",title:n,onClick:t,children:l}),e[3]=t,e[4]=n,e[5]=o):o=e[5],o}function Mt(s,e,t,c,n){return s.replaceAll(/<a class="speaker" data-var="(.+?)">(.+?)<\/a>/gu,(l,o,r)=>`<a class="speaker" href="#${e.searchParamsToHash({query:o,type:"exact",caseInsensitive:!1,common:!1,script:!0,showAllLanguages:!1,collections:[t],languages:[c],run:!0})}" title="${n}" translate="yes"><span translate="no">${r}</span></a>`)}const Tt=(s,e)=>e===ae?s.replaceAll(/([._/]|([a-z])(?=[A-Z])|([A-Za-z])(?=[0-9]))/gu,"$1<wbr>"):s;function It(){const s=H.c(4),{t:e}=W();let t;s[0]!==e?(t=e("status.rendering"),s[0]=e,s[1]=t):t=s[1];let c;return s[2]!==t?(c=a.jsx("div",{className:"results-rendering",children:t}),s[2]=t,s[3]=c):c=s[3],c}function $t(s){const e=H.c(7),{id:t}=s,c=`#id=${t}`;let n;e[0]!==c?(n=a.jsx(At,{hash:c}),e[0]=c,e[1]=n):n=e[1];const l=`#file=${t.split(".").slice(0,-1).join(".")}`;let o;e[2]!==l?(o=a.jsx(Rt,{hash:l}),e[2]=l,e[3]=o):o=e[3];let r;return e[4]!==n||e[5]!==o?(r=a.jsx("td",{className:"results-table-actions-cell",translate:"yes",children:a.jsxs("div",{className:"results-table-actions",children:[n,o]})},"actions"),e[4]=n,e[5]=o,e[6]=r):r=e[6],r}function Ft(s){const e=H.c(49),{corpus:t,index:c,collection:n,file:l,languages:o,lines:r,start:h,end:i,showId:m,richText:f,sectionOffset:w,onShowSection:b,searchParamsFactory:k}=s,{t:j}=W();let R;e[0]!==o?(R=o.indexOf(ae),e[0]=o,e[1]=R):R=e[1];const E=R,M=o.map(Ot),A=j("viewSpeaker"),g=t.getCollection(n).speaker!==void 0,x=M.map(Dt),L=x.every(K=>K===x[0]),y=v.useRef(null);let _;e[2]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{const K=y.current,J=window.getSelection();J!==null&&K!==null&&(J.removeAllRanges(),J.selectAllChildren(K),document.execCommand("copy"),J.removeAllRanges())},e[2]=_):_=e[2];const C=_,P=`collection-${t.getCollection(n).id??n.toLowerCase()}`,I=`file-${l}`,T=`rich-text-${f?"enabled":"disabled"}`;let S;e[3]!==n||e[4]!==t||e[5]!==P||e[6]!==I||e[7]!==T?(S=["results-table",P,I,T],t.getCollection(n).softWrap===!0&&S.push("soft"),e[3]=n,e[4]=t,e[5]=P,e[6]=I,e[7]=T,e[8]=S):S=e[8];const $="results-table-container",O=S.join(" ");let B;e[9]!==E?(B=E!==-1&&a.jsx("th",{className:"results-table-actions-cell",children:a.jsx(Nt,{callback:C})}),e[9]=E,e[10]=B):B=e[10];let p;if(e[11]!==o||e[12]!==m||e[13]!==j){let K;e[15]!==m?(K=se=>m||se!==ae,e[15]=m,e[16]=K):K=e[16];let J;e[17]!==j?(J=se=>a.jsx("th",{children:a.jsx("abbr",{title:j(`languages:${se}.name`),children:a.jsx("span",{translate:"no",children:j(`languages:${se}.code`)})})},se),e[17]=j,e[18]=J):J=e[18],p=o.filter(K).map(J),e[11]=o,e[12]=m,e[13]=j,e[14]=p}else p=e[14];let F;e[19]!==B||e[20]!==p?(F=a.jsx("thead",{children:a.jsxs("tr",{children:[B,p]})}),e[19]=B,e[20]=p,e[21]=F):F=e[21];let U;e[22]!==x||e[23]!==L?(U=L&&x[0]!==Q.dir()?x[0]:void 0,e[22]=x,e[23]=L,e[24]=U):U=e[24];const z="no",u=r.map((K,J)=>h<=J&&J<i&&a.jsxs("tr",{"data-id":E!==-1?K[E]:void 0,children:[E!==-1&&a.jsx($t,{id:K[E]}),K.map((se,oe)=>{if(m||o[oe]!==ae)return a.jsx("td",{lang:M[oe],dir:L?void 0:x[oe],dangerouslySetInnerHTML:{__html:Tt(g?Mt(se,k,n,o[oe],A):se,o[oe])}},oe)})]},J));let d;e[25]!==U||e[26]!==u?(d=a.jsx("tbody",{dir:U,translate:z,children:u}),e[25]=U,e[26]=u,e[27]=d):d=e[27];let N;e[28]!==F||e[29]!==d||e[30]!==O?(N=a.jsx("div",{className:$,children:a.jsxs("table",{ref:y,className:O,children:[F,d]})}),e[28]=F,e[29]=d,e[30]=O,e[31]=N):N=e[31];const V=N;let q;e[32]!==c||e[33]!==b||e[34]!==w||e[35]!==h||e[36]!==j?(q=h!==0&&a.jsx("button",{className:"results-notice",onClick:b(w,c),children:j("tablePartial",{count:h})}),e[32]=c,e[33]=b,e[34]=w,e[35]=h,e[36]=j,e[37]=q):q=e[37];const G=h!==i&&V;let ee;e[38]!==i||e[39]!==c||e[40]!==r.length||e[41]!==b||e[42]!==w||e[43]!==j?(ee=i<r.length&&a.jsx("button",{className:"results-notice",onClick:b(w+i,c),children:j("tablePartial",{count:r.length-i})}),e[38]=i,e[39]=c,e[40]=r.length,e[41]=b,e[42]=w,e[43]=j,e[44]=ee):ee=e[44];let te;return e[45]!==q||e[46]!==G||e[47]!==ee?(te=a.jsxs(a.Fragment,{children:[q,G,ee]}),e[45]=q,e[46]=G,e[47]=ee,e[48]=te):te=e[48],te}function Dt(s){return Q.dir(s)}function Ot(s){return s===ae?ft:s}function Vt(s){const{index:e,status:t,header:c,offset:n,limit:l,lines:o,sectionOffset:r,richText:h}=s,i=Math.max(0,Math.min(o.length,n-r)),m=Math.max(0,Math.min(o.length,n+l-r)),f=v.useMemo(()=>{switch(t){case"noLines":return;case"worker":return a.jsx(It,{});case"done":return a.jsx(Ft,{...s,start:i,end:m})}},[t,i,m,h]);return f&&a.jsxs("section",{id:`results-section${e}`,className:"results-section",children:[c&&a.jsx("h2",{children:c}),f]})}function Bt({results:s,headers:e,jumpTo:t,...c}){const n=v.useMemo(()=>Ae(c.corpus),[c.corpus]),l=v.useMemo(()=>{let o=0;const r=[];for(const[h,i]of s.entries()){if(i.status==="initial")break;const m=i.status==="done"&&i.richText;r.push({...c,...i.params,index:h,sectionOffset:o,richText:m,status:i.status,header:e[h],searchParamsFactory:n}),o+=i.params.lines.length}return r},[s,c]);return v.useEffect(()=>{let o=0;for(const[r,h]of s.entries())if(h.status!=="initial"){if(c.offset>=o&&c.offset<o+h.params.lines.length){t(r);break}o+=h.params.lines.length}},[c.offset]),a.jsx("div",{className:"app-window-inner",children:l.map(o=>a.jsx(Vt,{...o},o.index))})}function re(s){const e=document.getElementById("results"),t=document.getElementById(`results-section${s}`),c=e?.firstElementChild;e&&t&&c instanceof HTMLElement&&(e.scrollTop=t.offsetTop-c.offsetTop)}function qt(s){const e=H.c(9),{headers:t}=s,{t:c}=W();let n;e[0]!==c?(n=c("jumpTo"),e[0]=c,e[1]=n):n=e[1];let l;e[2]!==n?(l=a.jsx("option",{value:"",disabled:!0,children:n}),e[2]=n,e[3]=l):l=e[3];let o;e[4]!==t?(o=t.map((h,i)=>h!==void 0&&(i===0||t[i-1]!==h)&&a.jsx("option",{value:i,children:h},i)),e[4]=t,e[5]=o):o=e[5];let r;return e[6]!==l||e[7]!==o?(r=a.jsx("nav",{className:"results-jump",children:a.jsxs("select",{name:"jump",id:"jump",onChange:zt,value:"",children:[l,o]})}),e[6]=l,e[7]=o,e[8]=r):r=e[8],r}function zt(s){re(Number(s.target.value))}function Ut(s){const e=H.c(50),{count:t,offset:c,limit:n,setOffset:l}=s,{t:o}=W(),r=c+1,h=Math.min(t,c+n);let i;e[0]!==t||e[1]!==o||e[2]!==r||e[3]!==h?(i=o("displayedRange.long",{count:t,start:r,end:h}),e[0]=t,e[1]=o,e[2]=r,e[3]=h,e[4]=i):i=e[4];let m;e[5]!==i?(m=a.jsx("span",{className:"results-nav-range-long",children:i}),e[5]=i,e[6]=m):m=e[6];const f=c+1,w=Math.min(t,c+n);let b;e[7]!==t||e[8]!==o||e[9]!==f||e[10]!==w?(b=o("displayedRange.short",{count:t,start:f,end:w}),e[7]=t,e[8]=o,e[9]=f,e[10]=w,e[11]=b):b=e[11];let k;e[12]!==b?(k=a.jsx("span",{className:"results-nav-range-short",children:b}),e[12]=b,e[13]=k):k=e[13];let j;e[14]!==m||e[15]!==k?(j=a.jsxs("div",{children:[m,k]}),e[14]=m,e[15]=k,e[16]=j):j=e[16];const R=c===0;let E;e[17]!==n||e[18]!==c||e[19]!==l?(E=()=>{l(Math.max(0,c-n))},e[17]=n,e[18]=c,e[19]=l,e[20]=E):E=e[20];let M;e[21]!==o?(M=o("loadPrev"),e[21]=o,e[22]=M):M=e[22];let A;e[23]!==n||e[24]!==o?(A=o("icons:loadPrev",{limit:n}),e[23]=n,e[24]=o,e[25]=A):A=e[25];let g;e[26]!==R||e[27]!==E||e[28]!==M||e[29]!==A?(g=a.jsx("button",{className:"button-square",disabled:R,onClick:E,title:M,children:A}),e[26]=R,e[27]=E,e[28]=M,e[29]=A,e[30]=g):g=e[30];const x=c+n>=t;let L;e[31]!==t||e[32]!==n||e[33]!==c||e[34]!==l?(L=()=>{l(Math.min(Math.floor(t/n)*n,c+n))},e[31]=t,e[32]=n,e[33]=c,e[34]=l,e[35]=L):L=e[35];let y;e[36]!==o?(y=o("loadNext"),e[36]=o,e[37]=y):y=e[37];let _;e[38]!==n||e[39]!==o?(_=o("icons:loadNext",{limit:n}),e[38]=n,e[39]=o,e[40]=_):_=e[40];let C;e[41]!==x||e[42]!==L||e[43]!==y||e[44]!==_?(C=a.jsx("button",{className:"button-square",disabled:x,onClick:L,title:y,children:_}),e[41]=x,e[42]=L,e[43]=y,e[44]=_,e[45]=C):C=e[45];let P;return e[46]!==g||e[47]!==C||e[48]!==j?(P=a.jsxs("div",{className:"results-nav",children:[j,g,C]}),e[46]=g,e[47]=C,e[48]=j,e[49]=P):P=e[49],P}const ve={showVariables:0,showAllCharacters:!1,showGender:2,showPlural:0,showGrammar:!0,showFurigana:!0},Wt=()=>{const s=Z("corpus-toggle");if(s===null)return ve;const e={...ve},t=Ce(s);return typeof t=="object"&&t!==null&&("showVariables"in t&&typeof t.showVariables=="number"&&[0,1,2].includes(t.showVariables)&&(e.showVariables=t.showVariables),"showAllCharacters"in t&&typeof t.showAllCharacters=="boolean"&&(e.showAllCharacters=t.showAllCharacters),"showGender"in t&&typeof t.showGender=="number"&&[0,1,2].includes(t.showGender)&&(e.showGender=t.showGender),"showPlural"in t&&typeof t.showPlural=="number"&&[0,1,2].includes(t.showPlural)&&(e.showPlural=t.showPlural),"showGrammar"in t&&typeof t.showGrammar=="boolean"&&(e.showGrammar=t.showGrammar),"showFurigana"in t&&typeof t.showFurigana=="boolean"&&(e.showFurigana=t.showFurigana)),e};function Ht({corpus:s,status:e,progress:t,results:c,showId:n=!0,richText:l=!0,limit:o=ue}){const{t:r}=W(),h=v.useMemo(Wt,[]),[i,m]=v.useState(h.showVariables),[f,w]=v.useState(h.showAllCharacters),[b,k]=v.useState(h.showGender),[j,R]=v.useState(h.showPlural),[E,M]=v.useState(h.showGrammar),[A,g]=v.useState(h.showFurigana),[x,L]=v.useState(null),[y,_]=v.useState(0);v.useEffect(()=>{Y("corpus-toggle",JSON.stringify({showVariables:i,showAllCharacters:f,showGender:b,showPlural:j,showGrammar:E,showFurigana:A}))},[i,f,b,j,E,A]);const C=v.useCallback((p,F)=>()=>{_(p),re(F)},[]),P=v.useMemo(()=>{const p=[];let F="";for(const U of c){if(U.status==="initial"||U.status==="noLines"){p.push(void 0);continue}const{collection:z,file:u}=U.params,d=r("tableHeader",{collection:r(`collections:${z}.name`),file:r(`files:${u}`),interpolation:{escapeValue:!1}});p.push(d===F?void 0:d),F=d}return p},[c,Q.language]),I=v.useMemo(()=>c.reduce((p,F)=>p+(F.status==="initial"?0:F.params.lines.length),0),[c]);I<y&&_(p=>Math.min(p,I));const T=a.jsxs("div",{className:"results-toggle",children:[a.jsx("button",{className:i!==2?"button-square active":"button-square",disabled:!l,onClick:()=>{m((i+1)%3)},title:r("showVariables"),children:a.jsx("span",{translate:"no",children:r("icons:showVariables",{context:i})})}),a.jsx("button",{className:f?"button-square active":"button-square",disabled:!l,onClick:()=>{w(!f)},title:r("showAllCharacters"),children:a.jsx("span",{translate:"no",children:r("icons:showAllCharacters")})}),a.jsx("button",{className:b!==2?"button-square active":"button-square",disabled:!l,onClick:()=>{k((b+1)%3)},title:r("showGender"),children:a.jsx("span",{translate:"no",children:r("icons:showGender",{context:b})})}),a.jsx("button",{className:j!==0?"button-square active":"button-square",disabled:!l,onClick:()=>{R((j+1)%3)},title:r("showPlural"),children:a.jsx("span",{translate:"no",children:r("icons:showPlural",{context:j})})}),a.jsx("button",{className:E?"button-square active":"button-square",disabled:!l,onClick:()=>{M(!E)},title:r("showGrammar"),children:a.jsx("span",{translate:"no",children:r("icons:showGrammar")})}),a.jsx("button",{className:A?"button-square active":"button-square",disabled:!l,onClick:()=>{g(!A)},title:r("showFurigana"),children:a.jsx("span",{className:"results-toggle-furigana",translate:"no",children:r("icons:showFurigana")})})]});v.useEffect(()=>{v.startTransition(()=>{L(a.jsx(Bt,{corpus:s,results:c,headers:P,showId:n,offset:y,limit:o,onShowSection:C,jumpTo:re}))})},[s,c,P,n,y,o,C,re]);const S=Ee(e),$=r(`status.${e.split(".",1)[0]}`),O=v.useMemo(()=>!S&&P.filter(p=>p!==void 0).length>1?a.jsx(qt,{headers:P}):a.jsx("div",{className:"results-status-text",children:$}),[S,P]),B=`app-window variables-${["short","show","hide"][i]} control-${f?"show":"hide"} gender-${b} number-${j} grammar-${E?"show":"hide"} furigana-${A?"show":"hide"}`;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"results-status",children:[O,a.jsx(Et,{src:"logo.svg",active:S}),!S&&I>o?a.jsx(Ut,{count:I,offset:y,limit:o,setOffset:_}):a.jsx(Ne,{progress:t}),T]}),a.jsx("main",{id:"results",className:B,children:x})]})}const Gt={status:"initial"},we="corpus-warn",Kt=2e7;function Jt({loader:s,showModal:e,richText:t,limit:c}){const{t:n}=W(),l=v.useRef(null),o=v.useRef(null),r=v.useRef([]),h=v.useRef(t),i=v.useRef(Z(we)!=="false"),[m,f]=v.useState("initial"),[w,b]=v.useState(0),[k,j]=v.useState(!0),[R,E]=v.useState([]);v.useEffect(()=>{h.current=t;for(const{index:S,params:$}of r.current)g(S,$)},[t]);const M=(S,$)=>{E(O=>{const B=Array().concat(O);for(let p=B.length;p<S;p++)B[p]=Gt;return B[S]=$,B})},A=S=>{M(S.data.index,{status:"done",params:S.data,richText:S.data.richText}),S.data.error&&e({message:n("statusModal.error"),buttons:[{message:n("statusModal.buttons.ok"),autoFocus:!0}]})},g=(S,$)=>{o.current===null&&(console.log("Creating new TextWorker..."),o.current=new ct,o.current.addEventListener("message",A)),o.current.postMessage({...$,index:S,richText:h.current,corpusLiterals:s.corpus.getCollection($.collection).literals})},x=S=>{if(f(S.data.status),b(S.data.progress),j(S.data.showId),"index"in S.data&&"result"in S.data){const{index:$,result:O}=S.data;S.data.result.lines.length===0?M($,{status:"noLines",params:O}):(r.current.push({index:$,params:O}),M($,{status:"worker",params:O}),g($,O))}S.data.complete&&it(S.data.status)&&e({message:n(`statusModal.${S.data.status}`),buttons:[{message:n("statusModal.buttons.ok"),autoFocus:!0}]})},L=v.useCallback(()=>{console.log("Terminating workers!"),l.current!==null&&(l.current.removeEventListener("message",x),l.current.terminate(),l.current=null),o.current!==null&&(o.current.removeEventListener("message",x),o.current.terminate(),o.current=null),f("initial"),b(0),E([]),r.current=[]},[]),y=S=>{E([]),r.current=[],S.query.length>0&&S.collections.length>0&&S.languages.length>0&&(l.current===null&&(console.log("Creating new SearchWorkerManager..."),l.current=new lt,l.current.addEventListener("message",x)),f("waiting"),b(0),l.current.postMessage({...S,serializedCorpus:Re(s.corpus)}))},_=v.useCallback(S=>{if(!i.current){y(S);return}s.getDownloadSizeTotal(S.collections,S.showAllLanguages?void 0:S.languages).then($=>{if($<=Kt){y(S);return}e({message:n("searchModal.message",le($)),checkbox:{message:n("searchModal.checkboxDoNotShowAgain"),checked:!1},buttons:[{message:n("searchModal.buttons.yes"),callback:()=>{y(S)},checkboxCallback:O=>{i.current=!O,Y(we,(!O).toString())}},{message:n("searchModal.buttons.no"),callback:()=>{f("initial")},autoFocus:!0}],cancelCallback:()=>{f("initial")}})}).catch(X)},[s.getDownloadSizeTotal]),C=Ee(m),P=m==="waiting",I=v.useMemo(()=>a.jsx(Lt,{corpus:s.corpus,inProgress:C,waiting:P,postToWorker:_,terminateWorker:L}),[s.corpus,C,P,_,L]),T=v.useMemo(()=>a.jsx(Ht,{corpus:s.corpus,status:m,progress:w,showId:k,richText:t,results:R,limit:c}),[s.corpus,m,w,k,t,R,c]);return a.jsxs("div",{className:"search",children:[I,T]})}function Zt(s){return new Worker("/poke-corpus/assets/cacheManagerWorker-C6FDjb1p.js",{name:s?.name})}function Qt(s){const e=H.c(6),{callback:t}=s,{t:c}=W();let n;e[0]!==c?(n=c("delete"),e[0]=c,e[1]=n):n=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#trash-can"})}),e[2]=l):l=e[2];let o;return e[3]!==t||e[4]!==n?(o=a.jsx("button",{className:"link",title:n,onClick:t,children:l}),e[3]=t,e[4]=n,e[5]=o):o=e[5],o}function Xt(s){const e=H.c(6),{callback:t}=s,{t:c}=W();let n;e[0]!==c?(n=c("refresh"),e[0]=c,e[1]=n):n=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx("svg",{className:"icon",children:a.jsx("use",{href:"sprites.svg#arrows-rotate"})}),e[2]=l):l=e[2];let o;return e[3]!==t||e[4]!==n?(o=a.jsx("button",{className:"link",title:n,onClick:t,children:l}),e[3]=t,e[4]=n,e[5]=o):o=e[5],o}function Yt({cacheStorageEnabled:s,cachedMetadata:e}){const{t}=W(),c=v.useMemo(()=>le(e.reduce((n,[,l])=>n+l,0)),[e]);return a.jsxs("ul",{children:[a.jsx("li",{children:t("cache.storageStatus",{val:t(s?"cache.storageEnabled":"cache.storageDisabled")})}),s&&a.jsx("li",{children:t("cache.filesStored",{count:e.length})}),s&&a.jsx("li",{children:t("cache.storageUsed",c)})]})}function es(s){const e=H.c(9),{loadedBytes:t,totalBytes:c,progress:n}=s,{t:l}=W();let o;e[0]!==t||e[1]!==l||e[2]!==c?(o=l("cache.loading",{message:l("cache.inProgress"),loaded:l("cache.size",le(t)),total:l("cache.size",le(c))}),e[0]=t,e[1]=l,e[2]=c,e[3]=o):o=e[3];let r;e[4]!==n?(r=a.jsx(Ne,{progress:n}),e[4]=n,e[5]=r):r=e[5];let h;return e[6]!==o||e[7]!==r?(h=a.jsxs("div",{className:"cache-entry-notice",children:[o,r]}),e[6]=o,e[7]=r,e[8]=h):h=e[8],h}function ts({corpus:s,cachedMetadata:e,cacheCollections:t,clearCachedFile:c}){const{t:n}=W(),l=v.useMemo(()=>s.collections.map(r=>{const h=e.filter(([[i]])=>r===i);return[r,h.reduce((i,[,m])=>i+m,0),h.every(([,,i])=>i)]}).filter(([,r])=>r>0),[e]);return a.jsx("div",{className:"cache-entry-list",children:e.length>0&&l.map(([o,r,h],i)=>a.jsxs("div",{className:`cache-entry cache-entry-${h?"current":"outdated"}`,children:[a.jsxs("div",{className:"cache-entry-text",children:[a.jsx("div",{children:a.jsx("abbr",{title:n(`collections:${o}.name`),children:a.jsx("span",{translate:"no",children:n(`collections:${o}.short`)})})}),a.jsx("div",{translate:"no",children:n("cache.size",le(r))})]}),a.jsxs("div",{className:"cache-entry-actions",children:[!h&&a.jsx(Xt,{callback:()=>{t(o)}}),a.jsx(Qt,{callback:()=>{c(o)}})]})]},i))})}function ss({active:s,loader:e,showModal:t}){const{t:c}=W(),[n,l]=v.useState(!1),[o,r]=v.useState([]),[h,i]=v.useState(!1),[m,f]=v.useState(0),[w,b]=v.useState(0),[k,j]=v.useState(0),R=v.useRef(null),E=()=>{"caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB?Promise.all([e.getCache(),e.getIndexedDB()]).then(()=>{l(!0)}).catch(()=>{l(!1),r([])}):(l(!1),r([]))},M=T=>{const{status:S,loadedBytes:$,totalBytes:O,requestedCollection:B}=T.data;switch(f($/O),b($),j(O),S){case"loading":return;case"done":console.log("Caching complete");break;case"error":console.log("Caching error");break}R.current?.terminate(),R.current=null,i(!1),x(B)},A=v.useCallback(T=>{"caches"in window&&(i(!0),f(0),b(0),R.current===null&&(console.log("Creating new CacheManagerWorker..."),R.current=new Zt,R.current.addEventListener("message",M),R.current.postMessage({serializedCorpus:Re(e.corpus),requestedCollection:T})))},[e]),g=async(T="background")=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[S,$]=await Promise.all([e.getCache(),e.getIndexedDB()]),O=e.corpus.entries.flatMap(([z,u])=>u.files.flatMap(d=>u.languages.map(N=>[z,N,d]))),B=O.map(([z,u,d])=>e.getFilePath(z,u,d)),p=await Promise.all(B.map(z=>e.getFileCacheOnly(S,$,z).then(async([u,d])=>[u!==void 0?(await u.blob()).size:-1,d])));r(p.map(([z,u],d)=>[O[d],z,u]).filter(([,z])=>z!==-1));const F=new Set(B),U=(await e.getAllLocalFilePaths($)).filter(z=>!F.has(z));await Promise.all(U.map(z=>Promise.all([e.deleteLocalMetadata($,z),S.delete(z)]).then(([u,d])=>{console.debug(u&&d?`Deleted ${z} from cache`:`Failed to delete ${z} from cache`)}))),$.close(),T==="cacheAll"&&p.some(([z,u])=>z===-1||!u)&&P()}},x=T=>{g(T).catch(X)},L=()=>{const T=[];R.current&&(R.current.terminate(),R.current=null),"serviceWorker"in navigator&&T.push(navigator.serviceWorker.ready.then(S=>S.unregister())),"indexedDB"in window&&"databases"in window.indexedDB&&T.push(e.getIndexedDB().then(S=>e.clearLocalMetadata(S).then(()=>g()))),"caches"in window&&T.push(e.getCache().then(S=>S.keys().then($=>Promise.all($.map(O=>S.delete(O)))))),Promise.all(T).then(()=>{console.log("Cache cleared")}).catch(S=>{console.log("Error clearing cache"),console.error(S)})},y=async T=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[S,$]=await Promise.all([e.getCache(),e.getIndexedDB()]),O=e.corpus.getCollection(T);await Promise.all(O.languages.flatMap(B=>O.files.flatMap(p=>{const F=e.getFilePath(T,B,p);return[e.deleteLocalMetadata($,F),S.delete(F)]}))),$.close(),await g()}},_=v.useCallback(T=>{y(T).catch(X)},[]);v.useEffect(()=>{E(),g().catch(X)},[s,e.corpus.entries,e.corpus.metadata]);const C=()=>{e.getDownloadSizeTotal().then(T=>{t({message:c("cache.cacheAllModal.message",le(T)),buttons:[{message:c("cache.cacheAllModal.buttons.yes"),callback:()=>{A("cacheAll")}},{message:c("cache.cacheAllModal.buttons.no"),callback:()=>{i(!1)},autoFocus:!0}],cancelCallback:()=>{i(!1)}})}).catch(X)},P=()=>{t({message:c("cache.cacheAllFailedModal.message"),buttons:[{message:c("cache.cacheAllFailedModal.buttons.ok"),autoFocus:!0}]})},I=()=>{t({message:c("cache.clearCacheModal.message"),buttons:[{message:c("cache.clearCacheModal.buttons.yes"),callback:L},{message:c("cache.clearCacheModal.buttons.no"),autoFocus:!0}]})};return s&&a.jsxs("div",{className:"cache",children:[a.jsxs("div",{className:"cache-button-group item-group",children:[a.jsx("button",{onClick:C,disabled:h!==!1,children:c("cacheAll")}),a.jsx("button",{onClick:I,children:c("clearCache")})]}),a.jsx("div",{className:"cache-results app-window",children:a.jsxs("div",{className:"app-window-inner",children:[a.jsx(Yt,{cacheStorageEnabled:n,cachedMetadata:o}),h?a.jsx(es,{loadedBytes:w,totalBytes:k,progress:m}):a.jsx(ts,{corpus:e.corpus,cachedMetadata:o,cacheCollections:A,clearCachedFile:_})]})})]})}function ns(s){const e=H.c(27),{classes:t,message:c,buttons:n,checkbox:l,cancelCallback:o}=s,[r,h]=v.useState(c!==void 0),[i,m]=v.useState(l?.checked??!1),f=v.useRef(null),w=v.useRef(null);let b;e[0]!==n||e[1]!==r?(b=()=>{const P=f.current,I=w.current;if(P!==null)if(r){if(P.showModal(),n){const T=n.findIndex(os);I!==null&&T!==-1&&Array.from(I.children).filter(as)[T].focus()}}else P.close()},e[0]=n,e[1]=r,e[2]=b):b=e[2];let k;e[3]!==r?(k=[r],e[3]=r,e[4]=k):k=e[4],v.useEffect(b,k);let j;e[5]!==i?(j=(P,I)=>()=>{h(!1),P&&P(),I&&I(i)},e[5]=i,e[6]=j):j=e[6];const R=j;let E;e[7]!==o?(E=()=>{o&&o(),h(!1)},e[7]=o,e[8]=E):E=e[8];const M=E;if(!r)return null;let A;e[9]!==t?(A=["modal"],t&&t.forEach(P=>A.push(P)),e[9]=t,e[10]=A):A=e[10];const g=A.join(" ");let x;e[11]!==c?(x=a.jsx("div",{className:"modal-message",children:c}),e[11]=c,e[12]=x):x=e[12];let L;e[13]!==l||e[14]!==i?(L=l&&a.jsx("div",{className:"modal-checkbox",children:a.jsxs("div",{children:[a.jsx("input",{type:"checkbox",id:"modalCheckbox",name:"modalCheckbox",checked:i,onChange:P=>{m(P.target.checked)}}),a.jsx("label",{htmlFor:"modalCheckbox",children:l.message})]})}),e[13]=l,e[14]=i,e[15]=L):L=e[15];let y;e[16]!==n||e[17]!==R?(y=n?.map((P,I)=>{const{message:T,callback:S,checkboxCallback:$,autoFocus:O}=P;return a.jsx("button",{type:"button",onClick:R(S,$),autoFocus:O,children:T},I)}),e[16]=n,e[17]=R,e[18]=y):y=e[18];let _;e[19]!==y?(_=a.jsx("div",{ref:w,className:"modal-button-group",children:y}),e[19]=y,e[20]=_):_=e[20];let C;return e[21]!==M||e[22]!==g||e[23]!==x||e[24]!==L||e[25]!==_?(C=a.jsxs("dialog",{ref:f,id:"modal",className:g,onCancel:M,children:[x,L,_]}),e[21]=M,e[22]=g,e[23]=x,e[24]=L,e[25]=_,e[26]=C):C=e[26],C}function as(s){return s instanceof HTMLButtonElement}function os(s){return s.autoFocus}function de(){const s=H.c(11),{t:e}=W();let t;s[0]!==e?(t=e("error.title"),s[0]=e,s[1]=t):t=s[1];let c;s[2]!==t?(c=a.jsx("h2",{children:t}),s[2]=t,s[3]=c):c=s[3];let n;s[4]!==e?(n=e("error.message"),s[4]=e,s[5]=n):n=s[5];let l;s[6]!==n?(l=a.jsx("div",{children:n}),s[6]=n,s[7]=l):l=s[7];let o;return s[8]!==c||s[9]!==l?(o=a.jsx("div",{className:"app-window",children:a.jsx("div",{className:"app-window-inner",children:a.jsxs("section",{className:"results-section",children:[c,l]})})}),s[8]=c,s[9]=l,s[10]=o):o=s[10],o}const me="corpus",ie=s=>"/poke-corpus/"+s,ls=ie("data.json"),cs=s=>{const e=g=>m(g).size,t=async(g,x)=>{const[L,y]=await k(g,x);return y?.hash===L.hash?0:L.size},c=async(g=s.collections,x=s.languages)=>{try{const L=await i(),y=(await Promise.all(g.flatMap(_=>s.getCollection(_).languages.filter(C=>x.includes(C)).flatMap(C=>s.getCollection(_).files.map(P=>t(L,ce(_,C,P))))))).reduce((_,C)=>_+C,0);return L.close(),y}catch{return g.flatMap(L=>s.getCollection(L).languages.filter(y=>x.includes(y)).flatMap(y=>s.getCollection(L).files.map(_=>e(ce(L,y,_))))).reduce((L,y)=>L+y,0)}},n=async(g,x,L)=>{const y=ie(L),[_,C]=await k(x,L);if(C?.hash===_.hash||!navigator.onLine&&C?.hash!==void 0){const T=await M(g,y);if(T!==void 0)return T}const P=await fetch(y);return P.ok?(await A(g,y,P).then(async T=>{T&&await w(x,L)}),P):await M(g,y)??null},l=async(g,x,L)=>{const y=ie(L),[_,C]=await k(x,L);return C!==void 0?[await M(g,y),C.hash===_.hash]:[void 0,!1]},o=async g=>{const x=ie(g),L=await fetch(x);return L.ok?L:null},r="corpus",h="files",i=async()=>{const g=indexedDB.open(r);return new Promise((x,L)=>{g.onupgradeneeded=()=>{g.result.createObjectStore(h),g.transaction!==null&&(g.transaction.oncomplete=()=>{console.log("Created object store")})},g.onsuccess=()=>{x(g.result)},g.onerror=()=>{L(g.error)}})},m=g=>s.metadata[g],f=async(g,x)=>{const _=g.transaction([h],"readonly").objectStore(h).get(x);return new Promise((C,P)=>{_.onsuccess=()=>{C(gt(_.result)?_.result:void 0)},_.onerror=()=>{P(_.error)}})},w=async(g,x)=>{const _=g.transaction([h],"readwrite").objectStore(h).put(m(x),x);return new Promise((C,P)=>{_.onsuccess=()=>{C(_.result===x)},_.onerror=()=>{P(_.error)}})},b=async(g,x)=>{const _=g.transaction([h],"readwrite").objectStore(h).delete(x);return new Promise((C,P)=>{_.onsuccess=()=>{C(!0)},_.onerror=()=>{P(_.error)}})},k=async(g,x)=>[m(x),await f(g,x)],j=async g=>{const y=g.transaction(["files"],"readwrite").objectStore("files").clear();return g.close(),new Promise((_,C)=>{y.onsuccess=()=>{_(!0)},y.onerror=()=>{C(y.error)}})},R=async g=>{const y=g.transaction([h],"readonly").objectStore(h).getAllKeys();return g.close(),new Promise((_,C)=>{y.onsuccess=()=>{_(y.result.filter(P=>typeof P=="string"))},y.onerror=()=>{C(y.error)}})},E=async()=>await caches.open(me),M=async(g,x)=>{try{return await g.match(x)}catch(L){console.error(L);return}},A=async(g,x,L)=>{try{return await g.put(x,L.clone()),!0}catch(y){return console.error(y),!1}};return{corpus:s,getFilePath:ce,getFileSize:e,getDownloadSizeTotal:c,getFile:n,getFileCacheOnly:l,getFileRemote:o,getIndexedDB:i,deleteLocalMetadata:b,clearLocalMetadata:j,getAllLocalFilePaths:R,getCache:E}};function rs(s){return cs(s)}function is(s,e=ls){const t=()=>{s(c=>c===void 0?null:c)};Promise.all([us(e).then(c=>{s(n=>n===void 0&&c!==null?c:n)}).catch(X),hs(e).then(c=>{s(n=>c??n)}).catch(X)]).then(t,t)}async function us(s){if("caches"in window){const t=await(await caches.open(me)).match(s);if(t?.ok)return Me(t)}return null}async function hs(s){const e=await fetch(s);if(!e.ok)return null;if("caches"in window){const t=e.clone();caches.open(me).then(c=>c.put(s,t)).catch(X)}return Me(e)}async function Me(s){const e=await s.json(),t=pt(e);return rs(t)}const ye="Search";function ds(s){const e=H.c(15),{showModal:t,richText:c,setRichText:n,limit:l,setLimit:o,reset:r}=s,{t:h}=W();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx("img",{className:"header-logo",src:"logo.svg",alt:"",height:"40",width:"40"}),e[0]=i):i=e[0];let m;e[1]!==h?(m=h("title",{version:h("version")}),e[1]=h,e[2]=m):m=e[2];let f;e[3]!==r||e[4]!==m?(f=a.jsx("h1",{children:a.jsxs("a",{href:"/poke-corpus/",onClick:r,children:[i," ",m]})}),e[3]=r,e[4]=m,e[5]=f):f=e[5];let w;e[6]!==l||e[7]!==c||e[8]!==o||e[9]!==n||e[10]!==t?(w=a.jsx(fe,{fallback:null,children:a.jsx(ot,{showModal:t,richText:c,setRichText:n,limit:l,setLimit:o})}),e[6]=l,e[7]=c,e[8]=o,e[9]=n,e[10]=t,e[11]=w):w=e[11];let b;return e[12]!==f||e[13]!==w?(b=a.jsxs("header",{className:"header",children:[f,w]}),e[12]=f,e[13]=w,e[14]=b):b=e[14],b}function fs(s){const e=H.c(26),{view:t,switchView:c}=s,{t:n}=W();let l;e[0]!==n?(l=n("tagline"),e[0]=n,e[1]=l):l=e[1];let o;e[2]!==l?(o=a.jsx("span",{children:l}),e[2]=l,e[3]=o):o=e[3];let r;e[4]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[4]=r):r=e[4];let h;e[5]!==n?(h=n("footerText"),e[5]=n,e[6]=h):h=e[6];let i;e[7]!==h?(i=a.jsx("span",{children:h}),e[7]=h,e[8]=i):i=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[9]=m):m=e[9];const f=t!=="Search"?"backToSearch":"manageCache";let w;e[10]!==n||e[11]!==f?(w=n(f),e[10]=n,e[11]=f,e[12]=w):w=e[12];let b;e[13]!==c||e[14]!==w?(b=a.jsx("span",{children:a.jsx("button",{className:"link",onClick:c,children:w})}),e[13]=c,e[14]=w,e[15]=b):b=e[15];let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k=a.jsx("span",{className:"separator",translate:"no",children:" | "}),e[16]=k):k=e[16];let j;e[17]!==n?(j=n("github"),e[17]=n,e[18]=j):j=e[18];let R;e[19]!==j?(R=a.jsx("span",{children:a.jsx("a",{href:"https://github.com/abcboy101/poke-corpus",children:j})}),e[19]=j,e[20]=R):R=e[20];let E;return e[21]!==R||e[22]!==o||e[23]!==i||e[24]!==b?(E=a.jsxs("footer",{children:[o,r,i,m,b,k,R]}),e[21]=R,e[22]=o,e[23]=i,e[24]=b,e[25]=E):E=e[25],E}function gs(){const[s,e]=v.useState(Xe),[t,c]=v.useState(Qe),[n,l]=v.useState(ye),[o,r]=v.useState(0),[h,i]=v.useState(0),[m,f]=v.useState(null),[w,b]=v.useState(!1),[k,j]=v.useState(void 0);v.useEffect(()=>{const g=ke();document.body.classList.add(`mode-${g}`),b(!0),is(j)},[]);const R=v.useCallback(g=>{window.location.hash="",Ke("corpus-params"),l(ye),r(x=>x+1&255),i(0),f(null),g.preventDefault()},[]),E=v.useCallback(g=>{f(g),i(x=>x+1&255)},[]),M=v.useCallback(()=>{l(g=>{const x=g!=="Search"?"Search":"CacheManager";return w||b(x==="CacheManager"),x})},[]);if(k===void 0)return;const A=["app",`view-${n.toLowerCase()}`];return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&A.push("ua-safari"),a.jsxs("div",{className:A.join(" "),lang:Q.language,dir:Q.dir(),children:[a.jsx(ds,{showModal:E,richText:s,setRichText:e,limit:t,setLimit:c,reset:R}),k!==null?a.jsxs(fe,{FallbackComponent:de,children:[a.jsx(Jt,{loader:k,showModal:E,richText:s,limit:t}),a.jsx(ss,{active:n==="CacheManager",loader:k,showModal:E})]}):a.jsx(de,{}),a.jsx(fs,{view:n,switchView:M}),a.jsx(ns,{...m},h)]},o)}function ms(){const s=H.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=a.jsx("div",{className:"app",children:a.jsx(de,{})}),s[0]=e):e=s[0],e}const ps=De.createRoot(document.getElementById("root"));ps.render(a.jsx(Fe.StrictMode,{children:a.jsx(fe,{FallbackComponent:ms,children:a.jsx(gs,{})})}));Ge({onOfflineReady(){console.log("Ready to work offline!")}});
