import{r as h,t as De,c as J,j as o,a as Oe,i as ce,B as Ve,b as Be,d as qe,T as ze,u as Le,E as pe,R as Ue}from"./vendor-ukweU-MP.js";import{R as We}from"./react-dom-Bs0UPXy3.js";import{t as He,a as Ge,i as Ke,f as Je,l as Ze,c as Qe,b as Xe}from"./i18n-en-qGE47owu.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(c){if(c.ep)return;c.ep=!0;const l=t(c);fetch(c.href,l)}})();const Ye="modulepreload",et=function(s){return"/poke-corpus/"+s},je={},B=function(e,t,a){let c=Promise.resolve();if(t&&t.length>0){let u=function(i){return Promise.all(i.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");c=u(t.map(i=>{if(i=et(i),i in je)return;je[i]=!0;const f=i.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":Ye,f||(p.as="script"),p.crossOrigin="",p.href=i,r&&p.setAttribute("nonce",r),document.head.appendChild(p),f)return new Promise((_,w)=>{p.addEventListener("load",_),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${i}`)))})}))}function l(n){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n}return c.then(n=>{for(const r of n||[])r.status==="rejected"&&l(r.reason);return e().catch(l)})};function tt(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:a,onRegistered:c,onRegisteredSW:l,onRegisterError:n}=s;let r,u;const i=async(m=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(r=await B(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/poke-corpus/sw.js",{scope:"/poke-corpus/",type:"classic"})).catch(m=>{n?.(m)}),!r)return;r.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),r.addEventListener("installed",m=>{m.isUpdate||a?.()}),r.register({immediate:e}).then(m=>{l?l("/poke-corpus/sw.js",m):c?.(m)}).catch(m=>{n?.(m)})}}return u=f(),i}const we=s=>s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");function Y(s){try{return localStorage.getItem(s)}catch{return null}}function te(s,e){try{localStorage.setItem(s,e)}catch{return}}function st(s){try{localStorage.removeItem(s)}catch{return}}const Ee=["system","light","dark"],Pe=s=>Ee.some(e=>s===e),nt=s=>typeof s=="string"&&Pe(s)?s:"system",Ae=()=>nt(Y("mode")),fe=500,ot=s=>!Number.isNaN(s)&&Number.isInteger(s)&&s>0,at=()=>{const s=+(Y("corpus-limit")??fe);return Number.isNaN(s)?fe:s},lt=()=>Y("corpus-richText")!=="false",ve=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"];function ae(s){const e=Math.min(Math.floor((s.toString().length-1)/3),ve.length-1),t={style:"unit",unit:ve[e],unitDisplay:e===0?"long":"short",minimumFractionDigits:e===0?0:1,maximumFractionDigits:1,maximumSignificantDigits:3,roundingPriority:"lessPrecision"};return{amount:s/Math.pow(1e3,e),formatParams:{amount:t}}}function ct(s,e=1){return{amount:s,formatParams:{amount:{style:"percent",minimumFractionDigits:e,maximumFractionDigits:e}}}}function Re(s){try{return JSON.parse(s)}catch(e){return console.error(e),null}}function ee(s){console.error(s)}const rt=[{code:"en",name:"English (United States)"},{code:"en-GB",name:"English (United Kingdom)"},{code:"ja",name:"日本語"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français (France)"},{code:"fr-CA",name:"Français (Canada)"},{code:"es",name:"Español (España)"},{code:"it",name:"Italiano"},{code:"ko",name:"한국어"},{code:"zh-Hans",name:"简体中文"},{code:"zh-Hant",name:"繁体中文"}],G=h.createContext(De);function it(s){const e=J.c(60),{showModal:t,language:a,setLanguage:c,richText:l,richTextRef:n,limit:r,limitRef:u}=s,i=h.useContext(G),[f,m]=h.useState(Ae);let p;e[0]!==c||e[1]!==t?(p=d=>{Oe(d.target.value,b=>{b?.some(ht)?(console.error(b),t({message:"options.network",buttons:[{message:"options.close",autoFocus:!0}]})):c(d.target.value)}).catch(ee)},e[0]=c,e[1]=t,e[2]=p):p=e[2];const _=p;let w;e[3]!==f?(w=d=>{const b=d.target.value;Pe(b)&&(m(b),te("mode",b),document.body.classList.replace(`mode-${f}`,`mode-${b}`))},e[3]=f,e[4]=w):w=e[4];const v=w,L=dt;let M;e[5]!==i?(M=i("options.language"),e[5]=i,e[6]=M):M=e[6];let E;e[7]!==M?(E=o.jsx("label",{htmlFor:"language",children:M}),e[7]=M,e[8]=E):E=e[8];let A;e[9]===Symbol.for("react.memo_cache_sentinel")?(A=rt.map(ut),e[9]=A):A=e[9];let g;e[10]!==a||e[11]!==_?(g=o.jsx("select",{name:"language",id:"language",onChange:_,defaultValue:a,autoFocus:!0,translate:"no",children:A}),e[10]=a,e[11]=_,e[12]=g):g=e[12];let y;e[13]!==i?(y=i("options.mode"),e[13]=i,e[14]=y):y=e[14];let j;e[15]!==y?(j=o.jsx("label",{htmlFor:"mode",children:y}),e[15]=y,e[16]=j):j=e[16];let C;e[17]!==i?(C=Ee.map(d=>o.jsx("option",{value:d,children:i(`options.modes.${d}`)},d)),e[17]=i,e[18]=C):C=e[18];let S;e[19]!==f||e[20]!==v||e[21]!==C?(S=o.jsx("select",{name:"mode",id:"mode",onChange:v,defaultValue:f,children:C}),e[19]=f,e[20]=v,e[21]=C,e[22]=S):S=e[22];let P;e[23]!==i?(P=i("options.longURL"),e[23]=i,e[24]=P):P=e[24];let R;e[25]!==P?(R=o.jsx("label",{htmlFor:"longURL",children:P}),e[25]=P,e[26]=R):R=e[26];let F,N;e[27]===Symbol.for("react.memo_cache_sentinel")?(F=Y("corpus-longURL")??"false",N=["true","false"],e[27]=F,e[28]=N):(F=e[27],N=e[28]);let $;e[29]!==i?($=o.jsx("select",{name:"longURL",id:"longURL",onChange:L,defaultValue:F,children:N.map(d=>o.jsx("option",{value:d,children:i(`options.longURLSelect.${d}`)},d))}),e[29]=i,e[30]=$):$=e[30];let k;e[31]!==i?(k=i("options.richText"),e[31]=i,e[32]=k):k=e[32];let T;e[33]!==k?(T=o.jsx("label",{htmlFor:"richText",children:k}),e[33]=k,e[34]=T):T=e[34];const q=l?"true":"false";let W;e[35]===Symbol.for("react.memo_cache_sentinel")?(W=["true","false"],e[35]=W):W=e[35];let x;e[36]!==i?(x=W.map(d=>o.jsx("option",{value:d,children:i(`options.richTextSelect.${d}`)},d)),e[36]=i,e[37]=x):x=e[37];let D;e[38]!==n||e[39]!==q||e[40]!==x?(D=o.jsx("select",{ref:n,name:"richText",id:"richText",defaultValue:q,children:x}),e[38]=n,e[39]=q,e[40]=x,e[41]=D):D=e[41];let V;e[42]!==i?(V=i("options.limit"),e[42]=i,e[43]=V):V=e[43];let H;e[44]!==V?(H=o.jsx("label",{htmlFor:"limit",children:V}),e[44]=V,e[45]=H):H=e[45];let O;e[46]!==r||e[47]!==u?(O=o.jsx("input",{ref:u,type:"number",name:"limit",id:"limit",min:1,defaultValue:r}),e[46]=r,e[47]=u,e[48]=O):O=e[48];let Z;return e[49]!==S||e[50]!==R||e[51]!==$||e[52]!==T||e[53]!==D||e[54]!==H||e[55]!==O||e[56]!==E||e[57]!==g||e[58]!==j?(Z=o.jsx("div",{className:"options",children:o.jsxs("div",{className:"options-grid",children:[E,g,j,S,R,$,T,D,H,O]})}),e[49]=S,e[50]=R,e[51]=$,e[52]=T,e[53]=D,e[54]=H,e[55]=O,e[56]=E,e[57]=g,e[58]=j,e[59]=Z):Z=e[59],Z}function ut(s){return o.jsx("option",{value:s.code,lang:s.code,children:s.name},s.code)}function dt(s){const e=s.target.value;(e==="true"||e==="false")&&te("corpus-longURL",e)}function ht(s){return!s.message.includes("Unknown variable dynamic import")}function ft(s){const e=J.c(21),t=h.useContext(G),{showModal:a,setRichText:c,setLimit:l}=s,n=h.useRef(null),r=h.useRef(null);let u;e[0]!==l||e[1]!==c?(u=()=>{if(n.current!==null){const A=n.current.value;(A==="true"||A==="false")&&(te("corpus-richText",A),c(A!=="false"))}if(r.current!==null){const A=r.current.valueAsNumber;ot(A)&&(te("corpus-limit",A.toString()),l(A))}},e[0]=l,e[1]=c,e[2]=u):u=e[2];const i=u;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=["modal-options"],e[3]=f):f=e[3];let m;e[4]!==s?(m=o.jsx(it,{...s,richTextRef:n,limitRef:r}),e[4]=s,e[5]=m):m=e[5];let p;e[6]!==i?(p=[{message:"options.close",callback:i}],e[6]=i,e[7]=p):p=e[7];let _;e[8]!==i||e[9]!==m||e[10]!==p?(_={classes:f,messageElement:m,buttons:p,cancelCallback:i},e[8]=i,e[9]=m,e[10]=p,e[11]=_):_=e[11];const w=_;let v;e[12]!==w||e[13]!==a?(v=()=>{a(w)},e[12]=w,e[13]=a,e[14]=v):v=e[14];let L;e[15]===Symbol.for("react.memo_cache_sentinel")?(L=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#gear"})}),e[15]=L):L=e[15];let M;e[16]!==t?(M=t("options.options"),e[16]=t,e[17]=M):M=e[17];let E;return e[18]!==v||e[19]!==M?(E=o.jsxs("button",{className:"header-options",onClick:v,children:[L,M]}),e[18]=v,e[19]=M,e[20]=E):E=e[20],E}function mt(s){return new Worker("/poke-corpus/assets/searchWorkerManager-Dy84kqIU.js",{name:s?.name})}function gt(s){return new Worker("/poke-corpus/assets/textWorker-WCP-M7BK.js",{name:s?.name})}const pt=["error","regex","noMatch","network","boolean.parentheses","boolean.regex","boolean.slash","boolean.quote","boolean.operand","boolean.empty","boolean.where"],xt=s=>pt.some(e=>s===e),bt=["waiting","loading","processing","collecting"],Me=s=>bt.some(e=>s===e),se=["exact","regex","boolean","all"],xe=s=>se.some(e=>s===e),Ne={id:"",file:"",query:"",type:"all",caseInsensitive:!0,common:!0,script:!0,showAllLanguages:!0,run:!1},jt=s=>({...Ne,collections:s.collections.filter(e=>s.getCollection(e).structured),languages:s.languages}),wt=s=>{function e(d){const b={};return d.id!==void 0&&(b.id=d.id),d.file!==void 0&&(b.file=d.file),d.run!==void 0&&(b.run=d.run.toString()),new URLSearchParams({query:d.query,type:d.type,caseInsensitive:d.caseInsensitive.toString(),common:d.common.toString(),script:d.script.toString(),showAllLanguages:d.showAllLanguages.toString(),collections:d.collections.join(","),languages:d.languages.join(","),...b}).toString()}function t(d){const b=new URLSearchParams(d);return{id:a(b.get("id")),file:a(b.get("file")),query:a(b.get("query")),type:l(b.get("type")??(b.get("regex")==="true"?"regex":null),xe),caseInsensitive:c(b.get("caseInsensitive")),common:c(b.get("common")),script:c(b.get("script")),showAllLanguages:c(b.get("showAllLanguages")),collections:n(b.get("collections"),s.isCollectionKey),languages:n(b.get("languages"),s.isLanguageKey,r),run:c(b.get("run"))}}function a(d){return d??void 0}function c(d){switch(d){case"true":return!0;case"false":return!1}}function l(d,b){if(d!==null&&b(d))return d}function n(d,b,I=z=>z){if(d!==null)return d.split(",").map(I).filter(b)}function r(d){switch(d){case"qid-ZZ":case"ja-JP":case"en-US":case"fr-FR":case"it-IT":case"de-DE":case"es-ES":case"ko-KR":return d.split("-",1)[0];case"ja-Hrkt-JP":return"ja-Hrkt";case"zh-CN":return"zh-Hans";case"zh-TW":return"zh-Hant";default:return d}}const u=s.languages.filter(d=>d!=="en-AU"),i=s.collections,f=i.length^u.length<<4,m=2,p=Math.ceil(u.length/8),_=Math.ceil(i.length/8),w=p+_,v=64,L=Math.ceil(Math.log2(u.length+i.length)),M=m+w,E=d=>btoa(String.fromCodePoint(...d)).replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),A=d=>Uint8Array.from(atob(d.replaceAll("_","/").replaceAll("-","+")),b=>b.charCodeAt(0));function g(d){const b={};d.id!==void 0&&(b.id=d.id),d.file!==void 0&&(b.file=d.file);const I=j(d);return q(I),new URLSearchParams({...b,q:d.query,s:E(I)}).toString()}function y(d){const b=new URLSearchParams(d),I={id:a(b.get("id")),file:a(b.get("file")),query:a(b.get("q"))},z=a(b.get("s"));if(!z)return I;try{const U=A(z).subarray(0,M);return W(U),{...I,...C(U)}}catch{return I}}function j(d){d={...d,languages:d.languages.map(U=>U==="en-AU"?"en-GB":U)};const b=new Uint8Array(M);b[1]=+(d.run??Ne.run)<<0|+d.caseInsensitive<<1|+d.common<<2|+d.script<<3|se.indexOf(d.type)<<4|+!d.showAllLanguages<<7;const I=b.subarray(m);S(d,I),R(I,b.subarray(1,2));let z=b.length;for(;b[z-1]===0&&z>1;)z--;return b.subarray(0,z)}function C(d){const b=new Uint8Array(w);d[1]&v?P(d.subarray(m),b):b.set(d.subarray(m));const I=u.filter((K,Q)=>T(b,Q)),z=i.filter((K,Q)=>T(b,8*p+Q)),U=I.indexOf("en-GB");return U!==-1&&I.splice(U+1,0,"en-AU"),{run:(d[1]&1)!==0,caseInsensitive:(d[1]&2)!==0,common:(d[1]&4)!==0,script:(d[1]&8)!==0,type:se[(d[1]&48)>>4],showAllLanguages:(d[1]&128)===0,languages:I,collections:z}}function S(d,b){u.forEach((I,z)=>{d.languages.includes(I)&&$(b,z)}),i.forEach((I,z)=>{d.collections.includes(I)&&$(b,8*p+z)})}function P(d,b){const I=N(d);u.forEach((z,U)=>{I.next().value&&$(b,U)}),i.forEach((z,U)=>{I.next().value&&$(b,8*p+U)})}function R(d,b){const I=T(d,0),z=F(d,I);let U=d.length;for(;d[U-1]===0;)U--;if(1+z.length*L<8*U){b[0]|=v,d.fill(0),I||$(d,0);let K=1;z.forEach(([Q])=>{for(let X=0;X<L;K++,X++)$(d,K,Q>>X&1)})}}function F(d,b){const I=[[0,b]];return u.forEach((z,U)=>{const K=T(d,U);I[I.length-1][1]===K?I[I.length-1][0]++:I.push([1,K])}),i.forEach((z,U)=>{const K=T(d,8*p+U);I[I.length-1][1]===K?I[I.length-1][0]++:I.push([1,K])}),I.pop(),I}function*N(d){const b=new Uint8Array(w);b.set(d);let I=!T(b,0);for(let z=1;z+L<=b.length*8;){let U=0;for(let K=0;K<L;z++,K++)U|=k(b,z)<<K;if(U===0)break;for(;U>0;)yield I,U--;I=!I}for(;;)yield I}function $(d,b,I=1){d[b>>3]|=I<<(b&7)}function k(d,b){return d[b>>3]>>(b&7)&1}function T(d,b){return k(d,b)===1}function q(d){const b=d[0]=x(d);D(b,d)}function W(d){const b=d[0];if(D(b,d),b!==x(d))throw Error("invalid checksum")}function x(d,b=1){return d.subarray(b).reduce((I,z)=>I+z&255,0)^f&255}function D(d,b,I=1){let z=V(d);for(let U=I;U<b.length;U++)b[U]^=z>>24,z=H(z)}const V=d=>2480367069*d&4294967295,H=d=>2438952949*d+2654435769&4294967295;function O(d){return(Y("corpus-longURL")==="true"?e:g)(d)}function Z(d){const b=new URLSearchParams(d);return(b.get("q")||b.get("s")?y:t)(d)}return{_bytesBase64:M,_searchParamsToQueryString:e,_queryStringToSearchParams:t,_searchParamsToBase64:g,_base64ToSearchParams:y,_serializeByteArray:j,_deserializeByteArray:C,_encryptBytes:q,_decryptBytes:W,searchParamsToHash:O,hashToSearchParams:Z}};function Te(s){return wt(s)}const ne="qid",vt="zxx",yt=s=>s!==null&&typeof s=="object"&&"hash"in s&&typeof s.hash=="string"&&"size"in s&&typeof s.size=="number",_t=s=>{const e=Object.entries(s.corpus.collections);return Object.fromEntries(e.flatMap(([t,a])=>a.languages.flatMap(c=>a.files.map(l=>re(t,c,l)))).map((t,a)=>[t,{hash:s.hashes[a],size:s.sizes[a]}]))},St=s=>{const e=s.corpus,t=Object.keys(e.collections),a=Object.entries(e.collections),c=_t(s);return{_corpus:e,collections:t,languages:e.languages,entries:a,metadata:c,getCollection:l=>e.collections[l],isCollectionKey:l=>t.some(n=>l===n),isLanguageKey:l=>e.languages.some(n=>l===n)}},re=(s,e,t)=>`corpus/${s}/${e}_${t}.txt.gz`;function Ie(s){return{corpus:s._corpus,metadata:s.metadata}}const Ct=(s,e,t)=>{const a=s[e];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((c,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})};ce.use(Ve).use(Be).use(qe((s,e)=>Ct(Object.assign({"./de/collections.json":()=>B(()=>import("./i18n-de-BcN0GJMd.js").then(t=>t.c),[]),"./de/files.json":()=>B(()=>import("./i18n-de-BcN0GJMd.js").then(t=>t.f),[]),"./de/languages.json":()=>B(()=>import("./i18n-de-BcN0GJMd.js").then(t=>t.l),[]),"./de/translation.json":()=>B(()=>import("./i18n-de-BcN0GJMd.js").then(t=>t.t),[]),"./en-GB/translation.json":()=>B(()=>import("./i18n-en-qGE47owu.js").then(t=>t.m),[]),"./en/collections.json":()=>B(()=>import("./i18n-en-qGE47owu.js").then(t=>t.e),[]),"./en/files.json":()=>B(()=>import("./i18n-en-qGE47owu.js").then(t=>t.h),[]),"./en/icons.json":()=>B(()=>import("./i18n-en-qGE47owu.js").then(t=>t.j),[]),"./en/languages.json":()=>B(()=>import("./i18n-en-qGE47owu.js").then(t=>t.g),[]),"./en/translation.json":()=>B(()=>import("./i18n-en-qGE47owu.js").then(t=>t.d),[]),"./en/tutorial.json":()=>B(()=>import("./i18n-en-qGE47owu.js").then(t=>t.k),[]),"./es/collections.json":()=>B(()=>import("./i18n-es-DsLzCuXw.js").then(t=>t.c),[]),"./es/files.json":()=>B(()=>import("./i18n-es-DsLzCuXw.js").then(t=>t.f),[]),"./es/languages.json":()=>B(()=>import("./i18n-es-DsLzCuXw.js").then(t=>t.l),[]),"./es/translation.json":()=>B(()=>import("./i18n-es-DsLzCuXw.js").then(t=>t.t),[]),"./es/tutorial.json":()=>B(()=>import("./i18n-es-DsLzCuXw.js").then(t=>t.a),[]),"./fr-CA/translation.json":()=>B(()=>import("./i18n-fr-DQgfjSxY.js").then(t=>t.t),[]),"./fr/collections.json":()=>B(()=>import("./i18n-fr-DQgfjSxY.js").then(t=>t.c),[]),"./fr/files.json":()=>B(()=>import("./i18n-fr-DQgfjSxY.js").then(t=>t.f),[]),"./fr/languages.json":()=>B(()=>import("./i18n-fr-DQgfjSxY.js").then(t=>t.l),[]),"./fr/translation.json":()=>B(()=>import("./i18n-fr-DQgfjSxY.js").then(t=>t.a),[]),"./it/collections.json":()=>B(()=>import("./i18n-it-D_xfw80B.js").then(t=>t.c),[]),"./it/files.json":()=>B(()=>import("./i18n-it-D_xfw80B.js").then(t=>t.f),[]),"./it/languages.json":()=>B(()=>import("./i18n-it-D_xfw80B.js").then(t=>t.l),[]),"./it/translation.json":()=>B(()=>import("./i18n-it-D_xfw80B.js").then(t=>t.t),[]),"./ja/collections.json":()=>B(()=>import("./i18n-ja-BReQCo78.js").then(t=>t.c),[]),"./ja/files.json":()=>B(()=>import("./i18n-ja-BReQCo78.js").then(t=>t.f),[]),"./ja/icons.json":()=>B(()=>import("./i18n-ja-BReQCo78.js").then(t=>t.i),[]),"./ja/languages.json":()=>B(()=>import("./i18n-ja-BReQCo78.js").then(t=>t.l),[]),"./ja/translation.json":()=>B(()=>import("./i18n-ja-BReQCo78.js").then(t=>t.t),[]),"./ja/tutorial.json":()=>B(()=>import("./i18n-ja-BReQCo78.js").then(t=>t.a),[]),"./ko/collections.json":()=>B(()=>import("./i18n-ko-DbJi2bri.js").then(t=>t.c),[]),"./ko/files.json":()=>B(()=>import("./i18n-ko-DbJi2bri.js").then(t=>t.f),[]),"./ko/languages.json":()=>B(()=>import("./i18n-ko-DbJi2bri.js").then(t=>t.l),[]),"./ko/translation.json":()=>B(()=>import("./i18n-ko-DbJi2bri.js").then(t=>t.t),[]),"./zh-Hans/collections.json":()=>B(()=>import("./i18n-zh-Bcnx9R0v.js").then(t=>t.c),[]),"./zh-Hans/files.json":()=>B(()=>import("./i18n-zh-Bcnx9R0v.js").then(t=>t.f),[]),"./zh-Hans/languages.json":()=>B(()=>import("./i18n-zh-Bcnx9R0v.js").then(t=>t.l),[]),"./zh-Hans/translation.json":()=>B(()=>import("./i18n-zh-Bcnx9R0v.js").then(t=>t.t),[]),"./zh-Hant/collections.json":()=>B(()=>import("./i18n-zh-Bcnx9R0v.js").then(t=>t.a),[]),"./zh-Hant/files.json":()=>B(()=>import("./i18n-zh-Bcnx9R0v.js").then(t=>t.b),[]),"./zh-Hant/languages.json":()=>B(()=>import("./i18n-zh-Bcnx9R0v.js").then(t=>t.d),[]),"./zh-Hant/translation.json":()=>B(()=>import("./i18n-zh-Bcnx9R0v.js").then(t=>t.e),[])}),`./${s}/${e}.json`,3))).init({keySeparator:".",nsSeparator:":",fallbackLng:"en",ns:["translation","collections","languages","files","icons","tutorial"],resources:{en:{translation:Xe,collections:Qe,languages:Ze,files:Je,icons:Ke,tutorial:Ge},"en-GB":{translation:He}},partialBundledLanguages:!0,detection:{order:["querystring","localStorage","navigator"]},react:{hashTransKey:()=>!1}}).catch(ee);function me(s,e=4){let t=0;for(let a=0;a<s.length;a++)t+=s.charCodeAt(a)>255?1:.5;return t<=e?void 0:{fontSize:`${e*100/t}%`,scale:`1 ${t/e}`,whiteSpace:"nowrap"}}function kt(s,e){if(e.length===0)return new Set(s.collections);const t=new Set,a=new Set(e);for(const[c,l]of s.entries)l.languages.some(n=>a.has(n))&&t.add(c);return t}function Lt(s,e){if(e.length===0)return new Set(s.languages);const t=new Set;for(const a of e)for(const c of s.getCollection(a).languages)t.add(c);return t}function Et(s){const e=J.c(38),{corpus:t,language:a,collections:c,languages:l,setCollections:n}=s,r=h.useContext(G);let u;e[0]!==a?(u=["ja","ko","zh"].some(C=>a.startsWith(C)),e[0]=a,e[1]=u):u=e[1];const i=u;let f,m;if(e[2]!==c||e[3]!==t||e[4]!==i||e[5]!==l||e[6]!==n||e[7]!==r){const C=kt(t,l);f="search-collections";let S;e[10]!==r?(S=P=>[P,r(`collections:${P}.name`),r(`collections:${P}.short`)],e[10]=r,e[11]=S):S=e[11],m=t.collections.map(S).map(P=>{const[R,F,N]=P;return o.jsxs("div",{className:`search-collection search-${C.has(R)?"valid":"invalid"}`,children:[o.jsx("input",{type:"checkbox",name:`collection-${R}`,id:`collection-${R}`,checked:c.includes(R),onChange:$=>{n(k=>$.target.checked?k.concat([R]):k.filter(T=>T!==R))}}),o.jsx("label",{htmlFor:`collection-${R}`,style:i?me(N):void 0,children:F===N?F:o.jsx("abbr",{title:F,children:o.jsx("span",{translate:"no",children:N})})})]},R)}),e[2]=c,e[3]=t,e[4]=i,e[5]=l,e[6]=n,e[7]=r,e[8]=f,e[9]=m}else f=e[8],m=e[9];let p;e[12]!==f||e[13]!==m?(p=o.jsx("div",{className:f,children:m}),e[12]=f,e[13]=m,e[14]=p):p=e[14];const _=c.length===t.collections.length;let w;e[15]!==t.collections||e[16]!==n?(w=()=>{n(t.collections)},e[15]=t.collections,e[16]=n,e[17]=w):w=e[17];let v;e[18]!==r?(v=r("selectAll"),e[18]=r,e[19]=v):v=e[19];let L;e[20]!==_||e[21]!==w||e[22]!==v?(L=o.jsx("button",{disabled:_,onClick:w,children:v}),e[20]=_,e[21]=w,e[22]=v,e[23]=L):L=e[23];const M=c.length===0;let E;e[24]!==n?(E=()=>{n([])},e[24]=n,e[25]=E):E=e[25];let A;e[26]!==r?(A=r("deselectAll"),e[26]=r,e[27]=A):A=e[27];let g;e[28]!==E||e[29]!==A||e[30]!==M?(g=o.jsx("button",{disabled:M,onClick:E,children:A}),e[28]=E,e[29]=A,e[30]=M,e[31]=g):g=e[31];let y;e[32]!==g||e[33]!==L?(y=o.jsxs("div",{className:"item-group",children:[L,g]}),e[32]=g,e[33]=L,e[34]=y):y=e[34];let j;return e[35]!==y||e[36]!==p?(j=o.jsxs(o.Fragment,{children:[p,y]}),e[35]=y,e[36]=p,e[37]=j):j=e[37],j}function Pt(s){const e=J.c(38),{corpus:t,language:a,collections:c,languages:l,setLanguages:n}=s,r=h.useContext(G);let u;e[0]!==a?(u=["ja","ko","zh"].some(C=>a.startsWith(C)),e[0]=a,e[1]=u):u=e[1];const i=u;let f,m;if(e[2]!==c||e[3]!==t||e[4]!==i||e[5]!==l||e[6]!==n||e[7]!==r){const C=Lt(t,c);f="search-languages";let S;e[10]!==r?(S=P=>{let R=P,F=[P];return P==="en-GB"&&(R="en-ZZ",F=["en-GB","en-AU"]),[R,F,r(`languages:${R}.name`),r(`languages:${R}.code`)]},e[10]=r,e[11]=S):S=e[11],m=t.languages.filter(At).map(S).map(P=>{const[R,F,N,$]=P;return o.jsxs("div",{className:`search-language search-${F.some(k=>C.has(k))?"valid":"invalid"}`,children:[o.jsx("input",{type:"checkbox",name:`language-${R}`,id:`language-${R}`,checked:F.some(k=>l.includes(k)),onChange:k=>{n(T=>k.target.checked?T.concat(F):T.filter(q=>!F.includes(q)))}}),o.jsxs("label",{htmlFor:`language-${R}`,children:[o.jsx("span",{className:"search-language-code",children:o.jsx("abbr",{title:N,children:o.jsx("span",{translate:"no",children:$})})}),o.jsx("span",{className:"search-language-name",style:i?me(N,12):me(N,15),children:N})]})]},R)}),e[2]=c,e[3]=t,e[4]=i,e[5]=l,e[6]=n,e[7]=r,e[8]=f,e[9]=m}else f=e[8],m=e[9];let p;e[12]!==f||e[13]!==m?(p=o.jsx("div",{className:f,children:m}),e[12]=f,e[13]=m,e[14]=p):p=e[14];const _=l.length===t.languages.length;let w;e[15]!==t.languages||e[16]!==n?(w=()=>{n(t.languages)},e[15]=t.languages,e[16]=n,e[17]=w):w=e[17];let v;e[18]!==r?(v=r("selectAll"),e[18]=r,e[19]=v):v=e[19];let L;e[20]!==_||e[21]!==w||e[22]!==v?(L=o.jsx("button",{disabled:_,onClick:w,children:v}),e[20]=_,e[21]=w,e[22]=v,e[23]=L):L=e[23];const M=l.length===0;let E;e[24]!==n?(E=()=>{n([])},e[24]=n,e[25]=E):E=e[25];let A;e[26]!==r?(A=r("deselectAll"),e[26]=r,e[27]=A):A=e[27];let g;e[28]!==E||e[29]!==A||e[30]!==M?(g=o.jsx("button",{disabled:M,onClick:E,children:A}),e[28]=E,e[29]=A,e[30]=M,e[31]=g):g=e[31];let y;e[32]!==g||e[33]!==L?(y=o.jsxs("div",{className:"item-group",children:[L,g]}),e[32]=g,e[33]=L,e[34]=y):y=e[34];let j;return e[35]!==y||e[36]!==p?(j=o.jsxs(o.Fragment,{children:[p,y]}),e[35]=y,e[36]=p,e[37]=j):j=e[37],j}function At(s){return s!=="en-AU"}function Rt(s){const e=J.c(13),{corpus:t,language:a,filtersVisible:c,collections:l,setCollections:n,languages:r,setLanguages:u}=s,i=h.useRef(null);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>i.current?.style.setProperty("--search-filters-height",`${i.current.scrollHeight}px`),e[0]=f):f=e[0];const m=f;let p,_;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{if(!CSS.supports("interpolate-size","allow-keywords"))return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},_=[],e[1]=p,e[2]=_):(p=e[1],_=e[2]),h.useEffect(p,_);const w=`search-filters search-filters-${c?"show":"hide"}`;let v;e[3]!==l||e[4]!==t||e[5]!==a||e[6]!==r||e[7]!==n||e[8]!==u?(v=o.jsxs(o.Fragment,{children:[o.jsx(Et,{corpus:t,language:a,collections:l,languages:r,setCollections:n}),o.jsx("div",{className:"search-filters-divider"}),o.jsx(Pt,{corpus:t,language:a,collections:l,languages:r,setLanguages:u})]}),e[3]=l,e[4]=t,e[5]=a,e[6]=r,e[7]=n,e[8]=u,e[9]=v):v=e[9];let L;return e[10]!==w||e[11]!==v?(L=o.jsx("div",{ref:i,className:w,children:v}),e[10]=w,e[11]=v,e[12]=L):L=e[12],L}const ye=s=>Array.isArray(s)&&s.every(e=>typeof e=="string"),Mt=(s,e)=>{const t=s.languages.filter(n=>n.startsWith(e.split("-")[0])),a={...jt(s),languages:t.length===0?s.languages.filter(n=>n.startsWith("en")):t},c=Y("corpus-params");if(c===null)return a;const l=Re(c);return typeof l=="object"&&l!==null&&("query"in l&&typeof l.query=="string"&&(a.query=l.query),"type"in l&&xe(l.type)&&(a.type=l.type),"caseInsensitive"in l&&typeof l.caseInsensitive=="boolean"&&(a.caseInsensitive=l.caseInsensitive),"common"in l&&typeof l.common=="boolean"&&(a.common=l.common),"script"in l&&typeof l.script=="boolean"&&(a.script=l.script),"showAllLanguages"in l&&typeof l.showAllLanguages=="boolean"&&(a.showAllLanguages=l.showAllLanguages),"collections"in l&&ye(l.collections)&&l.collections.every(n=>s.isCollectionKey(n))&&(a.collections=l.collections),"languages"in l&&ye(l.languages)&&l.languages.every(n=>s.isLanguageKey(n))&&(a.languages=l.languages)),a},Nt=[se[3],se[0],se[1],se[2]];function Tt({corpus:s,language:e,waiting:t,inProgress:a,postToWorker:c,terminateWorker:l}){const n=h.useContext(G),r=h.useMemo(()=>Mt(s,e),[s,e]),[u,i]=h.useState(r.query),[f,m]=h.useState(r.type),[p,_]=h.useState(r.caseInsensitive),[w,v]=h.useState(r.common),[L,M]=h.useState(r.script),[E,A]=h.useState(r.showAllLanguages),[g,y]=h.useState(r.collections),[j,C]=h.useState(r.languages),[S,P]=h.useState((Y("corpus-filtersVisible")??(window.location.hash?"false":"true"))!=="false"),R=h.useMemo(()=>Te(s),[s]),F=h.useCallback(()=>{const x=R.hashToSearchParams(window.location.hash.substring(1));if(x.query!==void 0&&i(x.query),x.type!==void 0&&m(x.type),x.caseInsensitive!==void 0&&_(x.caseInsensitive),x.common!==void 0&&v(x.common),x.script!==void 0&&M(x.script),x.showAllLanguages!==void 0&&A(x.showAllLanguages),x.collections!==void 0&&y(x.collections),x.languages!==void 0&&C(x.languages),x.id!==void 0&&x.id!==""){const D=x.id.split(".")[0];c({query:`^${we(x.id)}$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(V=>s.getCollection(V).id===D),languages:[ne]});return}if(x.file!==void 0&&x.file!==""){const D=x.file.split(".")[0];c({query:`^${we(x.file)}\\..*$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(V=>s.getCollection(V).id===D),languages:[ne]});return}if(x.run!==void 0&&x.run){const D={query:x.query??r.query,type:x.type??r.type,caseInsensitive:x.caseInsensitive??r.caseInsensitive,common:x.common??r.common,script:x.script??r.script,showAllLanguages:x.showAllLanguages??r.showAllLanguages,collections:x.collections??r.collections,languages:x.languages??r.languages};window.location.hash=R.searchParamsToHash(D),c(D);return}Y("corpus-filtersVisible")===null&&P(!x.query||!x.collections||!x.languages)},[c,r]);h.useEffect(()=>{window.location.hash&&F()},[]),h.useEffect(()=>(window.addEventListener("hashchange",F),()=>{window.removeEventListener("hashchange",F)}),[F]),h.useEffect(()=>{te("corpus-params",JSON.stringify({query:u,type:f,caseInsensitive:p,common:w,script:L,showAllLanguages:E,collections:g,languages:j}))},[u,f,p,w,L,E,g,j]);const N=x=>{x.preventDefault(),Y("corpus-filtersVisible")||te("corpus-filtersVisible",S.toString());const D=document.getElementsByClassName("view-search").item(0);D&&D.scrollHeight>document.body.clientHeight&&P(!1);const V={query:u,type:f,caseInsensitive:p,common:w,script:L,showAllLanguages:E,collections:g,languages:j};window.location.hash=R.searchParamsToHash(V),c(V)},$=()=>{l()},k=()=>{const x=!S;P(x),te("corpus-filtersVisible",x.toString())},T=x=>{const D=x.target.value;xe(D)&&m(D)},q=t||a||u.length===0||g.length===0||j.length===0,W=h.useMemo(()=>o.jsx(Rt,{corpus:s,language:e,filtersVisible:S,collections:g,setCollections:y,languages:j,setLanguages:C}),[e,S,g,j]);return o.jsxs("form",{className:"search-form",role:"search",onSubmit:N,children:[o.jsxs("div",{className:"search-bar",children:[o.jsxs("div",{className:"item-group",children:[o.jsx("label",{htmlFor:"query",children:n("query")}),o.jsx("input",{type:"search",name:"query",id:"query",value:u,onChange:x=>{i(x.target.value)}}),o.jsxs("div",{className:"btn-alternate-container",children:[o.jsx("input",{id:"submit",type:"submit",className:a?"invisible":"visible",value:n("search"),disabled:q}),o.jsx("button",{type:"button",className:a?"visible":"invisible",onClick:$,disabled:!a,children:n("cancel")})]}),o.jsx("button",{id:"filters",type:"button",className:S?"active":void 0,onClick:k,children:n("filters")}),o.jsx("select",{name:"type",id:"type",onChange:T,value:f,title:n("searchType.searchType"),"aria-label":n("searchType.searchType"),children:Nt.map(x=>o.jsx("option",{value:x,children:n(`searchType.${x}`)},x))})]}),o.jsxs("div",{className:"item-group search-option-group",children:[o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"caseInsensitive",id:"caseInsensitive",checked:p,onChange:x=>{_(x.target.checked)}}),o.jsx("label",{htmlFor:"caseInsensitive",children:n("caseInsensitive")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"common",id:"common",checked:w,onChange:x=>{v(x.target.checked)}}),o.jsx("label",{htmlFor:"common",children:n("common")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"script",id:"script",checked:L,onChange:x=>{M(x.target.checked)}}),o.jsx("label",{htmlFor:"script",children:n("script")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"showAllLanguages",id:"showAllLanguages",checked:E,onChange:x=>{A(x.target.checked)}}),o.jsx("label",{htmlFor:"showAllLanguages",children:n("showAllLanguages")})]})]})]}),W]})}function It(s){const e=J.c(10),{src:t,active:a}=s,c=a===void 0?!0:a,l=h.useRef(null);let n,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{l.current?.classList.add("spinner-stopped")},r=[],e[0]=n,e[1]=r):(n=e[0],r=e[1]),h.useEffect(n,r);let u,i;e[2]!==c?(u=()=>{const w=l.current;if(w!==null){const v=()=>{c||w.classList.add("spinner-stopped")};return w.addEventListener("animationiteration",v),()=>{w.removeEventListener("animationiteration",v)}}},i=[c],e[2]=c,e[3]=u,e[4]=i):(u=e[3],i=e[4]),h.useEffect(u,i);const f=c?"spinner-active":"spinner-inactive";let m;e[5]!==f?(m=["spinner",f],e[5]=f,e[6]=m):m=e[6];const p=m.join(" ");let _;return e[7]!==t||e[8]!==p?(_=o.jsx("img",{ref:l,className:p,src:t,alt:""}),e[7]=t,e[8]=p,e[9]=_):_=e[9],_}function $e(s){const e=J.c(16),{progress:t}=s,a=h.useContext(G),c=Math.min(Math.max(0,t*100),100);let l;e[0]!==a?(l=a("progressBar.title"),e[0]=a,e[1]=l):l=e[1];const n=`${c}%`,r=c===0?0:void 0,u=c===0?"hidden":void 0;let i;e[2]!==n||e[3]!==r||e[4]!==u?(i=o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-bar-complete",style:{width:n,maxWidth:r,visibility:u}})}),e[2]=n,e[3]=r,e[4]=u,e[5]=i):i=e[5];let f;e[6]!==t||e[7]!==a?(f=a("progressBar.value",ct(t)),e[6]=t,e[7]=a,e[8]=f):f=e[8];let m;e[9]!==f?(m=o.jsx("div",{className:"progress-bar-text",children:f}),e[9]=f,e[10]=m):m=e[10];let p;return e[11]!==c||e[12]!==l||e[13]!==i||e[14]!==m?(p=o.jsxs("div",{className:"progress-bar-container",role:"progressbar","aria-label":l,"aria-valuenow":c,children:[i,m]}),e[11]=c,e[12]=l,e[13]=i,e[14]=m,e[15]=p):p=e[15],p}const $t=s=>{if("share"in navigator){const e=s.currentTarget.href;s.preventDefault(),navigator.share({url:e}).catch(t=>{t instanceof Error&&t.name!=="AbortError"||(console.error(t),window.open(e,"_blank"))})}};function Ft(s){const e=J.c(6),{hash:t}=s,a=h.useContext(G);let c;e[0]!==a?(c=a("share"),e[0]=a,e[1]=c):c=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#share"})}),e[2]=l):l=e[2];let n;return e[3]!==t||e[4]!==c?(n=o.jsx("a",{href:t,rel:"noreferrer",target:"_blank",title:c,onClick:$t,children:l}),e[3]=t,e[4]=c,e[5]=n):n=e[5],n}function Dt(s){const e=J.c(7),{hash:t,callback:a}=s,c=h.useContext(G);let l;e[0]!==c?(l=c("viewNearby"),e[0]=c,e[1]=l):l=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#file-lines"})}),e[2]=n):n=e[2];let r;return e[3]!==a||e[4]!==t||e[5]!==l?(r=o.jsx("a",{href:t,title:l,onClick:a,children:n}),e[3]=a,e[4]=t,e[5]=l,e[6]=r):r=e[6],r}function Ot(s){const e=J.c(6),{callback:t}=s,a=h.useContext(G);let c;e[0]!==a?(c=a("copy"),e[0]=a,e[1]=c):c=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#copy"})}),e[2]=l):l=e[2];let n;return e[3]!==t||e[4]!==c?(n=o.jsx("button",{className:"link",title:c,onClick:t,children:l}),e[3]=t,e[4]=c,e[5]=n):n=e[5],n}function Vt(s,e,t,a,c){return s.replaceAll(/<a class="speaker" data-var="(.+?)">(.+?)<\/a>/gu,(l,n,r)=>`<a class="speaker" href="#${e.searchParamsToHash({query:n,type:"exact",caseInsensitive:!1,common:!1,script:!0,showAllLanguages:!1,collections:[t],languages:[a],run:!0})}" title="${c}" translate="yes"><span translate="no">${r}</span></a>`)}const Bt=(s,e)=>e===ne?s.replaceAll(/([._/]|([a-z])(?=[A-Z])|([A-Za-z])(?=[0-9]))/gu,"$1<wbr>"):s;function qt(){const s=J.c(4),e=h.useContext(G);let t;s[0]!==e?(t=e("status.rendering"),s[0]=e,s[1]=t):t=s[1];let a;return s[2]!==t?(a=o.jsx("div",{className:"results-rendering",children:t}),s[2]=t,s[3]=a):a=s[3],a}function zt(s){const e=J.c(7),{id:t}=s,a=`#id=${t}`;let c;e[0]!==a?(c=o.jsx(Ft,{hash:a}),e[0]=a,e[1]=c):c=e[1];const l=`#file=${t.split(".").slice(0,-1).join(".")}`;let n;e[2]!==l?(n=o.jsx(Dt,{hash:l}),e[2]=l,e[3]=n):n=e[3];let r;return e[4]!==c||e[5]!==n?(r=o.jsx("td",{className:"results-table-actions-cell",translate:"yes",children:o.jsxs("div",{className:"results-table-actions",children:[c,n]})},"actions"),e[4]=c,e[5]=n,e[6]=r):r=e[6],r}function Ut(s){const e=J.c(49),{corpus:t,index:a,collection:c,file:l,languages:n,lines:r,start:u,end:i,showId:f,richText:m,sectionOffset:p,onShowSection:_,searchParamsFactory:w}=s,v=h.useContext(G);let L;e[0]!==n?(L=n.indexOf(ne),e[0]=n,e[1]=L):L=e[1];const M=L,E=n.map(Ht),A=v("viewSpeaker"),g=t.getCollection(c).speaker!==void 0,y=E.map(Wt),j=y.every(K=>K===y[0]),C=h.useRef(null);let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{const K=C.current,Q=window.getSelection();Q!==null&&K!==null&&(Q.removeAllRanges(),Q.selectAllChildren(K),document.execCommand("copy"),Q.removeAllRanges())},e[2]=S):S=e[2];const P=S,R=`collection-${t.getCollection(c).id??c.toLowerCase()}`,F=`file-${l}`,N=`rich-text-${m?"enabled":"disabled"}`;let $;e[3]!==c||e[4]!==t||e[5]!==R||e[6]!==F||e[7]!==N?($=["results-table",R,F,N],t.getCollection(c).softWrap===!0&&$.push("soft"),e[3]=c,e[4]=t,e[5]=R,e[6]=F,e[7]=N,e[8]=$):$=e[8];const k="results-table-container",T=$.join(" ");let q;e[9]!==M?(q=M!==-1&&o.jsx("th",{className:"results-table-actions-cell",children:o.jsx(Ot,{callback:P})}),e[9]=M,e[10]=q):q=e[10];let W;if(e[11]!==n||e[12]!==f||e[13]!==v){let K;e[15]!==f?(K=X=>f||X!==ne,e[15]=f,e[16]=K):K=e[16];let Q;e[17]!==v?(Q=X=>o.jsx("th",{children:o.jsx("abbr",{title:v(`languages:${X}.name`),children:o.jsx("span",{translate:"no",children:v(`languages:${X}.code`)})})},X),e[17]=v,e[18]=Q):Q=e[18],W=n.filter(K).map(Q),e[11]=n,e[12]=f,e[13]=v,e[14]=W}else W=e[14];let x;e[19]!==q||e[20]!==W?(x=o.jsx("thead",{children:o.jsxs("tr",{children:[q,W]})}),e[19]=q,e[20]=W,e[21]=x):x=e[21];let D;e[22]!==y||e[23]!==j?(D=j&&y[0]!==ce.dir()?y[0]:void 0,e[22]=y,e[23]=j,e[24]=D):D=e[24];const V="no",H=r.map((K,Q)=>u<=Q&&Q<i&&o.jsxs("tr",{"data-id":M!==-1?K[M]:void 0,children:[M!==-1&&o.jsx(zt,{id:K[M]}),K.map((X,oe)=>{if(f||n[oe]!==ne)return o.jsx("td",{lang:E[oe],dir:j?void 0:y[oe],dangerouslySetInnerHTML:{__html:Bt(g?Vt(X,w,c,n[oe],A):X,n[oe])}},oe)})]},Q));let O;e[25]!==D||e[26]!==H?(O=o.jsx("tbody",{dir:D,translate:V,children:H}),e[25]=D,e[26]=H,e[27]=O):O=e[27];let Z;e[28]!==x||e[29]!==O||e[30]!==T?(Z=o.jsx("div",{className:k,children:o.jsxs("table",{ref:C,className:T,children:[x,O]})}),e[28]=x,e[29]=O,e[30]=T,e[31]=Z):Z=e[31];const d=Z;let b;e[32]!==a||e[33]!==_||e[34]!==p||e[35]!==u||e[36]!==v?(b=u!==0&&o.jsx("button",{className:"results-notice",onClick:_(p,a),children:v("tablePartial",{count:u})}),e[32]=a,e[33]=_,e[34]=p,e[35]=u,e[36]=v,e[37]=b):b=e[37];const I=u!==i&&d;let z;e[38]!==i||e[39]!==a||e[40]!==r.length||e[41]!==_||e[42]!==p||e[43]!==v?(z=i<r.length&&o.jsx("button",{className:"results-notice",onClick:_(p+i,a),children:v("tablePartial",{count:r.length-i})}),e[38]=i,e[39]=a,e[40]=r.length,e[41]=_,e[42]=p,e[43]=v,e[44]=z):z=e[44];let U;return e[45]!==b||e[46]!==I||e[47]!==z?(U=o.jsxs(o.Fragment,{children:[b,I,z]}),e[45]=b,e[46]=I,e[47]=z,e[48]=U):U=e[48],U}function Wt(s){return ce.dir(s)}function Ht(s){return s===ne?vt:s}function Gt(s){const{index:e,status:t,header:a,offset:c,limit:l,lines:n,sectionOffset:r,richText:u}=s,i=Math.max(0,Math.min(n.length,c-r)),f=Math.max(0,Math.min(n.length,c+l-r)),m=h.useMemo(()=>{switch(t){case"noLines":return;case"worker":return o.jsx(qt,{});case"done":return o.jsx(Ut,{...s,start:i,end:f})}},[t,i,f,u]);return m&&o.jsxs("section",{id:`results-section${e}`,className:"results-section",children:[a&&o.jsx("h2",{children:a}),m]})}function Kt({results:s,headers:e,jumpTo:t,...a}){const c=h.useMemo(()=>Te(a.corpus),[a.corpus]),l=h.useMemo(()=>{let n=0;const r=[];for(const[u,i]of s.entries()){if(i.status==="initial")break;const f=i.status==="done"&&i.richText;r.push({...a,...i.params,index:u,sectionOffset:n,richText:f,status:i.status,header:e[u],searchParamsFactory:c}),n+=i.params.lines.length}return r},[s,a]);return h.useEffect(()=>{let n=0;for(const[r,u]of s.entries())if(u.status!=="initial"){if(a.offset>=n&&a.offset<n+u.params.lines.length){t(r);break}n+=u.params.lines.length}},[a.offset]),o.jsx("div",{className:"app-window-inner",children:l.map(n=>o.jsx(Gt,{...n},n.index))})}function ie(s){const e=document.getElementById("results"),t=document.getElementById(`results-section${s}`),a=e?.firstElementChild;e&&t&&a instanceof HTMLElement&&(e.scrollTop=t.offsetTop-a.offsetTop)}function Jt(s){const e=J.c(9),{headers:t}=s,a=h.useContext(G);let c;e[0]!==a?(c=a("jumpTo"),e[0]=a,e[1]=c):c=e[1];let l;e[2]!==c?(l=o.jsx("option",{value:"",disabled:!0,children:c}),e[2]=c,e[3]=l):l=e[3];let n;e[4]!==t?(n=t.map((u,i)=>u!==void 0&&(i===0||t[i-1]!==u)&&o.jsx("option",{value:i,children:u},i)),e[4]=t,e[5]=n):n=e[5];let r;return e[6]!==l||e[7]!==n?(r=o.jsx("nav",{className:"results-jump",children:o.jsxs("select",{name:"jump",id:"jump",onChange:Zt,value:"",children:[l,n]})}),e[6]=l,e[7]=n,e[8]=r):r=e[8],r}function Zt(s){ie(Number(s.target.value))}function Qt(s){const e=J.c(50),{count:t,offset:a,limit:c,setOffset:l}=s,n=h.useContext(G),r=a+1,u=Math.min(t,a+c);let i;e[0]!==t||e[1]!==n||e[2]!==r||e[3]!==u?(i=n("displayedRange.long",{count:t,start:r,end:u}),e[0]=t,e[1]=n,e[2]=r,e[3]=u,e[4]=i):i=e[4];let f;e[5]!==i?(f=o.jsx("span",{className:"results-nav-range-long",children:i}),e[5]=i,e[6]=f):f=e[6];const m=a+1,p=Math.min(t,a+c);let _;e[7]!==t||e[8]!==n||e[9]!==m||e[10]!==p?(_=n("displayedRange.short",{count:t,start:m,end:p}),e[7]=t,e[8]=n,e[9]=m,e[10]=p,e[11]=_):_=e[11];let w;e[12]!==_?(w=o.jsx("span",{className:"results-nav-range-short",children:_}),e[12]=_,e[13]=w):w=e[13];let v;e[14]!==f||e[15]!==w?(v=o.jsxs("div",{children:[f,w]}),e[14]=f,e[15]=w,e[16]=v):v=e[16];const L=a===0;let M;e[17]!==c||e[18]!==a||e[19]!==l?(M=()=>{l(Math.max(0,a-c))},e[17]=c,e[18]=a,e[19]=l,e[20]=M):M=e[20];let E;e[21]!==n?(E=n("loadPrev"),e[21]=n,e[22]=E):E=e[22];let A;e[23]!==c||e[24]!==n?(A=n("icons:loadPrev",{limit:c}),e[23]=c,e[24]=n,e[25]=A):A=e[25];let g;e[26]!==L||e[27]!==M||e[28]!==E||e[29]!==A?(g=o.jsx("button",{className:"button-square",disabled:L,onClick:M,title:E,children:A}),e[26]=L,e[27]=M,e[28]=E,e[29]=A,e[30]=g):g=e[30];const y=a+c>=t;let j;e[31]!==t||e[32]!==c||e[33]!==a||e[34]!==l?(j=()=>{l(Math.min(Math.floor(t/c)*c,a+c))},e[31]=t,e[32]=c,e[33]=a,e[34]=l,e[35]=j):j=e[35];let C;e[36]!==n?(C=n("loadNext"),e[36]=n,e[37]=C):C=e[37];let S;e[38]!==c||e[39]!==n?(S=n("icons:loadNext",{limit:c}),e[38]=c,e[39]=n,e[40]=S):S=e[40];let P;e[41]!==y||e[42]!==j||e[43]!==C||e[44]!==S?(P=o.jsx("button",{className:"button-square",disabled:y,onClick:j,title:C,children:S}),e[41]=y,e[42]=j,e[43]=C,e[44]=S,e[45]=P):P=e[45];let R;return e[46]!==g||e[47]!==P||e[48]!==v?(R=o.jsxs("div",{className:"results-nav",children:[v,g,P]}),e[46]=g,e[47]=P,e[48]=v,e[49]=R):R=e[49],R}const _e={showVariables:0,showAllCharacters:!1,showGender:2,showPlural:0,showGrammar:!0,showFurigana:!0},Xt=()=>{const s=Y("corpus-toggle");if(s===null)return _e;const e={..._e},t=Re(s);return typeof t=="object"&&t!==null&&("showVariables"in t&&typeof t.showVariables=="number"&&[0,1,2].includes(t.showVariables)&&(e.showVariables=t.showVariables),"showAllCharacters"in t&&typeof t.showAllCharacters=="boolean"&&(e.showAllCharacters=t.showAllCharacters),"showGender"in t&&typeof t.showGender=="number"&&[0,1,2].includes(t.showGender)&&(e.showGender=t.showGender),"showPlural"in t&&typeof t.showPlural=="number"&&[0,1,2].includes(t.showPlural)&&(e.showPlural=t.showPlural),"showGrammar"in t&&typeof t.showGrammar=="boolean"&&(e.showGrammar=t.showGrammar),"showFurigana"in t&&typeof t.showFurigana=="boolean"&&(e.showFurigana=t.showFurigana)),e};function Yt({corpus:s,language:e,status:t,progress:a,results:c,showId:l=!0,richText:n=!0,limit:r=fe}){const u=h.useContext(G),i=h.useMemo(Xt,[]),[f,m]=h.useState(i.showVariables),[p,_]=h.useState(i.showAllCharacters),[w,v]=h.useState(i.showGender),[L,M]=h.useState(i.showPlural),[E,A]=h.useState(i.showGrammar),[g,y]=h.useState(i.showFurigana),[j,C]=h.useState(null),[S,P]=h.useState(0);h.useEffect(()=>{te("corpus-toggle",JSON.stringify({showVariables:f,showAllCharacters:p,showGender:w,showPlural:L,showGrammar:E,showFurigana:g}))},[f,p,w,L,E,g]);const R=h.useCallback((x,D)=>()=>{P(x),ie(D)},[]),F=h.useMemo(()=>{const x=[];let D="";for(const V of c){if(V.status==="initial"||V.status==="noLines"){x.push(void 0);continue}const{collection:H,file:O}=V.params,Z=u("tableHeader",{collection:u(`collections:${H}.name`),file:u(`files:${O}`),interpolation:{escapeValue:!1}});x.push(Z===D?void 0:Z),D=Z}return x},[c,e]),N=h.useMemo(()=>c.reduce((x,D)=>x+(D.status==="initial"?0:D.params.lines.length),0),[c]);N<S&&P(x=>Math.min(x,N));const $=o.jsxs("div",{className:"results-toggle",children:[o.jsx("button",{className:f!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{m((f+1)%3)},title:u("showVariables"),children:o.jsx("span",{translate:"no",children:u("icons:showVariables",{context:f})})}),o.jsx("button",{className:p?"button-square active":"button-square",disabled:!n,onClick:()=>{_(!p)},title:u("showAllCharacters"),children:o.jsx("span",{translate:"no",children:u("icons:showAllCharacters")})}),o.jsx("button",{className:w!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{v((w+1)%3)},title:u("showGender"),children:o.jsx("span",{translate:"no",children:u("icons:showGender",{context:w})})}),o.jsx("button",{className:L!==0?"button-square active":"button-square",disabled:!n,onClick:()=>{M((L+1)%3)},title:u("showPlural"),children:o.jsx("span",{translate:"no",children:u("icons:showPlural",{context:L})})}),o.jsx("button",{className:E?"button-square active":"button-square",disabled:!n,onClick:()=>{A(!E)},title:u("showGrammar"),children:o.jsx("span",{translate:"no",children:u("icons:showGrammar")})}),o.jsx("button",{className:g?"button-square active":"button-square",disabled:!n,onClick:()=>{y(!g)},title:u("showFurigana"),children:o.jsx("span",{className:"results-toggle-furigana",translate:"no",children:u("icons:showFurigana")})})]});h.useEffect(()=>{h.startTransition(()=>{C(o.jsx(Kt,{corpus:s,results:c,headers:F,showId:l,offset:S,limit:r,onShowSection:R,jumpTo:ie}))})},[s,c,F,l,S,r,R,ie]);const k=Me(t),T=u(`status.${t.split(".",1)[0]}`),q=h.useMemo(()=>!k&&F.filter(x=>x!==void 0).length>1?o.jsx(Jt,{headers:F}):o.jsx("div",{className:"results-status-text",children:T}),[k,F,T]),W=`app-window variables-${["short","show","hide"][f]} control-${p?"show":"hide"} gender-${w} number-${L} grammar-${E?"show":"hide"} furigana-${g?"show":"hide"}`;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"results-status",children:[q,o.jsx(It,{src:"logo.svg",active:k}),!k&&N>r?o.jsx(Qt,{count:N,offset:S,limit:r,setOffset:P}):o.jsx($e,{progress:a}),$]}),o.jsx("main",{id:"results",className:W,children:j})]})}const es={status:"initial"},Se="corpus-warn",ts=2e7;function ss({loader:s,showModal:e,language:t,richText:a,limit:c}){const l=h.useContext(G),n=h.useRef(null),r=h.useRef(null),u=h.useRef([]),i=h.useRef(a),f=h.useRef(Y(Se)!=="false"),[m,p]=h.useState("initial"),[_,w]=h.useState(0),[v,L]=h.useState(!0),[M,E]=h.useState([]);h.useEffect(()=>{i.current=a;for(const{index:k,params:T}of u.current)y(k,T)},[a]);const A=(k,T)=>{E(q=>{const W=Array().concat(q);for(let x=W.length;x<k;x++)W[x]=es;return W[k]=T,W})},g=k=>{A(k.data.index,{status:"done",params:k.data,richText:k.data.richText}),k.data.error&&e({message:"statusModal.error",buttons:[{message:"statusModal.buttons.ok",autoFocus:!0}]})},y=(k,T)=>{r.current===null&&(console.log("Creating new TextWorker..."),r.current=new gt,r.current.addEventListener("message",g)),r.current.postMessage({...T,index:k,richText:i.current,corpusLiterals:s.corpus.getCollection(T.collection).literals})},j=k=>{if(p(k.data.status),w(k.data.progress),L(k.data.showId),"index"in k.data&&"result"in k.data){const{index:T,result:q}=k.data;k.data.result.lines.length===0?A(T,{status:"noLines",params:q}):(u.current.push({index:T,params:q}),A(T,{status:"worker",params:q}),y(T,q))}k.data.complete&&xt(k.data.status)&&e({message:`statusModal.${k.data.status}`,buttons:[{message:"statusModal.buttons.ok",autoFocus:!0}]})},C=h.useCallback(()=>{console.log("Terminating workers!"),n.current!==null&&(n.current.removeEventListener("message",j),n.current.terminate(),n.current=null),r.current!==null&&(r.current.removeEventListener("message",j),r.current.terminate(),r.current=null),p("initial"),w(0),E([]),u.current=[]},[]),S=k=>{E([]),u.current=[],k.query.length>0&&k.collections.length>0&&k.languages.length>0&&(n.current===null&&(console.log("Creating new SearchWorkerManager..."),n.current=new mt,n.current.addEventListener("message",j)),p("waiting"),w(0),n.current.postMessage({...k,serializedCorpus:Ie(s.corpus)}))},P=h.useCallback(k=>{if(!f.current){S(k);return}s.getDownloadSizeTotal(k.collections,k.showAllLanguages?void 0:k.languages).then(T=>{if(T<=ts){S(k);return}e({message:"searchModal.message",messageOptions:ae(T),checkbox:{message:l("searchModal.checkboxDoNotShowAgain"),checked:!1},buttons:[{message:"searchModal.buttons.yes",callback:()=>{S(k)},checkboxCallback:q=>{f.current=!q,te(Se,(!q).toString())}},{message:"searchModal.buttons.no",callback:()=>{p("initial")},autoFocus:!0}],cancelCallback:()=>{p("initial")}})}).catch(ee)},[s.getDownloadSizeTotal]),R=Me(m),F=m==="waiting",N=h.useMemo(()=>o.jsx(Tt,{corpus:s.corpus,language:t,inProgress:R,waiting:F,postToWorker:P,terminateWorker:C}),[s.corpus,t,R,F,P,C]),$=h.useMemo(()=>o.jsx(Yt,{corpus:s.corpus,language:t,status:m,progress:_,showId:v,richText:a,results:M,limit:c}),[s.corpus,t,m,_,v,a,M,c]);return o.jsxs("div",{className:"search",children:[N,$]})}function ns(s){return new Worker("/poke-corpus/assets/cacheManagerWorker-CLSMdnkw.js",{name:s?.name})}function os(s){const e=J.c(6),{callback:t}=s,a=h.useContext(G);let c;e[0]!==a?(c=a("delete"),e[0]=a,e[1]=c):c=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#trash-can"})}),e[2]=l):l=e[2];let n;return e[3]!==t||e[4]!==c?(n=o.jsx("button",{className:"link",title:c,onClick:t,children:l}),e[3]=t,e[4]=c,e[5]=n):n=e[5],n}function as(s){const e=J.c(6),{callback:t}=s,a=h.useContext(G);let c;e[0]!==a?(c=a("refresh"),e[0]=a,e[1]=c):c=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#arrows-rotate"})}),e[2]=l):l=e[2];let n;return e[3]!==t||e[4]!==c?(n=o.jsx("button",{className:"link",title:c,onClick:t,children:l}),e[3]=t,e[4]=c,e[5]=n):n=e[5],n}function ls({cacheStorageEnabled:s,cachedMetadata:e}){const t=h.useContext(G),a=h.useMemo(()=>ae(e.reduce((c,[,l])=>c+l,0)),[e]);return o.jsxs("ul",{children:[o.jsx("li",{children:t("cache.storageStatus",{val:t(s?"cache.storageEnabled":"cache.storageDisabled")})}),s&&o.jsx("li",{children:t("cache.filesStored",{count:e.length})}),s&&o.jsx("li",{children:t("cache.storageUsed",a)})]})}function cs(s){const e=J.c(9),{loadedBytes:t,totalBytes:a,progress:c}=s,l=h.useContext(G);let n;e[0]!==t||e[1]!==l||e[2]!==a?(n=l("cache.loading",{message:l("cache.inProgress"),loaded:l("cache.size",ae(t)),total:l("cache.size",ae(a))}),e[0]=t,e[1]=l,e[2]=a,e[3]=n):n=e[3];let r;e[4]!==c?(r=o.jsx($e,{progress:c}),e[4]=c,e[5]=r):r=e[5];let u;return e[6]!==n||e[7]!==r?(u=o.jsxs("div",{className:"cache-entry-notice",children:[n,r]}),e[6]=n,e[7]=r,e[8]=u):u=e[8],u}function rs({corpus:s,cachedMetadata:e,cacheCollections:t,clearCachedFile:a}){const c=h.useContext(G),l=h.useMemo(()=>s.collections.map(r=>{const u=e.filter(([[i]])=>r===i);return[r,u.reduce((i,[,f])=>i+f,0),u.every(([,,i])=>i)]}).filter(([,r])=>r>0),[e]);return o.jsx("div",{className:"cache-entry-list",children:e.length>0&&l.map(([n,r,u],i)=>o.jsxs("div",{className:`cache-entry cache-entry-${u?"current":"outdated"}`,children:[o.jsxs("div",{className:"cache-entry-text",children:[o.jsx("div",{children:o.jsx("abbr",{title:c(`collections:${n}.name`),children:o.jsx("span",{translate:"no",children:c(`collections:${n}.short`)})})}),o.jsx("div",{translate:"no",children:c("cache.size",ae(r))})]}),o.jsxs("div",{className:"cache-entry-actions",children:[!u&&o.jsx(as,{callback:()=>{t(n)}}),o.jsx(os,{callback:()=>{a(n)}})]})]},i))})}function is({active:s,loader:e,showModal:t}){const a=h.useContext(G),[c,l]=h.useState(!1),[n,r]=h.useState([]),[u,i]=h.useState(!1),[f,m]=h.useState(0),[p,_]=h.useState(0),[w,v]=h.useState(0),L=h.useRef(null),M=()=>{"caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB?Promise.all([e.getCache(),e.getIndexedDB()]).then(()=>{l(!0)}).catch(()=>{l(!1),r([])}):(l(!1),r([]))},E=N=>{const{status:$,loadedBytes:k,totalBytes:T,requestedCollection:q}=N.data;switch(m(k/T),_(k),v(T),$){case"loading":return;case"done":console.log("Caching complete");break;case"error":console.log("Caching error");break}L.current?.terminate(),L.current=null,i(!1),y(q)},A=h.useCallback(N=>{"caches"in window&&(i(!0),m(0),_(0),L.current===null&&(console.log("Creating new CacheManagerWorker..."),L.current=new ns,L.current.addEventListener("message",E),L.current.postMessage({serializedCorpus:Ie(e.corpus),requestedCollection:N})))},[e]),g=async(N="background")=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[$,k]=await Promise.all([e.getCache(),e.getIndexedDB()]),T=e.corpus.entries.flatMap(([V,H])=>H.files.flatMap(O=>H.languages.map(Z=>[V,Z,O]))),q=T.map(([V,H,O])=>e.getFilePath(V,H,O)),W=await Promise.all(q.map(V=>e.getFileCacheOnly($,k,V).then(async([H,O])=>[H!==void 0?(await H.blob()).size:-1,O])));r(W.map(([V,H],O)=>[T[O],V,H]).filter(([,V])=>V!==-1));const x=new Set(q),D=(await e.getAllLocalFilePaths(k)).filter(V=>!x.has(V));await Promise.all(D.map(V=>Promise.all([e.deleteLocalMetadata(k,V),$.delete(V)]).then(([H,O])=>{console.debug(H&&O?`Deleted ${V} from cache`:`Failed to delete ${V} from cache`)}))),k.close(),N==="cacheAll"&&W.some(([V,H])=>V===-1||!H)&&R()}},y=N=>{g(N).catch(ee)},j=()=>{const N=[];L.current&&(L.current.terminate(),L.current=null),"serviceWorker"in navigator&&N.push(navigator.serviceWorker.ready.then($=>$.unregister())),"indexedDB"in window&&"databases"in window.indexedDB&&N.push(e.getIndexedDB().then($=>e.clearLocalMetadata($).then(()=>($.close(),g())))),"caches"in window&&N.push(e.getCache().then($=>$.keys().then(k=>Promise.all(k.map(T=>$.delete(T)))))),Promise.all(N).then(()=>{console.log("Cache cleared")}).catch($=>{console.log("Error clearing cache"),console.error($)})},C=async N=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[$,k]=await Promise.all([e.getCache(),e.getIndexedDB()]),T=e.corpus.getCollection(N);await Promise.all(T.languages.flatMap(q=>T.files.flatMap(W=>{const x=e.getFilePath(N,q,W);return[e.deleteLocalMetadata(k,x),$.delete(x)]}))),k.close(),await g()}},S=h.useCallback(N=>{C(N).catch(ee)},[]);h.useEffect(()=>{M(),g().catch(ee)},[s,e.corpus.entries,e.corpus.metadata]);const P=()=>{e.getDownloadSizeTotal().then(N=>{t({message:"cache.cacheAllModal.message",messageOptions:ae(N),buttons:[{message:"cache.cacheAllModal.buttons.yes",callback:()=>{A("cacheAll")}},{message:"cache.cacheAllModal.buttons.no",callback:()=>{i(!1)},autoFocus:!0}],cancelCallback:()=>{i(!1)}})}).catch(ee)},R=()=>{t({message:"cache.cacheAllFailedModal.message",buttons:[{message:"cache.cacheAllFailedModal.buttons.ok",autoFocus:!0}]})},F=()=>{t({message:"cache.clearCacheModal.message",buttons:[{message:"cache.clearCacheModal.buttons.yes",callback:j},{message:"cache.clearCacheModal.buttons.no",autoFocus:!0}]})};return s&&o.jsxs("div",{className:"cache",children:[o.jsxs("div",{className:"cache-button-group item-group",children:[o.jsx("button",{onClick:P,disabled:u!==!1,children:a("cacheAll")}),o.jsx("button",{onClick:F,children:a("clearCache")})]}),o.jsx("div",{className:"cache-results app-window",children:o.jsxs("div",{className:"app-window-inner",children:[o.jsx(ls,{cacheStorageEnabled:c,cachedMetadata:n}),u?o.jsx(cs,{loadedBytes:p,totalBytes:w,progress:f}):o.jsx(rs,{corpus:e.corpus,cachedMetadata:n,cacheCollections:A,clearCachedFile:S})]})})]})}function us(s){const e=J.c(41),{closeCallback:t,classes:a,message:c,messageOptions:l,messageElement:n,buttons:r,checkbox:u,cancelCallback:i,isModal:f}=s,m=c===void 0?"":c,p=f===void 0?!0:f,_=h.useContext(G),w=(n??m)!=="",[v,L]=h.useState(u?.checked??!1),M=h.useRef(null),E=h.useRef(null);let A,g;e[0]!==p||e[1]!==w?(A=()=>{const O=M.current;O!==null&&(O.open&&O.close(),w&&(p?O.showModal():O.show()))},g=[w,p],e[0]=p,e[1]=w,e[2]=A,e[3]=g):(A=e[2],g=e[3]),h.useEffect(A,g);let y;e[4]!==r||e[5]!==w?(y=()=>{const O=E.current;if(w&&r&&O!==null){const Z=r.findIndex(hs);Z!==-1&&Array.from(O.children).filter(ds)[Z].focus()}},e[4]=r,e[5]=w,e[6]=y):y=e[6];let j;e[7]!==n||e[8]!==w?(j=[n,w],e[7]=n,e[8]=w,e[9]=j):j=e[9],h.useEffect(y,j);let C;e[10]!==v||e[11]!==t?(C=(O,Z,d)=>{const b=d===void 0?!0:d;return()=>{b&&t(),O&&O(),Z&&Z(v)}},e[10]=v,e[11]=t,e[12]=C):C=e[12];const S=C;let P;e[13]!==i||e[14]!==t?(P=()=>{i&&i(),t()},e[13]=i,e[14]=t,e[15]=P):P=e[15];const R=P;if(!w)return null;let F;e[16]!==m||e[17]!==n||e[18]!==l||e[19]!==_?(F=n??_(m,l),e[16]=m,e[17]=n,e[18]=l,e[19]=_,e[20]=F):F=e[20];let N;e[21]!==F?(N=o.jsx("div",{className:"modal-message",children:F}),e[21]=F,e[22]=N):N=e[22];const $=N;let k;e[23]!==u||e[24]!==v||e[25]!==_?(k=u&&o.jsx("div",{className:"modal-checkbox",children:o.jsxs("div",{children:[o.jsx("input",{type:"checkbox",id:"modalCheckbox",name:"modalCheckbox",checked:v,onChange:O=>{L(O.target.checked)}}),o.jsx("label",{htmlFor:"modalCheckbox",children:_(u.message)})]})}),e[23]=u,e[24]=v,e[25]=_,e[26]=k):k=e[26];const T=k;let q;e[27]!==r||e[28]!==S||e[29]!==_?(q=r?.map((O,Z)=>{const{message:d,callback:b,checkboxCallback:I,close:z,...U}=O;return o.jsx("button",{type:"button",onClick:S(b,I,z),...U,children:_(d)},Z)}),e[27]=r,e[28]=S,e[29]=_,e[30]=q):q=e[30];let W;e[31]!==q?(W=o.jsx("div",{ref:E,className:"modal-button-group",children:q}),e[31]=q,e[32]=W):W=e[32];const x=W;let D;e[33]!==a?(D=["modal"],a&&a.forEach(O=>D.push(O)),e[33]=a,e[34]=D):D=e[34];const V=D.join(" ");let H;return e[35]!==x||e[36]!==T||e[37]!==$||e[38]!==R||e[39]!==V?(H=o.jsxs("dialog",{ref:M,id:"modal",className:V,onCancel:R,children:[$,T,x]}),e[35]=x,e[36]=T,e[37]=$,e[38]=R,e[39]=V,e[40]=H):H=e[40],H}function ds(s){return s instanceof HTMLButtonElement}function hs(s){return s.autoFocus}function ge(){const s=J.c(11),e=h.useContext(G);let t;s[0]!==e?(t=e("error.title"),s[0]=e,s[1]=t):t=s[1];let a;s[2]!==t?(a=o.jsx("h2",{children:t}),s[2]=t,s[3]=a):a=s[3];let c;s[4]!==e?(c=e("error.message"),s[4]=e,s[5]=c):c=s[5];let l;s[6]!==c?(l=o.jsx("div",{children:c}),s[6]=c,s[7]=l):l=s[7];let n;return s[8]!==a||s[9]!==l?(n=o.jsx("div",{className:"app-window",children:o.jsx("div",{className:"app-window-inner",children:o.jsxs("section",{className:"results-section",children:[a,l]})})}),s[8]=a,s[9]=l,s[10]=n):n=s[10],n}const be="corpus",ue=s=>"/poke-corpus/"+s,fs=ue("data.json"),ms=s=>{const e=g=>f(g).size,t=async(g,y)=>{const[j,C]=await w(g,y);return C?.hash===j.hash?0:j.size},a=async(g=s.collections,y=s.languages)=>{try{const j=await i(),C=(await Promise.all(g.flatMap(S=>s.getCollection(S).languages.filter(P=>y.includes(P)).flatMap(P=>s.getCollection(S).files.map(R=>t(j,re(S,P,R))))))).reduce((S,P)=>S+P,0);return j.close(),C}catch{return g.flatMap(j=>s.getCollection(j).languages.filter(C=>y.includes(C)).flatMap(C=>s.getCollection(j).files.map(S=>e(re(j,C,S))))).reduce((j,C)=>j+C,0)}},c=async(g,y,j)=>{const C=ue(j),[S,P]=await w(y,j);if(P?.hash===S.hash||!navigator.onLine&&P?.hash!==void 0){const N=await E(g,C);if(N!==void 0)return N}const R=await fetch(C);return R.ok?(await A(g,C,R).then(async N=>{N&&await p(y,j)}),R):await E(g,C)??null},l=async(g,y,j)=>{const C=ue(j),[S,P]=await w(y,j);return P!==void 0?[await E(g,C),P.hash===S.hash]:[void 0,!1]},n=async g=>{const y=ue(g),j=await fetch(y);return j.ok?j:null},r="corpus",u="files",i=async()=>{const g=indexedDB.open(r);return new Promise((y,j)=>{g.onupgradeneeded=()=>{g.result.createObjectStore(u),g.transaction!==null&&(g.transaction.oncomplete=()=>{console.log("Created object store")})},g.onsuccess=()=>{y(g.result)},g.onerror=()=>{j(g.error)}})},f=g=>s.metadata[g],m=async(g,y)=>{const S=g.transaction([u],"readonly").objectStore(u).get(y);return new Promise((P,R)=>{S.onsuccess=()=>{P(yt(S.result)?S.result:void 0)},S.onerror=()=>{R(S.error)}})},p=async(g,y)=>{const S=g.transaction([u],"readwrite").objectStore(u).put(f(y),y);return new Promise((P,R)=>{S.onsuccess=()=>{P(S.result===y)},S.onerror=()=>{R(S.error)}})},_=async(g,y)=>{const S=g.transaction([u],"readwrite").objectStore(u).delete(y);return new Promise((P,R)=>{S.onsuccess=()=>{P(!0)},S.onerror=()=>{R(S.error)}})},w=async(g,y)=>[f(y),await m(g,y)],v=async g=>{const C=g.transaction(["files"],"readwrite").objectStore("files").clear();return g.close(),new Promise((S,P)=>{C.onsuccess=()=>{S(!0)},C.onerror=()=>{P(C.error)}})},L=async g=>{const C=g.transaction([u],"readonly").objectStore(u).getAllKeys();return new Promise((S,P)=>{C.onsuccess=()=>{S(C.result.filter(R=>typeof R=="string"))},C.onerror=()=>{P(C.error)}})},M=async()=>await caches.open(be),E=async(g,y)=>{try{return await g.match(y)}catch(j){console.error(j);return}},A=async(g,y,j)=>{try{return await g.put(y,j.clone()),!0}catch(C){return console.error(C),!1}};return{corpus:s,getFilePath:re,getFileSize:e,getDownloadSizeTotal:a,getFile:c,getFileCacheOnly:l,getFileRemote:n,getIndexedDB:i,deleteLocalMetadata:_,clearLocalMetadata:v,getAllLocalFilePaths:L,getCache:M}};function gs(s){return ms(s)}function ps(s,e=fs){const t=()=>{s(a=>a===void 0?null:a)};Promise.all([xs(e).then(a=>{s(c=>c===void 0&&a!==null?a:c)}).catch(ee),bs(e).then(a=>{s(c=>a??c)}).catch(ee)]).then(t,t)}async function xs(s){if("caches"in window){const t=await(await caches.open(be)).match(s);if(t?.ok)return Fe(t)}return null}async function bs(s){const e=await fetch(s);if(!e.ok)return null;if("caches"in window){const t=e.clone();caches.open(be).then(a=>a.put(s,t)).catch(ee)}return Fe(e)}async function Fe(s){const e=await s.json(),t=St(e);return gs(t)}function js(s){const e=J.c(2);let t;return e[0]!==s?(t=o.jsx("a",{className:"link",...s,children:s.children}),e[0]=s,e[1]=t):t=e[1],t}const Ce="corpus-tutorial",le=0,de=1,he=5;function ws(s){const e=J.c(31),{page:t}=s,a=h.useContext(G);let c="";e:switch(t){case 1:{let l;e[0]!==a?(l=a("tutorial:message.welcome"),e[0]=a,e[1]=l):l=e[1];let n;e[2]!==l?(n=o.jsx("div",{children:o.jsx("b",{children:l})}),e[2]=l,e[3]=n):n=e[3];let r;e[4]!==a?(r=a("tutorial:message.intro"),e[4]=a,e[5]=r):r=e[5];let u;e[6]!==r?(u=o.jsx("div",{children:r}),e[6]=r,e[7]=u):u=e[7];let i;e[8]!==n||e[9]!==u?(i=o.jsxs(o.Fragment,{children:[n,u]}),e[8]=n,e[9]=u,e[10]=i):i=e[10],c=i;break e}case 2:{let l;e[11]!==a?(l=a("tutorial:message.filters"),e[11]=a,e[12]=l):l=e[12],c=l;break e}case 3:{let l;e[13]!==a?(l=a("tutorial:message.search"),e[13]=a,e[14]=l):l=e[14],c=l;break e}case 4:{let l;e[15]!==a?(l=a("tutorial:message.results"),e[15]=a,e[16]=l):l=e[16],c=l;break e}case 5:{let l;e[17]!==a?(l=a("tutorial:moreUrl"),e[17]=a,e[18]=l):l=e[18];let n;e[19]!==l?(n={Link:o.jsx(js,{href:l,rel:"noreferrer",target:"_blank"})},e[19]=l,e[20]=n):n=e[20];let r;e[21]!==a||e[22]!==n?(r=o.jsx("div",{children:o.jsx(ze,{t:a,i18nKey:"tutorial:message.more",components:n})}),e[21]=a,e[22]=n,e[23]=r):r=e[23];let u;e[24]!==a?(u=a("tutorial:message.done"),e[24]=a,e[25]=u):u=e[25];let i;e[26]!==u?(i=o.jsx("div",{children:u}),e[26]=u,e[27]=i):i=e[27];let f;e[28]!==r||e[29]!==i?(f=o.jsxs(o.Fragment,{children:[r,i]}),e[28]=r,e[29]=i,e[30]=f):f=e[30],c=f}}return c}function vs(s){const e=J.c(14),{replaceModal:t}=s,a=h.useContext(G),[c,l]=h.useState(Y(Ce)?le:de);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{l(le),document.body.removeAttribute("data-tutorial-page"),te(Ce,"true")},e[0]=n):n=e[0];const r=n;let u;e[1]!==c||e[2]!==t?(u=()=>{c!==le&&(document.body.setAttribute("data-tutorial-page",c.toString()),t({isModal:!1,classes:["tutorial"],messageElement:o.jsx(ws,{page:c}),buttons:[{id:"tutorial-skip",message:"tutorial:button.skip",autoFocus:c===he,callback:r},{id:"tutorial-back",message:"tutorial:button.back",disabled:c===de,callback:()=>{l(_s)},close:!1},{id:"tutorial-next",message:"tutorial:button.next",autoFocus:c<he,disabled:c===he,callback:()=>{l(ys)},close:!1}],cancelCallback:r}))},e[1]=c,e[2]=t,e[3]=u):u=e[3];let i;e[4]!==c?(i=[c],e[4]=c,e[5]=i):i=e[5],h.useEffect(u,i);let f;e[6]!==c?(f=()=>{c===le&&l(de)},e[6]=c,e[7]=f):f=e[7];const m=f,p=c!==le;let _;e[8]!==a?(_=a("tutorial:link"),e[8]=a,e[9]=_):_=e[9];let w;return e[10]!==p||e[11]!==_||e[12]!==m?(w=o.jsx("button",{className:"link",disabled:p,onClick:m,children:_}),e[10]=p,e[11]=_,e[12]=m,e[13]=w):w=e[13],w}function ys(s){return s+1}function _s(s){return s-1}const ke="Search";function Ss(s){const e=J.c(14);let t,a;e[0]!==s?({reset:a,...t}=s,e[0]=s,e[1]=t,e[2]=a):(t=e[1],a=e[2]);const c=h.useContext(G);let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=o.jsx("img",{className:"header-logo",src:"logo.svg",alt:"",height:"40",width:"40"}),e[3]=l):l=e[3];let n;e[4]!==c?(n=c("titleVersion",{title:c("title"),version:c("version")}),e[4]=c,e[5]=n):n=e[5];let r;e[6]!==a||e[7]!==n?(r=o.jsx("h1",{children:o.jsxs("a",{href:"/poke-corpus/",onClick:a,children:[l," ",n]})}),e[6]=a,e[7]=n,e[8]=r):r=e[8];let u;e[9]!==t?(u=o.jsx(pe,{fallback:null,children:o.jsx(ft,{...t})}),e[9]=t,e[10]=u):u=e[10];let i;return e[11]!==r||e[12]!==u?(i=o.jsxs("header",{className:"header",children:[r,u]}),e[11]=r,e[12]=u,e[13]=i):i=e[13],i}function Cs(s){const e=J.c(30),{view:t,switchView:a,replaceModal:c}=s,l=h.useContext(G);let n;e[0]!==l?(n=l("tagline"),e[0]=l,e[1]=n):n=e[1];let r;e[2]!==n?(r=o.jsx("span",{children:n}),e[2]=n,e[3]=r):r=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[4]=u):u=e[4];let i;e[5]!==l?(i=l("footerText"),e[5]=l,e[6]=i):i=e[6];let f;e[7]!==i?(f=o.jsx("span",{children:i}),e[7]=i,e[8]=f):f=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[9]=m):m=e[9];let p;e[10]!==c?(p=o.jsx(vs,{replaceModal:c}),e[10]=c,e[11]=p):p=e[11];let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[12]=_):_=e[12];const w=t!=="Search"?"backToSearch":"manageCache";let v;e[13]!==l||e[14]!==w?(v=l(w),e[13]=l,e[14]=w,e[15]=v):v=e[15];let L;e[16]!==a||e[17]!==v?(L=o.jsx("button",{id:"view-switcher",className:"link",onClick:a,children:v}),e[16]=a,e[17]=v,e[18]=L):L=e[18];let M;e[19]===Symbol.for("react.memo_cache_sentinel")?(M=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[19]=M):M=e[19];let E;e[20]!==l?(E=l("github"),e[20]=l,e[21]=E):E=e[21];let A;e[22]!==E?(A=o.jsx("a",{href:"https://github.com/abcboy101/poke-corpus",children:E}),e[22]=E,e[23]=A):A=e[23];let g;return e[24]!==L||e[25]!==A||e[26]!==r||e[27]!==f||e[28]!==p?(g=o.jsxs("footer",{children:[r,u,f,m,p,_,L,M,A]}),e[24]=L,e[25]=A,e[26]=r,e[27]=f,e[28]=p,e[29]=g):g=e[29],g}function ks(){const[s,e]=h.useState(ce.language),[t,a]=h.useState(lt),[c,l]=h.useState(at),[n,r]=h.useState(ke),[u,i]=h.useState(0),[f,m]=h.useState([]),[p,_]=h.useState(!1),[w,v]=h.useState(void 0),{t:L}=Le();h.useEffect(()=>{window.location.pathname!=="/poke-corpus/"?window.location.replace("/poke-corpus/"+window.location.search+window.location.hash):window.location.search&&window.history.replaceState(null,"",window.location.pathname+window.location.hash);const j=Ae();document.body.classList.add(`mode-${j}`),_(!0),ps(v)},[]),h.useEffect(()=>{document.documentElement.lang=s,document.documentElement.dir=ce.dir(s),document.title=L("title"),document.querySelector('meta[name="description"]')?.setAttribute("content",L("tutorial:message.intro"))},[s]);const M=h.useCallback(j=>{window.location.hash="",st("corpus-params"),r(ke),i(C=>C+1&255),m([]),j.preventDefault()},[]),E=h.useCallback(j=>{m(C=>C.concat(j))},[]),A=h.useCallback(j=>{m([j])},[]),g=h.useCallback(()=>{r(j=>{const C=j!=="Search"?"Search":"CacheManager";return p||_(C==="CacheManager"),C})},[]);if(w===void 0)return;const y=["app",`view-${n.toLowerCase()}`];return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&y.push("ua-safari"),o.jsx(G,{value:L,children:o.jsxs("div",{className:y.join(" "),children:[o.jsx(Ss,{showModal:E,language:s,setLanguage:e,richText:t,setRichText:a,limit:c,setLimit:l,reset:M}),w!==null?o.jsxs(pe,{FallbackComponent:ge,children:[o.jsx(ss,{loader:w,showModal:E,language:s,richText:t,limit:c}),o.jsx(is,{active:n==="CacheManager",loader:w,showModal:E})]}):o.jsx(ge,{}),o.jsx(Cs,{view:n,switchView:g,replaceModal:A}),o.jsx(us,{closeCallback:()=>{m(j=>j.slice(0,-1))},...f.at(-1)})]},u)})}function Ls(){const s=J.c(3),{t:e}=Le();let t;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=o.jsx("div",{className:"app",children:o.jsx(ge,{})}),s[0]=t):t=s[0];let a;return s[1]!==e?(a=o.jsx(G,{value:e,children:t}),s[1]=e,s[2]=a):a=s[2],a}const Es=We.createRoot(document.getElementById("root"));Es.render(o.jsx(Ue.StrictMode,{children:o.jsx(pe,{FallbackComponent:Ls,children:o.jsx(ks,{})})}));tt({onOfflineReady(){console.log("Ready to work offline!")}});
