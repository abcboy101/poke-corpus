(function(){"use strict";var x={languages:["qid","ja-Hrkt","ja","en","en-GB","fr","it","de","es","ko","zh-Hans","zh-Hans-CN","zh-Hant"],collections:{Red:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Green:{languages:["ja-Hrkt"],structured:!1,files:["data"]},Blue:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Yellow:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Gold:{languages:["ja-Hrkt","en","fr","it","de","es","ko"],structured:!1,files:["data"]},Silver:{languages:["ja-Hrkt","en","fr","it","de","es","ko"],structured:!1,files:["data"]},Crystal:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},RubySapphire:{id:"rs",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:{ja:"1.1",en:"1.2",fr:"1.1",it:"1.1",de:"1.1",es:"1.1"},files:["msg"],literals:{KUN:{branch:"gender",line:[12326,12327]},VERSION:{branch:"version",line:[12329,12328]},EVIL_TEAM:{branch:"version",line:[12331,12330]},GOOD_TEAM:{branch:"version",line:[12330,12331]},EVIL_LEADER:{branch:"version",line:[12333,12332]},GOOD_LEADER:{branch:"version",line:[12332,12333]},EVIL_LEGENDARY:{branch:"version",line:[12335,12334]},GOOD_LEGENDARY:{branch:"version",line:[12334,12335]},RIVAL:{branch:"gender",line:[12337,12336]}}},FireRedLeafGreen:{id:"frlg",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:{ja:"1.0",en:"1.1",fr:"1.0",it:"1.0",de:"1.0",es:"1.0"},files:["msg"],literals:{KUN:{branch:"gender",line:[9312,9313]}}},Emerald:{id:"e",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:"1.0",files:["msg"],literals:{KUN:{branch:"gender",line:[15083,15084]},VERSION:{line:15087},EVIL_TEAM:{line:15088},GOOD_TEAM:{line:15089},EVIL_LEADER:{line:15090},GOOD_LEADER:{line:15091},EVIL_LEGENDARY:{line:15092},GOOD_LEGENDARY:{line:15093},RIVAL:{branch:"gender",line:[15095,15094]}}},DiamondPearl:{id:"dp",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es","ko"],structured:!0,files:["msg"]},Platinum:{id:"pt",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es","ko"],structured:!0,files:["msg"]},HeartGoldSoulSilver:{id:"hgss",languages:["qid","ja-Hrkt","en","fr","it","de","es","ko"],structured:!0,files:["msg"]},BlackWhite:{id:"bw",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,files:["common","script"]},Black2White2:{id:"b2w2",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,files:["common","script"]},XY:{id:"xy",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,version:"1.5",files:["common","script"]},OmegaRubyAlphaSapphire:{id:"oras",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,version:"1.4",files:["common","script"]},SunMoon:{id:"sm",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.2",files:["common","script"],speaker:{file:"common",textFile:"58"}},UltraSunUltraMoon:{id:"usum",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.2",files:["common","script"],speaker:{file:"common",textFile:"63"}},LetsGoPikachuLetsGoEevee:{id:"lgpe",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hans-CN","zh-Hant"],structured:!0,version:"1.0.0/1.0.1/1.0.2",files:["common","script"]},SwordShield:{id:"swsh",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.3.0/1.3.1/1.3.2",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},BrilliantDiamondShiningPearl:{id:"bdsp",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.3.0",files:["message"],speaker:{file:"message",textFile:"dlp_speakers_name"}},LegendsArceus:{id:"la",languages:["qid","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.1.0/1.1.1",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},ScarletViolet:{id:"sv",languages:["qid","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"3.0.1",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},Stadium:{id:"stad",languages:["qid","en","fr","it","de","es"],structured:!0,files:["msg"]},Stadium2:{id:"stad2",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,files:["msg"]},Colosseum:{id:"colo",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,files:["msg"]},XD:{id:"xd",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,files:["msg"]},BattleRevolution:{id:"pbr",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,version:{ja:"0/1/2",en:"0","en-GB":"0",fr:"0",it:"0",de:"0",es:"0"},files:["message"],literals:{'"No."':{branch:"language",line:{ja:992,en:993,"en-GB":993,de:994,fr:995,es:996,it:997}},'"Lv."':{branch:"language",line:{ja:998,en:999,"en-GB":999,de:1e3,fr:1001,es:1002,it:1003}},'"HP"':{branch:"language",line:{ja:1036,en:1037,"en-GB":1037,de:1038,fr:1039,es:1040,it:1041}},'"PP"':{branch:"language",line:{ja:1042,en:1043,"en-GB":1043,de:1044,fr:1045,es:1046,it:1047}}}},Box:{id:"box",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es"],structured:!0,files:["message"]},Ranch:{id:"ranch",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es"],structured:!0,version:{"ja-Hrkt":"258",en:"256","en-GB":"1",fr:"1",it:"1",de:"1",es:"1"},files:["msg"]},Bank:{id:"bank",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.5",files:["turtle"]},HOME:{id:"home",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"3.2.1",files:["megaturtle"]}}};const w="qid",f=x;var z=[["805868F0",451848],["FE0A4516",184505],["0E6B4AFC",186358],["38089687",184678],["C8E18522",192736],["AC075F40",185187],["BC8E428D",451830],["E0EDED5F",452016],["AE888233",184382],["42CE5E23",186162],["49A1D761",184638],["E6BE2C39",192693],["EEE6AA0B",184987],["D0A898D8",914491],["B4916E10",247699],["9353A098",247605],["01E40379",247360],["B9271014",255341],["7A3C7531",247525],["93D27A9D",853930],["50D2D70E",371161],["297D48D7",423562],["9E40D227",443434],["7E45FF40",433301],["E53FA927",443211],["DB38E4EE",716552],["F5DB65C4",853759],["CB8106C0",371328],["847BC0BC",423799],["F4F9E121",443569],["31E85F86",433496],["CCEB35BA",443147],["B5AC5376",716517],["C258E1C0",1188380],["AA0CCAD6",516532],["061F929E",583183],["9EB0BB7D",617996],["3154E257",605519],["287D9986",626416],["1B6B811F",56247],["47F479B5",219921],["E98655B9",240723],["A5BA82AE",251904],["66BF6AE1",243507],["24BE0C34",265357],["48268292",253204],["15DA0A67",80381],["B5C9124E",206414],["D50DFB6F",212463],["8BDC97A0",209249],["7F5DBF9C",203357],["BAFD4554",223099],["79526023",209842],["464B1550",105715],["51475FA2",326267],["C1B05D7D",337789],["B91D2631",351308],["3F0AD689",343626],["812A1AB9",378330],["AA61A5BF",362267],["2B0D4B93",43358],["4099815E",376719],["84F40320",388650],["29B036CE",388681],["0DC0C801",400743],["5F383159",389326],["4BEBC37F",417162],["0F3533F4",391860],["D04747A5",360598],["3A1A9B1D",65345],["FE24EBA5",612667],["BA770121",658769],["77D03C5A",658313],["D682B4F0",684442],["EB5BDC07",667841],["8480C337",718397],["B7C75056",670887],["4DFDC058",618906],["4D550F2C",73843],["02E07432",706176],["FDDCDA94",647631],["53CE37FA",661809],["04562F1B",661962],["F3046B23",741538],["4A0B43F8",663095],["EB34D45B",642189],["9C34BDCD",74122],["B7574077",14277],["F995C30A",418914],["9D60674E",238161],["30FC1626",431312],["0F0B9315",251501],["2BD96831",427975],["B2A835DB",231433],["C25D8FD2",440869],["B4D5380B",253667],["19CCEDE0",435286],["A7392F1D",238116],["21A4F991",471647],["F5456BBE",286258],["319F6C84",434313],["D35D93AA",255061],["3202D6A1",432445],["5821F1C6",228581],["8098B211",108529],["DA8465B6",23285],["D986A44C",689295],["D26EF998",345597],["6788D3EB",725690],["D853AAFB",366512],["809A966C",661231],["71BD1A82",321837],["A7E66C77",686073],["6263F6C4",364277],["1C541F50",676483],["80392CBD",345983],["8C28A3B1",743806],["5C726113",400249],["E4D9A8A1",709524],["F010E441",388964],["611CB7AE",654063],["270BED6B",326680],["F9AC014E",41653],["7CBC93B4",13564],["5D77F2D3",290600],["19096712",193156],["99B3AF25",304677],["7EF08E1A",204728],["DCB617AB",309647],["33EF4A6B",218185],["B199F277",317847],["E4933814",237126],["C3A6023B",305573],["34ECA43C",204825],["4E05F7C3",331242],["B9A4C5A5",249282],["719F6CF7",336580],["D4C5FC1F",253405],["B779A7AA",293411],["AB306EB4",193921],["D0453ADC",52057],["A49819C8",20978],["D5E64271",361359],["81DC14F2",251358],["607BD37E",380246],["79364FB4",267071],["C6F7E9BB",391949],["55CB3423",261236],["F3C1F5D1",412072],["A445144E",275169],["04BED485",395485],["32F9174D",249289],["4C011AA6",431932],["3B6F2B5D",311428],["A159FCC1",426053],["EFBA305C",281565],["9727DB13",363094],["00F9CD07",247291],["66850A84",49635],["F7C003F5",19275],["D6E2E088",251306],["3A9A986B",221524],["FC0C8ADD",262055],["3155AD9B",234129],["36A24DD7",264111],["7DE90361",266183],["B1B911A6",281427],["D154C0F5",292914],["914BC9E8",269703],["FCB58A19",255431],["73318A95",286031],["1DACFB2B",294363],["E024B96B",284632],["0482085E",291207],["DBACF489",250082],["9EEA28B7",220906],["6C6BDA9A",248873],["615402EC",225468],["E7763E5F",251831],["DCF080B4",228710],["E9064BC7",57142],["515C63BC",30391],["B029ECEF",287029],["D7459F7B",351512],["C2849705",299536],["76226F39",371546],["925DA459",304276],["1332A7BF",417674],["1E24F599",322366],["08238B58",462128],["72449731",311083],["4DC4D0F7",410852],["2A36BB82",331386],["B6CCB707",473448],["485DE0B0",327958],["B0BDACD1",465944],["ECDEB54B",285212],["6046FCAE",351632],["8015D11D",285461],["B97E3074",357817],["291B1F2D",289137],["C47A8D10",363279],["56BFFE84",70001],["0F56A27C",17961],["78D61CE1",188757],["3046EC50",91141],["AB01F4D4",195222],["EAEAC744",96916],["7BDB3096",185660],["A731DF7B",98146],["79D3F3B5",196364],["90DADB7E",112741],["3CD179DB",189954],["3CA333A8",100965],["8D12AA04",201217],["DE0762F4",122416],["C3639674",195797],["3449002C",112911],["D23A1D38",186937],["70B92862",92474],["920D68A3",183962],["38CB3189",99595],["4A2AF0BD",183355],["0C39B49A",99105],["9CFCB04F",185584],["24056C87",98436],["F88C7D51",109707],["D06EC6B0",47268],["BC465CEB",327255],["DABDD117",249057],["DB6499F8",343106],["A1E9A260",263024],["2E39FF52",353598],["D72D5490",301521],["E97E3DEA",360374],["C14BE010",316566],["B243A50B",354609],["6DD06B2E",294483],["71E64CE2",374758],["B755DFD7",338573],["D675ED02",354540],["C109C728",315868],["099C8225",334519],["ACBD302C",263043],["CAAB3D17",340926],["3239020C",280033],["94E2F348",339910],["7DD6502E",283225],["A3C49BBF",99393],["87647E62",438279],["9616FC8D",459527],["A2BCEA38",441003],["224162EA",473430],["1B465C57",456582],["FF560BEE",502888],["690BFF6E",465097],["1C088BF9",412634],["BDB8EF03",416941],["EC2A02E5",430970],["868957D1",74049],["A142B3F1",24108],["AE7A3398",217519],["5F77F1A4",230194],["C7DC5911",212569],["EFC20517",250558],["B1E9377A",212889],["C74A122A",247223],["D054DE70",207469],["CE8B0601",241619],["ED88D7E1",217691],["FC76E487",250690],["D766E68F",209904],["0B78B3D6",250516],["7707196A",196581],["D6E20DF4",198422],["AEE9875F",197067],["7F1BE555",196414],["2E5BAC17",197521],["1365CBAA",206782],["9D22F3E2",142866],["1D2F4BF3",71136],["B38DE6C7",428923],["C0C91D78",523598],["99B6F5E4",400940],["D1F7D9A3",527195],["DB66385A",410479],["8D9AFC15",540864],["2A68B3C4",396595],["E0AC173E",500289],["300A80E9",415883],["23719FF4",547694],["B53002F4",401220],["14C7FDE3",535541],["B6B8EBAE",376872],["6D12C9E1",440546],["EDD3DC38",377240],["B2485F5C",432631],["A12D9827",380373],["4C32D9D0",449342],["C3E5FB9D",4339],["8F488338",26442],["C0CC6C78",27488],["C000BF76",26723],["5D8671DF",30377],["38FA9F65",28212],["A8F362C0",43636],["3BF95355",213995],["8B89062A",189456],["BD1820D9",174259],["40824263",181488],["38D29549",211516],["CDD1322A",188971],["EA1432F5",14904],["CA9CD9BD",185298],["E266968F",191903],["97ECABBA",187664],["87A27B31",197388],["04872EBD",196569],["8E557D83",204124],["1605EDD5",197879],["26D93D24",11886],["95CC0171",294807],["C46156B1",261280],["9EA398A5",234498],["68062841",229744],["656E796C",230208],["A80BEC67",254904],["A190FDDD",241132],["3356A778",27511],["F8317CFE",168076],["F71850AB",154401],["E554DABC",154242],["C7E7F875",160914],["2C56E000",156325],["A55CCB2E",163853],["DE9A5332",149658],["9920B1E3",3505],["CCD878B1",11682],["CC445D0F",10530],["A01D9E8C",10488],["3B409C23",11138],["0B197BEA",10982],["4452D813",11317],["D958ECBF",11107],["4028E267",10276],["38B7948A",85967],["B3B75E50",63779],["34A6C0E7",63992],["F1318B98",68269],["CA1ADAA3",67235],["12F3987F",68652],["0E2E5E91",66187],["8EA29A66",28943],["A6D0F48B",252507],["BA9443EB",266550],["886D0304",287489],["606FC990",290952],["DC096C52",284717],["A25EDA41",300791],["B5DC512F",288797],["41303CFE",254545],["BF4FC8A0",260380],["7DEBD604",262359],["2439FD69",119685],["45B39AA0",695517],["178F33F9",724549],["34E25F98",770042],["9A31C8AB",773486],["2B197D76",756785],["6CBB2A0F",817937],["64A00033",763166],["B2E49CB7",695621],["DE6516AD",711468],["42A2B796",713699]];const v=(s,t,e)=>`corpus/${s}/${t}_${e}.txt.gz`,q=s=>"/poke-corpus/"+s,P=async(s,t,e)=>{const a=q(e),[r,o]=await V(t,e);if((o==null?void 0:o.hash)===r.hash||!navigator.onLine&&(o==null?void 0:o.hash)!==void 0){const l=await $(s,a);if(l!==void 0)return l}const n=await fetch(a);return await Y(s,a,n).then(async l=>{l&&await T(t,e)}),n},S=s=>{const t=q(s);return fetch(t)},y=z,L=Object.fromEntries(Object.entries(f.collections).flatMap(([s,t])=>t.languages.flatMap(e=>t.files.map(a=>v(s,e,a)))).map((s,t)=>[s,{hash:y[t][0],size:y[t][1]}])),N="corpus",F="files",I=()=>{const s=indexedDB.open(N);return new Promise((t,e)=>{s.onupgradeneeded=()=>{s.result.createObjectStore(F),s.transaction!==null&&(s.transaction.oncomplete=()=>{console.log("Created object store")})},s.onsuccess=()=>t(s.result),s.onerror=()=>e(s.error)})},M=s=>L[s],_=(s,t)=>{const r=s.transaction([F],"readonly").objectStore(F).get(t);return new Promise((o,n)=>{r.onsuccess=()=>o(r.result),r.onerror=()=>n(r.error)})},T=(s,t)=>{const r=s.transaction([F],"readwrite").objectStore(F).put(L[t],t);return new Promise((o,n)=>{r.onsuccess=()=>o(r.result===t),r.onerror=()=>n(r.error)})},V=async(s,t)=>[M(t),await _(s,t)],U="corpus",W=async()=>await caches.open(U),$=async(s,t)=>{try{const e=await s.match(t);return e}catch(e){console.error(e);return}},Y=async(s,t,e)=>{try{return await s.put(t,e.clone()),!0}catch(a){return console.error(a),!1}};function K(s){return new Worker("/poke-corpus/assets/searchWorker-CHa8UlTe.js",{name:s==null?void 0:s.name})}const Q=s=>({success:!0,postfix:s}),k=s=>({success:!1,message:s}),J=s=>s.replaceAll("\\\\","󰄀").replaceAll("\\(","󰄈").replaceAll("\\)","󰄉").replaceAll('\\"',"󰆀"),R=s=>s.replaceAll("󰄈","(").replaceAll("󰄉",")").replaceAll("󰆀",'"').replaceAll("󰄀","\\\\");function X(s){s=J(s);const t=s.split(/(\b(?:NOT|AND|OR)\b|\\?["()])/u).filter(o=>o.length>0),e=[],a=[];let r=!1;for(const o of t){const n=o.trim();if(r&&n!=='"'){a[a.length-1]+=o;continue}switch(n){case"NOT":e.push(n);break;case"AND":case"OR":for(;e[e.length-1]!=="("&&(e[e.length-1]==="NOT"||e[e.length-1]==="AND"&&n==="OR"||n==e[e.length-1]);)a.push(e.pop());e.push(n);break;case'"':if(!r)e.push(n),r=!0,a.push("");else if(e[e.length-1]==='"')for(e.pop(),a.push(`"${a.pop()}"`),r=!1;e[e.length-1]==="NOT";)a.push(e.pop());break;case"(":e.push(n);break;case")":for(;e[e.length-1]!=="(";){if(e.length===0)return k("parentheses");a.push(e.pop())}if(e[e.length-1]!=="(")return k("parentheses");for(e.pop();e[e.length-1]==="NOT";)a.push(e.pop());break;default:n.length>0&&a.push(n)}}for(;e.length>0;){if(e[e.length-1]==="(")return k("parentheses");if(e[e.length-1]==='"')return k("quote");a.push(e.pop())}return Q(a)}function Z(s,t){const e=[];for(const a of t)switch(a){case"NOT":{const r=e.pop();e.push(o=>!r(o));break}case"AND":{const r=e.pop(),o=e.pop();e.push(n=>o(n)&&r(n));break}case"OR":{const r=e.pop(),o=e.pop();e.push(n=>o(n)||r(n));break}default:if(a.startsWith('"')&&a.endsWith('"')){const r=R(a.substring(1,a.length-1));if(!s.caseInsensitive)e.push(o=>o.includes(r));else{const o=r.toLowerCase(),n=r.toUpperCase();e.push(l=>l.toLowerCase().includes(o)||l.toUpperCase().includes(n))}}else{const r=R(a).split(/\s+/);if(!s.caseInsensitive)e.push(o=>r.every(n=>o.includes(n)));else{const o=r.map(l=>l.toLowerCase()),n=r.map(l=>l.toUpperCase());e.push(l=>r.every((E,B)=>l.toLowerCase().includes(o[B])||l.toUpperCase().includes(n[B])))}}}for(;e.length>1;){const a=e.pop(),r=e.pop();e.push(o=>r(o)&&a(o))}return e.pop()}function ee(s){const t=X(s.query);if(!t.success)return t.message;try{const e=Z(s,t.postfix);return e===void 0?"empty":(e(""),"success")}catch{return"operand"}}const O=async(s,t,e)=>{const a=v(s,t,e);let r;try{if("caches"in self&&"indexedDB"in self&&"databases"in self.indexedDB){const n=await W(),l=await I();r=await P(n,l,a),l.close()}else r=await S(a)}catch(n){return console.error(n),""}const o=(await r.blob()).stream();return new Response(o.pipeThrough(new DecompressionStream("gzip"))).text()};self.onmessage=s=>{const t=s.data,e=t.showAllLanguages||t.languages.includes(w),a=.5,r=.5,o=0,n=(E,B,p,j)=>{const h=B*a+p*r+j*o;postMessage({complete:!1,status:E,progress:h,showId:e,results:[]})},l=(E,B=[])=>{postMessage({complete:!0,status:E,progress:1,showId:e,results:B})};try{n("loading",0,0,0);try{t.type==="regex"&&new RegExp(t.query,t.caseInsensitive?"ui":"u")}catch(c){console.error(c),l("regex");return}if(t.type==="boolean"){let c=t;const i=/(.*)\bWHERE\s+([A-Za-z_-]+)\s*(=|==|<>|!=)\s*([A-Za-z_-]+)$/u.exec(t.query);if(i){const[,A,D,,d]=i;if(!f.languages.includes(D)||!f.languages.includes(d)){l("boolean.where");return}c={...t,query:A}}const u=ee(c);if(u!=="success"&&!(i&&u==="empty")){console.error(u),l(`boolean.${u}`);return}}let E=0;const B=[];if(Object.keys(f.collections).filter(c=>t.collections.includes(c)).forEach(c=>{const i=f.collections[c];t.languages.every(u=>!i.languages.includes(u))||i.files.filter(u=>!(u==="common"&&!t.common||u==="script"&&!t.script)).forEach(u=>{const A=i.structured&&t.showAllLanguages?i.languages:i.languages.filter(D=>t.languages.includes(D)||D===w);i.structured?B.push({index:E,params:t,collectionKey:c,fileKey:u,languages:A,speaker:i==null?void 0:i.speaker,literals:i==null?void 0:i.literals}):A.forEach((D,d)=>{B.push({index:E+d,params:t,collectionKey:c,fileKey:u,languages:[D]})}),E+=A.length})}),B.length===0){l("noMatch");return}let p=0,j=0,h=0;const b=()=>[p/E,j/E,h/B.length],se=c=>(p++,n("loading",...b()),c),te=()=>{j++,n("processing",...b())},re=()=>{h++,n("collecting",...b())};let m=!1,G=!1;const H=[],g=[],ne=c=>{if(m)return;const i=c.data;if(i.status==="processing")te();else if(i.status==="done"){if(H.push(i),re(),h===B.length){const u=[];H.sort((d,C)=>d.index-C.index);let A="",D="";H.map(d=>d.result).filter(({lines:d})=>d.length>0).forEach(d=>{u.push({...d,displayHeader:d.collection!==A||d.file!==D}),A=d.collection,D=d.file}),l(G?"network":"done",u),g.forEach(d=>d.terminate())}}else m=!0,l(i.status),g.forEach(u=>u.terminate())},ae=Math.max(1,Math.min(B.length,(navigator.hardwareConcurrency||4)-2));for(let c=0;c<ae;c++){const i=new K;i.onmessage=ne,i.onerror=()=>{m||(m=!0,l("error"),g.forEach(u=>u.terminate()))},g.push(i)}B.forEach(async(c,i)=>{const u=c.speaker,A=await Promise.all(c.languages.map(C=>O(c.collectionKey,C,c.fileKey).then(se))),D=u===void 0?void 0:await Promise.all(c.languages.map(C=>O(c.collectionKey,C,u.file)));if((A.some(C=>C==="")||D&&D.some(C=>C===""))&&(G=!0),m)return;const d={...c,files:A,speakerFiles:D};g[i%g.length].postMessage(d)})}catch(E){console.error(E),l("error")}}})();
