import{c as J,u as K,r as j,j as o,a as Te,i as le,B as Ie,b as $e,d as Fe,E as fe,R as De}from"./vendor-BFldqTrA.js";import{R as Oe}from"./react-dom-CrVbSEdl.js";import{t as Ve,i as Be,f as qe,l as ze,c as Ue,a as We}from"./i18n-en-CFKXdqgh.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();const He="modulepreload",Ge=function(s){return"/poke-corpus/"+s},pe={},D=function(e,t,l){let a=Promise.resolve();if(t&&t.length>0){let u=function(i){return Promise.all(i.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");a=u(t.map(i=>{if(i=Ge(i),i in pe)return;pe[i]=!0;const f=i.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${g}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":He,f||(p.as="script"),p.crossOrigin="",p.href=i,r&&p.setAttribute("nonce",r),document.head.appendChild(p),f)return new Promise((E,k)=>{p.addEventListener("load",E),p.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${i}`)))})}))}function c(n){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n}return a.then(n=>{for(const r of n||[])r.status==="rejected"&&c(r.reason);return e().catch(c)})};function Ke(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:l,onRegistered:a,onRegisteredSW:c,onRegisterError:n}=s;let r,u;const i=async(g=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(r=await D(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/poke-corpus/sw.js",{scope:"/poke-corpus/",type:"classic"})).catch(g=>{n?.(g)}),!r)return;r.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),r.addEventListener("installed",g=>{g.isUpdate||l?.()}),r.register({immediate:e}).then(g=>{c?c("/poke-corpus/sw.js",g):a?.(g)}).catch(g=>{n?.(g)})}}return u=f(),i}const be=s=>s.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");function Y(s){try{return localStorage.getItem(s)}catch{return null}}function te(s,e){try{localStorage.setItem(s,e)}catch{return}}function Je(s){try{localStorage.removeItem(s)}catch{return}}const _e=["system","light","dark"],Se=s=>_e.some(e=>s===e),Ze=s=>typeof s=="string"&&Se(s)?s:"system",ke=()=>Ze(Y("mode")),ue=500,Qe=s=>!Number.isNaN(s)&&Number.isInteger(s)&&s>0,Xe=()=>{const s=+(Y("corpus-limit")??ue);return Number.isNaN(s)?ue:s},Ye=()=>Y("corpus-richText")!=="false",xe=["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"];function ae(s){const e=Math.min(Math.floor((s.toString().length-1)/3),xe.length-1),t={style:"unit",unit:xe[e],unitDisplay:e===0?"long":"short",minimumFractionDigits:e===0?0:1,maximumFractionDigits:1,maximumSignificantDigits:3,roundingPriority:"lessPrecision"};return{amount:s/Math.pow(1e3,e),formatParams:{amount:t}}}function et(s,e=1){return{amount:s,formatParams:{amount:{style:"percent",minimumFractionDigits:e,maximumFractionDigits:e}}}}function Ce(s){try{return JSON.parse(s)}catch(e){return console.error(e),null}}function ee(s){console.error(s)}const tt=[{code:"en",name:"English (United States)"},{code:"en-GB",name:"English (United Kingdom)"},{code:"ja",name:"日本語"},{code:"de",name:"Deutsch"},{code:"fr",name:"Français (France)"},{code:"fr-CA",name:"Français (Canada)"},{code:"es",name:"Español (España)"},{code:"it",name:"Italiano"},{code:"ko",name:"한국어"},{code:"zh-Hans",name:"简体中文"},{code:"zh-Hant",name:"繁体中文"}];function st(s){const e=J.c(61),{showModal:t,language:l,setLanguage:a,richText:c,richTextRef:n,limit:r,limitRef:u}=s,{t:i}=K(),[f,g]=j.useState(ke);let p;e[0]!==a||e[1]!==t||e[2]!==i?(p=h=>{Te(h.target.value,x=>{x?.some(at)?(console.error(x),t({message:i("options.network"),buttons:[{message:o.jsx(Le,{}),autoFocus:!0}]})):a(h.target.value)}).catch(ee)},e[0]=a,e[1]=t,e[2]=i,e[3]=p):p=e[3];const E=p;let k;e[4]!==f?(k=h=>{const x=h.target.value;Se(x)&&(g(x),te("mode",x),document.body.classList.replace(`mode-${f}`,`mode-${x}`))},e[4]=f,e[5]=k):k=e[5];const S=k,y=ot;let R;e[6]!==i?(R=i("options.language"),e[6]=i,e[7]=R):R=e[7];let A;e[8]!==R?(A=o.jsx("label",{htmlFor:"language",children:R}),e[8]=R,e[9]=A):A=e[9];let N;e[10]===Symbol.for("react.memo_cache_sentinel")?(N=tt.map(nt),e[10]=N):N=e[10];let d;e[11]!==l||e[12]!==E?(d=o.jsx("select",{name:"language",id:"language",onChange:E,defaultValue:l,autoFocus:!0,translate:"no",children:N}),e[11]=l,e[12]=E,e[13]=d):d=e[13];let v;e[14]!==i?(v=i("options.mode"),e[14]=i,e[15]=v):v=e[15];let b;e[16]!==v?(b=o.jsx("label",{htmlFor:"mode",children:v}),e[16]=v,e[17]=b):b=e[17];let _;e[18]!==i?(_=_e.map(h=>o.jsx("option",{value:h,children:i(`options.modes.${h}`)},h)),e[18]=i,e[19]=_):_=e[19];let w;e[20]!==f||e[21]!==S||e[22]!==_?(w=o.jsx("select",{name:"mode",id:"mode",onChange:S,defaultValue:f,children:_}),e[20]=f,e[21]=S,e[22]=_,e[23]=w):w=e[23];let P;e[24]!==i?(P=i("options.longURL"),e[24]=i,e[25]=P):P=e[25];let L;e[26]!==P?(L=o.jsx("label",{htmlFor:"longURL",children:P}),e[26]=P,e[27]=L):L=e[27];let F,M;e[28]===Symbol.for("react.memo_cache_sentinel")?(F=Y("corpus-longURL")??"false",M=["true","false"],e[28]=F,e[29]=M):(F=e[28],M=e[29]);let $;e[30]!==i?($=o.jsx("select",{name:"longURL",id:"longURL",onChange:y,defaultValue:F,children:M.map(h=>o.jsx("option",{value:h,children:i(`options.longURLSelect.${h}`)},h))}),e[30]=i,e[31]=$):$=e[31];let C;e[32]!==i?(C=i("options.richText"),e[32]=i,e[33]=C):C=e[33];let T;e[34]!==C?(T=o.jsx("label",{htmlFor:"richText",children:C}),e[34]=C,e[35]=T):T=e[35];const q=c?"true":"false";let U;e[36]===Symbol.for("react.memo_cache_sentinel")?(U=["true","false"],e[36]=U):U=e[36];let m;e[37]!==i?(m=U.map(h=>o.jsx("option",{value:h,children:i(`options.richTextSelect.${h}`)},h)),e[37]=i,e[38]=m):m=e[38];let V;e[39]!==n||e[40]!==q||e[41]!==m?(V=o.jsx("select",{ref:n,name:"richText",id:"richText",defaultValue:q,children:m}),e[39]=n,e[40]=q,e[41]=m,e[42]=V):V=e[42];let O;e[43]!==i?(O=i("options.limit"),e[43]=i,e[44]=O):O=e[44];let W;e[45]!==O?(W=o.jsx("label",{htmlFor:"limit",children:O}),e[45]=O,e[46]=W):W=e[46];let G;e[47]!==r||e[48]!==u?(G=o.jsx("input",{ref:u,type:"number",name:"limit",id:"limit",min:1,defaultValue:r}),e[47]=r,e[48]=u,e[49]=G):G=e[49];let Q;return e[50]!==w||e[51]!==L||e[52]!==$||e[53]!==T||e[54]!==V||e[55]!==W||e[56]!==G||e[57]!==A||e[58]!==d||e[59]!==b?(Q=o.jsx("div",{className:"options",children:o.jsxs("div",{className:"options-grid",children:[A,d,b,w,L,$,T,V,W,G]})}),e[50]=w,e[51]=L,e[52]=$,e[53]=T,e[54]=V,e[55]=W,e[56]=G,e[57]=A,e[58]=d,e[59]=b,e[60]=Q):Q=e[60],Q}function nt(s){return o.jsx("option",{value:s.code,lang:s.code,children:s.name},s.code)}function ot(s){const e=s.target.value;(e==="true"||e==="false")&&te("corpus-longURL",e)}function at(s){return!s.message.includes("Unknown variable dynamic import")}function Le(){const s=J.c(2),{t:e}=K();let t;return s[0]!==e?(t=e("options.close"),s[0]=e,s[1]=t):t=s[1],t}function lt(s){const e=J.c(22),{t}=K(),{showModal:l,setRichText:a,setLimit:c}=s,n=j.useRef(null),r=j.useRef(null);let u;e[0]!==c||e[1]!==a?(u=()=>{if(n.current!==null){const d=n.current.value;(d==="true"||d==="false")&&(te("corpus-richText",d),a(d!=="false"))}if(r.current!==null){const d=r.current.valueAsNumber;Qe(d)&&(te("corpus-limit",d.toString()),c(d))}},e[0]=c,e[1]=a,e[2]=u):u=e[2];const i=u;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=["modal-options"],e[3]=f):f=e[3];let g;e[4]!==s?(g=o.jsx(st,{...s,richTextRef:n,limitRef:r}),e[4]=s,e[5]=g):g=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=o.jsx(Le,{}),e[6]=p):p=e[6];let E;e[7]!==i?(E=[{message:p,callback:i}],e[7]=i,e[8]=E):E=e[8];let k;e[9]!==i||e[10]!==g||e[11]!==E?(k={classes:f,message:g,buttons:E,cancelCallback:i},e[9]=i,e[10]=g,e[11]=E,e[12]=k):k=e[12];const S=k;let y;e[13]!==S||e[14]!==l?(y=()=>{l(S)},e[13]=S,e[14]=l,e[15]=y):y=e[15];let R;e[16]===Symbol.for("react.memo_cache_sentinel")?(R=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#gear"})}),e[16]=R):R=e[16];let A;e[17]!==t?(A=t("options.options"),e[17]=t,e[18]=A):A=e[18];let N;return e[19]!==y||e[20]!==A?(N=o.jsxs("button",{className:"header-options",onClick:y,children:[R,A]}),e[19]=y,e[20]=A,e[21]=N):N=e[21],N}function ct(s){return new Worker("/poke-corpus/assets/searchWorkerManager-CqdcLtAn.js",{name:s?.name})}function rt(s){return new Worker("/poke-corpus/assets/textWorker-BolGUc3z.js",{name:s?.name})}const it=["error","regex","noMatch","network","boolean.parentheses","boolean.regex","boolean.slash","boolean.quote","boolean.operand","boolean.empty","boolean.where"],ut=s=>it.some(e=>s===e),ht=["waiting","loading","processing","collecting"],Ee=s=>ht.some(e=>s===e),se=["exact","regex","boolean","all"],ge=s=>se.some(e=>s===e),Pe={id:"",file:"",query:"",type:"all",caseInsensitive:!0,common:!0,script:!0,showAllLanguages:!0,run:!1},dt=s=>({...Pe,collections:s.collections.filter(e=>s.getCollection(e).structured),languages:s.languages}),ft=s=>{function e(h){const x={};return h.id!==void 0&&(x.id=h.id),h.file!==void 0&&(x.file=h.file),h.run!==void 0&&(x.run=h.run.toString()),new URLSearchParams({query:h.query,type:h.type,caseInsensitive:h.caseInsensitive.toString(),common:h.common.toString(),script:h.script.toString(),showAllLanguages:h.showAllLanguages.toString(),collections:h.collections.join(","),languages:h.languages.join(","),...x}).toString()}function t(h){const x=new URLSearchParams(h);return{id:l(x.get("id")),file:l(x.get("file")),query:l(x.get("query")),type:c(x.get("type")??(x.get("regex")==="true"?"regex":null),ge),caseInsensitive:a(x.get("caseInsensitive")),common:a(x.get("common")),script:a(x.get("script")),showAllLanguages:a(x.get("showAllLanguages")),collections:n(x.get("collections"),s.isCollectionKey),languages:n(x.get("languages"),s.isLanguageKey,r),run:a(x.get("run"))}}function l(h){return h??void 0}function a(h){switch(h){case"true":return!0;case"false":return!1}}function c(h,x){if(h!==null&&x(h))return h}function n(h,x,I=B=>B){if(h!==null)return h.split(",").map(I).filter(x)}function r(h){switch(h){case"qid-ZZ":case"ja-JP":case"en-US":case"fr-FR":case"it-IT":case"de-DE":case"es-ES":case"ko-KR":return h.split("-",1)[0];case"ja-Hrkt-JP":return"ja-Hrkt";case"zh-CN":return"zh-Hans";case"zh-TW":return"zh-Hant";default:return h}}const u=s.languages.filter(h=>h!=="en-AU"),i=s.collections,f=i.length^u.length<<4,g=2,p=Math.ceil(u.length/8),E=Math.ceil(i.length/8),k=p+E,S=64,y=Math.ceil(Math.log2(u.length+i.length)),R=g+k,A=h=>btoa(String.fromCodePoint(...h)).replaceAll("/","_").replaceAll("+","-").replace(/=+$/,""),N=h=>Uint8Array.from(atob(h.replaceAll("_","/").replaceAll("-","+")),x=>x.charCodeAt(0));function d(h){const x={};h.id!==void 0&&(x.id=h.id),h.file!==void 0&&(x.file=h.file);const I=b(h);return q(I),new URLSearchParams({...x,q:h.query,s:A(I)}).toString()}function v(h){const x=new URLSearchParams(h),I={id:l(x.get("id")),file:l(x.get("file")),query:l(x.get("q"))},B=l(x.get("s"));if(!B)return I;try{const z=N(B).subarray(0,R);return U(z),{...I,..._(z)}}catch{return I}}function b(h){h={...h,languages:h.languages.map(z=>z==="en-AU"?"en-GB":z)};const x=new Uint8Array(R);x[1]=+(h.run??Pe.run)<<0|+h.caseInsensitive<<1|+h.common<<2|+h.script<<3|se.indexOf(h.type)<<4|+!h.showAllLanguages<<7;const I=x.subarray(g);w(h,I),L(I,x.subarray(1,2));let B=x.length;for(;x[B-1]===0&&B>1;)B--;return x.subarray(0,B)}function _(h){const x=new Uint8Array(k);h[1]&S?P(h.subarray(g),x):x.set(h.subarray(g));const I=u.filter((H,Z)=>T(x,Z)),B=i.filter((H,Z)=>T(x,8*p+Z)),z=I.indexOf("en-GB");return z!==-1&&I.splice(z+1,0,"en-AU"),{run:(h[1]&1)!==0,caseInsensitive:(h[1]&2)!==0,common:(h[1]&4)!==0,script:(h[1]&8)!==0,type:se[(h[1]&48)>>4],showAllLanguages:(h[1]&128)===0,languages:I,collections:B}}function w(h,x){u.forEach((I,B)=>{h.languages.includes(I)&&$(x,B)}),i.forEach((I,B)=>{h.collections.includes(I)&&$(x,8*p+B)})}function P(h,x){const I=M(h);u.forEach((B,z)=>{I.next().value&&$(x,z)}),i.forEach((B,z)=>{I.next().value&&$(x,8*p+z)})}function L(h,x){const I=T(h,0),B=F(h,I);let z=h.length;for(;h[z-1]===0;)z--;if(1+B.length*y<8*z){x[0]|=S,h.fill(0),I||$(h,0);let H=1;B.forEach(([Z])=>{for(let X=0;X<y;H++,X++)$(h,H,Z>>X&1)})}}function F(h,x){const I=[[0,x]];return u.forEach((B,z)=>{const H=T(h,z);I[I.length-1][1]===H?I[I.length-1][0]++:I.push([1,H])}),i.forEach((B,z)=>{const H=T(h,8*p+z);I[I.length-1][1]===H?I[I.length-1][0]++:I.push([1,H])}),I.pop(),I}function*M(h){const x=new Uint8Array(k);x.set(h);let I=!T(x,0);for(let B=1;B+y<=x.length*8;){let z=0;for(let H=0;H<y;B++,H++)z|=C(x,B)<<H;if(z===0)break;for(;z>0;)yield I,z--;I=!I}for(;;)yield I}function $(h,x,I=1){h[x>>3]|=I<<(x&7)}function C(h,x){return h[x>>3]>>(x&7)&1}function T(h,x){return C(h,x)===1}function q(h){const x=h[0]=m(h);V(x,h)}function U(h){const x=h[0];if(V(x,h),x!==m(h))throw Error("invalid checksum")}function m(h,x=1){return h.subarray(x).reduce((I,B)=>I+B&255,0)^f&255}function V(h,x,I=1){let B=O(h);for(let z=I;z<x.length;z++)x[z]^=B>>24,B=W(B)}const O=h=>2480367069*h&4294967295,W=h=>2438952949*h+2654435769&4294967295;function G(h){return(Y("corpus-longURL")==="true"?e:d)(h)}function Q(h){const x=new URLSearchParams(h);return(x.get("q")||x.get("s")?v:t)(h)}return{_bytesBase64:R,_searchParamsToQueryString:e,_queryStringToSearchParams:t,_searchParamsToBase64:d,_base64ToSearchParams:v,_serializeByteArray:b,_deserializeByteArray:_,_encryptBytes:q,_decryptBytes:U,searchParamsToHash:G,hashToSearchParams:Q}};function Ae(s){return ft(s)}const ne="qid",gt="zxx",mt=s=>s!==null&&typeof s=="object"&&"hash"in s&&typeof s.hash=="string"&&"size"in s&&typeof s.size=="number",pt=s=>{const e=Object.entries(s.corpus.collections);return Object.fromEntries(e.flatMap(([t,l])=>l.languages.flatMap(a=>l.files.map(c=>ce(t,a,c)))).map((t,l)=>[t,{hash:s.hashes[l],size:s.sizes[l]}]))},bt=s=>{const e=s.corpus,t=Object.keys(e.collections),l=Object.entries(e.collections),a=pt(s);return{_corpus:e,collections:t,languages:e.languages,entries:l,metadata:a,getCollection:c=>e.collections[c],isCollectionKey:c=>t.some(n=>c===n),isLanguageKey:c=>e.languages.some(n=>c===n)}},ce=(s,e,t)=>`corpus/${s}/${e}_${t}.txt.gz`;function Re(s){return{corpus:s._corpus,metadata:s.metadata}}const xt=(s,e,t)=>{const l=s[e];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((a,c)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(c.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})};le.use(Ie).use($e).use(Fe((s,e)=>xt(Object.assign({"./de/collections.json":()=>D(()=>import("./i18n-de-DPXBsnw0.js").then(t=>t.c),[]),"./de/files.json":()=>D(()=>import("./i18n-de-DPXBsnw0.js").then(t=>t.f),[]),"./de/languages.json":()=>D(()=>import("./i18n-de-DPXBsnw0.js").then(t=>t.l),[]),"./de/translation.json":()=>D(()=>import("./i18n-de-DPXBsnw0.js").then(t=>t.t),[]),"./en-GB/translation.json":()=>D(()=>import("./i18n-en-CFKXdqgh.js").then(t=>t.j),[]),"./en/collections.json":()=>D(()=>import("./i18n-en-CFKXdqgh.js").then(t=>t.d),[]),"./en/files.json":()=>D(()=>import("./i18n-en-CFKXdqgh.js").then(t=>t.g),[]),"./en/icons.json":()=>D(()=>import("./i18n-en-CFKXdqgh.js").then(t=>t.h),[]),"./en/languages.json":()=>D(()=>import("./i18n-en-CFKXdqgh.js").then(t=>t.e),[]),"./en/translation.json":()=>D(()=>import("./i18n-en-CFKXdqgh.js").then(t=>t.b),[]),"./es/collections.json":()=>D(()=>import("./i18n-es-BNIGiM1s.js").then(t=>t.c),[]),"./es/files.json":()=>D(()=>import("./i18n-es-BNIGiM1s.js").then(t=>t.f),[]),"./es/languages.json":()=>D(()=>import("./i18n-es-BNIGiM1s.js").then(t=>t.l),[]),"./es/translation.json":()=>D(()=>import("./i18n-es-BNIGiM1s.js").then(t=>t.t),[]),"./fr-CA/translation.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.t),[]),"./fr/collections.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.c),[]),"./fr/files.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.f),[]),"./fr/languages.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.l),[]),"./fr/translation.json":()=>D(()=>import("./i18n-fr-BwNWxJGi.js").then(t=>t.a),[]),"./it/collections.json":()=>D(()=>import("./i18n-it-DRYyds-I.js").then(t=>t.c),[]),"./it/files.json":()=>D(()=>import("./i18n-it-DRYyds-I.js").then(t=>t.f),[]),"./it/languages.json":()=>D(()=>import("./i18n-it-DRYyds-I.js").then(t=>t.l),[]),"./it/translation.json":()=>D(()=>import("./i18n-it-DRYyds-I.js").then(t=>t.t),[]),"./ja/collections.json":()=>D(()=>import("./i18n-ja-CaioOnoT.js").then(t=>t.c),[]),"./ja/files.json":()=>D(()=>import("./i18n-ja-CaioOnoT.js").then(t=>t.f),[]),"./ja/icons.json":()=>D(()=>import("./i18n-ja-CaioOnoT.js").then(t=>t.i),[]),"./ja/languages.json":()=>D(()=>import("./i18n-ja-CaioOnoT.js").then(t=>t.l),[]),"./ja/translation.json":()=>D(()=>import("./i18n-ja-CaioOnoT.js").then(t=>t.t),[]),"./ko/collections.json":()=>D(()=>import("./i18n-ko-DsM4ahrX.js").then(t=>t.c),[]),"./ko/files.json":()=>D(()=>import("./i18n-ko-DsM4ahrX.js").then(t=>t.f),[]),"./ko/languages.json":()=>D(()=>import("./i18n-ko-DsM4ahrX.js").then(t=>t.l),[]),"./ko/translation.json":()=>D(()=>import("./i18n-ko-DsM4ahrX.js").then(t=>t.t),[]),"./zh-Hans/collections.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.c),[]),"./zh-Hans/files.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.f),[]),"./zh-Hans/languages.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.l),[]),"./zh-Hans/translation.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.t),[]),"./zh-Hant/collections.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.a),[]),"./zh-Hant/files.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.b),[]),"./zh-Hant/languages.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.d),[]),"./zh-Hant/translation.json":()=>D(()=>import("./i18n-zh-0HZXLxTC.js").then(t=>t.e),[])}),`./${s}/${e}.json`,3))).init({partialBundledLanguages:!0,fallbackLng:"en",ns:["translation","collections","languages","files","icons"],resources:{en:{translation:We,collections:Ue,languages:ze,files:qe,icons:Be},"en-GB":{translation:Ve}}}).catch(ee);function he(s,e=4){let t=0;for(let l=0;l<s.length;l++)t+=s.charCodeAt(l)>255?1:.5;return t<=e?void 0:{fontSize:`${e*100/t}%`,scale:`1 ${t/e}`,whiteSpace:"nowrap"}}function jt(s,e){if(e.length===0)return new Set(s.collections);const t=new Set,l=new Set(e);for(const[a,c]of s.entries)c.languages.some(n=>l.has(n))&&t.add(a);return t}function vt(s,e){if(e.length===0)return new Set(s.languages);const t=new Set;for(const l of e)for(const a of s.getCollection(l).languages)t.add(a);return t}function wt(s){const e=J.c(38),{corpus:t,language:l,collections:a,languages:c,setCollections:n}=s,{t:r}=K();let u;e[0]!==l?(u=["ja","ko","zh"].some(_=>l.startsWith(_)),e[0]=l,e[1]=u):u=e[1];const i=u;let f,g;if(e[2]!==a||e[3]!==t||e[4]!==i||e[5]!==c||e[6]!==n||e[7]!==r){const _=jt(t,c);f="search-collections";let w;e[10]!==r?(w=P=>[P,r(`collections:${P}.name`),r(`collections:${P}.short`)],e[10]=r,e[11]=w):w=e[11],g=t.collections.map(w).map(P=>{const[L,F,M]=P;return o.jsxs("div",{className:`search-collection search-${_.has(L)?"valid":"invalid"}`,children:[o.jsx("input",{type:"checkbox",name:`collection-${L}`,id:`collection-${L}`,checked:a.includes(L),onChange:$=>{n(C=>$.target.checked?C.concat([L]):C.filter(T=>T!==L))}}),o.jsx("label",{htmlFor:`collection-${L}`,style:i?he(M):void 0,children:F===M?F:o.jsx("abbr",{title:F,children:o.jsx("span",{translate:"no",children:M})})})]},L)}),e[2]=a,e[3]=t,e[4]=i,e[5]=c,e[6]=n,e[7]=r,e[8]=f,e[9]=g}else f=e[8],g=e[9];let p;e[12]!==f||e[13]!==g?(p=o.jsx("div",{className:f,children:g}),e[12]=f,e[13]=g,e[14]=p):p=e[14];const E=a.length===t.collections.length;let k;e[15]!==t.collections||e[16]!==n?(k=()=>{n(t.collections)},e[15]=t.collections,e[16]=n,e[17]=k):k=e[17];let S;e[18]!==r?(S=r("selectAll"),e[18]=r,e[19]=S):S=e[19];let y;e[20]!==E||e[21]!==k||e[22]!==S?(y=o.jsx("button",{disabled:E,onClick:k,children:S}),e[20]=E,e[21]=k,e[22]=S,e[23]=y):y=e[23];const R=a.length===0;let A;e[24]!==n?(A=()=>{n([])},e[24]=n,e[25]=A):A=e[25];let N;e[26]!==r?(N=r("deselectAll"),e[26]=r,e[27]=N):N=e[27];let d;e[28]!==A||e[29]!==N||e[30]!==R?(d=o.jsx("button",{disabled:R,onClick:A,children:N}),e[28]=A,e[29]=N,e[30]=R,e[31]=d):d=e[31];let v;e[32]!==d||e[33]!==y?(v=o.jsxs("div",{className:"item-group",children:[y,d]}),e[32]=d,e[33]=y,e[34]=v):v=e[34];let b;return e[35]!==v||e[36]!==p?(b=o.jsxs(o.Fragment,{children:[p,v]}),e[35]=v,e[36]=p,e[37]=b):b=e[37],b}function yt(s){const e=J.c(38),{corpus:t,language:l,collections:a,languages:c,setLanguages:n}=s,{t:r}=K();let u;e[0]!==l?(u=["ja","ko","zh"].some(_=>l.startsWith(_)),e[0]=l,e[1]=u):u=e[1];const i=u;let f,g;if(e[2]!==a||e[3]!==t||e[4]!==i||e[5]!==c||e[6]!==n||e[7]!==r){const _=vt(t,a);f="search-languages";let w;e[10]!==r?(w=P=>{let L=P,F=[P];return P==="en-GB"&&(L="en-ZZ",F=["en-GB","en-AU"]),[L,F,r(`languages:${L}.name`),r(`languages:${L}.code`)]},e[10]=r,e[11]=w):w=e[11],g=t.languages.filter(_t).map(w).map(P=>{const[L,F,M,$]=P;return o.jsxs("div",{className:`search-language search-${F.some(C=>_.has(C))?"valid":"invalid"}`,children:[o.jsx("input",{type:"checkbox",name:`language-${L}`,id:`language-${L}`,checked:F.some(C=>c.includes(C)),onChange:C=>{n(T=>C.target.checked?T.concat(F):T.filter(q=>!F.includes(q)))}}),o.jsxs("label",{htmlFor:`language-${L}`,children:[o.jsx("span",{className:"search-language-code",children:o.jsx("abbr",{title:M,children:o.jsx("span",{translate:"no",children:$})})}),o.jsx("span",{className:"search-language-name",style:i?he(M,12):he(M,15),children:M})]})]},L)}),e[2]=a,e[3]=t,e[4]=i,e[5]=c,e[6]=n,e[7]=r,e[8]=f,e[9]=g}else f=e[8],g=e[9];let p;e[12]!==f||e[13]!==g?(p=o.jsx("div",{className:f,children:g}),e[12]=f,e[13]=g,e[14]=p):p=e[14];const E=c.length===t.languages.length;let k;e[15]!==t.languages||e[16]!==n?(k=()=>{n(t.languages)},e[15]=t.languages,e[16]=n,e[17]=k):k=e[17];let S;e[18]!==r?(S=r("selectAll"),e[18]=r,e[19]=S):S=e[19];let y;e[20]!==E||e[21]!==k||e[22]!==S?(y=o.jsx("button",{disabled:E,onClick:k,children:S}),e[20]=E,e[21]=k,e[22]=S,e[23]=y):y=e[23];const R=c.length===0;let A;e[24]!==n?(A=()=>{n([])},e[24]=n,e[25]=A):A=e[25];let N;e[26]!==r?(N=r("deselectAll"),e[26]=r,e[27]=N):N=e[27];let d;e[28]!==A||e[29]!==N||e[30]!==R?(d=o.jsx("button",{disabled:R,onClick:A,children:N}),e[28]=A,e[29]=N,e[30]=R,e[31]=d):d=e[31];let v;e[32]!==d||e[33]!==y?(v=o.jsxs("div",{className:"item-group",children:[y,d]}),e[32]=d,e[33]=y,e[34]=v):v=e[34];let b;return e[35]!==v||e[36]!==p?(b=o.jsxs(o.Fragment,{children:[p,v]}),e[35]=v,e[36]=p,e[37]=b):b=e[37],b}function _t(s){return s!=="en-AU"}function St(s){const e=J.c(13),{corpus:t,language:l,filtersVisible:a,collections:c,setCollections:n,languages:r,setLanguages:u}=s,i=j.useRef(null);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>i.current?.style.setProperty("--search-filters-height",`${i.current.scrollHeight}px`),e[0]=f):f=e[0];const g=f;let p,E;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{if(!CSS.supports("interpolate-size","allow-keywords"))return g(),window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}},E=[],e[1]=p,e[2]=E):(p=e[1],E=e[2]),j.useEffect(p,E);const k=`search-filters search-filters-${a?"show":"hide"}`;let S;e[3]!==c||e[4]!==t||e[5]!==l||e[6]!==r||e[7]!==n||e[8]!==u?(S=o.jsxs(o.Fragment,{children:[o.jsx(wt,{corpus:t,language:l,collections:c,languages:r,setCollections:n}),o.jsx("div",{className:"search-filters-divider"}),o.jsx(yt,{corpus:t,language:l,collections:c,languages:r,setLanguages:u})]}),e[3]=c,e[4]=t,e[5]=l,e[6]=r,e[7]=n,e[8]=u,e[9]=S):S=e[9];let y;return e[10]!==k||e[11]!==S?(y=o.jsx("div",{ref:i,className:k,children:S}),e[10]=k,e[11]=S,e[12]=y):y=e[12],y}const je=s=>Array.isArray(s)&&s.every(e=>typeof e=="string"),kt=(s,e)=>{const t=s.languages.filter(n=>n.startsWith(e.split("-")[0])),l={...dt(s),languages:t.length===0?s.languages.filter(n=>n.startsWith("en")):t},a=Y("corpus-params");if(a===null)return l;const c=Ce(a);return typeof c=="object"&&c!==null&&("query"in c&&typeof c.query=="string"&&(l.query=c.query),"type"in c&&ge(c.type)&&(l.type=c.type),"caseInsensitive"in c&&typeof c.caseInsensitive=="boolean"&&(l.caseInsensitive=c.caseInsensitive),"common"in c&&typeof c.common=="boolean"&&(l.common=c.common),"script"in c&&typeof c.script=="boolean"&&(l.script=c.script),"showAllLanguages"in c&&typeof c.showAllLanguages=="boolean"&&(l.showAllLanguages=c.showAllLanguages),"collections"in c&&je(c.collections)&&c.collections.every(n=>s.isCollectionKey(n))&&(l.collections=c.collections),"languages"in c&&je(c.languages)&&c.languages.every(n=>s.isLanguageKey(n))&&(l.languages=c.languages)),l},Ct=[se[3],se[0],se[1],se[2]];function Lt({corpus:s,language:e,waiting:t,inProgress:l,postToWorker:a,terminateWorker:c}){const{t:n}=K(),r=j.useMemo(()=>kt(s,e),[s,e]),[u,i]=j.useState(r.query),[f,g]=j.useState(r.type),[p,E]=j.useState(r.caseInsensitive),[k,S]=j.useState(r.common),[y,R]=j.useState(r.script),[A,N]=j.useState(r.showAllLanguages),[d,v]=j.useState(r.collections),[b,_]=j.useState(r.languages),[w,P]=j.useState((Y("corpus-filtersVisible")??(window.location.hash?"false":"true"))!=="false"),L=j.useMemo(()=>Ae(s),[s]),F=j.useCallback(()=>{const m=L.hashToSearchParams(window.location.hash.substring(1));if(m.query!==void 0&&i(m.query),m.type!==void 0&&g(m.type),m.caseInsensitive!==void 0&&E(m.caseInsensitive),m.common!==void 0&&S(m.common),m.script!==void 0&&R(m.script),m.showAllLanguages!==void 0&&N(m.showAllLanguages),m.collections!==void 0&&v(m.collections),m.languages!==void 0&&_(m.languages),m.id!==void 0&&m.id!==""){const V=m.id.split(".")[0];a({query:`^${be(m.id)}$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(O=>s.getCollection(O).id===V),languages:[ne]});return}if(m.file!==void 0&&m.file!==""){const V=m.file.split(".")[0];a({query:`^${be(m.file)}\\..*$`,type:"regex",caseInsensitive:!1,common:!0,script:!0,showAllLanguages:!0,collections:s.collections.filter(O=>s.getCollection(O).id===V),languages:[ne]});return}if(m.run!==void 0&&m.run){const V={query:m.query??r.query,type:m.type??r.type,caseInsensitive:m.caseInsensitive??r.caseInsensitive,common:m.common??r.common,script:m.script??r.script,showAllLanguages:m.showAllLanguages??r.showAllLanguages,collections:m.collections??r.collections,languages:m.languages??r.languages};window.location.hash=L.searchParamsToHash(V),a(V);return}Y("corpus-filtersVisible")===null&&P(!m.query||!m.collections||!m.languages)},[a,r]);j.useEffect(()=>{window.location.hash&&F()},[]),j.useEffect(()=>(window.addEventListener("hashchange",F),()=>{window.removeEventListener("hashchange",F)}),[F]),j.useEffect(()=>{te("corpus-params",JSON.stringify({query:u,type:f,caseInsensitive:p,common:k,script:y,showAllLanguages:A,collections:d,languages:b}))},[u,f,p,k,y,A,d,b]);const M=m=>{m.preventDefault(),Y("corpus-filtersVisible")||te("corpus-filtersVisible",w.toString());const V=document.getElementsByClassName("view-search").item(0);V&&V.scrollHeight>document.body.clientHeight&&P(!1);const O={query:u,type:f,caseInsensitive:p,common:k,script:y,showAllLanguages:A,collections:d,languages:b};window.location.hash=L.searchParamsToHash(O),a(O)},$=()=>{c()},C=()=>{const m=!w;P(m),te("corpus-filtersVisible",m.toString())},T=m=>{const V=m.target.value;ge(V)&&g(V)},q=t||l||u.length===0||d.length===0||b.length===0,U=j.useMemo(()=>o.jsx(St,{corpus:s,language:e,filtersVisible:w,collections:d,setCollections:v,languages:b,setLanguages:_}),[e,w,d,b]);return o.jsxs("form",{className:"search-form",role:"search",onSubmit:M,children:[o.jsxs("div",{className:"search-bar",children:[o.jsxs("div",{className:"item-group",children:[o.jsx("label",{htmlFor:"query",children:n("query")}),o.jsx("input",{type:"search",name:"query",id:"query",value:u,onChange:m=>{i(m.target.value)}}),o.jsxs("div",{className:"btn-alternate-container",children:[o.jsx("input",{id:"submit",type:"submit",className:l?"invisible":"visible",value:n("search"),disabled:q}),o.jsx("button",{type:"button",className:l?"visible":"invisible",onClick:$,disabled:!l,children:n("cancel")})]}),o.jsx("button",{type:"button",className:w?"active":void 0,onClick:C,children:n("filters")}),o.jsx("select",{name:"type",id:"type",onChange:T,value:f,title:n("searchType.searchType"),"aria-label":n("searchType.searchType"),children:Ct.map(m=>o.jsx("option",{value:m,children:n(`searchType.${m}`)},m))})]}),o.jsxs("div",{className:"item-group search-option-group",children:[o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"caseInsensitive",id:"caseInsensitive",checked:p,onChange:m=>{E(m.target.checked)}}),o.jsx("label",{htmlFor:"caseInsensitive",children:n("caseInsensitive")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"common",id:"common",checked:k,onChange:m=>{S(m.target.checked)}}),o.jsx("label",{htmlFor:"common",children:n("common")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"script",id:"script",checked:y,onChange:m=>{R(m.target.checked)}}),o.jsx("label",{htmlFor:"script",children:n("script")})]}),o.jsxs("div",{className:"search-option",children:[o.jsx("input",{type:"checkbox",name:"showAllLanguages",id:"showAllLanguages",checked:A,onChange:m=>{N(m.target.checked)}}),o.jsx("label",{htmlFor:"showAllLanguages",children:n("showAllLanguages")})]})]})]}),U]})}function Et(s){const e=J.c(10),{src:t,active:l}=s,a=l===void 0?!0:l,c=j.useRef(null);let n,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{c.current?.classList.add("spinner-stopped")},r=[],e[0]=n,e[1]=r):(n=e[0],r=e[1]),j.useEffect(n,r);let u,i;e[2]!==a?(u=()=>{const k=c.current;if(k!==null){const S=()=>{a||k.classList.add("spinner-stopped")};return k.addEventListener("animationiteration",S),()=>{k.removeEventListener("animationiteration",S)}}},i=[a],e[2]=a,e[3]=u,e[4]=i):(u=e[3],i=e[4]),j.useEffect(u,i);const f=a?"spinner-active":"spinner-inactive";let g;e[5]!==f?(g=["spinner",f],e[5]=f,e[6]=g):g=e[6];const p=g.join(" ");let E;return e[7]!==t||e[8]!==p?(E=o.jsx("img",{ref:c,className:p,src:t,alt:""}),e[7]=t,e[8]=p,e[9]=E):E=e[9],E}function Ne(s){const e=J.c(16),{progress:t}=s,{t:l}=K(),a=Math.min(Math.max(0,t*100),100);let c;e[0]!==l?(c=l("progressBar.title"),e[0]=l,e[1]=c):c=e[1];const n=`${a}%`,r=a===0?0:void 0,u=a===0?"hidden":void 0;let i;e[2]!==n||e[3]!==r||e[4]!==u?(i=o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-bar-complete",style:{width:n,maxWidth:r,visibility:u}})}),e[2]=n,e[3]=r,e[4]=u,e[5]=i):i=e[5];let f;e[6]!==t||e[7]!==l?(f=l("progressBar.value",et(t)),e[6]=t,e[7]=l,e[8]=f):f=e[8];let g;e[9]!==f?(g=o.jsx("div",{className:"progress-bar-text",children:f}),e[9]=f,e[10]=g):g=e[10];let p;return e[11]!==a||e[12]!==c||e[13]!==i||e[14]!==g?(p=o.jsxs("div",{className:"progress-bar-container",role:"progressbar","aria-label":c,"aria-valuenow":a,children:[i,g]}),e[11]=a,e[12]=c,e[13]=i,e[14]=g,e[15]=p):p=e[15],p}const Pt=s=>{if("share"in navigator){const e=s.currentTarget.href;s.preventDefault(),navigator.share({url:e}).catch(t=>{t instanceof Error&&t.name!=="AbortError"||(console.error(t),window.open(e,"_blank"))})}};function At(s){const e=J.c(6),{hash:t}=s,{t:l}=K();let a;e[0]!==l?(a=l("share"),e[0]=l,e[1]=a):a=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#share"})}),e[2]=c):c=e[2];let n;return e[3]!==t||e[4]!==a?(n=o.jsx("a",{href:t,rel:"bookmark noreferrer",target:"_blank",title:a,onClick:Pt,children:c}),e[3]=t,e[4]=a,e[5]=n):n=e[5],n}function Rt(s){const e=J.c(7),{hash:t,callback:l}=s,{t:a}=K();let c;e[0]!==a?(c=a("viewNearby"),e[0]=a,e[1]=c):c=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#file-lines"})}),e[2]=n):n=e[2];let r;return e[3]!==l||e[4]!==t||e[5]!==c?(r=o.jsx("a",{href:t,rel:"bookmark noreferrer",title:c,onClick:l,children:n}),e[3]=l,e[4]=t,e[5]=c,e[6]=r):r=e[6],r}function Nt(s){const e=J.c(6),{callback:t}=s,{t:l}=K();let a;e[0]!==l?(a=l("copy"),e[0]=l,e[1]=a):a=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#copy"})}),e[2]=c):c=e[2];let n;return e[3]!==t||e[4]!==a?(n=o.jsx("button",{className:"link",title:a,onClick:t,children:c}),e[3]=t,e[4]=a,e[5]=n):n=e[5],n}function Mt(s,e,t,l,a){return s.replaceAll(/<a class="speaker" data-var="(.+?)">(.+?)<\/a>/gu,(c,n,r)=>`<a class="speaker" href="#${e.searchParamsToHash({query:n,type:"exact",caseInsensitive:!1,common:!1,script:!0,showAllLanguages:!1,collections:[t],languages:[l],run:!0})}" title="${a}" translate="yes"><span translate="no">${r}</span></a>`)}const Tt=(s,e)=>e===ne?s.replaceAll(/([._/]|([a-z])(?=[A-Z])|([A-Za-z])(?=[0-9]))/gu,"$1<wbr>"):s;function It(){const s=J.c(4),{t:e}=K();let t;s[0]!==e?(t=e("status.rendering"),s[0]=e,s[1]=t):t=s[1];let l;return s[2]!==t?(l=o.jsx("div",{className:"results-rendering",children:t}),s[2]=t,s[3]=l):l=s[3],l}function $t(s){const e=J.c(7),{id:t}=s,l=`#id=${t}`;let a;e[0]!==l?(a=o.jsx(At,{hash:l}),e[0]=l,e[1]=a):a=e[1];const c=`#file=${t.split(".").slice(0,-1).join(".")}`;let n;e[2]!==c?(n=o.jsx(Rt,{hash:c}),e[2]=c,e[3]=n):n=e[3];let r;return e[4]!==a||e[5]!==n?(r=o.jsx("td",{className:"results-table-actions-cell",translate:"yes",children:o.jsxs("div",{className:"results-table-actions",children:[a,n]})},"actions"),e[4]=a,e[5]=n,e[6]=r):r=e[6],r}function Ft(s){const e=J.c(49),{corpus:t,index:l,collection:a,file:c,languages:n,lines:r,start:u,end:i,showId:f,richText:g,sectionOffset:p,onShowSection:E,searchParamsFactory:k}=s,{t:S}=K();let y;e[0]!==n?(y=n.indexOf(ne),e[0]=n,e[1]=y):y=e[1];const R=y,A=n.map(Ot),N=S("viewSpeaker"),d=t.getCollection(a).speaker!==void 0,v=A.map(Dt),b=v.every(H=>H===v[0]),_=j.useRef(null);let w;e[2]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{const H=_.current,Z=window.getSelection();Z!==null&&H!==null&&(Z.removeAllRanges(),Z.selectAllChildren(H),document.execCommand("copy"),Z.removeAllRanges())},e[2]=w):w=e[2];const P=w,L=`collection-${t.getCollection(a).id??a.toLowerCase()}`,F=`file-${c}`,M=`rich-text-${g?"enabled":"disabled"}`;let $;e[3]!==a||e[4]!==t||e[5]!==L||e[6]!==F||e[7]!==M?($=["results-table",L,F,M],t.getCollection(a).softWrap===!0&&$.push("soft"),e[3]=a,e[4]=t,e[5]=L,e[6]=F,e[7]=M,e[8]=$):$=e[8];const C="results-table-container",T=$.join(" ");let q;e[9]!==R?(q=R!==-1&&o.jsx("th",{className:"results-table-actions-cell",children:o.jsx(Nt,{callback:P})}),e[9]=R,e[10]=q):q=e[10];let U;if(e[11]!==n||e[12]!==f||e[13]!==S){let H;e[15]!==f?(H=X=>f||X!==ne,e[15]=f,e[16]=H):H=e[16];let Z;e[17]!==S?(Z=X=>o.jsx("th",{children:o.jsx("abbr",{title:S(`languages:${X}.name`),children:o.jsx("span",{translate:"no",children:S(`languages:${X}.code`)})})},X),e[17]=S,e[18]=Z):Z=e[18],U=n.filter(H).map(Z),e[11]=n,e[12]=f,e[13]=S,e[14]=U}else U=e[14];let m;e[19]!==q||e[20]!==U?(m=o.jsx("thead",{children:o.jsxs("tr",{children:[q,U]})}),e[19]=q,e[20]=U,e[21]=m):m=e[21];let V;e[22]!==v||e[23]!==b?(V=b&&v[0]!==le.dir()?v[0]:void 0,e[22]=v,e[23]=b,e[24]=V):V=e[24];const O="no",W=r.map((H,Z)=>u<=Z&&Z<i&&o.jsxs("tr",{"data-id":R!==-1?H[R]:void 0,children:[R!==-1&&o.jsx($t,{id:H[R]}),H.map((X,oe)=>{if(f||n[oe]!==ne)return o.jsx("td",{lang:A[oe],dir:b?void 0:v[oe],dangerouslySetInnerHTML:{__html:Tt(d?Mt(X,k,a,n[oe],N):X,n[oe])}},oe)})]},Z));let G;e[25]!==V||e[26]!==W?(G=o.jsx("tbody",{dir:V,translate:O,children:W}),e[25]=V,e[26]=W,e[27]=G):G=e[27];let Q;e[28]!==m||e[29]!==G||e[30]!==T?(Q=o.jsx("div",{className:C,children:o.jsxs("table",{ref:_,className:T,children:[m,G]})}),e[28]=m,e[29]=G,e[30]=T,e[31]=Q):Q=e[31];const h=Q;let x;e[32]!==l||e[33]!==E||e[34]!==p||e[35]!==u||e[36]!==S?(x=u!==0&&o.jsx("button",{className:"results-notice",onClick:E(p,l),children:S("tablePartial",{count:u})}),e[32]=l,e[33]=E,e[34]=p,e[35]=u,e[36]=S,e[37]=x):x=e[37];const I=u!==i&&h;let B;e[38]!==i||e[39]!==l||e[40]!==r.length||e[41]!==E||e[42]!==p||e[43]!==S?(B=i<r.length&&o.jsx("button",{className:"results-notice",onClick:E(p+i,l),children:S("tablePartial",{count:r.length-i})}),e[38]=i,e[39]=l,e[40]=r.length,e[41]=E,e[42]=p,e[43]=S,e[44]=B):B=e[44];let z;return e[45]!==x||e[46]!==I||e[47]!==B?(z=o.jsxs(o.Fragment,{children:[x,I,B]}),e[45]=x,e[46]=I,e[47]=B,e[48]=z):z=e[48],z}function Dt(s){return le.dir(s)}function Ot(s){return s===ne?gt:s}function Vt(s){const{index:e,status:t,header:l,offset:a,limit:c,lines:n,sectionOffset:r,richText:u}=s,i=Math.max(0,Math.min(n.length,a-r)),f=Math.max(0,Math.min(n.length,a+c-r)),g=j.useMemo(()=>{switch(t){case"noLines":return;case"worker":return o.jsx(It,{});case"done":return o.jsx(Ft,{...s,start:i,end:f})}},[t,i,f,u]);return g&&o.jsxs("section",{id:`results-section${e}`,className:"results-section",children:[l&&o.jsx("h2",{children:l}),g]})}function Bt({results:s,headers:e,jumpTo:t,...l}){const a=j.useMemo(()=>Ae(l.corpus),[l.corpus]),c=j.useMemo(()=>{let n=0;const r=[];for(const[u,i]of s.entries()){if(i.status==="initial")break;const f=i.status==="done"&&i.richText;r.push({...l,...i.params,index:u,sectionOffset:n,richText:f,status:i.status,header:e[u],searchParamsFactory:a}),n+=i.params.lines.length}return r},[s,l]);return j.useEffect(()=>{let n=0;for(const[r,u]of s.entries())if(u.status!=="initial"){if(l.offset>=n&&l.offset<n+u.params.lines.length){t(r);break}n+=u.params.lines.length}},[l.offset]),o.jsx("div",{className:"app-window-inner",children:c.map(n=>o.jsx(Vt,{...n},n.index))})}function re(s){const e=document.getElementById("results"),t=document.getElementById(`results-section${s}`),l=e?.firstElementChild;e&&t&&l instanceof HTMLElement&&(e.scrollTop=t.offsetTop-l.offsetTop)}function qt(s){const e=J.c(9),{headers:t}=s,{t:l}=K();let a;e[0]!==l?(a=l("jumpTo"),e[0]=l,e[1]=a):a=e[1];let c;e[2]!==a?(c=o.jsx("option",{value:"",disabled:!0,children:a}),e[2]=a,e[3]=c):c=e[3];let n;e[4]!==t?(n=t.map((u,i)=>u!==void 0&&(i===0||t[i-1]!==u)&&o.jsx("option",{value:i,children:u},i)),e[4]=t,e[5]=n):n=e[5];let r;return e[6]!==c||e[7]!==n?(r=o.jsx("nav",{className:"results-jump",children:o.jsxs("select",{name:"jump",id:"jump",onChange:zt,value:"",children:[c,n]})}),e[6]=c,e[7]=n,e[8]=r):r=e[8],r}function zt(s){re(Number(s.target.value))}function Ut(s){const e=J.c(50),{count:t,offset:l,limit:a,setOffset:c}=s,{t:n}=K(),r=l+1,u=Math.min(t,l+a);let i;e[0]!==t||e[1]!==n||e[2]!==r||e[3]!==u?(i=n("displayedRange.long",{count:t,start:r,end:u}),e[0]=t,e[1]=n,e[2]=r,e[3]=u,e[4]=i):i=e[4];let f;e[5]!==i?(f=o.jsx("span",{className:"results-nav-range-long",children:i}),e[5]=i,e[6]=f):f=e[6];const g=l+1,p=Math.min(t,l+a);let E;e[7]!==t||e[8]!==n||e[9]!==g||e[10]!==p?(E=n("displayedRange.short",{count:t,start:g,end:p}),e[7]=t,e[8]=n,e[9]=g,e[10]=p,e[11]=E):E=e[11];let k;e[12]!==E?(k=o.jsx("span",{className:"results-nav-range-short",children:E}),e[12]=E,e[13]=k):k=e[13];let S;e[14]!==f||e[15]!==k?(S=o.jsxs("div",{children:[f,k]}),e[14]=f,e[15]=k,e[16]=S):S=e[16];const y=l===0;let R;e[17]!==a||e[18]!==l||e[19]!==c?(R=()=>{c(Math.max(0,l-a))},e[17]=a,e[18]=l,e[19]=c,e[20]=R):R=e[20];let A;e[21]!==n?(A=n("loadPrev"),e[21]=n,e[22]=A):A=e[22];let N;e[23]!==a||e[24]!==n?(N=n("icons:loadPrev",{limit:a}),e[23]=a,e[24]=n,e[25]=N):N=e[25];let d;e[26]!==y||e[27]!==R||e[28]!==A||e[29]!==N?(d=o.jsx("button",{className:"button-square",disabled:y,onClick:R,title:A,children:N}),e[26]=y,e[27]=R,e[28]=A,e[29]=N,e[30]=d):d=e[30];const v=l+a>=t;let b;e[31]!==t||e[32]!==a||e[33]!==l||e[34]!==c?(b=()=>{c(Math.min(Math.floor(t/a)*a,l+a))},e[31]=t,e[32]=a,e[33]=l,e[34]=c,e[35]=b):b=e[35];let _;e[36]!==n?(_=n("loadNext"),e[36]=n,e[37]=_):_=e[37];let w;e[38]!==a||e[39]!==n?(w=n("icons:loadNext",{limit:a}),e[38]=a,e[39]=n,e[40]=w):w=e[40];let P;e[41]!==v||e[42]!==b||e[43]!==_||e[44]!==w?(P=o.jsx("button",{className:"button-square",disabled:v,onClick:b,title:_,children:w}),e[41]=v,e[42]=b,e[43]=_,e[44]=w,e[45]=P):P=e[45];let L;return e[46]!==d||e[47]!==P||e[48]!==S?(L=o.jsxs("div",{className:"results-nav",children:[S,d,P]}),e[46]=d,e[47]=P,e[48]=S,e[49]=L):L=e[49],L}const ve={showVariables:0,showAllCharacters:!1,showGender:2,showPlural:0,showGrammar:!0,showFurigana:!0},Wt=()=>{const s=Y("corpus-toggle");if(s===null)return ve;const e={...ve},t=Ce(s);return typeof t=="object"&&t!==null&&("showVariables"in t&&typeof t.showVariables=="number"&&[0,1,2].includes(t.showVariables)&&(e.showVariables=t.showVariables),"showAllCharacters"in t&&typeof t.showAllCharacters=="boolean"&&(e.showAllCharacters=t.showAllCharacters),"showGender"in t&&typeof t.showGender=="number"&&[0,1,2].includes(t.showGender)&&(e.showGender=t.showGender),"showPlural"in t&&typeof t.showPlural=="number"&&[0,1,2].includes(t.showPlural)&&(e.showPlural=t.showPlural),"showGrammar"in t&&typeof t.showGrammar=="boolean"&&(e.showGrammar=t.showGrammar),"showFurigana"in t&&typeof t.showFurigana=="boolean"&&(e.showFurigana=t.showFurigana)),e};function Ht({corpus:s,language:e,status:t,progress:l,results:a,showId:c=!0,richText:n=!0,limit:r=ue}){const{t:u}=K(),i=j.useMemo(Wt,[]),[f,g]=j.useState(i.showVariables),[p,E]=j.useState(i.showAllCharacters),[k,S]=j.useState(i.showGender),[y,R]=j.useState(i.showPlural),[A,N]=j.useState(i.showGrammar),[d,v]=j.useState(i.showFurigana),[b,_]=j.useState(null),[w,P]=j.useState(0);j.useEffect(()=>{te("corpus-toggle",JSON.stringify({showVariables:f,showAllCharacters:p,showGender:k,showPlural:y,showGrammar:A,showFurigana:d}))},[f,p,k,y,A,d]);const L=j.useCallback((m,V)=>()=>{P(m),re(V)},[]),F=j.useMemo(()=>{const m=[];let V="";for(const O of a){if(O.status==="initial"||O.status==="noLines"){m.push(void 0);continue}const{collection:W,file:G}=O.params,Q=u("tableHeader",{collection:u(`collections:${W}.name`),file:u(`files:${G}`),interpolation:{escapeValue:!1}});m.push(Q===V?void 0:Q),V=Q}return m},[a,e]),M=j.useMemo(()=>a.reduce((m,V)=>m+(V.status==="initial"?0:V.params.lines.length),0),[a]);M<w&&P(m=>Math.min(m,M));const $=o.jsxs("div",{className:"results-toggle",children:[o.jsx("button",{className:f!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{g((f+1)%3)},title:u("showVariables"),children:o.jsx("span",{translate:"no",children:u("icons:showVariables",{context:f})})}),o.jsx("button",{className:p?"button-square active":"button-square",disabled:!n,onClick:()=>{E(!p)},title:u("showAllCharacters"),children:o.jsx("span",{translate:"no",children:u("icons:showAllCharacters")})}),o.jsx("button",{className:k!==2?"button-square active":"button-square",disabled:!n,onClick:()=>{S((k+1)%3)},title:u("showGender"),children:o.jsx("span",{translate:"no",children:u("icons:showGender",{context:k})})}),o.jsx("button",{className:y!==0?"button-square active":"button-square",disabled:!n,onClick:()=>{R((y+1)%3)},title:u("showPlural"),children:o.jsx("span",{translate:"no",children:u("icons:showPlural",{context:y})})}),o.jsx("button",{className:A?"button-square active":"button-square",disabled:!n,onClick:()=>{N(!A)},title:u("showGrammar"),children:o.jsx("span",{translate:"no",children:u("icons:showGrammar")})}),o.jsx("button",{className:d?"button-square active":"button-square",disabled:!n,onClick:()=>{v(!d)},title:u("showFurigana"),children:o.jsx("span",{className:"results-toggle-furigana",translate:"no",children:u("icons:showFurigana")})})]});j.useEffect(()=>{j.startTransition(()=>{_(o.jsx(Bt,{corpus:s,results:a,headers:F,showId:c,offset:w,limit:r,onShowSection:L,jumpTo:re}))})},[s,a,F,c,w,r,L,re]);const C=Ee(t),T=u(`status.${t.split(".",1)[0]}`),q=j.useMemo(()=>!C&&F.filter(m=>m!==void 0).length>1?o.jsx(qt,{headers:F}):o.jsx("div",{className:"results-status-text",children:T}),[C,F,T]),U=`app-window variables-${["short","show","hide"][f]} control-${p?"show":"hide"} gender-${k} number-${y} grammar-${A?"show":"hide"} furigana-${d?"show":"hide"}`;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"results-status",children:[q,o.jsx(Et,{src:"logo.svg",active:C}),!C&&M>r?o.jsx(Ut,{count:M,offset:w,limit:r,setOffset:P}):o.jsx(Ne,{progress:l}),$]}),o.jsx("main",{id:"results",className:U,children:b})]})}const Gt={status:"initial"},we="corpus-warn",Kt=2e7;function Jt({loader:s,showModal:e,language:t,richText:l,limit:a}){const{t:c}=K(),n=j.useRef(null),r=j.useRef(null),u=j.useRef([]),i=j.useRef(l),f=j.useRef(Y(we)!=="false"),[g,p]=j.useState("initial"),[E,k]=j.useState(0),[S,y]=j.useState(!0),[R,A]=j.useState([]);j.useEffect(()=>{i.current=l;for(const{index:C,params:T}of u.current)v(C,T)},[l]);const N=(C,T)=>{A(q=>{const U=Array().concat(q);for(let m=U.length;m<C;m++)U[m]=Gt;return U[C]=T,U})},d=C=>{N(C.data.index,{status:"done",params:C.data,richText:C.data.richText}),C.data.error&&e({message:c("statusModal.error"),buttons:[{message:c("statusModal.buttons.ok"),autoFocus:!0}]})},v=(C,T)=>{r.current===null&&(console.log("Creating new TextWorker..."),r.current=new rt,r.current.addEventListener("message",d)),r.current.postMessage({...T,index:C,richText:i.current,corpusLiterals:s.corpus.getCollection(T.collection).literals})},b=C=>{if(p(C.data.status),k(C.data.progress),y(C.data.showId),"index"in C.data&&"result"in C.data){const{index:T,result:q}=C.data;C.data.result.lines.length===0?N(T,{status:"noLines",params:q}):(u.current.push({index:T,params:q}),N(T,{status:"worker",params:q}),v(T,q))}C.data.complete&&ut(C.data.status)&&e({message:c(`statusModal.${C.data.status}`),buttons:[{message:c("statusModal.buttons.ok"),autoFocus:!0}]})},_=j.useCallback(()=>{console.log("Terminating workers!"),n.current!==null&&(n.current.removeEventListener("message",b),n.current.terminate(),n.current=null),r.current!==null&&(r.current.removeEventListener("message",b),r.current.terminate(),r.current=null),p("initial"),k(0),A([]),u.current=[]},[]),w=C=>{A([]),u.current=[],C.query.length>0&&C.collections.length>0&&C.languages.length>0&&(n.current===null&&(console.log("Creating new SearchWorkerManager..."),n.current=new ct,n.current.addEventListener("message",b)),p("waiting"),k(0),n.current.postMessage({...C,serializedCorpus:Re(s.corpus)}))},P=j.useCallback(C=>{if(!f.current){w(C);return}s.getDownloadSizeTotal(C.collections,C.showAllLanguages?void 0:C.languages).then(T=>{if(T<=Kt){w(C);return}e({message:c("searchModal.message",ae(T)),checkbox:{message:c("searchModal.checkboxDoNotShowAgain"),checked:!1},buttons:[{message:c("searchModal.buttons.yes"),callback:()=>{w(C)},checkboxCallback:q=>{f.current=!q,te(we,(!q).toString())}},{message:c("searchModal.buttons.no"),callback:()=>{p("initial")},autoFocus:!0}],cancelCallback:()=>{p("initial")}})}).catch(ee)},[s.getDownloadSizeTotal]),L=Ee(g),F=g==="waiting",M=j.useMemo(()=>o.jsx(Lt,{corpus:s.corpus,language:t,inProgress:L,waiting:F,postToWorker:P,terminateWorker:_}),[s.corpus,t,L,F,P,_]),$=j.useMemo(()=>o.jsx(Ht,{corpus:s.corpus,language:t,status:g,progress:E,showId:S,richText:l,results:R,limit:a}),[s.corpus,t,g,E,S,l,R,a]);return o.jsxs("div",{className:"search",children:[M,$]})}function Zt(s){return new Worker("/poke-corpus/assets/cacheManagerWorker-CLSMdnkw.js",{name:s?.name})}function Qt(s){const e=J.c(6),{callback:t}=s,{t:l}=K();let a;e[0]!==l?(a=l("delete"),e[0]=l,e[1]=a):a=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#trash-can"})}),e[2]=c):c=e[2];let n;return e[3]!==t||e[4]!==a?(n=o.jsx("button",{className:"link",title:a,onClick:t,children:c}),e[3]=t,e[4]=a,e[5]=n):n=e[5],n}function Xt(s){const e=J.c(6),{callback:t}=s,{t:l}=K();let a;e[0]!==l?(a=l("refresh"),e[0]=l,e[1]=a):a=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx("svg",{className:"icon",children:o.jsx("use",{href:"sprites.svg#arrows-rotate"})}),e[2]=c):c=e[2];let n;return e[3]!==t||e[4]!==a?(n=o.jsx("button",{className:"link",title:a,onClick:t,children:c}),e[3]=t,e[4]=a,e[5]=n):n=e[5],n}function Yt({cacheStorageEnabled:s,cachedMetadata:e}){const{t}=K(),l=j.useMemo(()=>ae(e.reduce((a,[,c])=>a+c,0)),[e]);return o.jsxs("ul",{children:[o.jsx("li",{children:t("cache.storageStatus",{val:t(s?"cache.storageEnabled":"cache.storageDisabled")})}),s&&o.jsx("li",{children:t("cache.filesStored",{count:e.length})}),s&&o.jsx("li",{children:t("cache.storageUsed",l)})]})}function es(s){const e=J.c(9),{loadedBytes:t,totalBytes:l,progress:a}=s,{t:c}=K();let n;e[0]!==t||e[1]!==c||e[2]!==l?(n=c("cache.loading",{message:c("cache.inProgress"),loaded:c("cache.size",ae(t)),total:c("cache.size",ae(l))}),e[0]=t,e[1]=c,e[2]=l,e[3]=n):n=e[3];let r;e[4]!==a?(r=o.jsx(Ne,{progress:a}),e[4]=a,e[5]=r):r=e[5];let u;return e[6]!==n||e[7]!==r?(u=o.jsxs("div",{className:"cache-entry-notice",children:[n,r]}),e[6]=n,e[7]=r,e[8]=u):u=e[8],u}function ts({corpus:s,cachedMetadata:e,cacheCollections:t,clearCachedFile:l}){const{t:a}=K(),c=j.useMemo(()=>s.collections.map(r=>{const u=e.filter(([[i]])=>r===i);return[r,u.reduce((i,[,f])=>i+f,0),u.every(([,,i])=>i)]}).filter(([,r])=>r>0),[e]);return o.jsx("div",{className:"cache-entry-list",children:e.length>0&&c.map(([n,r,u],i)=>o.jsxs("div",{className:`cache-entry cache-entry-${u?"current":"outdated"}`,children:[o.jsxs("div",{className:"cache-entry-text",children:[o.jsx("div",{children:o.jsx("abbr",{title:a(`collections:${n}.name`),children:o.jsx("span",{translate:"no",children:a(`collections:${n}.short`)})})}),o.jsx("div",{translate:"no",children:a("cache.size",ae(r))})]}),o.jsxs("div",{className:"cache-entry-actions",children:[!u&&o.jsx(Xt,{callback:()=>{t(n)}}),o.jsx(Qt,{callback:()=>{l(n)}})]})]},i))})}function ss({active:s,loader:e,showModal:t}){const{t:l}=K(),[a,c]=j.useState(!1),[n,r]=j.useState([]),[u,i]=j.useState(!1),[f,g]=j.useState(0),[p,E]=j.useState(0),[k,S]=j.useState(0),y=j.useRef(null),R=()=>{"caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB?Promise.all([e.getCache(),e.getIndexedDB()]).then(()=>{c(!0)}).catch(()=>{c(!1),r([])}):(c(!1),r([]))},A=M=>{const{status:$,loadedBytes:C,totalBytes:T,requestedCollection:q}=M.data;switch(g(C/T),E(C),S(T),$){case"loading":return;case"done":console.log("Caching complete");break;case"error":console.log("Caching error");break}y.current?.terminate(),y.current=null,i(!1),v(q)},N=j.useCallback(M=>{"caches"in window&&(i(!0),g(0),E(0),y.current===null&&(console.log("Creating new CacheManagerWorker..."),y.current=new Zt,y.current.addEventListener("message",A),y.current.postMessage({serializedCorpus:Re(e.corpus),requestedCollection:M})))},[e]),d=async(M="background")=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[$,C]=await Promise.all([e.getCache(),e.getIndexedDB()]),T=e.corpus.entries.flatMap(([O,W])=>W.files.flatMap(G=>W.languages.map(Q=>[O,Q,G]))),q=T.map(([O,W,G])=>e.getFilePath(O,W,G)),U=await Promise.all(q.map(O=>e.getFileCacheOnly($,C,O).then(async([W,G])=>[W!==void 0?(await W.blob()).size:-1,G])));r(U.map(([O,W],G)=>[T[G],O,W]).filter(([,O])=>O!==-1));const m=new Set(q),V=(await e.getAllLocalFilePaths(C)).filter(O=>!m.has(O));await Promise.all(V.map(O=>Promise.all([e.deleteLocalMetadata(C,O),$.delete(O)]).then(([W,G])=>{console.debug(W&&G?`Deleted ${O} from cache`:`Failed to delete ${O} from cache`)}))),C.close(),M==="cacheAll"&&U.some(([O,W])=>O===-1||!W)&&L()}},v=M=>{d(M).catch(ee)},b=()=>{const M=[];y.current&&(y.current.terminate(),y.current=null),"serviceWorker"in navigator&&M.push(navigator.serviceWorker.ready.then($=>$.unregister())),"indexedDB"in window&&"databases"in window.indexedDB&&M.push(e.getIndexedDB().then($=>e.clearLocalMetadata($).then(()=>($.close(),d())))),"caches"in window&&M.push(e.getCache().then($=>$.keys().then(C=>Promise.all(C.map(T=>$.delete(T)))))),Promise.all(M).then(()=>{console.log("Cache cleared")}).catch($=>{console.log("Error clearing cache"),console.error($)})},_=async M=>{if("caches"in window&&"indexedDB"in window&&"databases"in window.indexedDB){const[$,C]=await Promise.all([e.getCache(),e.getIndexedDB()]),T=e.corpus.getCollection(M);await Promise.all(T.languages.flatMap(q=>T.files.flatMap(U=>{const m=e.getFilePath(M,q,U);return[e.deleteLocalMetadata(C,m),$.delete(m)]}))),C.close(),await d()}},w=j.useCallback(M=>{_(M).catch(ee)},[]);j.useEffect(()=>{R(),d().catch(ee)},[s,e.corpus.entries,e.corpus.metadata]);const P=()=>{e.getDownloadSizeTotal().then(M=>{t({message:l("cache.cacheAllModal.message",ae(M)),buttons:[{message:l("cache.cacheAllModal.buttons.yes"),callback:()=>{N("cacheAll")}},{message:l("cache.cacheAllModal.buttons.no"),callback:()=>{i(!1)},autoFocus:!0}],cancelCallback:()=>{i(!1)}})}).catch(ee)},L=()=>{t({message:l("cache.cacheAllFailedModal.message"),buttons:[{message:l("cache.cacheAllFailedModal.buttons.ok"),autoFocus:!0}]})},F=()=>{t({message:l("cache.clearCacheModal.message"),buttons:[{message:l("cache.clearCacheModal.buttons.yes"),callback:b},{message:l("cache.clearCacheModal.buttons.no"),autoFocus:!0}]})};return s&&o.jsxs("div",{className:"cache",children:[o.jsxs("div",{className:"cache-button-group item-group",children:[o.jsx("button",{onClick:P,disabled:u!==!1,children:l("cacheAll")}),o.jsx("button",{onClick:F,children:l("clearCache")})]}),o.jsx("div",{className:"cache-results app-window",children:o.jsxs("div",{className:"app-window-inner",children:[o.jsx(Yt,{cacheStorageEnabled:a,cachedMetadata:n}),u?o.jsx(es,{loadedBytes:p,totalBytes:k,progress:f}):o.jsx(ts,{corpus:e.corpus,cachedMetadata:n,cacheCollections:N,clearCachedFile:w})]})})]})}function ns(s){const e=J.c(27),{classes:t,message:l,buttons:a,checkbox:c,cancelCallback:n}=s,[r,u]=j.useState(l!==void 0),[i,f]=j.useState(c?.checked??!1),g=j.useRef(null),p=j.useRef(null);let E;e[0]!==a||e[1]!==r?(E=()=>{const L=g.current,F=p.current;if(L!==null)if(r){if(L.showModal(),a){const M=a.findIndex(as);F!==null&&M!==-1&&Array.from(F.children).filter(os)[M].focus()}}else L.close()},e[0]=a,e[1]=r,e[2]=E):E=e[2];let k;e[3]!==r?(k=[r],e[3]=r,e[4]=k):k=e[4],j.useEffect(E,k);let S;e[5]!==i?(S=(L,F)=>()=>{u(!1),L&&L(),F&&F(i)},e[5]=i,e[6]=S):S=e[6];const y=S;let R;e[7]!==n?(R=()=>{n&&n(),u(!1)},e[7]=n,e[8]=R):R=e[8];const A=R;if(!r)return null;let N;e[9]!==t?(N=["modal"],t&&t.forEach(L=>N.push(L)),e[9]=t,e[10]=N):N=e[10];const d=N.join(" ");let v;e[11]!==l?(v=o.jsx("div",{className:"modal-message",children:l}),e[11]=l,e[12]=v):v=e[12];let b;e[13]!==c||e[14]!==i?(b=c&&o.jsx("div",{className:"modal-checkbox",children:o.jsxs("div",{children:[o.jsx("input",{type:"checkbox",id:"modalCheckbox",name:"modalCheckbox",checked:i,onChange:L=>{f(L.target.checked)}}),o.jsx("label",{htmlFor:"modalCheckbox",children:c.message})]})}),e[13]=c,e[14]=i,e[15]=b):b=e[15];let _;e[16]!==a||e[17]!==y?(_=a?.map((L,F)=>{const{message:M,callback:$,checkboxCallback:C,autoFocus:T}=L;return o.jsx("button",{type:"button",onClick:y($,C),autoFocus:T,children:M},F)}),e[16]=a,e[17]=y,e[18]=_):_=e[18];let w;e[19]!==_?(w=o.jsx("div",{ref:p,className:"modal-button-group",children:_}),e[19]=_,e[20]=w):w=e[20];let P;return e[21]!==A||e[22]!==d||e[23]!==v||e[24]!==b||e[25]!==w?(P=o.jsxs("dialog",{ref:g,id:"modal",className:d,onCancel:A,children:[v,b,w]}),e[21]=A,e[22]=d,e[23]=v,e[24]=b,e[25]=w,e[26]=P):P=e[26],P}function os(s){return s instanceof HTMLButtonElement}function as(s){return s.autoFocus}function de(){const s=J.c(11),{t:e}=K();let t;s[0]!==e?(t=e("error.title"),s[0]=e,s[1]=t):t=s[1];let l;s[2]!==t?(l=o.jsx("h2",{children:t}),s[2]=t,s[3]=l):l=s[3];let a;s[4]!==e?(a=e("error.message"),s[4]=e,s[5]=a):a=s[5];let c;s[6]!==a?(c=o.jsx("div",{children:a}),s[6]=a,s[7]=c):c=s[7];let n;return s[8]!==l||s[9]!==c?(n=o.jsx("div",{className:"app-window",children:o.jsx("div",{className:"app-window-inner",children:o.jsxs("section",{className:"results-section",children:[l,c]})})}),s[8]=l,s[9]=c,s[10]=n):n=s[10],n}const me="corpus",ie=s=>"/poke-corpus/"+s,ls=ie("data.json"),cs=s=>{const e=d=>f(d).size,t=async(d,v)=>{const[b,_]=await k(d,v);return _?.hash===b.hash?0:b.size},l=async(d=s.collections,v=s.languages)=>{try{const b=await i(),_=(await Promise.all(d.flatMap(w=>s.getCollection(w).languages.filter(P=>v.includes(P)).flatMap(P=>s.getCollection(w).files.map(L=>t(b,ce(w,P,L))))))).reduce((w,P)=>w+P,0);return b.close(),_}catch{return d.flatMap(b=>s.getCollection(b).languages.filter(_=>v.includes(_)).flatMap(_=>s.getCollection(b).files.map(w=>e(ce(b,_,w))))).reduce((b,_)=>b+_,0)}},a=async(d,v,b)=>{const _=ie(b),[w,P]=await k(v,b);if(P?.hash===w.hash||!navigator.onLine&&P?.hash!==void 0){const M=await A(d,_);if(M!==void 0)return M}const L=await fetch(_);return L.ok?(await N(d,_,L).then(async M=>{M&&await p(v,b)}),L):await A(d,_)??null},c=async(d,v,b)=>{const _=ie(b),[w,P]=await k(v,b);return P!==void 0?[await A(d,_),P.hash===w.hash]:[void 0,!1]},n=async d=>{const v=ie(d),b=await fetch(v);return b.ok?b:null},r="corpus",u="files",i=async()=>{const d=indexedDB.open(r);return new Promise((v,b)=>{d.onupgradeneeded=()=>{d.result.createObjectStore(u),d.transaction!==null&&(d.transaction.oncomplete=()=>{console.log("Created object store")})},d.onsuccess=()=>{v(d.result)},d.onerror=()=>{b(d.error)}})},f=d=>s.metadata[d],g=async(d,v)=>{const w=d.transaction([u],"readonly").objectStore(u).get(v);return new Promise((P,L)=>{w.onsuccess=()=>{P(mt(w.result)?w.result:void 0)},w.onerror=()=>{L(w.error)}})},p=async(d,v)=>{const w=d.transaction([u],"readwrite").objectStore(u).put(f(v),v);return new Promise((P,L)=>{w.onsuccess=()=>{P(w.result===v)},w.onerror=()=>{L(w.error)}})},E=async(d,v)=>{const w=d.transaction([u],"readwrite").objectStore(u).delete(v);return new Promise((P,L)=>{w.onsuccess=()=>{P(!0)},w.onerror=()=>{L(w.error)}})},k=async(d,v)=>[f(v),await g(d,v)],S=async d=>{const _=d.transaction(["files"],"readwrite").objectStore("files").clear();return d.close(),new Promise((w,P)=>{_.onsuccess=()=>{w(!0)},_.onerror=()=>{P(_.error)}})},y=async d=>{const _=d.transaction([u],"readonly").objectStore(u).getAllKeys();return new Promise((w,P)=>{_.onsuccess=()=>{w(_.result.filter(L=>typeof L=="string"))},_.onerror=()=>{P(_.error)}})},R=async()=>await caches.open(me),A=async(d,v)=>{try{return await d.match(v)}catch(b){console.error(b);return}},N=async(d,v,b)=>{try{return await d.put(v,b.clone()),!0}catch(_){return console.error(_),!1}};return{corpus:s,getFilePath:ce,getFileSize:e,getDownloadSizeTotal:l,getFile:a,getFileCacheOnly:c,getFileRemote:n,getIndexedDB:i,deleteLocalMetadata:E,clearLocalMetadata:S,getAllLocalFilePaths:y,getCache:R}};function rs(s){return cs(s)}function is(s,e=ls){const t=()=>{s(l=>l===void 0?null:l)};Promise.all([us(e).then(l=>{s(a=>a===void 0&&l!==null?l:a)}).catch(ee),hs(e).then(l=>{s(a=>l??a)}).catch(ee)]).then(t,t)}async function us(s){if("caches"in window){const t=await(await caches.open(me)).match(s);if(t?.ok)return Me(t)}return null}async function hs(s){const e=await fetch(s);if(!e.ok)return null;if("caches"in window){const t=e.clone();caches.open(me).then(l=>l.put(s,t)).catch(ee)}return Me(e)}async function Me(s){const e=await s.json(),t=bt(e);return rs(t)}const ye="Search";function ds(s){const e=J.c(14);let t,l;e[0]!==s?({reset:l,...t}=s,e[0]=s,e[1]=t,e[2]=l):(t=e[1],l=e[2]);const{t:a}=K();let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx("img",{className:"header-logo",src:"logo.svg",alt:"",height:"40",width:"40"}),e[3]=c):c=e[3];let n;e[4]!==a?(n=a("title",{version:a("version")}),e[4]=a,e[5]=n):n=e[5];let r;e[6]!==l||e[7]!==n?(r=o.jsx("h1",{children:o.jsxs("a",{href:"/poke-corpus/",onClick:l,children:[c," ",n]})}),e[6]=l,e[7]=n,e[8]=r):r=e[8];let u;e[9]!==t?(u=o.jsx(fe,{fallback:null,children:o.jsx(lt,{...t})}),e[9]=t,e[10]=u):u=e[10];let i;return e[11]!==r||e[12]!==u?(i=o.jsxs("header",{className:"header",children:[r,u]}),e[11]=r,e[12]=u,e[13]=i):i=e[13],i}function fs(s){const e=J.c(26),{view:t,switchView:l}=s,{t:a}=K();let c;e[0]!==a?(c=a("tagline"),e[0]=a,e[1]=c):c=e[1];let n;e[2]!==c?(n=o.jsx("span",{children:c}),e[2]=c,e[3]=n):n=e[3];let r;e[4]===Symbol.for("react.memo_cache_sentinel")?(r=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[4]=r):r=e[4];let u;e[5]!==a?(u=a("footerText"),e[5]=a,e[6]=u):u=e[6];let i;e[7]!==u?(i=o.jsx("span",{children:u}),e[7]=u,e[8]=i):i=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[9]=f):f=e[9];const g=t!=="Search"?"backToSearch":"manageCache";let p;e[10]!==a||e[11]!==g?(p=a(g),e[10]=a,e[11]=g,e[12]=p):p=e[12];let E;e[13]!==l||e[14]!==p?(E=o.jsx("span",{children:o.jsx("button",{className:"link",onClick:l,children:p})}),e[13]=l,e[14]=p,e[15]=E):E=e[15];let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k=o.jsx("span",{className:"separator",translate:"no",children:" | "}),e[16]=k):k=e[16];let S;e[17]!==a?(S=a("github"),e[17]=a,e[18]=S):S=e[18];let y;e[19]!==S?(y=o.jsx("span",{children:o.jsx("a",{href:"https://github.com/abcboy101/poke-corpus",children:S})}),e[19]=S,e[20]=y):y=e[20];let R;return e[21]!==y||e[22]!==n||e[23]!==i||e[24]!==E?(R=o.jsxs("footer",{children:[n,r,i,f,E,k,y]}),e[21]=y,e[22]=n,e[23]=i,e[24]=E,e[25]=R):R=e[25],R}function gs(){const[s,e]=j.useState(le.language),[t,l]=j.useState(Ye),[a,c]=j.useState(Xe),[n,r]=j.useState(ye),[u,i]=j.useState(0),[f,g]=j.useState(0),[p,E]=j.useState(null),[k,S]=j.useState(!1),[y,R]=j.useState(void 0);j.useEffect(()=>{const b=ke();document.body.classList.add(`mode-${b}`),S(!0),is(R)},[]);const A=j.useCallback(b=>{window.location.hash="",Je("corpus-params"),r(ye),i(_=>_+1&255),g(0),E(null),b.preventDefault()},[]),N=j.useCallback(b=>{E(b),g(_=>_+1&255)},[]),d=j.useCallback(()=>{r(b=>{const _=b!=="Search"?"Search":"CacheManager";return k||S(_==="CacheManager"),_})},[]);if(y===void 0)return;const v=["app",`view-${n.toLowerCase()}`];return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&v.push("ua-safari"),o.jsxs("div",{className:v.join(" "),lang:s,dir:le.dir(s),children:[o.jsx(ds,{showModal:N,language:s,setLanguage:e,richText:t,setRichText:l,limit:a,setLimit:c,reset:A}),y!==null?o.jsxs(fe,{FallbackComponent:de,children:[o.jsx(Jt,{loader:y,showModal:N,language:s,richText:t,limit:a}),o.jsx(ss,{active:n==="CacheManager",loader:y,showModal:N})]}):o.jsx(de,{}),o.jsx(fs,{view:n,switchView:d}),o.jsx(ns,{...p},f)]},u)}function ms(){const s=J.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=o.jsx("div",{className:"app",children:o.jsx(de,{})}),s[0]=e):e=s[0],e}const ps=Oe.createRoot(document.getElementById("root"));ps.render(o.jsx(De.StrictMode,{children:o.jsx(fe,{FallbackComponent:ms,children:o.jsx(gs,{})})}));Ke({onOfflineReady(){console.log("Ready to work offline!")}});
