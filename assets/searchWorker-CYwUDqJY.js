(function(){"use strict";var ae={languages:["qid","ja-Hrkt","ja","en","en-GB","fr","it","de","es","es-419","ko","zh-Hans","zh-Hans-CN","zh-Hant","pt-BR","th","ru","tr","id","hi"],collections:{Red:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Green:{languages:["ja-Hrkt"],structured:!1,files:["data"]},Blue:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Yellow:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},Gold:{languages:["ja-Hrkt","en","fr","it","de","es","ko"],structured:!1,files:["data"]},Silver:{languages:["ja-Hrkt","en","fr","it","de","es","ko"],structured:!1,files:["data"]},Crystal:{languages:["ja-Hrkt","en","fr","it","de","es"],structured:!1,files:["data"]},RubySapphire:{id:"rs",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:{ja:"1.1",en:"1.2",fr:"1.1",it:"1.1",de:"1.1",es:"1.1"},files:["msg"],literals:{KUN:{branch:"gender",line:[12348,12349]},VERSION:{branch:"version",line:[12351,12350]},EVIL_TEAM:{branch:"version",line:[12353,12352]},GOOD_TEAM:{branch:"version",line:[12352,12353]},EVIL_LEADER:{branch:"version",line:[12355,12354]},GOOD_LEADER:{branch:"version",line:[12354,12355]},EVIL_LEGENDARY:{branch:"version",line:[12357,12356]},GOOD_LEGENDARY:{branch:"version",line:[12356,12357]},RIVAL:{branch:"gender",line:[12359,12358]}}},FireRedLeafGreen:{id:"frlg",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:{ja:"1.0",en:"1.1",fr:"1.0",it:"1.0",de:"1.0",es:"1.0"},files:["msg"],literals:{KUN:{branch:"gender",line:[9351,9352]}}},Emerald:{id:"e",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,version:"1.0",files:["msg"],literals:{KUN:{branch:"gender",line:[15105,15106]},VERSION:{line:15109},EVIL_TEAM:{line:15110},GOOD_TEAM:{line:15111},EVIL_LEADER:{line:15112},GOOD_LEADER:{line:15113},EVIL_LEGENDARY:{line:15114},GOOD_LEGENDARY:{line:15115},RIVAL:{branch:"gender",line:[15117,15116]}}},DiamondPearl:{id:"dp",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es","ko"],structured:!0,files:["msg"]},Platinum:{id:"pt",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es","ko"],structured:!0,files:["msg"]},HeartGoldSoulSilver:{id:"hgss",languages:["qid","ja-Hrkt","en","fr","it","de","es","ko"],structured:!0,files:["msg"]},BlackWhite:{id:"bw",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,files:["common","script"]},Black2White2:{id:"b2w2",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,files:["common","script"]},XY:{id:"xy",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,version:"1.5",files:["common","script"]},OmegaRubyAlphaSapphire:{id:"oras",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko"],structured:!0,version:"1.4",files:["common","script"]},SunMoon:{id:"sm",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.2",files:["common","script"],speaker:{file:"common",textFile:"58"}},UltraSunUltraMoon:{id:"usum",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.2",files:["common","script"],speaker:{file:"common",textFile:"63"}},LetsGoPikachuLetsGoEevee:{id:"lgpe",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hans-CN","zh-Hant"],structured:!0,version:"1.0.0/1.0.1/1.0.2",files:["common","script"]},SwordShield:{id:"swsh",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.3.0/1.3.1/1.3.2",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},BrilliantDiamondShiningPearl:{id:"bdsp",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.3.0",files:["message"],speaker:{file:"message",textFile:"dlp_speakers_name"}},LegendsArceus:{id:"la",languages:["qid","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.1.0/1.1.1",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},ScarletViolet:{id:"sv",languages:["qid","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"3.0.1",files:["common","script"],speaker:{file:"common",textFile:"namelist"}},Stadium:{id:"stad",languages:["qid","en","fr","it","de","es"],structured:!0,files:["msg"]},Stadium2:{id:"stad2",languages:["qid","ja-Hrkt","en","fr","it","de","es"],structured:!0,files:["msg"]},Box:{id:"box",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es"],structured:!0,files:["message"]},Colosseum:{id:"colo",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,files:["msg"]},XD:{id:"xd",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,files:["msg"]},BattleRevolution:{id:"pbr",languages:["qid","ja","en","en-GB","fr","it","de","es"],structured:!0,version:{ja:"0/1/2",en:"0","en-GB":"0",fr:"0",it:"0",de:"0",es:"0"},files:["message"],literals:{'"No."':{branch:"language",line:{ja:992,en:993,"en-GB":993,de:994,fr:995,es:996,it:997}},'"Lv."':{branch:"language",line:{ja:998,en:999,"en-GB":999,de:1e3,fr:1001,es:1002,it:1003}},'"HP"':{branch:"language",line:{ja:1036,en:1037,"en-GB":1037,de:1038,fr:1039,es:1040,it:1041}},'"PP"':{branch:"language",line:{ja:1042,en:1043,"en-GB":1043,de:1044,fr:1045,es:1046,it:1047}}}},Ranch:{id:"ranch",languages:["qid","ja-Hrkt","en","en-GB","fr","it","de","es"],structured:!0,version:{"ja-Hrkt":"258",en:"256","en-GB":"1",fr:"1",it:"1",de:"1",es:"1"},files:["msg"]},Bank:{id:"bank",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"1.5",files:["turtle"]},HOME:{id:"home",languages:["qid","ja-Hrkt","ja","en","fr","it","de","es","ko","zh-Hans","zh-Hant"],structured:!0,version:"3.2.1",files:["megaturtle"]},GO:{id:"go",languages:["qid","ja","en","fr","it","de","es","es-419","ko","zh-Hant","pt-BR","th","ru","tr","id","hi"],structured:!0,softWrap:!0,files:["text"]},Masters:{id:"masters",languages:["qid","ja","en","fr","it","de","es","ko","zh-Hant"],structured:!0,softWrap:!0,files:["messages","talk","ui"]}}};const se="qid",M=ae,x=Object.keys(M.collections);x.filter(e=>M.collections[e].structured),x.length^M.languages.length<<4,Math.ceil(x.length/8);const re={"ja-Hrkt":"『",ja:"『",fr:" : ","zh-Hans":"：","zh-Hant":"「"};function ne(e){return re[e]??": "}function ce(e,a){return e.map(l=>{const s=l.split(/\r\n|\n/),r=s.indexOf(`Text File : ${a}`)+2,n=s.indexOf("~~~~~~~~~~~~~~~",r);return s.slice(r,n)})}function pe(e,a,l){return e.replace(/(.*?)(\[VAR 0114\(([0-9A-F]{4})\)\])(?:$|(?=\u{F0000}))/u,(s,r,n,c)=>{const g=parseInt(c,16),F=a[g];return`${n.replaceAll("[","\\[")}󱄀${F}${ne(l)}󱄁${r}`})}function te(e){return e.replaceAll(/^(.+)\u{F1100}(.+?)\u{F1101}/gu,'<a class="speaker" data-var="$1">$2</a>')}var ue="蛋妙蛙种子草花小火龙恐喷杰尼龟卡咪水箭绿毛虫铁甲蛹巴大蝶独角壳针蜂波比鸟拉达烈雀嘴阿柏蛇怪皮丘雷穿山鼠王多兰娜后朗力诺可西六尾九胖丁超音蝠走路臭霸派斯特球摩鲁蛾地三喵猫老鸭哥猴暴蒂狗风速蚊香蝌蚪君泳士凯勇基胡腕豪喇叭芽口呆食玛瑙母毒刺拳石隆岩马焰兽磁合一葱嘟利海狮白泥舌贝鬼通耿催眠貘引梦人钳蟹巨霹雳电顽弹椰树嘎啦飞腿郎快头瓦双犀牛钻吉蔓藤袋墨金鱼星宝魔墙偶天螳螂迷唇姐击罗肯泰鲤普百变伊布边菊化盔镰刀翼急冻闪你哈克幻叶月桂竺葵锯鳄蓝立咕夜鹰芭瓢安圆丝蛛叉字灯笼古然咩羊茸美丽露才皇毽棉长手向日蜻蜓乌沼太阳亮黑暗鸦妖未知图腾果翁麒麟奇榛佛托土弟蝎钢千壶赫狃熊圈熔蜗猪珊瑚炮章桶信使翅戴加象顿Ⅱ惊鹿犬无畏战舞娃奶罐幸福公炎帝幼沙班洛亚凤时木守宫森林蜥蜴稚鸡壮跃狼纹直冲茧狩猎盾粉莲童帽乐河橡实鼻狡猾傲骨燕鸥莉奈朵溜糖雨蘑菇斗笠懒獭过动猿请假居忍面者脱妞吼爆幕下掌朝北优雅勾魂眼那恰姆落正拍负萤甜蔷薇溶吞牙鲨鲸驼煤炭跳噗晃斑颚蚁漠仙歌青绵七夕鼬斩饭匙鳅鲶虾兵螯秤念触摇篮羽丑纳飘浮泡隐怨影诅咒巡灵彷徨热带铃勃梭雪冰护豹珍珠樱空棘爱心哑属艾欧盖固坐祈代希苗台猛曼拿儿狸法师箱蟀勒伦琴含羞苞槌城结贵妇绅蜜女帕兹潜兔随卷耳魅东施铛响坦铜镜钟盆聒噪陆尖咬不良骷荧光霓虹自舔狂远Ｚ由卢席恩骑色霏莱谢米尔宙提主暖炒武刃丸剑探步哨约扒酷冷蚀豆鸽高雉幔庞滚蝙螺钉差搬运匠修建蟾蜍投摔打包保足蜈蚣车轮精根裙野蛮鲈混流氓红倒狒殿滑巾征哭具死神棺原肋始祖破灰尘索沫栗德单卵细胞造鹅倍四季萌哎呀败轻蜘坚齿组麻鳗宇烛幽晶斧嚏几何敏捷功夫父赤驹劈司令炸雄秃丫首恶燃烧毕云酋迪耶塔赛里狐呱贺掘彩蓓洁能鞘芳芙妮好鱿贼脚铠垃藻臂枪伞咚碎黏钥朽南瓜嗡哲裴格枭狙射炽咆哮虎漾壬笃啄铳少强锹农胜虻鬃弱坏驴仔重挽滴伪睡罩盗着竹疗环智挥猩掷胆噬堡爷参性：银伴陨枕戈谜拟Ｑ磨舵鳞杖璞・鸣哞鳍科莫迦虚吾肌费束辉纸御机夏蛋妙蛙種子草花小火龍恐噴傑尼龜卡咪水箭綠毛蟲鐵甲蛹巴大蝶獨角殼針蜂波比鳥拉達烈雀嘴阿柏蛇怪皮丘雷穿山鼠王多蘭娜后朗力諾可西六尾九胖丁超音蝠走路臭霸派斯特球摩魯蛾地三喵貓老鴨哥猴爆蒂狗風速蚊香蝌蚪君泳士凱勇基胡腕豪喇叭芽口呆食瑪瑙母毒刺拳石隆岩馬焰獸磁合一蔥嘟利海獅白泥舌貝鬼通耿催眠貘引夢人鉗蟹巨霹靂電頑彈椰樹嘎啦飛腿郎快頭瓦雙犀牛鑽吉蔓藤袋墨金魚星寶魔牆偶天螳螂迷唇姐擊羅肯泰鯉暴普百變伊布邊菊化盔鐮刀翼急凍閃你哈克幻葉月桂竺葵鋸鱷藍立咕夜鷹芭瓢安圓絲蛛叉字燈籠古然咩羊茸美麗露才皇毽棉長手向日蜻蜓烏沼太陽亮黑暗鴉妖未知圖騰果翁麒麟奇榛佛托土弟蠍鋼千壺赫狃熊圈熔蝸豬珊瑚炮章桶信使翅戴加象頓Ⅱ驚鹿犬無畏戰舞娃奶罐幸福公炎帝幼沙班洛亞鳳時木守宮森林蜥蜴稚雞壯躍狼紋直衝繭狩獵盾粉蓮童帽樂河橡實鼻狡猾傲骨燕鷗莉奈朵溜糖雨蘑菇斗笠懶獺過動猿請假居忍面者脫妞吼幕下掌朝北優雅勾魂眼那恰姆落正拍負螢甜薔薇溶吞牙鯊鯨駝煤炭跳噗晃斑顎蟻漠仙歌青綿七夕鼬斬飯匙鰍鯰蝦兵螯秤念觸搖籃羽醜納飄浮泡隱怨影詛咒巡靈彷徨熱帶鈴勃梭雪冰護豹珍珠櫻空棘愛心啞屬艾歐蓋固坐祈代希苗台猛曼拿兒狸法師箱蟀勒倫琴含羞苞槌城結貴婦紳蜜女帕茲潛兔隨捲耳魅東施鐺響坦銅鏡鐘盆聒噪陸尖咬不良骷光霓虹自舔狂遠Ｚ由盧席恩騎色霏萊謝米爾宙提主暖炒武刃丸劍探步哨約扒酷冷蝕豆鴿高雉幔龐滾蝙螺釘差搬運匠修建蟾蜍投摔打包保足蜈蚣車輪毬精根裙野蠻鱸混流氓紅倒狒殿滑巾徵哭具死神棺原肋始祖破灰塵索沫栗德單卵細胞造鵝倍四季萌哎呀敗輕蜘堅齒組麻鰻宇燭幽晶斧嚏幾何敏捷功夫父赤駒劈司令炸雄禿丫首惡燃燒畢雲酋迪耶塔賽里狐呱賀掘彩蓓潔能鞘芳芙妮好魷賊腳鎧垃藻臂槍傘咚碎黏鑰朽南瓜嗡哲裴格梟狙射熾咆哮虎漾壬篤啄銃少強鍬農勝虻鬃弱壞驢仔重挽滴偽睡罩盜著竹療環智揮猩擲膽噬堡爺參性：銀伴隕枕戈謎擬Ｑ磨舵鱗杖璞・鳴哞鰭科莫迦虛吾肌費束輝紙御機夏垒磊砰奥壘磊砰丑奧";const E="􏌆",o="􀤿",G="़",I="्",H="‌",N="‍",j="[क-हक़-य़]",ie="[ऄ-औ]",oe="[ा-ौ]",Ae="[ऀँंःऽ]",de=`(?:${j}${G}?(?:${I}[${H}${N}]?|[${H}${N}]${I}))`,ge=`(?:${j}${G}?)`,fe=`(?:${ie}${G}?(?:[${N}${H}]?${I}${j}|${N}${j}))?`,y=`(?:${de}*${ge}|${fe})`,D=`(?:${I}[${H}${N}]?|${oe}*${G}?${I}?)?${Ae}?`,Fe={"":"क्ष","":"ज्ञ","":"क्र","":"ख्र","":"ग्र","":"घ्र","":"च्र","":"ज्र","":"झ्र","":"ञ्र","":"ण्र","":"त्र","":"थ्र","":"द्र","":"ध्र","":"न्र","":"प्र","":"फ्र","":"ब्र","":"भ्र","":"म्र","":"य्र","":"ल्र","":"व्र","":"श्र","":"ष्र","":"स्र","":"ह्र","":"फ़्र","":"क्र","":"द्म","":"द्य","":"त्न","":"द्द","":"द्ध","":"द्व","":"स्न","":"ट्","":"ठ्","":"ड्","":"ढ्","":"ट","":"ठ","":"ड","":"ढ","":"क्‍","":"ख्‍","":"ग्‍","":"घ्‍","":"च्‍","":"ज्‍","":"झ्‍","":"ञ्‍","":"ण्‍","":"त्‍","":"थ्‍","":"ढ्‍","":"न्‍","":"प्‍","":"फ्‍","":"ब्‍","":"भ्‍","":"म्‍","":"य्‍","":"ऱ्‍","":"ल्‍","":"ळ्‍","":"व्‍","":"श्‍","":"ष्‍","":"स्‍","":"ह्‍","":"फ़्‍","":"्र","":E,"":E,"":E,"":E,"":E,"":E,"":E,"":E,"":E,"":"ँ","":"े","":"े","":"े","":"े","":"े","":"े","":"े","":"े","":"े","":"ै","":"ै","":"ै","":"ै","":"ै","":"ै","":"ै","":"ै","":"ु","":"ू","":"ं","":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":o,"":"ी","":"ी","":"ी","":"ी","":"ी","":"ी","":"ी","":"ी","":"ी","":"ी","":"ी","":"ी","":"छ","":"द्भु","":"रु","":"रू","":"हु","":"हू"};function he(e,a=!0){return e=e.replace(/\u094D/gu,"्‌"),e=e.replace(/\u093F/gu,o),e=e.replace(/[\uF000-\uF633]/gu,l=>Fe[l]??l),a&&(e=e.replace(new RegExp(`${o}${o}(${y}${D}${E}?)`,"gu"),`${o}$1${o}`)),e=e.replace(new RegExp(`${o}(${y})(${D})${E}`,"gu"),"र्$1ि$2"),e=e.replace(new RegExp(`${o}(${y})(${D})`,"gu"),"$1ि$2"),e=e.replace(new RegExp(`(${y})(${D})${E}`,"gu"),"र्$1$2"),e=e.replaceAll(o,"ि"),e=e.replaceAll(E,"र्"),e=e.replaceAll(H,""),e=e.replaceAll(N,""),e=e.replace(/\u094D\u093C/gu,"़्"),a&&(e=e.replace(/टय्ॎ/gu,"ट्य")),e}const $e={"":"ฐ","":"ญ","":"ิ","":"ี","":"ึ","":"ื","":"ั","":"ํ","":"็","":"ุ","":"ู","":"ฺ","":"่","":"้","":"๊","":"๋","":"์","":"่","":"้","":"๊","":"๋","":"์","":"่","":"้","":"๊","":"๋","":"์"};function Re(e){return e.replace(/[\uF700-\uF71A]/gu,a=>$e[a]??a)}function _e(e,a){switch(a){case"hi":return he(e);case"th":return Re(e);default:return e}}function be(e){return e.replaceAll(/\u{F0106}(\/?[bi]) *\u{F0107}/gu,"<$1>").replaceAll(/\u{F0106}size=(\d+)\u{F0107}/gu,'<span style="font-size: calc($1 / 32 * 100%)">').replaceAll(/\u{F0106}color=(.*?)\u{F0107}/gu,'<span class="color" style="color: $1">').replaceAll(/\u{F0106}\/(size|color)\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}a href="\{(\d+)\}"\u{F0107}(.+?)\u{F0106}\/a\u{F0107}/gu,'<span class="link" title="󰄄$1}">$2</span>').replaceAll(/\u{F0106}a href="([0-9A-Za-z_]+)"\u{F0107}/gu,'<a class="link" href="#id=go.$1" title="$1">').replaceAll(/\u{F0106}a href=["“]((?:pokemongolive.com)\/[^"]+?)["”]\u{F0107}/gu,'<a class="link" href="http://$1" title="$1" target="_blank" rel="noopener noreferrer nofollow">').replaceAll(/\u{F0106}a href="+(https?:\/\/[^"]+?)"+\u{F0107}/gu,'<a class="link" href="$1" title="$1" target="_blank" rel="noopener noreferrer nofollow">').replaceAll(/\u{F0106}\/a\u{F0107}/gu,"</a>").replaceAll(/\u{F0106}br\u{F0107}/gu,"<br>").replaceAll(/\u{F0106}(taunt|intimidate)\u{F0107}/gu,'<span class="var">󰄆$1󰄇</span>').replaceAll(/(%BREAK%)/gu,'<span class="c">$1</span><br>').replaceAll(/(%PLAYERNAME%)/gu,'<span class="var">$1</span>').replaceAll(/(%(\d+\$)?s)/gu,'<span class="var">$1</span>').replaceAll(/(\{\d+(?::[^\]]+?)?\})/gu,'<span class="var">$1</span>')}function Ee(e,a){switch(a){default:return e}}function Le(e){return e.replaceAll(/\u{F0106}attr font=['"]fallback['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="fallback">$1</span>').replaceAll(/\u{F0106}attr color=['"]([0-9A-Fa-f]{6})['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="color" style="color: #$1">$2</span>').replaceAll(/\u{F0106}attr size=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span style="font-size: $1px">$2</span>').replaceAll(/\u{F0106}attr color=['"]([0-9A-Fa-f]{6})['"] size=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="color" style="color: #$1; font-size: $2px">$3</span>').replaceAll(/\u{F0106}attr size=['"](\d+?)['"] height=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span style="font-size: $1px; line-height: $2px">$3</span>').replaceAll(/(\u{F0106}\/?div\u{F0107})/gu,'<span class="div">$1</span>').replaceAll(/\u{F0106}span class=""?word"?"\u{F0107}/gu,'<span class="word">').replaceAll(/\u{F0106}\/span\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}br\u{F0107}/gu,"<br>").replaceAll(/\u{F0100}\[/gu,"󰄂").replaceAll(/\u{F0100}\]/gu,"]").replaceAll(/(\u{F0100}n)/gu,'<span class="literal n">$1</span><br>').replaceAll(/\[[A-Za-z]+?:Gen Ref="255" M="([^"]*?)" F="([^"]*?)" \]/gu,(a,l,s)=>v(l,s)).replaceAll(/\[[A-Za-z]+?:Gen Ref="255" M="([^"]*?)" \]/gu,(a,l)=>v("",l)).replaceAll(/\[[A-Za-z]+?:Gen Ref="255" F="([^"]*?)" \]/gu,(a,l)=>v("",l)).replaceAll(/\[[A-Za-z]+?:Qty (?:Ref="\d+" )?S="([^"]*?)" P="([^"]*?)" \]/gu,(a,l,s)=>P(l,s)).replaceAll(/\[[A-Za-z]+?:Qty (?:Ref="\d+" )?S="([^"]*?)" \]/gu,(a,l)=>P(l,"")).replaceAll(/\[[A-Za-z]+?:Qty (?:Ref="\d+" )?P="([^"]*?)" \]/gu,(a,l)=>P("",l)).replaceAll(/(\[(?:Name:.+?|Digit:.+?|Kor:Particle) [^[]*?\])/gu,'<span class="var">$1</span>')}const q=e=>({en:"BLOCK",fr:"BLOC",it:"MELLA",de:"RIEGEL",es:"CUBO"})[e]||"BLOCK",me=(e,a="")=>({en:"Lv",fr:"N.",it:"L.",de:"Lv.",es:a=="RubySapphire"?"Nv":"Nv."})[e]||"Lv",Se=e=>({"ja-Hrkt":"Lv",en:"Lv",fr:"N.",it:"L.",de:"Lv.",es:"Nv."})[e]||"Lv",ke=e=>({de:"Lv.",es:"Nv"})[e]||"Lv",Oe=e=>e=="de"?"AP":"PP",Ce=()=>"ID",ve=e=>({"ja-Hrkt":"No",en:"No",fr:"Nº",it:"Nº",de:"Nr.",es:"N.º"})[e]||"No",Ne=()=>"Pco";function Pe(e){return e.replaceAll(/[\uE800-\uEE26]/gu,a=>ue[a.codePointAt(0)-59392])}function Ie(e){return e.search(/[\u1100-\u11FF\uE0C0-\uE0C7]/u)===-1?e:e.replaceAll("","그래서").replaceAll("","그러나").replaceAll("","그러면").replaceAll("","그러므로").replaceAll("","그런데").replaceAll("","그").replaceAll("","그리하여").replaceAll("ᆨᅩ","그리고").replaceAll("ᄉ","ᄊ").replaceAll("ᄀ","ᄁ").replaceAll("ᄃ","ᄄ").replaceAll("ᄇ","ᄈ").replaceAll("ᄌ","ᄍ").replaceAll("","ᄉ").replaceAll(/([\u1100-\u115F])([억옹울옥연운온언얼열인영을은])/gu,(a,l,s)=>l+s.normalize("NFD").substring(1)).replaceAll(/([가나다마바사자카타파하])([\u11A8-\u11FF])/gu,(a,l,s)=>l.normalize("NFD")+s).replaceAll(/^[\u1160-\u1175]+$/gum,a=>"ᅟ"+a.split("").join("ᅟ")).replaceAll(new RegExp("(?<![\\u1100-\\u115F])([\\u1160-\\u1175])","gu"),"ᄋ$1").replaceAll(/([\u1100-\u115F])(?![\u1160-\u1175]|$)/gum,"$1ᅠ").replaceAll(new RegExp("(?<![\\u1160-\\u1175])([\\u11A8-\\u11FF])","gum"),"ᅟᅠ$1").normalize()}const He="　アッイワナ⠆ニ⠈ウオエヤヌノネ⠐ラーリヲタ⠖チ⠘ルロレヨツトテ⠠カ⠢キ⠤ハ⠦ヒ⠨クコケユフホヘ⠰サ⠲シンマ⠶ミ⠸スソセ⠼ムモメ",Be=" A,B.K⠆L⠈CIF⠌MSP,E⠒H⠔O⠖R⠘DJGÄNTQ⠠⠡⠢⠣-U⠦V⠨⠩Ö⠫⠬X⠮⠯⠰⠱.Ü⠴Z⠶⠷⠸⠹W⠻⠼Y⠾⠿";function Ge(e){return e.replaceAll(/[\u2800-\u283F]/gu,a=>He[a.codePointAt(0)-10240]).replaceAll(/([\u2808\u2810\u2818\u2820\u2828])(.)/gu,(a,l,s)=>{const r=l.codePointAt(0);let n="";if(r&8){const c="カクコサスソタツトナヌノハフホマムモラルロ".indexOf(s);c!==-1&&(s="キシチニヒミリ"[Math.floor(c/3)],n="ャュョ"[c%3])}return r&16?s=String.fromCodePoint(s.codePointAt(0)+1):r&32&&(s=String.fromCodePoint(s.codePointAt(0)+2)),s.concat(n)})}function je(e,a){return(a==="de"||a==="es")&&(e=e.replaceAll(/\u283F([\u2802\u2804])/gu,"$1")),e.replaceAll(/[\u2800-\u283F]/gu,l=>Be[l.codePointAt(0)-10240])}function ye(e,a){return e=e.replaceAll(/(\[BRAILLE_FORMAT(?: \d+){6}\])/gu,""),a==="ja-Hrkt"?Ge(e):je(e,a)}function De(e,a){return ye(e,a).replaceAll("[UP_ARROW]","↑").replaceAll("[DOWN_ARROW]","↓").replaceAll("[LEFT_ARROW]","←").replaceAll("[RIGHT_ARROW]","→").replaceAll("[PLUS]","＋").replaceAll("[AMPERSAND]","＆").replaceAll("[EQUALS]","＝").replaceAll("[PK]","⒆").replaceAll("[PKMN]","⒆⒇").replaceAll("[SUPER_ER]","ᵉʳ").replaceAll("[SUPER_E]","ᵉ").replaceAll("[SUPER_RE]","ʳᵉ").replaceAll("[ESCAPE 0]","↑").replaceAll("[ESCAPE 1]","↓").replaceAll("[ESCAPE 2]","←").replaceAll("[ESCAPE 3]","→").replaceAll("[ESCAPE 4]","＋").replaceAll("[UP_ARROW_2]","↑").replaceAll("[DOWN_ARROW_2]","↓").replaceAll("[LEFT_ARROW_2]","←").replaceAll("[RIGHT_ARROW_2]","→").replaceAll("[PLUS]","＋").replaceAll("[UNDERSCORE]","＿").replaceAll("[CIRCLE_1]","①").replaceAll("[CIRCLE_2]","②").replaceAll("[CIRCLE_3]","③").replaceAll("[CIRCLE_4]","④").replaceAll("[CIRCLE_5]","⑤").replaceAll("[CIRCLE_6]","⑥").replaceAll("[CIRCLE_7]","⑦").replaceAll("[CIRCLE_8]","⑧").replaceAll("[CIRCLE_9]","⑨").replaceAll("[ROUND_LEFT_PAREN]","（").replaceAll("[ROUND_RIGHT_PAREN]","）").replaceAll("[CIRCLE_DOT]","◎").replaceAll("[TRIANGLE]","△").replaceAll("[BIG_MULT_X]","✕").replaceAll("[KANJI_BIG]","大").replaceAll("[KANJI_SMALL]","小").replaceAll("[DAKUTEN]","゛").replaceAll("[HANDAKUTEN]","゜")}function Te(e){return e.replaceAll("¼","⒆").replaceAll("½","⒇")}function Ve(e){return e.replaceAll("[..]","‥").replaceAll("[゛]","゛").replaceAll("[゜]","゜").replaceAll("[^er]","ᵉʳ")}function Me(e){return e.search(/[\u2460-\u2487]/u)===-1?e:e.replaceAll("⑩","ᵉʳ").replaceAll("⑪","ʳᵉ").replaceAll("⑫","ʳ").replaceAll("⒅","ᵉ")}function xe(e){return e.replaceAll("","✜").replaceAll("","Ⓐ").replaceAll("","Ⓑ").replaceAll("","⊕").replaceAll("","⊖").replaceAll("","①").replaceAll("","②").replaceAll("","◎").replaceAll("","Ⓒ").replaceAll("","Ⓩ").replaceAll("","👆︎").replaceAll("▽","\\r").replaceAll("▼","\\c").replaceAll("㌨","♂").replaceAll("㌩","♀").replaceAll("㌕","◎").replaceAll("㌀","①").replaceAll("㌁","②").replaceAll("¼","ᵉʳ").replaceAll("½","ʳᵉ").replaceAll("¾","ᵉ").replaceAll("\\f","\\c").replaceAll("%quot;",'"')}function ze(e){return Pe(Ie(e.search(/[\uE000-\uE0A8]/u)===-1?e:e.replaceAll("","Ⓐ").replaceAll("","Ⓑ").replaceAll("","Ⓧ").replaceAll("","Ⓨ").replaceAll("","Ⓛ").replaceAll("","Ⓡ").replaceAll("","✜").replaceAll("","🏠︎").replaceAll("","ᵉʳ").replaceAll("","ʳᵉ").replaceAll("","ʳ").replaceAll("","♥").replaceAll("","♪").replaceAll("","ᵉ").replaceAll("",".").replaceAll("",",").replaceAll("",".").replaceAll("",",").replaceAll("",".").replaceAll("",",").replaceAll("",".").replaceAll("",",")))}function W(e){return e.search(/[\uE104\uE300-\uE31C]/u)===-1?e:e.replaceAll("","✨︎").replaceAll("","$").replaceAll("","A").replaceAll("","B").replaceAll("","C").replaceAll("","D").replaceAll("","E").replaceAll("","F").replaceAll("","G").replaceAll("","H").replaceAll("","I").replaceAll("","J").replaceAll("","K").replaceAll("","L").replaceAll("","M").replaceAll("","N").replaceAll("","O").replaceAll("","P").replaceAll("","Q").replaceAll("","R").replaceAll("","S").replaceAll("","T").replaceAll("","U").replaceAll("","V").replaceAll("","W").replaceAll("","X").replaceAll("","Y").replaceAll("","Z").replaceAll("","!").replaceAll("","?")}function Ue(e){return e.replaceAll(/\b(ab|ef|ij)\b/gu,"等级").replaceAll(/\b(cd|gh|kl)\b/gu,"战力")}function we(e){return e.search(/\{[^|}]+\|[^|}]+\}/u)===-1?e:e.replaceAll(/^.*\{[^|}]+\|[^|}]+\}.*$/gum,a=>{const l=a.replaceAll(/\{([^|}]+)\|[^|}]+\}/gu,"$1"),s=a.replaceAll(/\{[^|}]+\|([^|}]+)\}/gu,"$1");return[a,"󰀀",l,"󰀁",s].join("")})}function qe(e,a,l){switch(a){case"RubySapphire":case"FireRedLeafGreen":case"Emerald":e=De(e,l);break;case"DiamondPearl":case"Platinum":case"HeartGoldSoulSilver":case"BlackWhite":case"Black2White2":e=Me(e);break;case"XY":case"OmegaRubyAlphaSapphire":case"SunMoon":case"UltraSunUltraMoon":case"Bank":e=ze(e);break;case"LetsGoPikachuLetsGoEevee":e=W(e),l==="zh-Hans-CN"&&(e=Ue(e));break;case"SwordShield":case"BrilliantDiamondShiningPearl":case"LegendsArceus":case"ScarletViolet":case"HOME":e=W(e);break;case"Stadium":case"Stadium2":e=Te(e);break;case"Colosseum":case"XD":e=Ve(e);break;case"BattleRevolution":case"Ranch":e=xe(e);break;case"GO":e=_e(e,l);break;case"Masters":e=Ee(e,l);break}return we(e)}function We(e){return e.replaceAll("\\\\","󰄀").replaceAll("\\n",`
`).replaceAll("\\r","\r").replaceAll("\\c","\f").replaceAll("󰄀","\\\\")}function Ke(e){return e.split("󰀀")[0]}function K(e){return e.search(/[\u{F1000}\u{F1001}]/u)===-1?e:["<dl>",...e.split("󱀀").map(a=>a.split("󱀁")).map(([a,l])=>`<dt>${a}</dt><dd>${l}</dd>`),"</dl>"].join("")}function v(e,a,l=""){const s=[];return e.length>0&&s.push(`<span class="branch male">${e}</span>`),a.length>0&&s.push(`<span class="branch female">${a}</span>`),l.length>0&&s.push(`<span class="branch neuter">${l}</span>`),s.join('<span class="gender">/</span>')}function P(e,a,l=""){const s=[];return e.length>0&&s.push(`<span class="branch singular">${e}</span>`),a.length>0&&s.push(`<span class="branch plural">${a}</span>`),l.length>0&&s.push(`<span class="branch zero">${l}</span>`),s.join('<span class="number">/</span>')}function Y(e,a,l,s){const r=[];e.length>0&&r.push(`<span class="branch male singular">${e}</span>`),a.length>0&&r.push(`<span class="branch female singular">${a}</span>`);const n=r.join('<span class="gender singular">/</span>'),c=[];l.length>0&&c.push(`<span class="branch male plural">${l}</span>`),s.length>0&&c.push(`<span class="branch female plural">${s}</span>`);const g=c.join('<span class="gender plural">/</span>'),F=["number"];e.length>0&&l.length>0&&F.push("male"),a.length>0&&s.length>0&&F.push("female");const h=F.join(" ");return[n,g].join(`<span class="${h}">/</span>`)}function Ye(e,a){const l=[];return e.length>0&&l.push(`<span class="branch apocope1">${e}</span>`),a.length>0&&l.push(`<span class="branch apocope2">${a}</span>`),l.join('<span class="apocope">/</span>')}function Z(e,a,l,s){const r=[];return e.length>0&&r.push(`<span class="branch version-${l}">${e}</span>`),a.length>0&&r.push(`<span class="branch version-${s}">${a}</span>`),r.join('<span class="version">/</span>')}const Ze=(e,a)=>Z(e,a,"ruby","sapphire"),Je=(e,a)=>Z(e,a,"scarlet","violet"),m=e=>Number(e).toString(16).padStart(2,"0").toUpperCase(),Qe=(e,a,l,s,r,n)=>J(e,`#${a}${l}${s}${r==="FF"?"":r}`,n),J=(e,a,l)=>`<span class="color" style="color: ${a}">${l}</span>`,Q=(e,a,l,s,r)=>`<span class="color" style="color: #${m(a)}${m(l)}${m(s)}${r==="255"?"":m(r)}">`,Xe=(e,a,l,s,r,n,c,g,F)=>`<span class="color gradient" style="--top: #${m(a)}${m(l)}${m(s)}${r==="255"?"":m(r)}; --bottom: #${m(n)}${m(c)}${m(g)}${F==="255"?"":m(F)}">`;function el(e,a,l="",s=!0){const r=["RubySapphire","FireRedLeafGreen","Emerald"].includes(a),n=["DiamondPearl","Platinum","HeartGoldSoulSilver"].includes(a),c=["BlackWhite","Black2White2"].includes(a),g=a=="BrilliantDiamondShiningPearl",F=a=="BattleRevolution",h=a=="Ranch",k=a=="GO",_=a=="Masters",R=n||c,b=["XY","OmegaRubyAlphaSapphire","SunMoon","UltraSunUltraMoon","Bank"].includes(a),V=["LetsGoPikachuLetsGoEevee","SwordShield","BrilliantDiamondShiningPearl","LegendsArceus","ScarletViolet","HOME"].includes(a),U=["LegendsArceus","ScarletViolet"].includes(a),B=["Stadium","Stadium2"].includes(a),w=["Colosseum","XD"].includes(a),O=c||b||V;if(e=Ke(e??""),!s)return e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"),K(e);if(e=e.replaceAll("\\\\","󰄀").replaceAll("\\[","󰄂").replaceAll("\\{","󰄄").replaceAll("<","󰄆").replaceAll(">","󰄇"),e=e.replaceAll("\\n","󰈀").replaceAll("\\r","󰈁").replaceAll("\\c","󰈂").replaceAll("	","󰈃"),e=n?e.replaceAll("[VAR 0207]","󰈇").replaceAll("[VAR 0208]","󰈈"):e,e=r?e.replaceAll("\\e","󰋿"):e,e=B?e.replaceAll("󰄀n","󰈀"):e,e=B||r||R?e.replaceAll("⒆","<sup>P</sup><sub>K</sub>").replaceAll("⒇","<sup>M</sup><sub>N</sub>"):e,e=b?e.replaceAll("","<sup>P</sup><sub>K</sub>").replaceAll("","<sup>M</sup><sub>N</sub>"):e,e=r?e.replaceAll("[POKE]","<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>").replaceAll("[POKEBLOCK]",`<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>󱄂${q(l)}󱄃`).replaceAll("[BLOCK]",`󱄂${q(l)}󱄃`).replaceAll("[POKEMELLA]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>MELLA󱄃").replaceAll("[MELLA]","󱄂MELLA󱄃").replaceAll("[POKEMELLE]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>MELLE󱄃").replaceAll("[MELLE]","󱄂MELLE󱄃").replaceAll("[Pco]",`󱄂${Ne()}󱄃`).replaceAll("[UNK_SPACER]"," ").replaceAll("[LV]",`󱄂<span class="literal-small">${me(l)}</span>󱄃`).replaceAll("[LV_2]",`󱄂<span class="literal-small">${Se(l)}</span>󱄃`).replaceAll("[LV_3]",`󱄂<span class="literal-small">${ke(l)}</span>󱄃`).replaceAll("[PP]",`󱄂<span class="literal-small">${Oe(l)}</span>󱄃`).replaceAll("[ID]",`󱄂<span class="literal-small">${Ce()}</span>󱄃`).replaceAll("[NO]",`󱄂<span class="literal-small">${ve(l)}</span>󱄃`):e,e=g?e.replaceAll(/\u{F0106}color=(.*?)\u{F0107}(.*?)\u{F0106}\/color\u{F0107}/gu,J).replaceAll("󰄆/color󰄇","").replaceAll(/\u{F0106}size=(.*?)\u{F0107}(.*?)\u{F0106}\/size\u{F0107}/gu,'<span style="font-size: $1">$2</span>').replaceAll(new RegExp("((?<=^|[\\u{F0201}\\u{F0202}\\u{F0200}]).*?)\\u{F0106}pos=(.*?)\\u{F0107}(.*?(?:[\\u{F0201}\\u{F0202}\\u{F0200}]|$)+)","gu"),'<span style="tab-size: $2">$1	$3</span>').replaceAll(new RegExp("((?<=^|[\\u{F0201}\\u{F0202}\\u{F0200}]).*?)\\u{F0106}line-indent=(.*?)\\u{F0107}(.*?(?:[\\u{F0201}\\u{F0202}\\u{F0200}]|$)+)","gu"),'<span style="tab-size: $2">$1	$3</span>'):e,e=n||O?e.replaceAll(/\[VAR (?:FF00|COLOR)\((?!0000)([0-9A-F]{4})\)\](.+?)(?=\[VAR (?:FF00|COLOR)\([0-9A-F]{4}\)\]|$)/gu,(d,p,t)=>`<span class="color" style="color: var(--color-${parseInt(p,16)})">${t}</span>`).replaceAll(/\[VAR (?:FF00|COLOR)\(0000\)\]/gu,""):e,e=c||b?e.replaceAll(/\[VAR BD00\(([0-9A-F]{4}),([0-9A-F]{4}),([0-9A-F]{4})\)\](.+?)(?:\[VAR BD00\(0001,0002,0000\)\]|\[VAR BD01\]|$)/gu,(d,p,t,i,u)=>`<span class="color" style="color: var(--color-${parseInt(p,16)}-${parseInt(t,16)}-${parseInt(i,16)})">${u}</span>`).replaceAll("[VAR BD01]",""):e,e=n?e.replaceAll(/\[VAR FF01\(00C8\)\]\[VAR FF01\(0064\)\]/gu,"").replaceAll(/\[VAR FF01\(00C8\)\](.+?)(?:\[VAR FF01\(0064\)\]|[\u{F0201}\u{F0202}\u{F0200}]|$)/gu,'<span class="line-font-size-200"><span class="text-font-size-200">$1</span></span>').replaceAll("[VAR FF01(0064)]","").replaceAll(new RegExp("((?<=^|[\\u{F0201}\\u{F0202}\\u{F0200}]).*?)\\[VAR 0203\\(([0-9A-F]{4})\\)\\](.*?(?:[\\u{F0201}\\u{F0202}\\u{F0200}]|$)+)","gu"),(d,p,t,i)=>`<span style="tab-size: ${parseInt(t,16)}pt">${p}	${i}</span>`).replaceAll(/\[VAR 0203\(([0-9A-F]{4})\)\]/gu,"	").replaceAll(/\[VAR 0204\(([0-9A-F]{4})\)\]/gu,(d,p)=>`<div style="height: ${parseInt(p,16)}pt"></div>`).replaceAll(/\[VAR 0205\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[VAR 0206\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-right">$1</span>'):e,e=O?e.replaceAll(/\[VAR BD02\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[VAR BD03\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(d,p,t)=>`<span class="line-align-right" style="padding-right: ${parseInt(p,16)}pt">${t}</span>`).replaceAll(/\[VAR BD04\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(d,p,t)=>`<span class="line-align-left" style="padding-left: ${parseInt(p,16)}pt">${t}</span>`).replaceAll(new RegExp("((?<=^|[\\u{F0201}\\u{F0202}\\u{F0200}]).*?)\\[VAR BD05\\(([0-9A-F]{4})\\)\\](.*?(?:[\\u{F0201}\\u{F0202}\\u{F0200}]|$)+)","gu"),(d,p,t,i)=>`<span style="tab-size: ${parseInt(t,16)}pt">${p}	${i}</span>`).replaceAll(/\[VAR BD05\(([0-9A-F]{4})\)\]/gu,"	"):e,e=F?e.replaceAll(/\[ALIGN 1\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-left">$1</span>').replaceAll(/\[ALIGN 2\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[ALIGN 3\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-right">$1</span>'):e,e=n?e.replaceAll("󰈇󰈀",'<span class="c">[VAR 0207]</span><span class="n">\\n</span><br>').replaceAll("󰈈󰈀",'<span class="r">[VAR 0208]</span><span class="n">\\n</span><br>'):e,e=U?e.replaceAll("󰈁󰈀",'<span class="soft"> </span><span class="r">\\r</span><span class="n">\\n</span><wbr class="soft">'):e,e=e.replaceAll("󰈁󰈀",'<span class="r">\\r</span><span class="n">\\n</span><br>').replaceAll("󰈂󰈀",'<span class="c">\\c</span><span class="n">\\n</span><br>').replaceAll("󰈀󰈂",'<span class="n">\\n</span><span class="c">\\c</span><br>'),e=n?e.replaceAll("󰈇",'<span class="c">[VAR 0207]</span><br>').replaceAll("󰈈",'<span class="r">[VAR 0208]</span><br>'):e,e=e.replaceAll("󰈁",'<span class="r">\\r</span><br>').replaceAll("󰈂",'<span class="c">\\c</span><br>').replaceAll("󰈀",'<span class="n">\\n</span><br>').replaceAll("󰋿",'<span class="e">\\e</span>').replaceAll("󰈃",'<span class="tab">	</span>'),B){e=e.replaceAll("#71",'<span class="color color-animation">').replaceAll(/(#\d{2})/gu,'<span class="var">$1</span>').replaceAll(/\u{F0106}COL1,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}\u{F0106}COL2,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,Xe).replaceAll(/\u{F0106}COL1,LOAD,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,Q).replaceAll(/\u{F0106}COL1,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,Q).replaceAll(/\u{F0106}COL1,POP\u{F0107}\u{F0106}COL2,POP\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}COL1,POP\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}DIST,([\d.]+)\u{F0107}/gu,'<span class="spacing-$1">').replaceAll(/(\u{F0106}[0-9A-Z, ]+\u{F0107})/gu,'<span class="var">$1</span>').replaceAll(/%%/gu,'<span class="literal">%</span>').replaceAll(/(\u{F0100}(?:CU|CR|B|R))/gu,'<span class="var">$1</span>');const d=e.match(/<span\b/gu)?.length??0,p=e.match(/<\/span>/gu)?.length??0;p<d?e=e.concat("</span>".repeat(d-p)):d<p&&(e="<span>".repeat(p-d).concat(e))}return e=w?e.replaceAll(/\[unknown5_08_([0-9a-f]{2})_([0-9a-f]{2})_([0-9a-f]{2})_([0-9a-f]{2})\](.*?)(?:\[unknown5_08_ff_ff_ff_ff\]|$|(?=\u{F1000}))/gu,Qe).replaceAll("[Player]",'<span class="var">[Player]</span>').replaceAll("[Player_alt]",'<span class="var">[Player_alt]</span>').replaceAll("[Rui]",'<span class="var">[Rui]</span>').replaceAll("[opp_trainer_class]",'<span class="var">[opp_trainer_class]</span>').replaceAll("[opp_trainer_name]",'<span class="var">[opp_trainer_name]</span>').replaceAll("[sent_out_pokemon_1]",'<span class="var">[sent_out_pokemon_1]</span>').replaceAll("[sent_out_pokemon_2]",'<span class="var">[sent_out_pokemon_2]</span>').replaceAll("[speechbubble]",'<span class="var">[speechbubble]</span>').replaceAll("[bubble_or_speaker]",'<span class="var">[bubble_or_speaker]</span>').replaceAll("[maybe_speaker_ID_toggle]",'<span class="var">[maybe_speaker_ID_toggle]</span>').replaceAll("[maybe_location]",'<span class="var">[maybe_location]</span>').replaceAll("[dialogue_end]",'<span class="var">[dialogue_end]</span>').replaceAll("[large_e]",'<span class="var">[large_e]</span>').replaceAll("[large_e+]",'<span class="var">[large_e+]</span>').replaceAll("[furi_kanji]",'<span class="var">[furi_kanji]</span>').replaceAll("[furi_kana]",'<span class="var">[furi_kana]</span>').replaceAll("[furi_close]",'<span class="var">[furi_close]</span>').replaceAll(/(\[some_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[unknown[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[var_[^\]]\])/gu,'<span class="var">$1</span>'):e,e=F?e.replaceAll(/\[COLOR (\d+)\](.*?)(?:\[COLOR \d+\]|[\u{F0201}\u{F0202}\u{F0200}]|$)/gu,'<span class="color" style="color: var(--color-$1)">$2</span>').replaceAll(/(\[VERTOFFSET -?[\d.]+\])/gu,'<span class="vertoffset">$1</span>').replaceAll(/\[FONT ([0126])\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[FONT \d+\]|$)/gu,'<span class="font-pbr-$1">$2</span>').replaceAll(/(\[FONT [\d.]+\])/gu,'<span class="var">$1</span>').replaceAll(/\[SPACING (-?[\d.]+)\](.*?$)/gu,'<span class="spacing-$1">$2</span>'):e,e=h?e.replaceAll(/(%((\d+\$)?(\d*d|\d*\.\d+[fs]m?|ls)|(\(\d+\)%|\d+\$)?\{\}|\(\d+\)))/gu,'<span class="var">$1</span>').replaceAll(/(\$\d+\$)/gu,'<span class="var">$1</span>'):e,e=k?be(e):e,e=_?Le(e):e,e=e.replaceAll("[NULL]",'<span class="null">[NULL]</span>').replaceAll("[COMP]",'<span class="compressed">[COMP]</span>'),e=r?e.replaceAll(/(\[DYNAMIC \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[(?:(?:[ABLR]|START|SELECT)_BUTTON|DPAD_(?:UP|DOWN|LEFT|RIGHT|UPDOWN|LEFTRIGHT|NONE))\])/gu,'<span class="var">$1</span>').replaceAll(/(\[EMOJI_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll("[NOP]",'<span class="var">[NOP]</span>').replaceAll(/(\[COLOR [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll("[COLOR]",'<span class="var">[COLOR]</span>').replaceAll(/(\[HIGHLIGHT [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[SHADOW [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[COLOR_HIGHLIGHT_SHADOW [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[PALETTE [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[(?:FONT [^\]]+?|FONT_[^\]]+?)\])/gu,'<span class="var">$1</span>').replaceAll(/(\[PAUSE \d+\])/gu,'<span class="var">$1</span>').replaceAll("[PAUSE_UNTIL_PRESS]",'<span class="var">[PAUSE_UNTIL_PRESS]</span>').replaceAll("[WAIT_SE]",'<span class="var">[WAIT_SE]</span>').replaceAll(/(\[PLAY_BGM [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[ESCAPE \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[PLAY_SE [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[CLEAR \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[CLEAR_TO \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[MIN_LETTER_SPACING \d+\])/gu,'<span class="var">$1</span>').replaceAll("[PAUSE_MUSIC]",'<span class="var">[PAUSE_MUSIC]</span>').replaceAll("[RESUME_MUSIC]",'<span class="var">[RESUME_MUSIC]</span>').replaceAll("[PLAYER]",'<span class="var">[PLAYER]</span>').replaceAll("[STR_VAR_1]",'<span class="var">[STR_VAR_1]</span>').replaceAll("[STR_VAR_2]",'<span class="var">[STR_VAR_2]</span>').replaceAll("[STR_VAR_3]",'<span class="var">[STR_VAR_3]</span>').replaceAll("[RIVAL]",'<span class="var">[RIVAL]</span>').replaceAll(/(\[B_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/\u{F1102}\u{F1200}(.*?)\u{F1104}(.*?)\u{F1103}/gu,(d,p,t)=>v(p,t)).replaceAll(/\u{F1102}\u{F1207}(.*?)\u{F1104}(.*?)\u{F1103}/gu,(d,p,t)=>Ze(p,t)):e,e=O?e.replaceAll(/\[VAR (?:GENDBR|1100)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(d,p,t,i)=>{const u=parseInt(t,16),A=u+parseInt(p,16);return`${v(i.substring(0,u),i.substring(u,A))}${i.substring(A)}`}).replaceAll(/\[VAR (?:GENDBR|1100)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),00([0-9A-F]{2})\)\]([^[<{]*)/gu,(d,p,t,i,u)=>{const A=parseInt(t,16),L=A+parseInt(p,16),f=L+parseInt(i,16);return`${v(u.substring(0,A),u.substring(A,L),u.substring(L,f))}${u.substring(f)}`}).replaceAll(/\[VAR (?:NUMBRNCH|1101)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(d,p,t,i)=>{const u=parseInt(t,16),A=u+parseInt(p,16);return`${P(i.substring(0,u),i.substring(u,A))}${i.substring(A)}`}).replaceAll(/\[VAR (?:1102)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(d,p,t,i,u,A)=>{const L=parseInt(t,16),f=L+parseInt(p,16),$=f+parseInt(u,16),S=$+parseInt(i,16);return`${Y(A.substring(0,L),A.substring(L,f),A.substring(f,$),A.substring($,S))}${A.substring(S)}`}).replaceAll(/\[VAR (?:1104|1106)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(d,p,t,i)=>{const u=parseInt(t,16),A=u+parseInt(p,16);return`${Ye(i.substring(0,u),i.substring(u,A))}${i.substring(A)}`}).replaceAll(/\[VAR (?:1105)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),00([0-9A-F]{2})\)\]([^[<{]*)/gu,(d,p,t,i,u)=>{const A=parseInt(t,16),L=A+parseInt(p,16),f=L+parseInt(i,16);return`${P(u.substring(0,A),u.substring(A,L),u.substring(L,f))}${u.substring(f)}`}).replaceAll(/\[VAR (?:1107)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(d,p,t,i)=>{const u=parseInt(t,16),A=u+parseInt(p,16);return`${Je(i.substring(0,u),i.substring(u,A))}${i.substring(A)}`}):e,e=g?e.replaceAll(/\[VAR 1[3-7A]00\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?\)\]/gu,(d,p,t)=>v(p,t??"")).replaceAll(/\[VAR 1[3-7A]01\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?\)\]/gu,(d,p,t)=>P(p,t??"")).replaceAll(/\[VAR 1[3-7A]02\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)\|([^[<{]*?)\|([^[<{]*?)\|([^[<{]*?)\)\]/gu,(d,p,t,i,u)=>Y(p,t,i,u)):e,e=e.replaceAll(/(\[VAR [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[WAIT [\d.]+\])/gu,'<span class="wait">$1</span>').replaceAll(/(\[SFX [\d.]+\])/gu,'<span class="sfx">$1</span>').replaceAll(/(\[~ \d+\])/gu,'<span class="unused">$1</span>').replaceAll(/\{([^|}]+)\|([^|}]+)\}/gu,"<ruby>$1<rp>(</rp><rt>$2</rt><rp>)</rp></ruby>").replaceAll(/(\s+$)/gu,'<span class="whitespace-trailing">$1</span>').replaceAll(/(^\s+)/gu,'<span class="whitespace-leading">$1</span>'),e=O?te(e):e,e=e.replaceAll(/\u{F1102}(.+?)\u{F1103}/gu,'<span class="literal">$1</span>').replaceAll("󰄀","\\").replaceAll("󰄂","[").replaceAll("󰄄","{").replaceAll("󰄆","&lt;").replaceAll("󰄇","&gt;"),K(e)}const ll=e=>({success:!0,postfix:e}),T=e=>({success:!1,message:e}),al=e=>e.replaceAll("\\\\","󰄀").replaceAll("\\(","󰄈").replaceAll("\\)","󰄉").replaceAll('\\"',"󰆀"),X=e=>e.replaceAll("󰄈","(").replaceAll("󰄉",")").replaceAll("󰆀",'"').replaceAll("󰄀","\\\\");function ee(e){e=al(e);const a=e.split(/(\b(?:NOT|AND|OR)\b|\\?["()])/u).filter(n=>n.length>0),l=[],s=[];let r=!1;for(const n of a){const c=n.trim();if(r&&c!=='"'){s[s.length-1]+=n;continue}switch(c){case"NOT":l.push(c);break;case"AND":case"OR":for(;l[l.length-1]!=="("&&(l[l.length-1]==="NOT"||l[l.length-1]==="AND"&&c==="OR"||c==l[l.length-1]);)s.push(l.pop());l.push(c);break;case'"':if(!r)l.push(c),r=!0,s.push("");else if(l[l.length-1]==='"')for(l.pop(),s.push(`"${s.pop()}"`),r=!1;l[l.length-1]==="NOT";)s.push(l.pop());break;case"(":l.push(c);break;case")":for(;l[l.length-1]!=="(";){if(l.length===0)return T("parentheses");s.push(l.pop())}if(l[l.length-1]!=="(")return T("parentheses");for(l.pop();l[l.length-1]==="NOT";)s.push(l.pop());break;default:c.length>0&&s.push(c)}}for(;l.length>0;){if(l[l.length-1]==="(")return T("parentheses");if(l[l.length-1]==='"')return T("quote");s.push(l.pop())}return ll(s)}function le(e,a){const l=[];for(const s of a)switch(s){case"NOT":{const r=l.pop();l.push(n=>!r(n));break}case"AND":{const r=l.pop(),n=l.pop();l.push(c=>n(c)&&r(c));break}case"OR":{const r=l.pop(),n=l.pop();l.push(c=>n(c)||r(c));break}default:if(s.startsWith('"')&&s.endsWith('"')){const r=X(s.substring(1,s.length-1));if(!e.caseInsensitive)l.push(n=>n.includes(r));else{const n=r.toLowerCase(),c=r.toUpperCase();l.push(g=>g.toLowerCase().includes(n)||g.toUpperCase().includes(c))}}else{const r=X(s).split(/\s+/);if(!e.caseInsensitive)l.push(n=>r.every(c=>n.includes(c)));else{const n=r.map(g=>g.toLowerCase()),c=r.map(g=>g.toUpperCase());l.push(g=>r.every((F,h)=>g.toLowerCase().includes(n[h])||g.toUpperCase().includes(c[h])))}}}for(;l.length>1;){const s=l.pop(),r=l.pop();l.push(n=>r(n)&&s(n))}return l.pop()}function sl(e){const a=ee(e.query);if(a.success&&a.postfix.length>0){console.debug(a.postfix);const l=le(e,a.postfix);if(l)return l}return()=>!1}function rl(e){const a=ee(e.query);if(!a.success)return a.message;try{const l=le(e,a.postfix);return l===void 0?"empty":(l(""),"success")}catch{return"operand"}}const nl=(e,a,l,s,r)=>(n,c)=>{if(r===void 0||c===a)return n;for(const[g,{branch:F,line:h}]of Object.entries(r)){const k=`[${g}]`;let _=k;F===void 0?_=e[c][h-1]:F==="gender"?_=`󱈀${h.map(R=>e[c][R-1]).join("󱄄")}`:F==="version"?_=`󱈇${h.map(R=>e[c][R-1]).join("󱄄")}`:F==="language"&&(_=e[c][h[s[c]]-1]),l==="BattleRevolution"&&(_=_.substring(19).trim()),n=n.replaceAll(k,`󱄂${_}󱄃`)}return n};function z(e){if(e.type==="exact")if(e.caseInsensitive){const a=e.query.toLowerCase(),l=e.query.toUpperCase();return s=>s.toLowerCase().includes(a)||s.toUpperCase().includes(l)}else return a=>a.includes(e.query);else if(e.type==="regex"){const a=new RegExp(e.query,e.caseInsensitive?"sui":"su");return l=>We(l).match(a)!==null}else if(e.type==="boolean")return sl(e);return()=>!1}function cl(e){if(e.type!=="boolean")return[z(e),()=>()=>!0];const a=/(.*)\bWHERE\s+([0-9A-Za-z-]+)\s*(=|==|<>|!=)\s*([0-9A-Za-z-]+)/u.exec(e.query);if(!a)return[z(e),()=>()=>!0];const[,l,s,r,n]=a,c={...e,query:l};return[rl(c)==="empty"?()=>!0:z({...e,query:l}),(h,k)=>{const _=k.indexOf(s),R=k.indexOf(n);return _===-1||R===-1?()=>!1:r==="="||r==="=="?b=>h[_][b]===h[R][b]:r==="<>"||r==="!="?b=>h[_][b]!==h[R][b]:()=>!1}]}function pl(e){return e.caseInsensitive&&e.type!=="regex"?a=>a.replaceAll(" "," ").replaceAll(" "," ").replaceAll(" "," ").replaceAll("　"," ").replaceAll("“",'"').replaceAll("”",'"').replaceAll("‘","'").replaceAll("’","'").replaceAll("º","°").replaceAll("‥","..").replaceAll("…","...").normalize():a=>a}self.onmessage=e=>{const{index:a,params:l,collectionKey:s,fileKey:r,languages:n,files:c,speaker:g,speakerFiles:F,literals:h}=e.data,k=R=>{postMessage({index:a,status:R})},_=(R,b)=>{postMessage({index:a,status:R,result:b})};try{const R=n.map((f,$)=>[f,qe(c[$],s,f)]),b=pl(l),[V,U]=cl({...l,query:b(l.query)}),B=R.map(([f,$])=>{k("processing");const S=$.split(/\r\n|\n/),C=[];return l.languages.includes(f)&&S.forEach((tl,ul)=>{V(b(tl))&&C.push(ul)}),[f,C,S]}),w=g===void 0||F===void 0?[]:ce(F,g.textFile),O=[],d=new Set,p=[];B.forEach(([f,$,S])=>{O.push(f),$.forEach(C=>d.add(C)),p.push(S)});const t=O.indexOf(se),i=nl(p,t,s,n,h),u=Array.from(d).sort((f,$)=>f-$),A=U(p,O),L=(t===-1?u:u.filter(f=>{const $=p[t][f];return $!==""&&$!=="~~~~~~~~~~~~~~~"&&!$.startsWith("Text File : ")})).filter(A).map(f=>p.map(($,S)=>{let C=$[f];return l.richText&&(g!==void 0&&(C=pe($[f]??"",w[S],n[S])),C=i(C,S)),el(C,s,n[S],l.richText)}));_("done",{collection:s,file:r,languages:O,lines:L})}catch(R){console.error(R),k("error")}}})();
