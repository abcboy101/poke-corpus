(function(){"use strict";const W="qid";function Y(l){switch(l){case"ja-Hrkt":case"ja":return"『";case"fr":return" : ";case"zh-Hans":return"：";case"zh-Hant":return"「";default:return": "}}function Z(l,e,s){return l.replace(/(.*?)(\[VAR 0114\(([0-9A-F]{4})\)\])(?:$|(?=\u{F0000}))/u,(p,u,o,i)=>{const g=parseInt(i,16),F=e[g];return`${o.replaceAll("[","\\[")}󱄀${F}${Y(s)}󱄁${u}`})}function q(l){return l.replaceAll(/^(.+)\u{F1100}(.+?)\u{F1101}/gu,'<a class="speaker" data-var="$1">$2</a>')}function E(l,e,s=""){const p=[];return l.length>0&&p.push(`<span class="branch male">${l}</span>`),e.length>0&&p.push(`<span class="branch female">${e}</span>`),s.length>0&&p.push(`<span class="branch neuter">${s}</span>`),p.join('<span class="gender">/</span>')}function v(l,e,s=""){const p=[];return l.length>0&&p.push(`<span class="branch singular">${l}</span>`),e.length>0&&p.push(`<span class="branch plural">${e}</span>`),s.length>0&&p.push(`<span class="branch zero">${s}</span>`),p.join('<span class="number">/</span>')}function O(l,e,s,p){const u=[];l.length>0&&u.push(`<span class="branch male singular">${l}</span>`),e.length>0&&u.push(`<span class="branch female singular">${e}</span>`);const o=u.join('<span class="gender singular">/</span>'),i=[];s.length>0&&i.push(`<span class="branch male plural">${s}</span>`),p.length>0&&i.push(`<span class="branch female plural">${p}</span>`);const g=i.join('<span class="gender plural">/</span>'),F=["number"];l.length>0&&s.length>0&&F.push("male"),e.length>0&&p.length>0&&F.push("female");const f=F.join(" ");return[o,g].join(`<span class="${f}">/</span>`)}function x(...l){return l.filter(e=>e!=="").map((e,s)=>`<span class="branch form form-${s}">${e}</span>`).join('<span class="grammar">/</span>')}function B(l,e,s,p){const u=[];return l.length>0&&u.push(`<span class="branch version-${s}">${l}</span>`),e.length>0&&u.push(`<span class="branch version-${p}">${e}</span>`),u.join('<span class="version">/</span>')}function K(l){return l.replaceAll(/\u{F0106}(\/?[bi]) *\u{F0107}/gu,"<$1>").replaceAll(/\u{F0106}size=(\d+)\u{F0107}/gu,'<span style="font-size: calc($1 / 32 * 100%)">').replaceAll(/\u{F0106}color=(.*?)\u{F0107}/gu,'<span class="color" style="color: $1">').replaceAll(/\u{F0106}\/(size|color)\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}a href="\{(\d+)\}"\u{F0107}(.+?)\u{F0106}\/a\u{F0107}/gu,'<span class="link" title="󰄄$1}">$2</span>').replaceAll(/\u{F0106}a href="([0-9A-Za-z_]+)"\u{F0107}/gu,'<a class="link" href="#id=go.$1" title="$1">').replaceAll(/\u{F0106}a href=["“]((?:pokemongolive.com)\/[^"]+?)["”]\u{F0107}/gu,'<a class="link" href="http://$1" title="$1" target="_blank" rel="external noopener noreferrer nofollow">').replaceAll(/\u{F0106}a href="+(https?:\/\/[^"]+?)"+\u{F0107}/gu,'<a class="link" href="$1" title="$1" target="_blank" rel="external noopener noreferrer nofollow">').replaceAll(/\u{F0106}\/a\u{F0107}/gu,"</a>").replaceAll(/\u{F0106}br\u{F0107}/gu,"<br>").replaceAll(/\u{F0106}(taunt|intimidate)\u{F0107}/gu,'<span class="var">󰄆$1󰄇</span>').replaceAll(/(%BREAK%)/gu,'<span class="c">$1</span><br>').replaceAll(/(%PLAYERNAME%)/gu,'<span class="var">$1</span>').replaceAll(/(%(\d+\$)?s)/gu,'<span class="var">$1</span>').replaceAll(/(\{\d+(?::[^\]]+?)?\})/gu,'<span class="var">$1</span>')}const J={ha:["는","은"],wo:["를","을"],ga:["가","이"],to:["와","과"],ni:["로","으로"],ya:["","이"]},X=l=>x(...J[l]);function Q(l){return l.replaceAll(/\u{F0106}attr font=['"]fallback['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="fallback">$1</span>').replaceAll(/\u{F0106}attr color=['"]([0-9A-Fa-f]{6})['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="color" style="color: #$1">$2</span>').replaceAll(/\u{F0106}attr size=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span style="font-size: $1px">$2</span>').replaceAll(/\u{F0106}attr color=['"]([0-9A-Fa-f]{6})['"] size=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span class="color" style="color: #$1; font-size: $2px">$3</span>').replaceAll(/\u{F0106}attr size=['"](\d+?)['"] height=['"](\d+?)['"]\u{F0107}(.+?)\u{F0106}\/attr\u{F0107}/gu,'<span style="font-size: $1px; line-height: $2px">$3</span>').replaceAll(/(\u{F0106}\/?div\u{F0107})/gu,'<span class="control">$1</span>').replaceAll(/\u{F0106}span class=""?word"?"\u{F0107}/gu,'<span class="word">').replaceAll(/\u{F0106}\/span\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}br\u{F0107}/gu,"<br>").replaceAll(/\u{F0100}\[/gu,"󰄂").replaceAll(/\u{F0100}\]/gu,"]").replaceAll(/(\u{F0100}n)/gu,'<span class="literal n">$1</span><br>').replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" M="([^"]*?)" F="([^"]*?)" \]/gu,(e,s,p)=>E(s,p)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" M="([^"]*?)" \]/gu,(e,s)=>E("",s)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Gen Ref="255" F="([^"]*?)" \]/gu,(e,s)=>E("",s)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?S="([^"]*?)" P="([^"]*?)" \]/gu,(e,s,p)=>v(s,p)).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?S="([^"]*?)" \]/gu,(e,s)=>v(s,"")).replaceAll(/\[(?:JP|EN|FR|IT|DE|ES|Kor|SC):Qty (?:Ref="\d+" )?P="([^"]*?)" \]/gu,(e,s)=>v("",s)).replaceAll(/\[Kor:Particle char="(ha|wo|ga|to|ni|ya)" \]/gu,(e,s)=>X(s)).replaceAll(/(\[(?:Name:.+?) [^[]*?\])/gu,'<span class="var long">$1</span><span class="var short" title="$1">[Name]</span>').replaceAll(/(\[(?:Digit:.+?) [^[]*?\])/gu,'<span class="var long">$1</span><span class="var short" title="$1">[Digit]</span>')}const ll=l=>l==="fr"?"OK":"ED",al=l=>{switch(l){case"ja-Hrkt":return"ID";case"en":return"ID";case"fr":return".ID";case"it":return"ID";case"de":return"ID-";case"es":return"ID";default:return"ID"}},el=l=>{switch(l){case"ja-Hrkt":return"No";case"en":return"No";case"fr":return"No";case"it":return"Nº";case"de":return"Nr";case"es":return"Nº";default:return"No"}},sl=l=>l==="ja-Hrkt"?"．":".",nl=l=>l==="ja-Hrkt"?"。":".",k=l=>{switch(l){case"en":return"BLOCK";case"fr":return"BLOC";case"it":return"MELLA";case"de":return"RIEGEL";case"es":return"CUBO";default:return"BLOCK"}},rl=(l,e)=>{switch(l){case"en":return"Lv";case"fr":return"N.";case"it":return"L.";case"de":return"Lv.";case"es":return e==="RubySapphire"?"Nv":"Nv.";default:return"Lv"}},pl=l=>{switch(l){case"ja-Hrkt":return"Lv";case"en":return"Lv";case"fr":return"N.";case"it":return"L.";case"de":return"Lv.";case"es":return"Nv.";default:return"Lv"}},cl=l=>{switch(l){case"de":return"Lv.";case"es":return"Nv";default:return"Lv"}},tl=l=>l==="de"?"AP":"PP",ul=()=>"ID",Al=l=>{switch(l){case"ja-Hrkt":return"No";case"en":return"No";case"fr":return"Nº";case"it":return"Nº";case"de":return"Nr.";case"es":return"N.º";default:return"No"}},ol=()=>"Pco",T=[["the "],["The "],["a ","an ",""],["A ","An ",""]],M=[["le ","l’","la ","les "],["Le ","L’","La ","Les "],["un ","une ","des ",""],["Un ","Une ","Des ",""],["au ","à l’","à la ","aux ","à "],["Au ","À l’","À la ","Aux ","À "],["du ","de l’","de la ","des "],["Du ","De l’","De la ","Des "],["de ","d’"],["De ","D’"],["que ","qu’"],["Que ","Qu’"]],G=[["il ","l’","lo ","la ","i ","gli ","le "],["Il ","L’","Lo ","La ","I ","Gli ","Le "],["un ","uno ","una ","un’","dei ","degli ","delle ","del ","dell’","dello ","della "],["Un ","Uno ","Una ","Un’","Dei ","Degli ","Delle ","Del ","Dell’","Dello ","Della "],["del ","dell’","dello ","della ","dei ","degli ","delle "],["Del ","Dell’","Dello ","Della ","Dei ","Degli ","Delle "],["sul ","sull’","sullo ","sulla ","sui ","sugli ","sulle "],["Sul ","Sull’","Sullo ","Sulla ","Sui ","Sugli ","Sulle "],["al ","all’","allo ","alla ","ai ","agli ","alle "],["Al ","All’","Allo ","Alla ","Ai ","Agli ","Alle "],["nel ","nell’","nello ","nella ","nei ","negli ","nelle "],["Nel ","Nell’","Nello ","Nella ","Nei ","Negli ","Nelle "],["e ","ed "],["E ","Ed "],["a ","ad "],["A ","Ad "]],U=[["der ","die ","das "],["Der ","Die ","Das "],["ein ","eine ",""],["Ein ","Eine ",""],["den ","die ","das "],["Den ","Die ","Das "],["einen ","eine ","ein ",""],["Einen ","Eine ","Ein ",""]],w=[["el ","la ","los ","las "],["El ","La ","Los ","Las "],["un ","una ","unos ","unas ",""],["Un ","Una ","Unos ","Unas ",""],["del ","de la ","de los ","de las "],["Del ","De la ","De los ","De las "],["al ","a la ","a los ","a las "],["Al ","A la ","A los ","A las "],["el ","la ","los ","las ",""],["El ","La ","Los ","Las ",""],["al ","a la ","a los ","a las ","a "],["del ","de la ","de los ","de las ","de "],["y ","e "],["Y ","E "],["o ","u "],["O ","U "]],il=[["",""],["는","은"],["를","을"],["가","이"],["와","과"],["","으"],["","이"],["야","아"]],I=(l,e=!1)=>l-(l<15?3:e?7:5);function gl(l){return l.split("󰀀")[0]}function y(l){return l.search(/[\u{F1000}\u{F1001}]/u)===-1?l:["<dl>",...l.split("󱀀").map(e=>e.split("󱀁")).map(([e,s])=>`<dt>${e}</dt><dd>${s}</dd>`),"</dl>"].join("")}const b=(l,e)=>x(...e[l]),S=l=>x(...il[l]),Fl=(l,e)=>B(l,e,"ruby","sapphire"),$l=(l,e)=>B(l,e,"scarlet","violet"),dl=new Map([["Decide","A"],["Cancel","B"],["Sp_1","X"],["Sp_2","Y"],["L","L"],["R","R"],["ZL","ZL"],["ZR","ZR"],["Button_Up","▲"],["Button_Down","▼"],["Button_Left","◀"],["Button_Right","▶"],["Plus","+"],["Minus","−"],["Stick_L","Stick_L"],["Stick_R","Stick_R"],["Stick_L_Push","Stick_L_Push"],["Stick_R_Push","Stick_R_Push"]]),_l=(l,e,s,p)=>{const u=parseInt(s,16),o=p.substring(0,u);return`<span class="button" title="${e.replaceAll("[","󰄂")+o}">${dl.get(o)??o}</span>${p.substring(u)}`},d=l=>Number(l).toString(16).padStart(2,"0").toUpperCase(),Rl=(l,e,s,p,u,o)=>H(l,`#${e}${s}${p}${u==="FF"?"":u}`,o),H=(l,e,s)=>`<span class="color" style="color: ${e}">${s}</span>`,z=(l,e,s,p,u)=>`<span class="color" style="color: #${d(e)}${d(s)}${d(p)}${u==="255"?"":d(u)}">`,bl=(l,e,s,p,u,o,i,g,F)=>`<span class="color gradient" style="--top: #${d(e)}${d(s)}${d(p)}${u==="255"?"":d(u)}; --bottom: #${d(o)}${d(i)}${d(g)}${F==="255"?"":d(F)}">`;function fl(l,e="",s="en",p=!0){const u=["RedBlue","Yellow"].includes(e),o=["GoldSilver","Crystal"].includes(e),i=["RubySapphire","FireRedLeafGreen","Emerald"].includes(e),g=["DiamondPearl","Platinum","HeartGoldSoulSilver"].includes(e),F=["BlackWhite","Black2White2"].includes(e),f=e==="BrilliantDiamondShiningPearl",h=e==="BattleRevolution",_=e==="Ranch",$=e==="DreamRadar",m=e==="GO",Ll=e==="Masters",El=e==="HOME",P=u||o,ml=g||F,N=["XY","OmegaRubyAlphaSapphire","SunMoon","UltraSunUltraMoon","Bank"].includes(e),vl=["LetsGoPikachuLetsGoEevee","SwordShield","BrilliantDiamondShiningPearl","LegendsArceus","ScarletViolet","LegendsZA","HOME"].includes(e),C=["Stadium","Stadium2"].includes(e),Dl=["Colosseum","XD"].includes(e),D=F||N||vl;if(l=gl(l),!p)return l=l.replaceAll("<","&lt;").replaceAll(">","&gt;"),y(l);switch(l=l.replaceAll("\\\\","󰄀").replaceAll("\\[","󰄂").replaceAll("\\{","󰄄").replaceAll("<","󰄆").replaceAll(">","󰄇"),l=l.replaceAll("\\n","󰈀").replaceAll("\\r","󰈁").replaceAll("\\c","󰈂").replaceAll("	","󰈃"),l=g?l.replaceAll("[VAR 0207]","󰈇").replaceAll("[VAR 0208]","󰈈"):l,l=i?l.replaceAll("\\e","󰋿"):l,l=P?l.replaceAll("@","󰉐"):l,l=C?l.replaceAll("󰄀n","󰈀"):l,l=P||C||i||ml?l.replaceAll("⒆","<sup>P</sup><sub>K</sub>").replaceAll("⒇","<sup>M</sup><sub>N</sub>"):l,l=N?l.replaceAll("","<sup>P</sup><sub>K</sub>").replaceAll("","<sup>M</sup><sub>N</sub>"):l,l=i?l.replaceAll("[POKE]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>󱄃").replaceAll("[POKEBLOCK]",`󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>${k(s)}󱄃`).replaceAll("[BLOCK]",`󱄂${k(s)}󱄃`).replaceAll("[POKEMELLA]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>MELLA󱄃").replaceAll("[MELLA]","󱄂MELLA󱄃").replaceAll("[POKEMELLE]","󱄂<sup>P</sup><sub>O</sub><sup>K</sup><sub>é</sub>MELLE󱄃").replaceAll("[MELLE]","󱄂MELLE󱄃").replaceAll("[Pco]",`󱄂${ol()}󱄃`).replaceAll("[UNK_SPACER]"," ").replaceAll("[LV]",`󱄂<span class="literal-small">${rl(s)}</span>󱄃`).replaceAll("[LV_2]",`󱄂<span class="literal-small">${pl(s)}</span>󱄃`).replaceAll("[LV_3]",`󱄂<span class="literal-small">${cl(s)}</span>󱄃`).replaceAll("[PP]",`󱄂<span class="literal-small">${tl(s)}</span>󱄃`).replaceAll("[ID]",`󱄂<span class="literal-small">${ul()}</span>󱄃`).replaceAll("[NO]",`󱄂<span class="literal-small">${Al(s)}</span>󱄃`):l,l=P?l.replaceAll("󰄆PO󰄇","<sup>P</sup><sub>O</sub>").replaceAll("󰄆KE󰄇","<sup>K</sup><sub>é</sub>").replaceAll("󰄆DEXEND󰄇",`󱄂${nl(s)}󰉐󱄃`).replaceAll("󰄆ID󰄇",`󱄂<span class="literal-small">${al(s)}</span>󱄃`).replaceAll("№",`󱄂<span class="literal-small">${el(s)}</span>󱄃`).replaceAll("󰄆ED󰄇",()=>{const n=ll(s);return`<sup>${n[0]}</sup><sub>${n[1]}</sub>`}).replaceAll("󰄆DOT󰄇",`󱄂<span class="literal-small">${sl(s)}</span>󱄃`).replaceAll(/\{text_dots (\d+)\}/gu,(n,a)=>`󱄂${"…".repeat(Number(a))}󱄃`):l,l=o&&s!=="ja-Hrkt"?l.replaceAll("󰄆TA!󰄇","󱄂た！󱄃").replaceAll("󰄆GA󰄇","󱄂が　󱄃").replaceAll("󰄆WA󰄇","󱄂は　󱄃").replaceAll("󰄆NO󰄇","󱄂の　󱄃").replaceAll("󰄆WO󰄇","󱄂を　󱄃").replaceAll("󰄆NI󰄇","󱄂に　󱄃").replaceAll("󰄆TTE󰄇","󱄂って󱄃"):l,l=o&&s==="ko"?l.replaceAll("\\xA0\\xA1\\xA2\\xA3",'󱄂<span class="literal-small">ㄱㄴㄷㄹ</span>󱄃').replaceAll("\\xA4\\xA5\\xA6\\xA7",'󱄂<span class="literal-small">ㅁㅂㅅㅇ</span>󱄃').replaceAll("\\xA8\\xA9\\xAA\\xAB",'󱄂<span class="literal-small">ㅈㅊㅋㅌ</span>󱄃').replaceAll("\\xAC\\xAD\\xAE\\xAF",'󱄂<span class="literal-small">ㅍㅎㄲㄸ</span>󱄃').replaceAll("\\xB0\\xB1\\xB2",'󱄂<span class="literal-small">ㅃㅆㅉ</span>󱄃').replaceAll("\\xC0\\xC1\\xC2\\xC3",'󱄂<span class="literal-small">ㅏㅑㅓㅕ</span>󱄃').replaceAll("\\xC4\\xC5\\xC6\\xC7",'󱄂<span class="literal-small">ㅗㅛㅜㅠ</span>󱄃').replaceAll("\\xC8\\xC9\\xCA\\xCB",'󱄂<span class="literal-small">ㅡㅣㅐㅒ</span>󱄃').replaceAll("\\xCC\\xCD\\xCE\\xCF",'󱄂<span class="literal-small">ㅔㅖㅘㅙ</span>󱄃').replaceAll("\\xD0\\xD1\\xD2\\xD3",'󱄂<span class="literal-small">ㅚㅝㅞㅟ</span>󱄃').replaceAll("\\xD4",'󱄂<span class="literal-small">ㅢ</span>󱄃').replaceAll("$",'󱄂<span class="literal-small">원</span>󱄃').replaceAll("\\xC8\\xC9",'󱄂<span class="literal-small">동전</span>󱄃').replaceAll("\\xBA\\xBB\\xBC",'󱄂<span class="literal-small">기절</span>󱄃').replaceAll("\\xBD\\xBE\\xBF",'󱄂<span class="literal-small">잠듦</span>󱄃').replaceAll("\\xCA\\xCB\\xCC",'󱄂<span class="literal-small">독</span>󱄃').replaceAll("\\xCD\\xCE\\xCF",'󱄂<span class="literal-small">화상</span>󱄃').replaceAll("\\xDA\\xDB\\xDC",'󱄂<span class="literal-small">얼음</span>󱄃').replaceAll("\\xDD\\xDE\\xDF",'󱄂<span class="literal-small">마비</span>󱄃'):l,l=f?l.replaceAll(/\u{F0106}color=(.*?)\u{F0107}(.*?)\u{F0106}\/color\u{F0107}/gu,H).replaceAll("󰄆/color󰄇","").replaceAll(/\u{F0106}size=(.*?)\u{F0107}(.*?)\u{F0106}\/size\u{F0107}/gu,'<span style="font-size: $1">$2</span>').replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\u{F0106}pos=(.*?)\u{F0107}(.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span style="tab-size: $2">$1	$3</span>').replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\u{F0106}line-indent=(.*?)\u{F0107}(.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span style="tab-size: $2">$1	$3</span>'):l,l=g||D?l.replaceAll(/\[VAR FF00\((?!0000)([0-9A-F]{4})\)\](.+?)(?=\[VAR FF00\([0-9A-F]{4}\)\]|$)/gu,(n,a,r)=>`<span class="color" style="color: var(--color-${parseInt(a,16)})">${r}</span>`).replaceAll(/\[VAR FF00\(0000\)\]/gu,""):l,l=F||N?l.replaceAll(/\[VAR BD00\(([0-9A-F]{4}),([0-9A-F]{4}),([0-9A-F]{4})\)\](.+?)(?:\[VAR BD00\(0001,0002,0000\)\]|\[VAR BD01\]|$)/gu,(n,a,r,c,t)=>`<span class="color" style="color: var(--color-${parseInt(a,16)}-${parseInt(r,16)}-${parseInt(c,16)})">${t}</span>`).replaceAll("[VAR BD01]",""):l,l=g?l.replaceAll(/\[VAR FF01\(00C8\)\]\[VAR FF01\(0064\)\]/gu,"").replaceAll(/\[VAR FF01\(00C8\)\](.+?)(?:\[VAR FF01\(0064\)\]|[\u{F0201}\u{F0202}\u{F0200}]|$)/gu,'<span class="line-font-size-200"><span class="text-font-size-200">$1</span></span>').replaceAll("[VAR FF01(0064)]","").replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\[VAR 0203\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r,c)=>`<span style="tab-size: ${parseInt(r,16)}pt">${a}	${c}</span>`).replaceAll(/\[VAR 0203\(([0-9A-F]{4})\)\]/gu,"	").replaceAll(/\[VAR 0204\(([0-9A-F]{4})\)\]/gu,(n,a)=>`<div style="height: ${parseInt(a,16)}pt"></div>`).replaceAll(/\[VAR 0205\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[VAR 0206\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-right">$1</span>'):l,l=D?l.replaceAll(/\[VAR BD02\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[VAR BD03\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r)=>`<span class="line-align-right" style="padding-right: ${parseInt(a,16)}pt">${r}</span>`).replaceAll(/\[VAR BD04\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r)=>`<span class="line-align-left" style="padding-left: ${parseInt(a,16)}pt">${r}</span>`).replaceAll(/((?<=^|[\u{F0201}\u{F0202}\u{F0200}]).*?)\[VAR BD05\(([0-9A-F]{4})\)\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)/gu,(n,a,r,c)=>`<span style="tab-size: ${parseInt(r,16)}pt">${a}	${c}</span>`).replaceAll(/\[VAR BD05\(([0-9A-F]{4})\)\]/gu,"	").replaceAll(/(\[VAR BD0A\(([0-9A-F]{4})\)\])([^[<{]*)/gu,_l):l,l=h?l.replaceAll(/\[ALIGN 1\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-left">$1</span>').replaceAll(/\[ALIGN 2\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-center">$1</span>').replaceAll(/\[ALIGN 3\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[ALIGN \d+\]|$)/gu,'<span class="line-align-right">$1</span>'):l,l=El?l.replaceAll(/\u{F0106}(\/?[bu]) *\u{F0107}/giu,"<$1>"):l,e){case"SunMoon":case"UltraSunUltraMoon":l=l.replaceAll(/^\[VAR BD06\([0-9A-F]{4}\)\]([^\u{F0201}\u{F0202}\u{F0200}]*?)\u{F0200}(?=[^\u{F0201}\u{F0202}\u{F0200}]*?[\u{F0201}\u{F0202}]?$)/gu,(n,a)=>`${a}󰈀󱌀`);break;case"LetsGoPikachuLetsGoEevee":case"SwordShield":l=l.replaceAll(/\[VAR BD06\([0-9A-F]{4}\)\]([^\u{F0201}\u{F0202}\u{F0200}]*?)\u{F0200}/gu,(n,a)=>`${a}󰈀󱌀`);break;default:l=l.replaceAll(/\[VAR BD06\([0-9A-F]{4}\)\](.*)$/gu,(n,a)=>a.replaceAll(/(?<!\u{F0202})\u{F0200}/gu,"󰈀󱌀"))}l=g?l.replaceAll("󰈇󰈀",'<span class="c">[VAR 0207]</span><span class="n">\\n</span><br>').replaceAll("󰈈󰈀",'<span class="r">[VAR 0208]</span><span class="n">\\n</span><br>'):l,l=l.replaceAll("󰈁󰈀",'<span class="r">\\r</span><span class="n">\\n</span><br>').replaceAll("󰈂󰈀",'<span class="c">\\c</span><span class="n">\\n</span><br>').replaceAll("󰈀󰈂",'<span class="n">\\n</span><span class="c">\\c</span><br>'),l=g?l.replaceAll("󰈇",'<span class="c">[VAR 0207]</span><br>').replaceAll("󰈈",'<span class="r">[VAR 0208]</span><br>'):l,l=P?l.replaceAll("󰄆LF󰄇",'<span class="n">󰄆LF󰄇</span><br>').replaceAll("󰄆PAGE󰄇",'<span class="c">󰄆PAGE󰄇</span><br>').replaceAll("󰄆_CONT󰄇",'<span class="r">󰄆_CONT󰄇</span><br>').replaceAll("󰄆SCROLL󰄇",'<span class="r">󰄆SCROLL󰄇</span><br>').replaceAll("󰄆NEXT󰄇",'<span class="n">󰄆NEXT󰄇</span><br>').replaceAll("󰄆LINE󰄇",'<span class="n">󰄆LINE󰄇</span><br>').replaceAll("󰄆PARA󰄇",'<span class="c">󰄆PARA󰄇</span><br>').replaceAll("󰄆CONT󰄇",'<span class="r">󰄆CONT󰄇</span><br>').replaceAll("󰄆DONE󰄇",'<span class="t">󰄆DONE󰄇</span><br>').replaceAll("󰄆PROMPT󰄇",'<span class="t">󰄆PROMPT󰄇</span><br>').replaceAll("{text_low}","{text_low}<br>").replaceAll(/^((?:\{text_start\})?<span class="[ncrt]">\u{F0106}[A-Z_]+\u{F0107})(<\/span>)(<br>\u{F0250}*)/gu,"$1$3$2"):l,l=l.replaceAll("󰈁",'<span class="r">\\r</span><br>').replaceAll("󰈂",'<span class="c">\\c</span><br>').replaceAll("󰈀",'<span class="n">\\n</span><br>').replaceAll("󰋿",'<span class="e">\\e</span>').replaceAll("󰈃",'<span class="tab">	</span>');const Sl=["ja","ko","zh"].some(n=>s.startsWith(n))?"　":" ";if(l=l.replaceAll("<br>󱌀",`<wbr class="soft"><span class="soft">${Sl}</span>`),l=o?l.replaceAll("󰄆SHY󰄇",'<span class="control">󰄆SHY󰄇</span><span class="soft">&shy;</span>').replaceAll("󰄆BSP󰄇",'<span class="control">󰄆BSP󰄇</span><span class="soft"> </span>').replaceAll("󰄆WBR󰄇",'<span class="control">󰄆WBR󰄇</span><span class="soft"><wbr></span>'):l,C){l=l.replaceAll("#71",'<span class="color color-animation">').replaceAll(/(#\d{2})/gu,'<span class="var">$1</span>').replaceAll(/\u{F0106}COL1,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}\u{F0106}COL2,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,bl).replaceAll(/\u{F0106}COL1,LOAD,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,z).replaceAll(/\u{F0106}COL1,PUSH,(\d+),(\d+),(\d+),(\d+)\u{F0107}/gu,z).replaceAll(/\u{F0106}COL1,POP\u{F0107}\u{F0106}COL2,POP\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}COL1,POP\u{F0107}/gu,"</span>").replaceAll(/\u{F0106}DIST,([\d.]+)\u{F0107}/gu,'<span class="spacing-$1">').replaceAll(/(\u{F0106}[0-9A-Z, ]+\u{F0107})/gu,'<span class="var">$1</span>').replaceAll(/%%/gu,'<span class="literal">%</span>').replaceAll(/(\u{F0100}(?:CU|CR|B|R))/gu,'<span class="var">$1</span>');const n=l.match(/<span\b/gu)?.length??0,a=l.match(/<\/span>/gu)?.length??0;a<n?l=l.concat("</span>".repeat(n-a)):n<a&&(l="<span>".repeat(a-n).concat(l))}return l=Dl?l.replaceAll(/\[unknown5_08_([0-9a-f]{2})_([0-9a-f]{2})_([0-9a-f]{2})_([0-9a-f]{2})\](.*?)(?:\[unknown5_08_ff_ff_ff_ff\]|$|(?=\u{F1000}))/gu,Rl).replaceAll("[Player]",'<span class="var">[Player]</span>').replaceAll("[Player_alt]",'<span class="var">[Player_alt]</span>').replaceAll("[Rui]",'<span class="var">[Rui]</span>').replaceAll("[opp_trainer_class]",'<span class="var">[opp_trainer_class]</span>').replaceAll("[opp_trainer_name]",'<span class="var">[opp_trainer_name]</span>').replaceAll("[sent_out_pokemon_1]",'<span class="var">[sent_out_pokemon_1]</span>').replaceAll("[sent_out_pokemon_2]",'<span class="var">[sent_out_pokemon_2]</span>').replaceAll("[speechbubble]",'<span class="var">[speechbubble]</span>').replaceAll("[bubble_or_speaker]",'<span class="var">[bubble_or_speaker]</span>').replaceAll("[maybe_speaker_ID_toggle]",'<span class="var">[maybe_speaker_ID_toggle]</span>').replaceAll("[maybe_location]",'<span class="var">[maybe_location]</span>').replaceAll("[dialogue_end]",'<span class="func">[dialogue_end]</span>').replaceAll("[large_e]",'<span class="var">[large_e]</span>').replaceAll("[large_e+]",'<span class="var">[large_e+]</span>').replaceAll("[furi_kanji]",'<span class="var">[furi_kanji]</span>').replaceAll("[furi_kana]",'<span class="var">[furi_kana]</span>').replaceAll("[furi_close]",'<span class="var">[furi_close]</span>').replaceAll(/(\[some_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[unknown[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[var_[^\]]\])/gu,'<span class="var">$1</span>').replaceAll("󰄆SCOL=0x0d0e0f󰄇",'<span class="func">󰄆SCOL=0x0d0e0f󰄇</span>'):l,l=h?l.replaceAll(/\[COLOR (\d+)\](.*?)(?:\[COLOR \d+\]|[\u{F0201}\u{F0202}\u{F0200}]|$)/gu,'<span class="color" style="color: var(--color-$1)">$2</span>').replaceAll(/(\[VERTOFFSET -?[\d.]+\])/gu,'<span class="control">$1</span>').replaceAll(/\[FONT ([0126])\](.*?(?:[\u{F0201}\u{F0202}\u{F0200}]|$)+)(?=\[FONT \d+\]|$)/gu,'<span class="font-pbr-$1">$2</span>').replaceAll(/(\[FONT [\d.]+\])/gu,'<span class="func">$1</span>').replaceAll(/\[SPACING (-?[\d.]+)\](.*?$)/gu,'<span class="spacing-$1">$2</span>'):l,l=_?l.replaceAll(/(%((\d+\$)?(\d*d|\d*\.\d+[fs]m?|ls)|(\(\d+\)%|\d+\$)?\{\}|\(\d+\)))/gu,'<span class="var">$1</span>').replaceAll(/(\$\d+\$)/gu,'<span class="var">$1</span>'):l,l=$?l.replaceAll(/\[VAR 0003\(([0-9A-F]{2})[0-9A-F]{2}\)\](.*?)(?=\[VAR 0003\([0-9A-F]{4}\)\]|$)/gu,(n,a,r)=>`<span class="color" style="color: var(--color-${parseInt(a,16)})">${r}</span>`).replaceAll(/\[VAR 0003\(0000\)\]/gu,""):l,l=m?K(l):l,l=Ll?Q(l):l,l=D?f?l.replaceAll(/\[VAR 13(0[3-6])[^\]]*?\]/gu,(n,a)=>b(I(parseInt(a,16)),T)).replaceAll(/\[VAR 14(0[3-9A-CF]|10)[^\]]*?\]/gu,(n,a)=>b(I(parseInt(a,16)),M)).replaceAll(/\[VAR 15(0[3-9A-CF]|1[0-5])[^\]]*?\]/gu,(n,a)=>b(I(parseInt(a,16)),G)).replaceAll(/\[VAR 16(0[3-9A])[^\]]*?\]/gu,(n,a)=>b(I(parseInt(a,16)),U)).replaceAll(/\[VAR 17(0[3-9A-E]|1[3-6])[^\]]*?\]/gu,(n,a)=>b(I(parseInt(a,16),!0),w)):l.replaceAll(/\[VAR 13(0[0-3])[^\]]*?\]/gu,(n,a)=>b(parseInt(a,16),T)).replaceAll(/\[VAR 14(0[0-9A-B])[^\]]*?\]/gu,(n,a)=>b(parseInt(a,16),M)).replaceAll(/\[VAR 15(0[0-9A-F])[^\]]*?\]/gu,(n,a)=>b(parseInt(a,16),G)).replaceAll(/\[VAR 16(0[0-7])[^\]]*?\]/gu,(n,a)=>b(parseInt(a,16),U)).replaceAll(/\[VAR 17(0[0-9A-F])[^\]]*?\]/gu,(n,a)=>b(parseInt(a,16),w)):l,s==="ko"&&g?l=l.replaceAll(/\[VAR ((?:0[1346]|34)[0-9A-F]{2})\(([0-9A-F]{4}),([0-9A-F]{4})\)\]/gu,(n,a,r,c)=>`[VAR ${a}(${r})]${S(parseInt(c,16)%8)}`):s==="ko"&&e==="BlackWhite"?l=l.replaceAll(/\[VAR (0[12][0-9A-F]{2})\(([0-9A-F]{4}),([0-9A-F]{4})\)\]/gu,(n,a,r,c)=>`[VAR ${a}(${r})]${S(parseInt(c,16)%8)}`):e==="Black2White2"?l=l.replaceAll(/\[VAR 3400\(([0-9A-F]{4})\)\]/gu,(n,a)=>S(parseInt(a,16)%8)):f?l=l.replaceAll(/\[VAR 1900\(tagParameter=(\d+)\)\]/gu,(n,a)=>S(a)):D?l=l.replaceAll(/\[VAR 1900\(([0-9A-F]{4})\)\]/gu,(n,a)=>S(parseInt(a,16))):$&&(l=l.replaceAll(/\[VAR 0600\((0[0-9A-F])[0-9A-F]{2}\)\]/gu,(n,a)=>S(parseInt(a,16)))),l=o?l.replaceAll("󰄆PLAY_G󰄇","󰄆PLAYER󰄇"+(s==="ja-Hrkt"?E("くん","ちゃん"):"")):l,l=i?l.replaceAll(/\u{F1102}\u{F1200}(.*?)\u{F1104}(.*?)\u{F1103}/gu,(n,a,r)=>E(a,r)).replaceAll(/\u{F1102}\u{F1207}(.*?)\u{F1104}(.*?)\u{F1103}/gu,(n,a,r)=>Fl(a,r)):l,l=D?l.replaceAll(/\[VAR 1100\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c)=>{const t=parseInt(r,16),A=t+parseInt(a,16);return`${E(c.substring(0,t),c.substring(t,A))}${c.substring(A)}`}).replaceAll(/\[VAR 1100\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),00([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c,t)=>{const A=parseInt(r,16),R=A+parseInt(a,16),L=R+parseInt(c,16);return`${E(t.substring(0,A),t.substring(A,R),t.substring(R,L))}${t.substring(L)}`}).replaceAll(/\[VAR 1101\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c)=>{const t=parseInt(r,16),A=t+parseInt(a,16);return`${v(c.substring(0,t),c.substring(t,A))}${c.substring(A)}`}).replaceAll(/\[VAR 1102\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c,t,A)=>{const R=parseInt(r,16),L=R+parseInt(a,16),V=L+parseInt(t,16),j=V+parseInt(c,16);return`${O(A.substring(0,R),A.substring(R,L),A.substring(L,V),A.substring(V,j))}${A.substring(j)}`}).replaceAll(/\[VAR (?:1104|1106)\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c)=>{const t=parseInt(r,16),A=t+parseInt(a,16);return`${x(c.substring(0,t),c.substring(t,A))}${c.substring(A)}`}).replaceAll(/\[VAR 1105\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2}),00([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c,t)=>{const A=parseInt(r,16),R=A+parseInt(a,16),L=R+parseInt(c,16);return`${v(t.substring(0,A),t.substring(A,R),t.substring(R,L))}${t.substring(L)}`}).replaceAll(/\[VAR 1107\([0-9A-F]{4},([0-9A-F]{2})([0-9A-F]{2})\)\]([^[<{]*)/gu,(n,a,r,c)=>{const t=parseInt(r,16),A=t+parseInt(a,16);return`${$l(c.substring(0,t),c.substring(t,A))}${c.substring(A)}`}):l,l=f?l.replaceAll(/\[VAR (?:1[3-7A]00|1901)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?\)\]/gu,(n,a,r)=>E(a,r??"")).replaceAll(/\[VAR (?:1[3-7]01|1902)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?\)\]/gu,(n,a,r)=>v(a,r??"")).replaceAll(/\[VAR (?:1[3-7]02|1903)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)\|([^[<{]*?)\|([^[<{]*?)\|([^[<{]*?)\)\]/gu,(n,a,r,c,t)=>O(a,r,c,t)).replaceAll(/\[VAR (?:130A|1413|1517|160E|1712|1904)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?(?:\|([^[<{]*?))?\)\]/gu,(n,a,r,c)=>v(a,r??"",c??"")).replaceAll(/\[VAR (?:1411|1518)\((?:tagParameter=\d+,)?tagWordArray=([^[<{]*?)(?:\|([^[<{]*?))?(?:,forceGrmID=\d+)?\)\]/gu,(n,a,r)=>x(a,r??"")):l,l=P?l.replaceAll(/<br>(\u{F0250}+)/gu,"$1<br>").replaceAll(/\u{F0250}(?!\{text_|\{sound_|<br>|\u{F0250}|\u{F1103}|\\x00|$)/gu,"󰉐<br>").replaceAll(/(\u{F0106}MOBILE\u{F0107})(\{.+?\})(\u{F0250})(?:<br>)?/gu,"$1$2$3").replaceAll(/(\u{F0106}MOBILE\u{F0107})/gu,'<span class="control">$1</span>').replaceAll(/\u{F0250}/gu,'<span class="t">@</span>').replaceAll(/(\{text_(?:start|waitbutton|promptbutton|linkwaitbutton|pause)\})/gu,'<span class="control">$1</span>').replaceAll(/(?:<br>)?(\{text_low\})/gu,'<span class="n">$1</span>').replaceAll(/(\{text_ram [^}]+\})/gu,'<span class="var long">$1</span><span class="var short" title="$1">{text_ram}</span>').replaceAll(/(\{text_bcd [^}]+\})/gu,'<span class="var long">$1</span><span class="var short" title="$1">{text_bcd}</span>').replaceAll(/(\{text_decimal [^}]+\})/gu,'<span class="var long">$1</span><span class="var short" title="$1">{text_decimal}</span>').replaceAll(/(\{text_today\})/gu,'<span class="var">$1</span>').replaceAll(/(\{sound_[^}]+\})/gu,'<span class="func long">$1</span><span class="func short" title="$1">{sound}</span>').replaceAll(/(\{(nts_(?:placement|next))[^}]+\})/gu,(n,a,r)=>`<span class="func long">${a.replaceAll(/"/gu,"&quot;").replaceAll(/\{/gu,"󰄄").replaceAll(/</gu,"&lt;")}</span><span class="func short" title="${a.replaceAll(/"/gu,"&quot;").replaceAll(/\{/gu,"󰄄").replaceAll(/</gu,"&lt;")}">{${r.replaceAll(/"/gu,"&quot;").replaceAll(/</gu,"&lt;")}}</span>`).replaceAll(/(\{(nts_(?:ranking_(?:number|string|ezchat|region|pokemon|gender|item)|placement|player_(?:name|region|region_backup|zip|zip_backup)|switch|next|number))[^}]+\})/gu,(n,a,r)=>`<span class="var long">${a.replaceAll(/"/gu,"&quot;").replaceAll(/\{/gu,"󰄄").replaceAll(/</gu,"&lt;")}</span><span class="var short" title="${a.replaceAll(/"/gu,"&quot;").replaceAll(/\{/gu,"󰄄").replaceAll(/</gu,"&lt;")}">{${r.replaceAll(/"/gu,"&quot;").replaceAll(/</gu,"&lt;")}}</span>`).replaceAll(/(\\x[0-9A-F]{2})/gu,'<span class="var">$1</span>').replaceAll("󰄆ENEMY󰄇",'<span class="var">󰄆ENEMY󰄇</span>').replaceAll("󰄆PLAYER󰄇",'<span class="var">󰄆PLAYER󰄇</span>').replaceAll("󰄆RIVAL󰄇",'<span class="var">󰄆RIVAL󰄇</span>').replaceAll("󰄆TARGET󰄇",'<span class="var">󰄆TARGET󰄇</span>').replaceAll("󰄆USER󰄇",'<span class="var">󰄆USER󰄇</span>'):l,l=i?l.replaceAll(/(\[DYNAMIC \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[(?:(?:[ABLR]|START|SELECT)_BUTTON|DPAD_(?:UP|DOWN|LEFT|RIGHT|UPDOWN|LEFTRIGHT|NONE))\])/gu,'<span class="var">$1</span>').replaceAll(/(\[EMOJI_[^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll("[NOP]",'<span class="var">[NOP]</span>').replaceAll(/(\[COLOR [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll("[COLOR]",'<span class="func">[COLOR]</span>').replaceAll(/(\[HIGHLIGHT [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[SHADOW [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[COLOR_HIGHLIGHT_SHADOW [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[PALETTE [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[(?:FONT [^\]]+?|FONT_[^\]]+?)\])/gu,'<span class="func">$1</span>').replaceAll(/(\[PAUSE \d+\])/gu,'<span class="func">$1</span>').replaceAll("[PAUSE_UNTIL_PRESS]",'<span class="func">[PAUSE_UNTIL_PRESS]</span>').replaceAll("[WAIT_SE]",'<span class="func">[WAIT_SE]</span>').replaceAll(/(\[PLAY_BGM [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[ESCAPE \d+\])/gu,'<span class="var">$1</span>').replaceAll(/(\[PLAY_SE [^\]]+?\])/gu,'<span class="func">$1</span>').replaceAll(/(\[CLEAR \d+\])/gu,'<span class="func">$1</span>').replaceAll(/(\[CLEAR_TO \d+\])/gu,'<span class="func">$1</span>').replaceAll(/(\[MIN_LETTER_SPACING \d+\])/gu,'<span class="func">$1</span>').replaceAll("[PAUSE_MUSIC]",'<span class="func">[PAUSE_MUSIC]</span>').replaceAll("[RESUME_MUSIC]",'<span class="func">[RESUME_MUSIC]</span>').replaceAll("[PLAYER]",'<span class="var">[PLAYER]</span>').replaceAll("[STR_VAR_1]",'<span class="var">[STR_VAR_1]</span>').replaceAll("[STR_VAR_2]",'<span class="var">[STR_VAR_2]</span>').replaceAll("[STR_VAR_3]",'<span class="var">[STR_VAR_3]</span>').replaceAll("[RIVAL]",'<span class="var">[RIVAL]</span>').replaceAll(/(\[B_[^\]]+?\])/gu,'<span class="var">$1</span>'):l,l=g?l.replaceAll(/\[(VAR 013[2-9A-B][^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Digit]</span>').replaceAll(/\[(VAR (?:0[1346]|34)[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Name]</span>').replaceAll(/\[(VAR 02[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl1]</span>').replaceAll(/\[(VAR FF[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl2]</span>'):l,l=D?l.replaceAll(/\[(VAR 01[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Name]</span>').replaceAll(/\[(VAR 02[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Digit]</span>').replaceAll(/\[(VAR 1[0-9A][^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Grm]</span>').replaceAll(/\[(VAR BD[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl1]</span>').replaceAll(/\[(VAR BE[^\]]+?\])/gu,'<span class="func long">󰄂$1</span><span class="func short" title="󰄂$1">󰄂Ctrl2]</span>'):l,l=$?l.replaceAll(/\[(VAR 02[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Character]</span>').replaceAll(/\[(VAR 03[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Digit]</span>').replaceAll(/\[(VAR 04[^\]]+?\])/gu,'<span class="var long">󰄂$1</span><span class="var short" title="󰄂$1">󰄂Name]</span>'):l,l=l.replaceAll("[NULL]",'<span class="null">[NULL]</span>').replaceAll("[COMP]",'<span class="func compressed">[COMP]</span>').replaceAll(/(\[VAR [^\]]+?\])/gu,'<span class="var">$1</span>').replaceAll(/(\[WAIT [\d.]+\])/gu,'<span class="func wait">$1</span>').replaceAll(/(\[SFX [\d.]+\])/gu,'<span class="func sfx">$1</span>').replaceAll(/(\[~ \d+\])/gu,'<span class="unused">$1</span>').replaceAll(/\{([^|}]+)\|([^|}]+)\}/gu,"<ruby>$1<rp>(</rp><rt>$2</rt><rp>)</rp></ruby>").replaceAll(/(\s+$)/gu,'<span class="whitespace-trailing">$1</span>').replaceAll(/(^\s+)/gu,'<span class="whitespace-leading">$1</span>'),l=D?q(l):l,l=l.replaceAll(/\u{F1102}(.+?)\u{F1103}/gu,'<span class="literal">$1</span>'),l=l.replaceAll("󰄀","\\").replaceAll("󰄂","[").replaceAll("󰄄","{").replaceAll("󰄆","&lt;").replaceAll("󰄇","&gt;"),y(l)}const hl=(l,e,s,p,u)=>(o,i)=>{if(u===void 0||i===e)return o;const g=["RedBlue","Yellow","GoldSilver","Crystal"].includes(s);for(const[F,{branch:f,line:h}]of Object.entries(u)){const _=g?F==="#"?F:`<${F}>`:`[${F}]`;let $;switch(f){case void 0:$=l[i].get(h);break;case"gender":$=`󱈀${h.map(m=>l[i].get(m)).join("󱄄")}`;break;case"version":$=`󱈇${h.map(m=>l[i].get(m)).join("󱄄")}`;break;case"language":{const m=h[p[i]];m!==void 0&&($=l[i].get(m));break}}$!==void 0&&(g&&($=$.replaceAll(/@/gu,"")),s==="BattleRevolution"&&($=$.substring(19).trim()),o=o.replaceAll(_,`󱄂${$}󱄃`))}return o};self.onmessage=l=>{try{const{collection:e,languages:s,richText:p,speakers:u,literals:o,lines:i,corpusLiterals:g}=l.data,F=hl(o,s.indexOf(W),e,s,g),f={...l.data,lines:i.map(h=>h.map((_,$)=>(p&&(u.length>0&&(_=Z(_,u[$],s[$])),_=F(_,$)),_=fl(_,e,s[$],p),_)))};postMessage(f)}catch(e){console.error(e);const s={...l.data,richText:!1,error:!0};postMessage(s)}}})();
