(function(){"use strict";var Je={},Mr=function(e,r,t,n,a){var s=new Worker(Je[r]||(Je[r]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return s.onmessage=function(i){var c=i.data,f=c.$e$;if(f){var l=new Error(f[0]);l.code=f[1],l.stack=f[2],a(l,null)}else a(null,c)},s.postMessage(t,n),s},k=Uint8Array,N=Uint16Array,ge=Int32Array,te=new k([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ne=new k([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),we=new k([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ke=function(e,r){for(var t=new N(31),n=0;n<31;++n)t[n]=r+=1<<e[n-1];for(var a=new ge(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)a[s]=s-t[n]<<5|n;return{b:t,r:a}},Xe=Ke(te,2),Le=Xe.b,Ae=Xe.r;Le[28]=258,Ae[258]=28;for(var Ye=Ke(ne,0),_e=Ye.b,Te=Ye.r,de=new N(32768),F=0;F<32768;++F){var _=(F&43690)>>1|(F&21845)<<1;_=(_&52428)>>2|(_&13107)<<2,_=(_&61680)>>4|(_&3855)<<4,de[F]=((_&65280)>>8|(_&255)<<8)>>1}for(var I=function(e,r,t){for(var n=e.length,a=0,s=new N(r);a<n;++a)e[a]&&++s[e[a]-1];var i=new N(r);for(a=1;a<r;++a)i[a]=i[a-1]+s[a-1]<<1;var c;if(t){c=new N(1<<r);var f=15-r;for(a=0;a<n;++a)if(e[a])for(var l=a<<4|e[a],o=r-e[a],u=i[e[a]-1]++<<o,y=u|(1<<o)-1;u<=y;++u)c[de[u]>>f]=l}else for(c=new N(n),a=0;a<n;++a)e[a]&&(c[a]=de[i[e[a]-1]++]>>15-e[a]);return c},X=new k(288),F=0;F<144;++F)X[F]=8;for(var F=144;F<256;++F)X[F]=9;for(var F=256;F<280;++F)X[F]=7;for(var F=280;F<288;++F)X[F]=8;for(var ae=new k(32),F=0;F<32;++F)ae[F]=5;var er=I(X,9,0),rr=I(X,9,1),tr=I(ae,5,0),nr=I(ae,5,1),Me=function(e){for(var r=e[0],t=1;t<e.length;++t)e[t]>r&&(r=e[t]);return r},G=function(e,r,t){var n=r/8|0;return(e[n]|e[n+1]<<8)>>(r&7)&t},Ce=function(e,r){var t=r/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(r&7)},se=function(e){return(e+7)/8|0},ee=function(e,r,t){return(r==null||r<0)&&(r=0),(t==null||t>e.length)&&(t=e.length),new k(e.subarray(r,t))},ar=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],T=function(e,r,t){var n=new Error(r||ar[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,T),!t)throw n;return n},De=function(e,r,t,n){var a=e.length,s=n?n.length:0;if(!a||r.f&&!r.l)return t||new k(0);var i=!t,c=i||r.i!=2,f=r.i;i&&(t=new k(a*3));var l=function(be){var ze=t.length;if(be>ze){var pe=new k(Math.max(ze*2,be));pe.set(t),t=pe}},o=r.f||0,u=r.p||0,y=r.b||0,M=r.l,x=r.d,S=r.m,R=r.n,U=a*8;do{if(!M){o=G(e,u,1);var j=G(e,u+1,3);if(u+=3,j)if(j==1)M=rr,x=nr,S=9,R=5;else if(j==2){var g=G(e,u,31)+257,w=G(e,u+10,15)+4,h=g+G(e,u+5,31)+1;u+=14;for(var v=new k(h),C=new k(19),m=0;m<w;++m)C[we[m]]=G(e,u+m*3,7);u+=w*3;for(var b=Me(C),L=(1<<b)-1,O=I(C,b,1),m=0;m<h;){var P=O[G(e,u,L)];u+=P&15;var D=P>>4;if(D<16)v[m++]=D;else{var A=0,z=0;for(D==16?(z=3+G(e,u,3),u+=2,A=v[m-1]):D==17?(z=3+G(e,u,7),u+=3):D==18&&(z=11+G(e,u,127),u+=7);z--;)v[m++]=A}}var E=v.subarray(0,g),W=v.subarray(g);S=Me(E),R=Me(W),M=I(E,S,1),x=I(W,R,1)}else T(1);else{var D=se(u)+4,p=e[D-4]|e[D-3]<<8,d=D+p;if(d>a){f&&T(0);break}c&&l(y+p),t.set(e.subarray(D,d),y),r.b=y+=p,r.p=u=d*8,r.f=o;continue}if(u>U){f&&T(0);break}}c&&l(y+131072);for(var me=(1<<S)-1,Q=(1<<R)-1,Y=u;;Y=u){var A=M[Ce(e,u)&me],$=A>>4;if(u+=A&15,u>U){f&&T(0);break}if(A||T(2),$<256)t[y++]=$;else if($==256){Y=u,M=null;break}else{var B=$-254;if($>264){var m=$-257,q=te[m];B=G(e,u,(1<<q)-1)+Le[m],u+=q}var K=x[Ce(e,u)&Q],he=K>>4;K||T(3),u+=K&15;var W=_e[he];if(he>3){var q=ne[he];W+=Ce(e,u)&(1<<q)-1,u+=q}if(u>U){f&&T(0);break}c&&l(y+131072);var ve=y+B;if(y<W){var Pe=s-W,Oe=Math.min(W,ve);for(Pe+y<0&&T(3);y<Oe;++y)t[y]=n[Pe+y]}for(;y<ve;++y)t[y]=t[y-W]}}r.l=M,r.p=Y,r.b=y,r.f=o,M&&(o=1,r.m=S,r.d=x,r.n=R)}while(!o);return y!=t.length&&i?ee(t,0,y):t.subarray(0,y)},J=function(e,r,t){t<<=r&7;var n=r/8|0;e[n]|=t,e[n+1]|=t>>8},oe=function(e,r,t){t<<=r&7;var n=r/8|0;e[n]|=t,e[n+1]|=t>>8,e[n+2]|=t>>16},Se=function(e,r){for(var t=[],n=0;n<e.length;++n)e[n]&&t.push({s:n,f:e[n]});var a=t.length,s=t.slice();if(!a)return{t:Re,l:0};if(a==1){var i=new k(t[0].s+1);return i[t[0].s]=1,{t:i,l:1}}t.sort(function(d,g){return d.f-g.f}),t.push({s:-1,f:25001});var c=t[0],f=t[1],l=0,o=1,u=2;for(t[0]={s:-1,f:c.f+f.f,l:c,r:f};o!=a-1;)c=t[t[l].f<t[u].f?l++:u++],f=t[l!=o&&t[l].f<t[u].f?l++:u++],t[o++]={s:-1,f:c.f+f.f,l:c,r:f};for(var y=s[0].s,n=1;n<a;++n)s[n].s>y&&(y=s[n].s);var M=new N(y+1),x=xe(t[o-1],M,0);if(x>r){var n=0,S=0,R=x-r,U=1<<R;for(s.sort(function(g,w){return M[w.s]-M[g.s]||g.f-w.f});n<a;++n){var j=s[n].s;if(M[j]>r)S+=U-(1<<x-M[j]),M[j]=r;else break}for(S>>=R;S>0;){var D=s[n].s;M[D]<r?S-=1<<r-M[D]++-1:++n}for(;n>=0&&S;--n){var p=s[n].s;M[p]==r&&(--M[p],++S)}x=r}return{t:new k(M),l:x}},xe=function(e,r,t){return e.s==-1?Math.max(xe(e.l,r,t+1),xe(e.r,r,t+1)):r[e.s]=t},Ee=function(e){for(var r=e.length;r&&!e[--r];);for(var t=new N(++r),n=0,a=e[0],s=1,i=function(f){t[n++]=f},c=1;c<=r;++c)if(e[c]==a&&c!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[c]}return{c:t.subarray(0,n),n:r}},ie=function(e,r){for(var t=0,n=0;n<r.length;++n)t+=e[n]*r[n];return t},qe=function(e,r,t){var n=t.length,a=se(r+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=t[s];return(a+4+n)*8},je=function(e,r,t,n,a,s,i,c,f,l,o){J(r,o++,t),++a[256];for(var u=Se(a,15),y=u.t,M=u.l,x=Se(s,15),S=x.t,R=x.l,U=Ee(y),j=U.c,D=U.n,p=Ee(S),d=p.c,g=p.n,w=new N(19),h=0;h<j.length;++h)++w[j[h]&31];for(var h=0;h<d.length;++h)++w[d[h]&31];for(var v=Se(w,7),C=v.t,m=v.l,b=19;b>4&&!C[we[b-1]];--b);var L=l+5<<3,O=ie(a,X)+ie(s,ae)+i,P=ie(a,y)+ie(s,S)+i+14+3*b+ie(w,C)+2*w[16]+3*w[17]+7*w[18];if(f>=0&&L<=O&&L<=P)return qe(r,o,e.subarray(f,f+l));var A,z,E,W;if(J(r,o,1+(P<O)),o+=2,P<O){A=I(y,M,0),z=y,E=I(S,R,0),W=S;var me=I(C,m,0);J(r,o,D-257),J(r,o+5,g-1),J(r,o+10,b-4),o+=14;for(var h=0;h<b;++h)J(r,o+3*h,C[we[h]]);o+=3*b;for(var Q=[j,d],Y=0;Y<2;++Y)for(var $=Q[Y],h=0;h<$.length;++h){var B=$[h]&31;J(r,o,me[B]),o+=C[B],B>15&&(J(r,o,$[h]>>5&127),o+=$[h]>>12)}}else A=er,z=X,E=tr,W=ae;for(var h=0;h<c;++h){var q=n[h];if(q>255){var B=q>>18&31;oe(r,o,A[B+257]),o+=z[B+257],B>7&&(J(r,o,q>>23&31),o+=te[B]);var K=q&31;oe(r,o,E[K]),o+=W[K],K>3&&(oe(r,o,q>>5&8191),o+=ne[K])}else oe(r,o,A[q]),o+=z[q]}return oe(r,o,A[256]),o+z[256]},sr=new ge([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Re=new k(0),or=function(e,r,t,n,a,s){var i=s.z||e.length,c=new k(n+i+5*(1+Math.ceil(i/7e3))+a),f=c.subarray(n,c.length-a),l=s.l,o=(s.r||0)&7;if(r){o&&(f[0]=s.r>>3);for(var u=sr[r-1],y=u>>13,M=u&8191,x=(1<<t)-1,S=s.p||new N(32768),R=s.h||new N(x+1),U=Math.ceil(t/3),j=2*U,D=function(He){return(e[He]^e[He+1]<<U^e[He+2]<<j)&x},p=new ge(25e3),d=new N(288),g=new N(32),w=0,h=0,v=s.i||0,C=0,m=s.w||0,b=0;v+2<i;++v){var L=D(v),O=v&32767,P=R[L];if(S[O]=P,R[L]=O,m<=v){var A=i-v;if((w>7e3||C>24576)&&(A>423||!l)){o=je(e,f,0,p,d,g,h,C,b,v-b,o),C=w=h=0,b=v;for(var z=0;z<286;++z)d[z]=0;for(var z=0;z<30;++z)g[z]=0}var E=2,W=0,me=M,Q=O-P&32767;if(A>2&&L==D(v-Q))for(var Y=Math.min(y,A)-1,$=Math.min(32767,v),B=Math.min(258,A);Q<=$&&--me&&O!=P;){if(e[v+E]==e[v+E-Q]){for(var q=0;q<B&&e[v+q]==e[v+q-Q];++q);if(q>E){if(E=q,W=Q,q>Y)break;for(var K=Math.min(Q,q-2),he=0,z=0;z<K;++z){var ve=v-Q+z&32767,Pe=S[ve],Oe=ve-Pe&32767;Oe>he&&(he=Oe,P=ve)}}}O=P,P=S[O],Q+=O-P&32767}if(W){p[C++]=268435456|Ae[E]<<18|Te[W];var be=Ae[E]&31,ze=Te[W]&31;h+=te[be]+ne[ze],++d[257+be],++g[ze],m=v+E,++w}else p[C++]=e[v],++d[e[v]]}}for(v=Math.max(v,m);v<i;++v)p[C++]=e[v],++d[e[v]];o=je(e,f,l,p,d,g,h,C,b,v-b,o),l||(s.r=o&7|f[o/8|0]<<3,o-=7,s.h=R,s.p=S,s.i=v,s.w=m)}else{for(var v=s.w||0;v<i+l;v+=65535){var pe=v+65535;pe>=i&&(f[o/8|0]=l,pe=i),o=qe(f,o+1,e.subarray(v,pe))}s.i=i}return ee(c,0,n+se(o)+a)},ir=function(){for(var e=new Int32Array(256),r=0;r<256;++r){for(var t=r,n=9;--n;)t=(t&1&&-306674912)^t>>>1;e[r]=t}return e}(),lr=function(){var e=-1;return{p:function(r){for(var t=e,n=0;n<r.length;++n)t=ir[t&255^r[n]]^t>>>8;e=t},d:function(){return~e}}},Ue=function(){var e=1,r=0;return{p:function(t){for(var n=e,a=r,s=t.length|0,i=0;i!=s;){for(var c=Math.min(i+2655,s);i<c;++i)a+=n+=t[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,r=a},d:function(){return e%=65521,r%=65521,(e&255)<<24|(e&65280)<<8|(r&255)<<8|r>>8}}},ye=function(e,r,t,n,a){if(!a&&(a={l:1},r.dictionary)){var s=r.dictionary.subarray(-32768),i=new k(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return or(e,r.level==null?6:r.level,r.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+r.mem,t,n,a)},Cr=function(e,r){var t={};for(var n in e)t[n]=e[n];for(var n in r)t[n]=r[n];return t},cr=function(e,r,t){for(var n=e(),a=e.toString(),s=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/\s+/g,"").split(","),i=0;i<n.length;++i){var c=n[i],f=s[i];if(typeof c=="function"){r+=";"+f+"=";var l=c.toString();if(c.prototype)if(l.indexOf("[native code]")!=-1){var o=l.indexOf(" ",8)+1;r+=l.slice(o,l.indexOf("(",o))}else{r+=l;for(var u in c.prototype)r+=";"+f+".prototype."+u+"="+c.prototype[u].toString()}else r+=l}else t[f]=c}return r},ke=[],Sr=function(e){var r=[];for(var t in e)e[t].buffer&&r.push((e[t]=new e[t].constructor(e[t])).buffer);return r},xr=function(e,r,t,n){if(!ke[t]){for(var a="",s={},i=e.length-1,c=0;c<i;++c)a=cr(e[c],a,s);ke[t]={c:cr(e[i],a,s),e:s}}var f=Cr({},ke[t].e);return Mr(ke[t].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+r.toString()+"}",t,f,Sr(f),n)},We=function(){return[k,N,ge,te,ne,we,Le,_e,rr,nr,de,ar,I,Me,G,Ce,se,ee,T,De,qr,fr,Lr]},Ne=function(){return[k,N,ge,te,ne,we,Ae,Te,er,X,tr,ae,de,sr,Re,I,J,oe,Se,xe,Ee,ie,qe,je,se,ee,or,ye,Dr,fr]},kr=function(){return[ur,vr,re,lr,ir]},Fr=function(){return[hr,Tr]},Pr=function(){return[pr,re,Ue]},Or=function(){return[gr]},fr=function(e){return postMessage(e,[e.buffer])},Lr=function(e){return e&&{out:e.size&&new k(e.size),dictionary:e.dictionary}},Z=function(e){return e.ondata=function(r,t){return postMessage([r,t],[r.buffer])},function(r){r.data.length?(e.push(r.data[0],r.data[1]),postMessage([r.data[0].length])):e.flush()}},le=function(e,r,t,n,a,s,i){var c,f=xr(e,n,a,function(l,o){l?(f.terminate(),r.ondata.call(r,l)):Array.isArray(o)?o.length==1?(r.queuedSize-=o[0],r.ondrain&&r.ondrain(o[0])):(o[1]&&f.terminate(),r.ondata.call(r,l,o[0],o[1])):i(o)});f.postMessage(t),r.queuedSize=0,r.push=function(l,o){r.ondata||T(5),c&&r.ondata(T(4,0,1),null,!!o),r.queuedSize+=l.length,f.postMessage([l,c=o],[l.buffer])},r.terminate=function(){f.terminate()},s&&(r.flush=function(){f.postMessage([])})},re=function(e,r,t){for(;t;++r)e[r]=t,t>>>=8},ur=function(e,r){var t=r.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=r.level<2?4:r.level==9?2:0,e[9]=3,r.mtime!=0&&re(e,4,Math.floor(new Date(r.mtime||Date.now())/1e3)),t){e[3]=8;for(var n=0;n<=t.length;++n)e[n+10]=t.charCodeAt(n)}},hr=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&T(6,"invalid gzip data");var r=e[3],t=10;r&4&&(t+=(e[10]|e[11]<<8)+2);for(var n=(r>>3&1)+(r>>4&1);n>0;n-=!e[t++]);return t+(r&2)},Tr=function(e){var r=e.length;return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0},vr=function(e){return 10+(e.filename?e.filename.length+1:0)},pr=function(e,r){var t=r.level,n=t==0?0:t<6?1:t==9?3:2;if(e[0]=120,e[1]=n<<6|(r.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,r.dictionary){var a=Ue();a.p(r.dictionary),re(e,2,a.d())}},gr=function(e,r){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&T(6,"invalid zlib data"),(e[1]>>5&1)==+!r&&T(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function ce(e,r){return typeof e=="function"&&(r=e,e={}),this.ondata=r,e}var V=function(){function e(r,t){if(typeof r=="function"&&(t=r,r={}),this.ondata=t,this.o=r||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new k(98304),this.o.dictionary){var n=this.o.dictionary.subarray(-32768);this.b.set(n,32768-n.length),this.s.i=32768-n.length}}return e.prototype.p=function(r,t){this.ondata(ye(r,this.o,0,0,this.s),t)},e.prototype.push=function(r,t){this.ondata||T(5),this.s.l&&T(4);var n=r.length+this.s.z;if(n>this.b.length){if(n>2*this.b.length-32768){var a=new k(n&-32768);a.set(this.b.subarray(0,this.s.z)),this.b=a}var s=this.b.length-this.s.z;this.b.set(r.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(r.subarray(s),32768),this.s.z=r.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(r,this.s.z),this.s.z+=r.length;this.s.l=t&1,(this.s.z>this.s.w+8191||t)&&(this.p(this.b,t||!1),this.s.w=this.s.i,this.s.i-=2)},e.prototype.flush=function(){this.ondata||T(5),this.s.l&&T(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},e}(),wr=function(){function e(r,t){le([Ne,function(){return[Z,V]}],this,ce.call(this,r,t),function(n){var a=new V(n.data);onmessage=Z(a)},6,1)}return e}();function Dr(e,r){return ye(e,r||{},0,0)}var H=function(){function e(r,t){typeof r=="function"&&(t=r,r={}),this.ondata=t;var n=r&&r.dictionary&&r.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new k(32768),this.p=new k(0),n&&this.o.set(n)}return e.prototype.e=function(r){if(this.ondata||T(5),this.d&&T(4),!this.p.length)this.p=r;else if(r.length){var t=new k(this.p.length+r.length);t.set(this.p),t.set(r,this.p.length),this.p=t}},e.prototype.c=function(r){this.s.i=+(this.d=r||!1);var t=this.s.b,n=De(this.p,this.s,this.o);this.ondata(ee(n,t,this.s.b),this.d),this.o=ee(n,this.s.b-32768),this.s.b=this.o.length,this.p=ee(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(r,t){this.e(r),this.c(t)},e}(),Er=function(){function e(r,t){le([We,function(){return[Z,H]}],this,ce.call(this,r,t),function(n){var a=new H(n.data);onmessage=Z(a)},7,0)}return e}();function qr(e,r){return De(e,{i:2},r&&r.out,r&&r.dictionary)}var $e=function(){function e(r,t){this.c=lr(),this.l=0,this.v=1,V.call(this,r,t)}return e.prototype.push=function(r,t){this.c.p(r),this.l+=r.length,V.prototype.push.call(this,r,t)},e.prototype.p=function(r,t){var n=ye(r,this.o,this.v&&vr(this.o),t&&8,this.s);this.v&&(ur(n,this.o),this.v=0),t&&(re(n,n.length-8,this.c.d()),re(n,n.length-4,this.l)),this.ondata(n,t)},e.prototype.flush=function(){V.prototype.flush.call(this)},e}(),jr=function(){function e(r,t){le([Ne,kr,function(){return[Z,V,$e]}],this,ce.call(this,r,t),function(n){var a=new $e(n.data);onmessage=Z(a)},8,1)}return e}(),Be=function(){function e(r,t){this.v=1,this.r=0,H.call(this,r,t)}return e.prototype.push=function(r,t){if(H.prototype.e.call(this,r),this.r+=r.length,this.v){var n=this.p.subarray(this.v-1),a=n.length>3?hr(n):4;if(a>n.length){if(!t)return}else this.v>1&&this.onmember&&this.onmember(this.r-n.length);this.p=n.subarray(a),this.v=0}H.prototype.c.call(this,t),this.s.f&&!this.s.l&&!t&&(this.v=se(this.s.p)+9,this.s={i:0},this.o=new k(0),this.push(new k(0),t))},e}(),Rr=function(){function e(r,t){var n=this;le([We,Fr,function(){return[Z,H,Be]}],this,ce.call(this,r,t),function(a){var s=new Be(a.data);s.onmember=function(i){return postMessage(i)},onmessage=Z(s)},9,0,function(a){return n.onmember&&n.onmember(a)})}return e}(),Ie=function(){function e(r,t){this.c=Ue(),this.v=1,V.call(this,r,t)}return e.prototype.push=function(r,t){this.c.p(r),V.prototype.push.call(this,r,t)},e.prototype.p=function(r,t){var n=ye(r,this.o,this.v&&(this.o.dictionary?6:2),t&&4,this.s);this.v&&(pr(n,this.o),this.v=0),t&&re(n,n.length-4,this.c.d()),this.ondata(n,t)},e.prototype.flush=function(){V.prototype.flush.call(this)},e}(),Ur=function(){function e(r,t){le([Ne,Pr,function(){return[Z,V,Ie]}],this,ce.call(this,r,t),function(n){var a=new Ie(n.data);onmessage=Z(a)},10,1)}return e}(),Ge=function(){function e(r,t){H.call(this,r,t),this.v=r&&r.dictionary?2:1}return e.prototype.push=function(r,t){if(H.prototype.e.call(this,r),this.v){if(this.p.length<6&&!t)return;this.p=this.p.subarray(gr(this.p,this.v-1)),this.v=0}t&&(this.p.length<4&&T(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),H.prototype.c.call(this,t)},e}(),Wr=function(){function e(r,t){le([We,Or,function(){return[Z,H,Ge]}],this,ce.call(this,r,t),function(n){var a=new Ge(n.data);onmessage=Z(a)},11,0)}return e}(),Nr=typeof TextDecoder<"u"&&new TextDecoder,$r=0;try{Nr.decode(Re,{stream:!0}),$r=1}catch{}const fe=e=>{class r{constructor(){this.i=new e,this.i.ondata=(n,a)=>{this.ondata(null,n,a)}}push(n,a){try{this.queuedSize+=n.length,this.i.push(n,a),this.queuedSize-=n.length,this.ondrain&&this.ondrain(n.length)}catch(s){this.ondata(s,null,a||!1)}}}return r};let Ze=1;try{new wr().terminate()}catch{Ze=0}const Br=Ze?{gzip:jr,deflate:Ur,"deflate-raw":wr}:{gzip:fe($e),deflate:fe(Ie),"deflate-raw":fe(V)},Ir=Ze?{gzip:Rr,deflate:Wr,"deflate-raw":Er}:{gzip:fe(Be),deflate:fe(Ge),"deflate-raw":fe(H)},dr=(e,r,t)=>{class n extends e{constructor(s){if(!arguments.length)throw new TypeError(`Failed to construct '${t}': 1 argument required, but only 0 present.`);const i=r[s];if(!i)throw new TypeError(`Failed to construct '${t}': Unsupported compression format: '${s}'`);let c=new i,f;super({start:l=>{c.ondata=(o,u,y)=>{o?l.error(o):u&&(l.enqueue(u),y&&(f?f():l.terminate()))}},transform:l=>{if(l instanceof ArrayBuffer)l=new Uint8Array(l);else if(ArrayBuffer.isView(l))l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);else throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");if(c.push(l),c.queuedSize>=32768)return new Promise(o=>{c.ondrain=()=>{c.queuedSize<32768&&o()}})},flush:()=>new Promise(l=>{f=l,c.push(new Uint8Array(0),!0)})},{size:l=>l.byteLength|0,highWaterMark:65536},{size:l=>l.byteLength|0,highWaterMark:65536})}}return n};function Gr(e){return dr(e,Br,"CompressionStream")}function Zr(e){return dr(e,Ir,"DecompressionStream")}const Fe=typeof globalThis>"u"?typeof self>"u"?typeof global>"u"?{}:global:self:globalThis;typeof Fe.CompressionStream>"u"&&(Fe.CompressionStream=Gr(TransformStream)),typeof Fe.DecompressionStream>"u"&&(Fe.DecompressionStream=Zr(TransformStream));const yr="qid",Qr=e=>e!==null&&typeof e=="object"&&"hash"in e&&typeof e.hash=="string"&&"size"in e&&typeof e.size=="number",Qe=(e,r,t)=>`corpus/${e}/${r}_${t}.txt.gz`;function Vr(e){const r=e.corpus,t=Object.keys(r.collections),n=Object.entries(r.collections);return{_corpus:r,collections:t,languages:r.languages,entries:n,metadata:e.metadata,getCollection:a=>r.collections[a],isCollectionKey:a=>t.some(s=>a===s),isLanguageKey:a=>r.languages.some(s=>a===s)}}function mr(e){try{new RegExp(e,"u")}catch(r){return console.error(r),!1}return!0}const Hr="corpus",Ve=e=>"/poke-corpus/"+e,Jr=e=>{const r=p=>o(p).size,t=async(p,d)=>{const[g,w]=await x(p,d);return w?.hash===g.hash?0:g.size},n=async(p=e.collections,d=e.languages)=>{try{const g=await l(),w=(await Promise.all(p.flatMap(h=>e.getCollection(h).languages.filter(v=>d.includes(v)).flatMap(v=>e.getCollection(h).files.map(C=>t(g,Qe(h,v,C))))))).reduce((h,v)=>h+v,0);return g.close(),w}catch{return p.flatMap(g=>e.getCollection(g).languages.filter(w=>d.includes(w)).flatMap(w=>e.getCollection(g).files.map(h=>r(Qe(g,w,h))))).reduce((g,w)=>g+w,0)}},a=async(p,d,g)=>{const w=Ve(g),[h,v]=await x(d,g);if(v?.hash===h.hash||!navigator.onLine&&v?.hash!==void 0){const b=await j(p,w);if(b!==void 0)return b}const C=await fetch(w);return C.ok?(await D(p,w,C).then(async b=>{b&&await y(d,g)}),C):await j(p,w)??null},s=async(p,d,g)=>{const w=Ve(g),[h,v]=await x(d,g);return v!==void 0?[await j(p,w),v.hash===h.hash]:[void 0,!1]},i=async p=>{const d=Ve(p),g=await fetch(d);return g.ok?g:null},c="corpus",f="files",l=async()=>{const p=indexedDB.open(c);return new Promise((d,g)=>{p.onupgradeneeded=()=>{p.result.createObjectStore(f),p.transaction!==null&&(p.transaction.oncomplete=()=>{console.log("Created object store")})},p.onsuccess=()=>{d(p.result)},p.onerror=()=>{g(p.error)}})},o=p=>e.metadata[p],u=async(p,d)=>{const h=p.transaction([f],"readonly").objectStore(f).get(d);return new Promise((v,C)=>{h.onsuccess=()=>{v(Qr(h.result)?h.result:void 0)},h.onerror=()=>{C(h.error)}})},y=async(p,d)=>{const h=p.transaction([f],"readwrite").objectStore(f).put(o(d),d);return new Promise((v,C)=>{h.onsuccess=()=>{v(h.result===d)},h.onerror=()=>{C(h.error)}})},M=async(p,d)=>{const h=p.transaction([f],"readwrite").objectStore(f).delete(d);return new Promise((v,C)=>{h.onsuccess=()=>{v(!0)},h.onerror=()=>{C(h.error)}})},x=async(p,d)=>[o(d),await u(p,d)],S=async p=>{const w=p.transaction(["files"],"readwrite").objectStore("files").clear();return p.close(),new Promise((h,v)=>{w.onsuccess=()=>{h(!0)},w.onerror=()=>{v(w.error)}})},R=async p=>{const w=p.transaction([f],"readonly").objectStore(f).getAllKeys();return p.close(),new Promise((h,v)=>{w.onsuccess=()=>{h(w.result.filter(C=>typeof C=="string"))},w.onerror=()=>{v(w.error)}})},U=async()=>await caches.open(Hr),j=async(p,d)=>{try{return await p.match(d)}catch(g){console.error(g);return}},D=async(p,d,g)=>{try{return await p.put(d,g.clone()),!0}catch(w){return console.error(w),!1}};return{corpus:e,getFilePath:Qe,getFileSize:r,getDownloadSizeTotal:n,getFile:a,getFileCacheOnly:s,getFileRemote:i,getIndexedDB:l,deleteLocalMetadata:M,clearLocalMetadata:S,getAllLocalFilePaths:R,getCache:U}};function Kr(e){return Jr(e)}function Xr(e){return new Worker("/poke-corpus/assets/searchWorker-mkvoFt3d.js",{name:e?.name})}function Yr(e){return e.replaceAll("\\\\","󰄀").replaceAll("\\n",`
`).replaceAll("\\r","\r").replaceAll("\\c","\f").replaceAll("󰄀","\\\\")}function _r(e,r){const t=e.split(/\s+/);if(!r)return s=>t.every(i=>s.includes(i));const n=t.map(s=>s.toLowerCase()),a=t.map(s=>s.toUpperCase());return s=>{const i=s.toLowerCase(),c=s.toUpperCase();return t.every((f,l)=>i.includes(n[l])||c.includes(a[l]))}}function et(e,r){if(!r)return a=>a.includes(e);const t=e.toLowerCase(),n=e.toUpperCase();return a=>a.toLowerCase().includes(t)||a.toUpperCase().includes(n)}function rt(e,r){const t=new RegExp(e,r?"sui":"su");return n=>Yr(n).match(t)!==null}const tt=e=>({success:!0,postfix:e}),ue=e=>({success:!1,message:e}),nt=e=>e.replaceAll("\\\\","󰄀").replaceAll("\\/","󰄁").replaceAll("\\(","󰄈").replaceAll("\\)","󰄉").replaceAll('\\"',"󰆀"),br=e=>e.replaceAll("󰄈","(").replaceAll("󰄉",")").replaceAll("󰆀",'"').replaceAll("󰄁","/").replaceAll("󰄀","\\\\"),at=e=>e.replaceAll("󰄈","\\(").replaceAll("󰄉","\\)").replaceAll("󰆀",'\\"').replaceAll("󰄁","/").replaceAll("󰄀","\\\\");function st(e){e=nt(e);const r=e.split(/(\b(?:NOT|AND|OR)\b|\\?[/"()])/u).filter(i=>i.length>0),t=[],n=[];let a=!1,s=!1;for(const i of r){const c=i.trim();if(a&&c!=="/"||s&&c!=='"'){n[n.length-1]+=i;continue}switch(c){case"NOT":t.push(c);break;case"AND":case"OR":for(;t[t.length-1]!=="("&&(t[t.length-1]==="NOT"||t[t.length-1]==="AND"&&c==="OR"||c===t[t.length-1]);)n.push(t.pop());t.push(c);break;case"/":if(!a)t.push(c),a=!0,n.push("");else if(t[t.length-1]==="/"){t.pop();const f=n.pop();if(!mr(f))return ue("regex");for(n.push(`/${f}/`),a=!1;t[t.length-1]==="NOT";)n.push(t.pop())}break;case'"':if(!s)t.push(c),s=!0,n.push("");else if(t[t.length-1]==='"')for(t.pop(),n.push(`"${n.pop()}"`),s=!1;t[t.length-1]==="NOT";)n.push(t.pop());break;case"(":t.push(c);break;case")":for(;t[t.length-1]!=="(";){if(t.length===0)return ue("parentheses");n.push(t.pop())}if(t[t.length-1]!=="(")return ue("parentheses");for(t.pop();t[t.length-1]==="NOT";)n.push(t.pop());break;default:c.length>0&&n.push(c)}}for(;t.length>0;){if(t[t.length-1]==="(")return ue("parentheses");if(t[t.length-1]==="/")return ue("slash");if(t[t.length-1]==='"')return ue("quote");n.push(t.pop())}return tt(n)}function ot(e,r){const t=[];for(const n of r)switch(n){case"NOT":{const a=t.pop();if(a===void 0)return null;t.push(s=>!a(s));break}case"AND":{const a=t.pop(),s=t.pop();if(a===void 0||s===void 0)return null;t.push(i=>s(i)&&a(i));break}case"OR":{const a=t.pop(),s=t.pop();if(a===void 0||s===void 0)return null;t.push(i=>s(i)||a(i));break}default:n.startsWith("/")&&n.endsWith("/")?t.push(rt(at(n.substring(1,n.length-1)),e)):n.startsWith('"')&&n.endsWith('"')?t.push(et(br(n.substring(1,n.length-1)),e)):t.push(_r(br(n),e))}for(;t.length>=2;){const n=t.pop(),a=t.pop();t.push(s=>a(s)&&n(s))}return t.pop()}function it(e,r){const t=st(e);if(!t.success)return t.message;const n=ot(r,t.postfix);return n===null?"operand":n===void 0?"empty":"success"}function lt(e){return/(.*)\bWHERE\s+([0-9A-Za-z-]+)\s*(=|==|<>|!=)\s*([0-9A-Za-z-]+)/u.exec(e)}const zr=e=>self.memoryCache?.get(e)?.deref(),ct=(e,r)=>self.memoryCache?.set(e,new WeakRef(r)),ft=(e,r,t,n)=>{const a=e.getFilePath(r,t,n);return zr(a)!==void 0},Ar=async(e,r,t,n)=>{const a=e.getFilePath(r,t,n),s=zr(a);if(s)return s;let i;try{if("caches"in self&&"indexedDB"in self&&"databases"in self.indexedDB){const[l,o]=await Promise.all([e.getCache(),e.getIndexedDB()]);i=await e.getFile(l,o,a),o.close()}else i=await e.getFileRemote(a);if(i===null)return""}catch(l){return console.error(l),""}let c=(await i.blob()).stream();c=c.pipeThrough(new DecompressionStream("gzip"));const f=new Response(c).text();return ct(a,f),f};self.onmessage=async e=>{const r=e.data;self.memoryCache??=new Map;const t=r.showAllLanguages||r.languages.includes(yr);let n=.5,a=.5,s=0;const i=(l,o,u,y)=>{const M=o*n+u*a+y*s;postMessage({complete:!1,status:l,progress:M,showId:t})},c=(l,o,u,y,M)=>{const x=o*n+u*a+y*s,S={complete:!1,status:l,progress:x,showId:t,index:M.index,result:M.result};postMessage(S)},f=l=>{postMessage({complete:!0,status:l,progress:1,showId:t})};try{i("loading",0,0,0);const l=Vr(r.serializedCorpus),o=Kr(l);if(r.type==="regex"&&!mr(r.query)){f("regex");return}if(r.type==="boolean"){let m=r;const b=lt(r.query);if(b){const[,O,P,,A]=b;if(!l.isLanguageKey(P)||!l.isLanguageKey(A)){f("boolean.where");return}m={...r,query:O}}const L=it(m.query,m.caseInsensitive);if(L!=="success"&&!(b&&L==="empty")){f(`boolean.${L}`);return}}let u=0,y=0,M=0;const x=[];if(l.entries.forEach(([m,b])=>{if(!r.collections.includes(m)||!r.languages.some(A=>b.languages.includes(A)))return;const L=["common","messages","ui"],O=["script","talk"],P=b.structured&&r.showAllLanguages?b.languages:b.languages.filter(A=>r.languages.includes(A)||A===yr);b.files.forEach(A=>{!r.common&&L.includes(A)||!r.script&&O.includes(A)||(b.structured?(x.push({index:u,params:r,collectionKey:m,fileKey:A,languages:P,speaker:b.speaker,literals:b.literals}),u++):P.forEach(z=>{x.push({index:u,params:r,collectionKey:m,fileKey:A,languages:[z]}),u++}),y+=P.length,M+=P.reduce((z,E)=>z+ +ft(o,m,E,A),0))})}),u===0){f("noMatch");return}M>0&&(n*=(y-M)/y,a*=(1-n)/(a+s),s*=(1-n)/(a+s));let S=0,R=0,U=0;const j=()=>[S/y,R/y,U/u],D=m=>(S++,i("loading",...j()),m),p=()=>{R++,i("processing",...j())},d=m=>{U++,c("collecting",...j(),m)};let g=!1,w=!1;const h=[],v=m=>{if(g)return;const b=m.data;b.status==="processing"?p():b.status==="done"?(d(b),U===u&&(f(w?"network":"done"),h.forEach(L=>{L.terminate()}))):(g=!0,f(b.status),h.forEach(L=>{L.terminate()}))},C=Math.max(1,Math.min(u,(navigator.hardwareConcurrency||4)-2));for(let m=0;m<C;m++){const b=new Xr;b.onmessage=v,b.onerror=()=>{g||(g=!0,f("error"),h.forEach(L=>{L.terminate()}))},h.push(b)}await Promise.all(x.map(async(m,b)=>{const L=m.speaker,O=await Promise.all(m.languages.map(z=>Ar(o,m.collectionKey,z,m.fileKey).then(D))),P=L===void 0?void 0:await Promise.all(m.languages.map(z=>Ar(o,m.collectionKey,z,L.file)));if(g)return;const A={...m,files:O,speakerFiles:P};(O.some(z=>z==="")||P?.some(z=>z===""))&&(w=!0,A.languages=m.languages.filter((z,E)=>O[E]!==""),A.files=O.filter((z,E)=>O[E]!==""),A.speakerFiles=P?.filter((z,E)=>O[E]!==""),A.speakerFiles?.some(z=>z==="")&&(A.speaker=void 0)),h[b%h.length].postMessage(A)}))}catch(l){console.error(l),f("error")}}})();
